	<%- if params[:page_reload] == "true" %>
    window.location = window.location;
<%- else %>
    <%- if @notification.errors.any? %>

        // For Map
        $('#modal_<%= escape_javascript(@notification.ntype) %>').html('<%= escape_javascript(render('shared/modal_' + @notification.ntype + '_form')) %>');


        // For Index
        $.get "/notifications/<%= escape_javascript(@notification.id) %>", (data) ->
        	$('#notifications_show_form_container%>').html(data);

    <%- else %>

        $('#modal_<%= escape_javascript(@notification.ntype) %>').modal('hide');

			  $("body").append("<%= escape_javascript(render :partial => 'layouts/flash' , :locals => { :flash => flash }).html_safe %>");
				
				$("div[id=application_flash]:last").fadeIn("fast", function () {

			    setTimeout(function() {
			      $("div[id=application_flash]:last").fadeOut('fast', function() {
			        $("div[id=application_flash]:last").remove();
			      });
			    }, 4000);

				});

    <%- end %>

<%- end %>