- provide(:title, 'Edit Profile')
- provide(:sub_title, 'Modify your settings, and your location')


= form_for(@user, remote:true,url: account_path, method: :put, class: "") do |f|

  .modal-header
    %button.close{"data-dismiss" => "modal", type: "button"} Ã—

    Profile settings

  .modal-body
    #flash_notifications

      = render 'shared/error_messages', object: @user

    .row
      .span24.offset2
        = f.label :username
      .span26
        = f.text_field :username, class: "span26 application_form_input_alternative"

    .row
      .span24.offset20
        %a.btn.btn-colour.btn-micro{href: "/account/edit_password"}
          %i.icon-pencil
          Edit my password






    .account_edit_form_spacer


    = f.hidden_field :lat, id: "account_completeedit_lat"
    = f.hidden_field :lng, id: "account_completeedit_lng"

    
    .row
      .span24.offset2
        Location
        .account_form_label
          Move the marker to your location
      .span30
        #account_completeedit_map.edit.map

        #account_completeedit_map_location
          .row
            .account_completeedit_map_location_title.span6
              Country
            .span10
              = @user.country.name unless @user.country.blank?
            .account_completeedit_map_location_title.span4
              City
            .span10
              = @user.city unless @user.city.blank?




    .account_edit_form_spacer


    .row
      .span24.offset2.account_form_label
        Degree Level
      .span26
        = f.select :degree_level, options_for_select([['Undergraduate/Masters', 0], ['MBA', 1]]), {}, {class: "chzn-select-nosearch span26"}


    .account_edit_form_spacer



    .row
      .span24.offset2.account_form_label
        Languages
      .span26
        = f.collection_select :language_ids, Language.all, :id, :name, {selected: @user.language_ids}, {multiple: true, class: "chzn-select span26"}

    .spacer20

    .row
      .span24.offset2.account_form_label
        Time Zone
      .span26
        = f.collection_select :time_zone, ActiveSupport::TimeZone.all, :name, :to_s, {selected: @user.time_zone}, { class: "chzn-select span26" }

    .spacer20

    .row
      .span24.offset2
        = image_tag 'icons/skype_large.png'
        #account_completeedit_skype_link
          = link_to "Need to register?", "https://login.skype.com/account/signup-form"

          
      .span26
        = f.text_field :skype, placeholder: "Skype username", class: "span26 application_form_input_alternative"




    .account_edit_form_spacer


    .row
      .span24.offset2.account_form_label
        Cases outside of casenexus
      .span5
        = f.text_field :cases_external, class: "span5 application_form_input_alternative", id: "account_edit_casesexternal_field"

    .account_edit_form_spacer


    .row
      .span14.offset26
        = link_to(raw("<i class=icon-share-alt></i> Remove my account"), delete_account_path, class: "btn btn-colour btn-micro")

    .account_edit_form_spacer

    .row

      .span24.offset2.account_form_label
        Emailing

      .span3
        = f.check_box :email_admin
      .span30.offset1.account_edit_form_emailing_label
        .spacer5
        Receive site news and consulting advice
    .row
      .span3.offset26
        = f.check_box :email_users
      .span30.offset1.account_edit_form_emailing_label
        .spacer5
        Receive notiffications via email


    .spacer30



  .modal-footer
    %a.btn.btn-colour.btn-micro{"data-dismiss" => "modal", href: "#"} Close

    .application_submit_button_with_spinner.btn.btn-colour.btn-micro{tabindex: "102"}
      Save Settings



.application_spinner_container
  .application_spinner