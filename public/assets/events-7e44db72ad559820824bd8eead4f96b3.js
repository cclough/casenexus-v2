!function(){var e,n;e=function(e){if(e>20||10>e)switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},n=function(){var n,t,a,_,o,i,d,r;return n=$(".calendar").find(".events_calendar_week:nth-child("+window.events_current_week_number+")"),$(".calendar").find(".events_calendar_week").addClass("out_of_focus"),n.removeClass("out_of_focus"),t=n.find(".events_calendar_day:nth-child(1)").data("day_num"),_=n.find(".events_calendar_day:nth-child(7)").data("day_num"),i=n.find(".events_calendar_day:nth-child(1)").data("month"),a=t+e(t),o=_+e(_),r=i+", week "+a+" - "+o,$("#events_calendar_month_date").html(r),d=n.data("events_this_week"),$("#events_calendar_month_text_count").html(d+" appointments")},window.events_calendar_rebless=function(){var e,t,a;return setTimeout(function(){var e;return e=$("#profile_index_panel_calendar_container").find(".today").position().top-47-47+"px",$("#profile_index_panel_calendar_container").animate({scrollTop:e},500)},500),a=$("#profile_index_panel_calendar_container .today"),e=a.parent(),t=e.data("week_number"),window.events_current_week_number=t+1,n(),$(".events_calendar_day_event").click(function(){var e;return e=$(this).data("id"),window.events_calendar_edit_modal_show(e)}),$(".application_tooltip").tooltip(),$("#profile_index_calendar_actions_new").click(function(){return window.modal_event_new_show(null,null)}),$(".more_than_two_events").slimscroll({height:"55px",width:"auto"}),$(".profile_index_panel_calendar_shift_button").click(function(){var e,t;return e=$(this).data("direction"),"up"===e?1!==window.events_current_week_number&&(t="+=-96px",window.events_current_week_number-=1,$("#profile_index_panel_calendar_container").animate({scrollTop:t},150)):window.events_current_week_number!==$("#profile_index_panel_calendar_container .events_calendar_week").length&&(t="+=96px",window.events_current_week_number+=1,$("#profile_index_panel_calendar_container").animate({scrollTop:t},150)),n()})},window.modal_event_new_show=function(e,n){var t;return $("#modal_event").hasClass("in")?void 0:($(".modal").modal("hide"),t=e&&!n?"/events/new?friend_id="+e:n&&!e?"/events/new?book_id_usertoprepare="+n:e&&n?"/events/new?friend_id="+e+"&book_id_usertoprepare="+n:"/events/new",$.get(t,function(n){return $("#modal_event").html(n),e&&$.get("/events/user_timezone?display_which=timezone&user_id="+e,function(e){return $("#events_modal_friend_timezone").html(e)}),$("#modal_event").removeClass("event_edit"),$("#modal_event").on("shown",function(){return window.modal_events_rebless()}),$("#modal_event").modal("show")}))},window.modal_events_modal_timezone_calcs=function(){var e,n;return n=$("#events_modal_friend_select").val(),e=$("#events_modal_datetime_input").val(),n>0?$.get("/events/user_timezone?display_which=timezone&user_id="+n,function(e){return $("#events_modal_friend_timezone").html(e)}):$("#events_modal_friend_timezone").html(""),n>0&&""!==e?$.get("/events/user_timezone?display_which=timeforfriend&user_id="+n+"&datetime="+e,function(e){return $("#events_modal_datetime_friend").html(e)}):$("#events_modal_datetime_friend").html("")},window.modal_events_rebless=function(){return $("#events_modal_datetime_picker").datetimepicker({format:"dd M yyyy @ hh:ii",minuteStep:15,pickerPosition:"bottom-left",autoclose:!0,showMeridian:!0,startDate:$("#events_modal_datetime_input").data("start_date")}),$("#events_modal_friend_select").change(function(){return window.modal_events_modal_timezone_calcs()}),$("#events_modal_datetime_input").change(function(){return window.modal_events_modal_timezone_calcs()}),$("#events_modal_book_select").change(function(){var e;return e=$(this).val(),e>0?$.get("/books/"+e+"/show_small",function(e){return $("#events_modal_book_viewer_partnertoprepare").html(e)}):$("#events_modal_book_viewertoprepare").html("<div id=events_modal_book_viewer_empty>No book selected</div>")}),window.application_spinner_prime(".modal.in")},window.events_calendar_edit_modal_show=function(e){return $("#modal_event").hasClass("in")?void 0:($(".modal").modal("hide"),$.get("/events/"+e+"/edit",function(e){return $("#modal_event").html(e),window.modal_events_rebless()}),$("#modal_event").addClass("event_edit"),$("#modal_event").modal("show"))},$(document).ready(function(){return $("#profile_index_panel_calendar_container").length>0?window.events_calendar_rebless():void 0})}.call(this);