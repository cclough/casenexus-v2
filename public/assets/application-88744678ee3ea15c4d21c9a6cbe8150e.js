/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
!function(t,e){function i(t){var e=t.length,i=ce.type(t);return ce.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||"function"!==i&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t){var e=Ae[t]={};return ce.each(t.match(de)||[],function(t,i){e[i]=!0}),e}function s(t,i,n,s){if(ce.acceptData(t)){var o,r,a=ce.expando,l=t.nodeType,h=l?ce.cache:t,c=l?t[a]:t[a]&&a;if(c&&h[c]&&(s||h[c].data)||n!==e||"string"!=typeof i)return c||(c=l?t[a]=ee.pop()||ce.guid++:a),h[c]||(h[c]=l?{}:{toJSON:ce.noop}),("object"==typeof i||"function"==typeof i)&&(s?h[c]=ce.extend(h[c],i):h[c].data=ce.extend(h[c].data,i)),r=h[c],s||(r.data||(r.data={}),r=r.data),n!==e&&(r[ce.camelCase(i)]=n),"string"==typeof i?(o=r[i],null==o&&(o=r[ce.camelCase(i)])):o=r,o}}function o(t,e,i){if(ce.acceptData(t)){var n,s,o=t.nodeType,r=o?ce.cache:t,l=o?t[ce.expando]:ce.expando;if(r[l]){if(e&&(n=i?r[l]:r[l].data)){ce.isArray(e)?e=e.concat(ce.map(e,ce.camelCase)):e in n?e=[e]:(e=ce.camelCase(e),e=e in n?[e]:e.split(" ")),s=e.length;for(;s--;)delete n[e[s]];if(i?!a(n):!ce.isEmptyObject(n))return}(i||(delete r[l].data,a(r[l])))&&(o?ce.cleanData([t],!0):ce.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(t,i,n){if(n===e&&1===t.nodeType){var s="data-"+i.replace(ke,"-$1").toLowerCase();if(n=t.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Se.test(n)?ce.parseJSON(n):n}catch(o){}ce.data(t,i,n)}else n=e}return n}function a(t){var e;for(e in t)if(("data"!==e||!ce.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function h(){return!1}function c(){try{return X.activeElement}catch(t){}}function u(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function d(t,e,i){if(ce.isFunction(e))return ce.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ce.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(je.test(e))return ce.filter(e,t,i);e=ce.filter(e,t)}return ce.grep(t,function(t){return ce.inArray(t,e)>=0!==i})}function p(t){var e=Ge.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function f(t,e){return ce.nodeName(t,"table")&&ce.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function m(t){return t.type=(null!==ce.find.attr(t,"type"))+"/"+t.type,t}function g(t){var e=si.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function v(t,e){for(var i,n=0;null!=(i=t[n]);n++)ce._data(i,"globalEval",!e||ce._data(e[n],"globalEval"))}function _(t,e){if(1===e.nodeType&&ce.hasData(t)){var i,n,s,o=ce._data(t),r=ce._data(e,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)ce.event.add(e,i,a[i][n])}r.data&&(r.data=ce.extend({},r.data))}}function y(t,e){var i,n,s;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ce.support.noCloneEvent&&e[ce.expando]){s=ce._data(e);for(n in s.events)ce.removeEvent(e,n,s.handle);e.removeAttribute(ce.expando)}"script"===i&&e.text!==t.text?(m(e).text=t.text,g(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ce.support.html5Clone&&t.innerHTML&&!ce.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&ei.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function b(t,i){var n,s,o=0,r=typeof t.getElementsByTagName!==Y?t.getElementsByTagName(i||"*"):typeof t.querySelectorAll!==Y?t.querySelectorAll(i||"*"):e;if(!r)for(r=[],n=t.childNodes||t;null!=(s=n[o]);o++)!i||ce.nodeName(s,i)?r.push(s):ce.merge(r,b(s,i));return i===e||i&&ce.nodeName(t,i)?ce.merge([t],r):r}function w(t){ei.test(t.type)&&(t.defaultChecked=t.checked)}function C(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,s=Ti.length;s--;)if(e=Ti[s]+i,e in t)return e;return n}function x(t,e){return t=e||t,"none"===ce.css(t,"display")||!ce.contains(t.ownerDocument,t)}function T(t,e){for(var i,n,s,o=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(o[r]=ce._data(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&x(n)&&(o[r]=ce._data(n,"olddisplay",D(n.nodeName)))):o[r]||(s=x(n),(i&&"none"!==i||!s)&&ce._data(n,"olddisplay",s?i:ce.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function A(t,e,i){var n=vi.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function S(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=ce.css(t,i+xi[o],!0,s)),n?("content"===i&&(r-=ce.css(t,"padding"+xi[o],!0,s)),"margin"!==i&&(r-=ce.css(t,"border"+xi[o]+"Width",!0,s))):(r+=ce.css(t,"padding"+xi[o],!0,s),"padding"!==i&&(r+=ce.css(t,"border"+xi[o]+"Width",!0,s)));return r}function k(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=ci(t),r=ce.support.boxSizing&&"border-box"===ce.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=ui(t,e,o),(0>s||null==s)&&(s=t.style[e]),_i.test(s))return s;n=r&&(ce.support.boxSizingReliable||s===t.style[e]),s=parseFloat(s)||0}return s+S(t,e,i||(r?"border":"content"),n,o)+"px"}function D(t){var e=X,i=bi[t];return i||(i=L(t,e),"none"!==i&&i||(hi=(hi||ce("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(hi[0].contentWindow||hi[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),i=L(t,e),hi.detach()),bi[t]=i),i}function L(t,e){var i=ce(e.createElement(t)).appendTo(e.body),n=ce.css(i[0],"display");return i.remove(),n}function M(t,e,i,n){var s;if(ce.isArray(e))ce.each(e,function(e,s){i||Si.test(t)?n(t,s):M(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==ce.type(e))n(t,e);else for(s in e)M(t+"["+s+"]",e[s],i,n)}function E(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(de)||[];if(ce.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function s(a){var l;return o[a]=!0,ce.each(t[a]||[],function(t,a){var h=a(e,i,n);return"string"!=typeof h||r||o[h]?r?!(l=h):void 0:(e.dataTypes.unshift(h),s(h),!1)}),l}var o={},r=t===$i;return s(e.dataTypes[0])||!o["*"]&&s("*")}function P(t,i){var n,s,o=ce.ajaxSettings.flatOptions||{};for(s in i)i[s]!==e&&((o[s]?t:n||(n={}))[s]=i[s]);return n&&ce.extend(!0,t,n),t}function O(t,i,n){for(var s,o,r,a,l=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),o===e&&(o=t.mimeType||i.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){h.unshift(a);break}if(h[0]in n)r=h[0];else{for(a in n){if(!h[0]||t.converters[a+" "+h[0]]){r=a;break}s||(s=a)}r=r||s}return r?(r!==h[0]&&h.unshift(r),n[r]):void 0}function R(t,e,i,n){var s,o,r,a,l,h={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)h[r.toLowerCase()]=t.converters[r];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(r=h[l+" "+o]||h["* "+o],!r)for(s in h)if(a=s.split(" "),a[1]===o&&(r=h[l+" "+a[0]]||h["* "+a[0]])){r===!0?r=h[s]:h[s]!==!0&&(o=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function I(){try{return new t.XMLHttpRequest}catch(e){}}function B(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function z(){return setTimeout(function(){Ki=e}),Ki=ce.now()}function U(t,e,i){for(var n,s=(on[e]||[]).concat(on["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,e,t))return n}function H(t,e,i){var n,s,o=0,r=sn.length,a=ce.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=Ki||z(),i=Math.max(0,h.startTime+h.duration-e),n=i/h.duration||0,o=1-n,r=0,l=h.tweens.length;l>r;r++)h.tweens[r].run(o);return a.notifyWith(t,[h,o,i]),1>o&&l?i:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:ce.extend({},e),opts:ce.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Ki||z(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ce.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)h.tweens[i].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),c=h.props;for(F(c,h.opts.specialEasing);r>o;o++)if(n=sn[o].call(h,t,c,h.opts))return n;return ce.map(c,U,h),ce.isFunction(h.opts.start)&&h.opts.start.call(t,h),ce.fx.timer(ce.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function F(t,e){var i,n,s,o,r;for(i in t)if(n=ce.camelCase(i),s=e[n],o=t[i],ce.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=ce.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function j(t,e,i){var n,s,o,r,a,l,h=this,c={},u=t.style,d=t.nodeType&&x(t),p=ce._data(t,"fxshow");i.queue||(a=ce._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ce.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===ce.css(t,"display")&&"none"===ce.css(t,"float")&&(ce.support.inlineBlockNeedsLayout&&"inline"!==D(t.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",ce.support.shrinkWrapBlocks||h.always(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],tn.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(d?"hide":"show"))continue;c[n]=p&&p[n]||ce.style(t,n)}if(!ce.isEmptyObject(c)){p?"hidden"in p&&(d=p.hidden):p=ce._data(t,"fxshow",{}),o&&(p.hidden=!d),d?ce(t).show():h.done(function(){ce(t).hide()}),h.done(function(){var e;ce._removeData(t,"fxshow");for(e in c)ce.style(t,e,c[e])});for(n in c)r=U(d?p[n]:0,n,h),n in p||(p[n]=r.start,d&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function $(t,e,i,n,s){return new $.prototype.init(t,e,i,n,s)}function W(t,e){var i,n={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)i=xi[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function V(t){return ce.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G,q,Y=typeof e,Z=t.location,X=t.document,J=X.documentElement,K=t.jQuery,Q=t.$,te={},ee=[],ie="1.10.2",ne=ee.concat,se=ee.push,oe=ee.slice,re=ee.indexOf,ae=te.toString,le=te.hasOwnProperty,he=ie.trim,ce=function(t,e){return new ce.fn.init(t,e,q)},ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=/\S+/g,pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,fe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,me=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^[\],:{}\s]*$/,ve=/(?:^|:|,)(?:\s*\[)+/g,_e=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ye=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,we=/-([\da-z])/gi,Ce=function(t,e){return e.toUpperCase()},xe=function(t){(X.addEventListener||"load"===t.type||"complete"===X.readyState)&&(Te(),ce.ready())},Te=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",xe,!1),t.removeEventListener("load",xe,!1)):(X.detachEvent("onreadystatechange",xe),t.detachEvent("onload",xe))};ce.fn=ce.prototype={jquery:ie,constructor:ce,init:function(t,i,n){var s,o;if(!t)return this;if("string"==typeof t){if(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:fe.exec(t),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(s[1]){if(i=i instanceof ce?i[0]:i,ce.merge(this,ce.parseHTML(s[1],i&&i.nodeType?i.ownerDocument||i:X,!0)),me.test(s[1])&&ce.isPlainObject(i))for(s in i)ce.isFunction(this[s])?this[s](i[s]):this.attr(s,i[s]);return this}if(o=X.getElementById(s[2]),o&&o.parentNode){if(o.id!==s[2])return n.find(t);this.length=1,this[0]=o}return this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ce.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),ce.makeArray(t,this))},selector:"",length:0,toArray:function(){return oe.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=ce.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ce.each(this,t,e)},ready:function(t){return ce.ready.promise().done(t),this},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},map:function(t){return this.pushStack(ce.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:se,sort:[].sort,splice:[].splice},ce.fn.init.prototype=ce.fn,ce.extend=ce.fn.extend=function(){var t,i,n,s,o,r,a=arguments[0]||{},l=1,h=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),"object"==typeof a||ce.isFunction(a)||(a={}),h===l&&(a=this,--l);h>l;l++)if(null!=(o=arguments[l]))for(s in o)t=a[s],n=o[s],a!==n&&(c&&n&&(ce.isPlainObject(n)||(i=ce.isArray(n)))?(i?(i=!1,r=t&&ce.isArray(t)?t:[]):r=t&&ce.isPlainObject(t)?t:{},a[s]=ce.extend(c,r,n)):n!==e&&(a[s]=n));return a},ce.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===ce&&(t.$=Q),e&&t.jQuery===ce&&(t.jQuery=K),ce},isReady:!1,readyWait:1,holdReady:function(t){t?ce.readyWait++:ce.ready(!0)},ready:function(t){if(t===!0?!--ce.readyWait:!ce.isReady){if(!X.body)return setTimeout(ce.ready);ce.isReady=!0,t!==!0&&--ce.readyWait>0||(G.resolveWith(X,[ce]),ce.fn.trigger&&ce(X).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===ce.type(t)},isArray:Array.isArray||function(t){return"array"===ce.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?te[ae.call(t)]||"object":typeof t},isPlainObject:function(t){var i;if(!t||"object"!==ce.type(t)||t.nodeType||ce.isWindow(t))return!1;try{if(t.constructor&&!le.call(t,"constructor")&&!le.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ce.support.ownLast)for(i in t)return le.call(t,i);for(i in t);return i===e||le.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||X;var n=me.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=ce.buildFragment([t],e,s),s&&ce(s).remove(),ce.merge([],n.childNodes))},parseJSON:function(e){return t.JSON&&t.JSON.parse?t.JSON.parse(e):null===e?e:"string"==typeof e&&(e=ce.trim(e),e&&ge.test(e.replace(_e,"@").replace(ye,"]").replace(ve,"")))?new Function("return "+e)():(ce.error("Invalid JSON: "+e),void 0)},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{t.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(o){n=e}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ce.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&ce.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(be,"ms-").replace(we,Ce)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;r>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;r>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:he&&!he.call("﻿ ")?function(t){return null==t?"":he.call(t)}:function(t){return null==t?"":(t+"").replace(pe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ce.merge(n,"string"==typeof t?[t]:t):se.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(re)return re.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=i.length,s=t.length,o=0;if("number"==typeof n)for(;n>o;o++)t[s++]=i[o];else for(;i[o]!==e;)t[s++]=i[o++];return t.length=s,t},grep:function(t,e,i){var n,s=[],o=0,r=t.length;for(i=!!i;r>o;o++)n=!!e(t[o],o),i!==n&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),l=[];if(a)for(;r>o;o++)s=e(t[o],o,n),null!=s&&(l[l.length]=s);else for(o in t)s=e(t[o],o,n),null!=s&&(l[l.length]=s);return ne.apply([],l)},guid:1,proxy:function(t,i){var n,s,o;return"string"==typeof i&&(o=t[i],i=t,t=o),ce.isFunction(t)?(n=oe.call(arguments,2),s=function(){return t.apply(i||this,n.concat(oe.call(arguments)))},s.guid=t.guid=t.guid||ce.guid++,s):e},access:function(t,i,n,s,o,r,a){var l=0,h=t.length,c=null==n;if("object"===ce.type(n)){o=!0;for(l in n)ce.access(t,i,l,n[l],!0,r,a)}else if(s!==e&&(o=!0,ce.isFunction(s)||(a=!0),c&&(a?(i.call(t,s),i=null):(c=i,i=function(t,e,i){return c.call(ce(t),i)})),i))for(;h>l;l++)i(t[l],n,a?s:s.call(t[l],l,i(t[l],n)));return o?t:c?i.call(t):h?i(t[0],n):r},now:function(){return(new Date).getTime()},swap:function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s}}),ce.ready.promise=function(e){if(!G)if(G=ce.Deferred(),"complete"===X.readyState)setTimeout(ce.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",xe,!1),t.addEventListener("load",xe,!1);else{X.attachEvent("onreadystatechange",xe),t.attachEvent("onload",xe);var i=!1;try{i=null==t.frameElement&&X.documentElement}catch(n){}i&&i.doScroll&&function s(){if(!ce.isReady){try{i.doScroll("left")}catch(t){return setTimeout(s,50)}Te(),ce.ready()}}()}return G.promise(e)},ce.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){te["[object "+e+"]"]=e.toLowerCase()}),q=ce(X),/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */
function(t,e){function i(t,e,i,n){var s,o,r,a,l,h,c,u,f,m;if((e?e.ownerDocument||e:H)!==N&&E(e),e=e||N,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(O&&!n){if(s=ye.exec(t))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&z(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return te.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&x.getElementsByClassName&&e.getElementsByClassName)return te.apply(i,e.getElementsByClassName(r)),i}if(x.qsa&&(!R||!R.test(t))){if(u=c=U,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=d(t),(c=e.getAttribute("id"))?u=c.replace(Ce,"\\$&"):e.setAttribute("id",u),u="[id='"+u+"'] ",l=h.length;l--;)h[l]=u+p(h[l]);f=pe.test(t)&&e.parentNode||e,m=h.join(",")}if(m)try{return te.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{c||e.removeAttribute("id")}}}return w(t.replace(he,"$1"),e,i,n)}function n(){function t(i,n){return e.push(i+=" ")>A.cacheLength&&delete t[e.shift()],t[i]=n}var e=[];return t}function s(t){return t[U]=!0,t}function o(t){var e=N.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var i=t.split("|"),n=t.length;n--;)A.attrHandle[i[n]]=e}function a(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Z)-(~t.sourceIndex||Z);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function l(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return s(function(e){return e=+e,s(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function u(){}function d(t,e){var n,s,o,r,a,l,h,c=W[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],h=A.preFilter;a;){(!n||(s=ue.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(o=[])),n=!1,(s=de.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(he," ")}),a=a.slice(n.length));for(r in A.filter)!(s=ve[r].exec(a))||h[r]&&!(s=h[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return e?a.length:a?i.error(t):W(t,l).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=j++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,l,h,c=F+" "+o;if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(h=e[U]||(e[U]={}),(l=h[n])&&l[0]===c){if((a=l[1])===!0||a===T)return a===!0}else if(l=h[n]=[c],l[1]=t(e,i,r)||T,l[1]===!0)return!0}}function m(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function g(t,e,i,n,s){for(var o,r=[],a=0,l=t.length,h=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,s))&&(r.push(o),h&&e.push(a));return r}function v(t,e,i,n,o,r){return n&&!n[U]&&(n=v(n)),o&&!o[U]&&(o=v(o,r)),s(function(s,r,a,l){var h,c,u,d=[],p=[],f=r.length,m=s||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!s&&e?m:g(m,d,t,a,l),_=i?o||(s?t:f||n)?[]:r:v;if(i&&i(v,_,a,l),n)for(h=g(_,p),n(h,[],a,l),c=h.length;c--;)(u=h[c])&&(_[p[c]]=!(v[p[c]]=u));if(s){if(o||t){if(o){for(h=[],c=_.length;c--;)(u=_[c])&&h.push(v[c]=u);o(null,_=[],h,l)}for(c=_.length;c--;)(u=_[c])&&(h=o?ie.call(s,u):d[c])>-1&&(s[h]=!(r[h]=u))}}else _=g(_===r?_.splice(f,_.length):_),o?o(null,r,_,l):te.apply(r,_)})}function _(t){for(var e,i,n,s=t.length,o=A.relative[t[0].type],r=o||A.relative[" "],a=o?1:0,l=f(function(t){return t===e},r,!0),h=f(function(t){return ie.call(e,t)>-1},r,!0),c=[function(t,i,n){return!o&&(n||i!==L)||((e=i).nodeType?l(t,i,n):h(t,i,n))}];s>a;a++)if(i=A.relative[t[a].type])c=[f(m(c),i)];else{if(i=A.filter[t[a].type].apply(null,t[a].matches),i[U]){for(n=++a;s>n&&!A.relative[t[n].type];n++);return v(a>1&&m(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(he,"$1"),i,n>a&&_(t.slice(a,n)),s>n&&_(t=t.slice(n)),s>n&&p(t))}c.push(i)}return m(c)}function y(t,e){var n=0,o=e.length>0,r=t.length>0,a=function(s,a,l,h,c){var u,d,p,f=[],m=0,v="0",_=s&&[],y=null!=c,b=L,w=s||r&&A.find.TAG("*",c&&a.parentNode||a),C=F+=null==b?1:Math.random()||.1;for(y&&(L=a!==N&&a,T=n);null!=(u=w[v]);v++){if(r&&u){for(d=0;p=t[d++];)if(p(u,a,l)){h.push(u);break}y&&(F=C,T=++n)}o&&((u=!p&&u)&&m--,s&&_.push(u))}if(m+=v,o&&v!==m){for(d=0;p=e[d++];)p(_,f,a,l);if(s){if(m>0)for(;v--;)_[v]||f[v]||(f[v]=K.call(h));f=g(f)}te.apply(h,f),y&&!s&&f.length>0&&m+e.length>1&&i.uniqueSort(h)}return y&&(F=C,L=b),_};return o?s(a):a}function b(t,e,n){for(var s=0,o=e.length;o>s;s++)i(t,e[s],n);return n}function w(t,e,i,n){var s,o,r,a,l,h=d(t);if(!n&&1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&x.getById&&9===e.nodeType&&O&&A.relative[o[1].type]){if(e=(A.find.ID(r.matches[0].replace(xe,Te),e)||[])[0],!e)return i;t=t.slice(o.shift().value.length)}for(s=ve.needsContext.test(t)?0:o.length;s--&&(r=o[s],!A.relative[a=r.type]);)if((l=A.find[a])&&(n=l(r.matches[0].replace(xe,Te),pe.test(o[0].type)&&e.parentNode||e))){if(o.splice(s,1),t=n.length&&p(o),!t)return te.apply(i,n),i;break}}return D(t,h)(n,e,!O,i,pe.test(t)),i}var C,x,T,A,S,k,D,L,M,E,N,P,O,R,I,B,z,U="sizzle"+-new Date,H=t.document,F=0,j=0,$=n(),W=n(),V=n(),G=!1,q=function(t,e){return t===e?(G=!0,0):0},Y=typeof e,Z=1<<31,X={}.hasOwnProperty,J=[],K=J.pop,Q=J.push,te=J.push,ee=J.slice,ie=J.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),ae="\\["+se+"*("+oe+")"+se+"*(?:([*^$|!~]?=)"+se+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+re+")|)|)"+se+"*\\]",le=":("+oe+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",he=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),ue=new RegExp("^"+se+"*,"+se+"*"),de=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),pe=new RegExp(se+"*[+~]"),fe=new RegExp("="+se+"*([^\\]'\"]*)"+se+"*\\]","g"),me=new RegExp(le),ge=new RegExp("^"+re+"$"),ve={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+le),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},_e=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,Ce=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+se+"?|("+se+")|.)","ig"),Te=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{te.apply(J=ee.call(H.childNodes),H.childNodes),J[H.childNodes.length].nodeType}catch(Ae){te={apply:J.length?function(t,e){Q.apply(t,ee.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}k=i.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},x=i.support={},E=i.setDocument=function(t){var e=t?t.ownerDocument||t:H,i=e.defaultView;return e!==N&&9===e.nodeType&&e.documentElement?(N=e,P=e.documentElement,O=!k(e),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){E()}),x.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=o(function(t){return t.appendChild(e.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),x.getById=o(function(t){return P.appendChild(t).id=U,!e.getElementsByName||!e.getElementsByName(U).length}),x.getById?(A.find.ID=function(t,e){if(typeof e.getElementById!==Y&&O){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},A.filter.ID=function(t){var e=t.replace(xe,Te);return function(t){return t.getAttribute("id")===e}}):(delete A.find.ID,A.filter.ID=function(t){var e=t.replace(xe,Te);return function(t){var i=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return i&&i.value===e}}),A.find.TAG=x.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==Y?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},A.find.CLASS=x.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==Y&&O?e.getElementsByClassName(t):void 0},I=[],R=[],(x.qsa=_e.test(e.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||R.push("\\["+se+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||R.push(":checked")}),o(function(t){var i=e.createElement("input");i.setAttribute("type","hidden"),t.appendChild(i).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&R.push("[*^$]="+se+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(x.matchesSelector=_e.test(B=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(t){x.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),I.push("!=",le)}),R=R.length&&new RegExp(R.join("|")),I=I.length&&new RegExp(I.join("|")),z=_e.test(P.contains)||P.compareDocumentPosition?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=P.compareDocumentPosition?function(t,i){if(t===i)return G=!0,0;var n=i.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(i);return n?1&n||!x.sortDetached&&i.compareDocumentPosition(t)===n?t===e||z(H,t)?-1:i===e||z(H,i)?1:M?ie.call(M,t)-ie.call(M,i):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,i){var n,s=0,o=t.parentNode,r=i.parentNode,l=[t],h=[i];if(t===i)return G=!0,0;if(!o||!r)return t===e?-1:i===e?1:o?-1:r?1:M?ie.call(M,t)-ie.call(M,i):0;if(o===r)return a(t,i);for(n=t;n=n.parentNode;)l.unshift(n);for(n=i;n=n.parentNode;)h.unshift(n);for(;l[s]===h[s];)s++;return s?a(l[s],h[s]):l[s]===H?-1:h[s]===H?1:0},e):N},i.matches=function(t,e){return i(t,null,null,e)},i.matchesSelector=function(t,e){if((t.ownerDocument||t)!==N&&E(t),e=e.replace(fe,"='$1']"),!(!x.matchesSelector||!O||I&&I.test(e)||R&&R.test(e)))try{var n=B.call(t,e);if(n||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return i(e,N,null,[t]).length>0},i.contains=function(t,e){return(t.ownerDocument||t)!==N&&E(t),z(t,e)},i.attr=function(t,i){(t.ownerDocument||t)!==N&&E(t);var n=A.attrHandle[i.toLowerCase()],s=n&&X.call(A.attrHandle,i.toLowerCase())?n(t,i,!O):e;return s===e?x.attributes||!O?t.getAttribute(i):(s=t.getAttributeNode(i))&&s.specified?s.value:null:s},i.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},i.uniqueSort=function(t){var e,i=[],n=0,s=0;if(G=!x.detectDuplicates,M=!x.sortStable&&t.slice(0),t.sort(q),G){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return t},S=i.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n];n++)i+=S(e);return i},A=i.selectors={cacheLength:50,createPseudo:s,match:ve,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,Te),t[3]=(t[4]||t[5]||"").replace(xe,Te),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||i.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&i.error(t[0]),t},PSEUDO:function(t){var i,n=!t[5]&&t[2];return ve.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:n&&me.test(n)&&(i=d(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(t[0]=t[0].slice(0,i),t[2]=n.slice(0,i)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xe,Te).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+se+")"+t+"("+se+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(s){var o=i.attr(s,t);return null==o?"!="===e:e?(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o+" ").indexOf(n)>-1:"|="===e?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var h,c,u,d,p,f,m=o!==r?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!l&&!a;if(g){if(o){for(;m;){for(u=e;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&_){for(c=g[U]||(g[U]={}),h=c[t]||[],p=h[0]===F&&h[1],d=h[0]===F&&h[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){c[t]=[F,p,d];break}}else if(_&&(h=(e[U]||(e[U]={}))[t])&&h[0]===F)d=h[1];else for(;(u=++p&&u&&u[m]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(_&&((u[U]||(u[U]={}))[t]=[F,d]),u!==e)););return d-=s,d===n||0===d%n&&d/n>=0}}},PSEUDO:function(t,e){var n,o=A.pseudos[t]||A.setFilters[t.toLowerCase()]||i.error("unsupported pseudo: "+t);return o[U]?o(e):o.length>1?(n=[t,t,"",e],A.setFilters.hasOwnProperty(t.toLowerCase())?s(function(t,i){for(var n,s=o(t,e),r=s.length;r--;)n=ie.call(t,s[r]),t[n]=!(i[n]=s[r])}):function(t){return o(t,0,n)}):o}},pseudos:{not:s(function(t){var e=[],i=[],n=D(t.replace(he,"$1"));return n[U]?s(function(t,e,i,s){for(var o,r=n(t,null,s,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,s,o){return e[0]=t,n(e,null,o,i),!i.pop()}}),has:s(function(t){return function(e){return i(t,e).length>0}}),contains:s(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:s(function(t){return ge.test(t||"")||i.error("unsupported lang: "+t),t=t.replace(xe,Te).toLowerCase(),function(e){var i;do if(i=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!A.pseudos.empty(t)},header:function(t){return we.test(t.nodeName)},input:function(t){return be.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},A.pseudos.nth=A.pseudos.eq;for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})A.pseudos[C]=l(C);for(C in{submit:!0,reset:!0})A.pseudos[C]=h(C);u.prototype=A.filters=A.pseudos,A.setFilters=new u,D=i.compile=function(t,e){var i,n=[],s=[],o=V[t+" "];if(!o){for(e||(e=d(t)),i=e.length;i--;)o=_(e[i]),o[U]?n.push(o):s.push(o);o=V(t,y(s,n))}return o},x.sortStable=U.split("").sort(q).join("")===U,x.detectDuplicates=G,E(),x.sortDetached=o(function(t){return 1&t.compareDocumentPosition(N.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(ne,function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&n.specified?n.value:t[e]===!0?e.toLowerCase():null}),ce.find=i,ce.expr=i.selectors,ce.expr[":"]=ce.expr.pseudos,ce.unique=i.uniqueSort,ce.text=i.getText,ce.isXMLDoc=i.isXML,ce.contains=i.contains}(t);var Ae={};ce.Callbacks=function(t){t="string"==typeof t?Ae[t]||n(t):ce.extend({},t);var i,s,o,r,a,l,h=[],c=!t.once&&[],u=function(e){for(s=t.memory&&e,o=!0,a=l||0,l=0,r=h.length,i=!0;h&&r>a;a++)if(h[a].apply(e[0],e[1])===!1&&t.stopOnFalse){s=!1;break}i=!1,h&&(c?c.length&&u(c.shift()):s?h=[]:d.disable())},d={add:function(){if(h){var e=h.length;!function n(e){ce.each(e,function(e,i){var s=ce.type(i);"function"===s?t.unique&&d.has(i)||h.push(i):i&&i.length&&"string"!==s&&n(i)})}(arguments),i?r=h.length:s&&(l=e,u(s))}return this},remove:function(){return h&&ce.each(arguments,function(t,e){for(var n;(n=ce.inArray(e,h,n))>-1;)h.splice(n,1),i&&(r>=n&&r--,a>=n&&a--)}),this},has:function(t){return t?ce.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],r=0,this},disable:function(){return h=c=s=e,this},disabled:function(){return!h},lock:function(){return c=e,s||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!h||o&&!c||(e=e||[],e=[t,e.slice?e.slice():e],i?c.push(e):u(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},ce.extend({Deferred:function(t){var e=[["resolve","done",ce.Callbacks("once memory"),"resolved"],["reject","fail",ce.Callbacks("once memory"),"rejected"],["notify","progress",ce.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ce.Deferred(function(i){ce.each(e,function(e,o){var r=o[0],a=ce.isFunction(t[e])&&t[e];s[o[1]](function(){var t=a&&a.apply(this,arguments);t&&ce.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ce.extend(t,n):n}},s={};return n.pipe=n.then,ce.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,n,s=0,o=oe.call(arguments),r=o.length,a=1!==r||t&&ce.isFunction(t.promise)?r:0,l=1===a?t:ce.Deferred(),h=function(t,i,n){return function(s){i[t]=this,n[t]=arguments.length>1?oe.call(arguments):s,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&ce.isFunction(o[s].promise)?o[s].promise().done(h(s,n,o)).fail(l.reject).progress(h(s,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}}),ce.support=function(e){var i,n,s,o,r,a,l,h,c,u=X.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=u.getElementsByTagName("*")||[],n=u.getElementsByTagName("a")[0],!n||!n.style||!i.length)return e;o=X.createElement("select"),a=o.appendChild(X.createElement("option")),s=u.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",e.getSetAttribute="t"!==u.className,e.leadingWhitespace=3===u.firstChild.nodeType,e.tbody=!u.getElementsByTagName("tbody").length,e.htmlSerialize=!!u.getElementsByTagName("link").length,e.style=/top/.test(n.getAttribute("style")),e.hrefNormalized="/a"===n.getAttribute("href"),e.opacity=/^0.5/.test(n.style.opacity),e.cssFloat=!!n.style.cssFloat,e.checkOn=!!s.value,e.optSelected=a.selected,e.enctype=!!X.createElement("form").enctype,e.html5Clone="<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,e.inlineBlockNeedsLayout=!1,e.shrinkWrapBlocks=!1,e.pixelPosition=!1,e.deleteExpando=!0,e.noCloneEvent=!0,e.reliableMarginRight=!0,e.boxSizingReliable=!0,s.checked=!0,e.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!a.disabled;try{delete u.test}catch(d){e.deleteExpando=!1}s=X.createElement("input"),s.setAttribute("value",""),e.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),e.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),r=X.createDocumentFragment(),r.appendChild(s),e.appendChecked=s.checked,e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){e.noCloneEvent=!1}),u.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})u.setAttribute(l="on"+c,"t"),e[c+"Bubbles"]=l in t||u.attributes[l].expando===!1;u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===u.style.backgroundClip;for(c in ce(e))break;return e.ownLast="0"!==c,ce(function(){var i,n,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r=X.getElementsByTagName("body")[0];r&&(i=X.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(i).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=u.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",e.reliableHiddenOffsets=h&&0===s[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ce.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===u.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(u,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(u,null)||{width:"4px"}).width,n=u.appendChild(X.createElement("div")),n.style.cssText=u.style.cssText=o,n.style.marginRight=n.style.width="0",u.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(n,null)||{}).marginRight)),typeof u.style.zoom!==Y&&(u.innerHTML="",u.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==u.offsetWidth,e.inlineBlockNeedsLayout&&(r.style.zoom=1)),r.removeChild(i),i=u=s=n=null)}),i=o=r=a=n=s=null,e}({});var Se=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ke=/([A-Z])/g;ce.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ce.cache[t[ce.expando]]:t[ce.expando],!!t&&!a(t)},data:function(t,e,i){return s(t,e,i)},removeData:function(t,e){return o(t,e)},_data:function(t,e,i){return s(t,e,i,!0)},_removeData:function(t,e){return o(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&ce.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),ce.fn.extend({data:function(t,i){var n,s,o=null,a=0,l=this[0];if(t===e){if(this.length&&(o=ce.data(l),1===l.nodeType&&!ce._data(l,"parsedAttrs"))){for(n=l.attributes;a<n.length;a++)s=n[a].name,0===s.indexOf("data-")&&(s=ce.camelCase(s.slice(5)),r(l,s,o[s]));ce._data(l,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ce.data(this,t)}):arguments.length>1?this.each(function(){ce.data(this,t,i)}):l?r(l,t,ce.data(l,t)):null},removeData:function(t){return this.each(function(){ce.removeData(this,t)})}}),ce.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ce._data(t,e),i&&(!n||ce.isArray(i)?n=ce._data(t,e,ce.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=ce.queue(t,e),n=i.length,s=i.shift(),o=ce._queueHooks(t,e),r=function(){ce.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ce._data(t,i)||ce._data(t,i,{empty:ce.Callbacks("once memory").add(function(){ce._removeData(t,e+"queue"),ce._removeData(t,i)})})}}),ce.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),arguments.length<n?ce.queue(this[0],t):i===e?this:this.each(function(){var e=ce.queue(this,t,i);ce._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ce.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ce.dequeue(this,t)})},delay:function(t,e){return t=ce.fx?ce.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){var n,s=1,o=ce.Deferred(),r=this,a=this.length,l=function(){--s||o.resolveWith(r,[r])};for("string"!=typeof t&&(i=t,t=e),t=t||"fx";a--;)n=ce._data(r[a],t+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),o.promise(i)}});var De,Le,Me=/[\t\r\n\f]/g,Ee=/\r/g,Ne=/^(?:input|select|textarea|button|object)$/i,Pe=/^(?:a|area)$/i,Oe=/^(?:checked|selected)$/i,Re=ce.support.getSetAttribute,Ie=ce.support.input;ce.fn.extend({attr:function(t,e){return ce.access(this,ce.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ce.removeAttr(this,t)})},prop:function(t,e){return ce.access(this,ce.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ce.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,s,o,r=0,a=this.length,l="string"==typeof t&&t;if(ce.isFunction(t))return this.each(function(e){ce(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(de)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Me," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i.className=ce.trim(n)}return this},removeClass:function(t){var e,i,n,s,o,r=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ce.isFunction(t))return this.each(function(e){ce(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(de)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Me," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");i.className=t?ce.trim(n):""}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ce.isFunction(t)?this.each(function(i){ce(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,s=ce(this),o=t.match(de)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Y||"boolean"===i)&&(this.className&&ce._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ce._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Me," ").indexOf(e)>=0)return!0;return!1},val:function(t){var i,n,s,o=this[0];{if(arguments.length)return s=ce.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=s?t.call(this,i,ce(this).val()):t,null==o?o="":"number"==typeof o?o+="":ce.isArray(o)&&(o=ce.map(o,function(t){return null==t?"":t+""})),n=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))});if(o)return n=ce.valHooks[o.type]||ce.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==e?i:(i=o.value,"string"==typeof i?i.replace(Ee,""):null==i?"":i)}}}),ce.extend({valHooks:{option:{get:function(t){var e=ce.find.attr(t,"value");return null!=e?e:t.text}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,r=o?null:[],a=o?s+1:n.length,l=0>s?a:o?s:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==s||(ce.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&ce.nodeName(i.parentNode,"optgroup"))){if(e=ce(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=ce.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=ce.inArray(ce(n).val(),o)>=0)&&(i=!0);return i||(t.selectedIndex=-1),o}}},attr:function(t,i,n){var s,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Y?ce.prop(t,i,n):(1===r&&ce.isXMLDoc(t)||(i=i.toLowerCase(),s=ce.attrHooks[i]||(ce.expr.match.bool.test(i)?Le:De)),n===e?s&&"get"in s&&null!==(o=s.get(t,i))?o:(o=ce.find.attr(t,i),null==o?e:o):null!==n?s&&"set"in s&&(o=s.set(t,n,i))!==e?o:(t.setAttribute(i,n+""),n):(ce.removeAttr(t,i),void 0))},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(de);if(o&&1===t.nodeType)for(;i=o[s++];)n=ce.propFix[i]||i,ce.expr.match.bool.test(i)?Ie&&Re||!Oe.test(i)?t[n]=!1:t[ce.camelCase("default-"+i)]=t[n]=!1:ce.attr(t,i,""),t.removeAttribute(Re?i:n)},attrHooks:{type:{set:function(t,e){if(!ce.support.radioValue&&"radio"===e&&ce.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,i,n){var s,o,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!ce.isXMLDoc(t),r&&(i=ce.propFix[i]||i,o=ce.propHooks[i]),n!==e?o&&"set"in o&&(s=o.set(t,n,i))!==e?s:t[i]=n:o&&"get"in o&&null!==(s=o.get(t,i))?s:t[i]},propHooks:{tabIndex:{get:function(t){var e=ce.find.attr(t,"tabindex");return e?parseInt(e,10):Ne.test(t.nodeName)||Pe.test(t.nodeName)&&t.href?0:-1}}}}),Le={set:function(t,e,i){return e===!1?ce.removeAttr(t,i):Ie&&Re||!Oe.test(i)?t.setAttribute(!Re&&ce.propFix[i]||i,i):t[ce.camelCase("default-"+i)]=t[i]=!0,i}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(t,i){var n=ce.expr.attrHandle[i]||ce.find.attr;ce.expr.attrHandle[i]=Ie&&Re||!Oe.test(i)?function(t,i,s){var o=ce.expr.attrHandle[i],r=s?e:(ce.expr.attrHandle[i]=e)!=n(t,i,s)?i.toLowerCase():null;return ce.expr.attrHandle[i]=o,r}:function(t,i,n){return n?e:t[ce.camelCase("default-"+i)]?i.toLowerCase():null}}),Ie&&Re||(ce.attrHooks.value={set:function(t,e,i){return ce.nodeName(t,"input")?(t.defaultValue=e,void 0):De&&De.set(t,e,i)}}),Re||(De={set:function(t,i,n){var s=t.getAttributeNode(n);return s||t.setAttributeNode(s=t.ownerDocument.createAttribute(n)),s.value=i+="","value"===n||i===t.getAttribute(n)?i:e}},ce.expr.attrHandle.id=ce.expr.attrHandle.name=ce.expr.attrHandle.coords=function(t,i,n){var s;return n?e:(s=t.getAttributeNode(i))&&""!==s.value?s.value:null},ce.valHooks.button={get:function(t,i){var n=t.getAttributeNode(i);return n&&n.specified?n.value:e},set:De.set},ce.attrHooks.contenteditable={set:function(t,e,i){De.set(t,""===e?!1:e,i)}},ce.each(["width","height"],function(t,e){ce.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ce.support.hrefNormalized||ce.each(["href","src"],function(t,e){ce.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ce.support.style||(ce.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""
}}),ce.support.optSelected||(ce.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.support.enctype||(ce.propFix.enctype="encoding"),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(t,e){return ce.isArray(e)?t.checked=ce.inArray(ce(t).val(),e)>=0:void 0}},ce.support.checkOn||(ce.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Be=/^(?:input|select|textarea)$/i,ze=/^key/,Ue=/^(?:mouse|contextmenu)|click/,He=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;ce.event={global:{},add:function(t,i,n,s,o){var r,a,l,h,c,u,d,p,f,m,g,v=ce._data(t);if(v){for(n.handler&&(h=n,n=h.handler,o=h.selector),n.guid||(n.guid=ce.guid++),(a=v.events)||(a=v.events={}),(u=v.handle)||(u=v.handle=function(t){return typeof ce===Y||t&&ce.event.triggered===t.type?e:ce.event.dispatch.apply(u.elem,arguments)},u.elem=t),i=(i||"").match(de)||[""],l=i.length;l--;)r=Fe.exec(i[l])||[],f=g=r[1],m=(r[2]||"").split(".").sort(),f&&(c=ce.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=ce.event.special[f]||{},d=ce.extend({type:f,origType:g,data:s,handler:n,guid:n.guid,selector:o,needsContext:o&&ce.expr.match.needsContext.test(o),namespace:m.join(".")},h),(p=a[f])||(p=a[f]=[],p.delegateCount=0,c.setup&&c.setup.call(t,s,m,u)!==!1||(t.addEventListener?t.addEventListener(f,u,!1):t.attachEvent&&t.attachEvent("on"+f,u))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),ce.event.global[f]=!0);t=null}},remove:function(t,e,i,n,s){var o,r,a,l,h,c,u,d,p,f,m,g=ce.hasData(t)&&ce._data(t);if(g&&(c=g.events)){for(e=(e||"").match(de)||[""],h=e.length;h--;)if(a=Fe.exec(e[h])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=ce.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,d=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)r=d[o],!s&&m!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(d.splice(o,1),r.selector&&d.delegateCount--,u.remove&&u.remove.call(t,r));l&&!d.length&&(u.teardown&&u.teardown.call(t,f,g.handle)!==!1||ce.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)ce.event.remove(t,p+e[h],i,n,!0);ce.isEmptyObject(c)&&(delete g.handle,ce._removeData(t,"events"))}},trigger:function(i,n,s,o){var r,a,l,h,c,u,d,p=[s||X],f=le.call(i,"type")?i.type:i,m=le.call(i,"namespace")?i.namespace.split("."):[];if(l=u=s=s||X,3!==s.nodeType&&8!==s.nodeType&&!He.test(f+ce.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),a=f.indexOf(":")<0&&"on"+f,i=i[ce.expando]?i:new ce.Event(f,"object"==typeof i&&i),i.isTrigger=o?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=e,i.target||(i.target=s),n=null==n?[i]:ce.makeArray(n,[i]),c=ce.event.special[f]||{},o||!c.trigger||c.trigger.apply(s,n)!==!1)){if(!o&&!c.noBubble&&!ce.isWindow(s)){for(h=c.delegateType||f,He.test(h+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),u=l;u===(s.ownerDocument||X)&&p.push(u.defaultView||u.parentWindow||t)}for(d=0;(l=p[d++])&&!i.isPropagationStopped();)i.type=d>1?h:c.bindType||f,r=(ce._data(l,"events")||{})[i.type]&&ce._data(l,"handle"),r&&r.apply(l,n),r=a&&l[a],r&&ce.acceptData(l)&&r.apply&&r.apply(l,n)===!1&&i.preventDefault();if(i.type=f,!o&&!i.isDefaultPrevented()&&(!c._default||c._default.apply(p.pop(),n)===!1)&&ce.acceptData(s)&&a&&s[f]&&!ce.isWindow(s)){u=s[a],u&&(s[a]=null),ce.event.triggered=f;try{s[f]()}catch(g){}ce.event.triggered=e,u&&(s[a]=u)}return i.result}},dispatch:function(t){t=ce.event.fix(t);var i,n,s,o,r,a=[],l=oe.call(arguments),h=(ce._data(this,"events")||{})[t.type]||[],c=ce.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=ce.event.handlers.call(this,t,h),i=0;(o=a[i++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,n=((ce.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),n!==e&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,i){var n,s,o,r,a=[],l=i.delegateCount,h=t.target;if(l&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!=this;h=h.parentNode||this)if(1===h.nodeType&&(h.disabled!==!0||"click"!==t.type)){for(o=[],r=0;l>r;r++)s=i[r],n=s.selector+" ",o[n]===e&&(o[n]=s.needsContext?ce(n,this).index(h)>=0:ce.find(n,this,null,[h]).length),o[n]&&o.push(s);o.length&&a.push({elem:h,handlers:o})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},fix:function(t){if(t[ce.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Ue.test(s)?this.mouseHooks:ze.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ce.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||X),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,s,o,r=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(s=t.target.ownerDocument||X,o=s.documentElement,n=s.body,t.pageX=i.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=i.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||r===e||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ce.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ce.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=ce.extend(new ce.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ce.event.trigger(s,null,e):ce.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},ce.removeEvent=X.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Y&&(t[n]=null),t.detachEvent(n,i))},ce.Event=function(t,e){return this instanceof ce.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:h):this.type=t,e&&ce.extend(this,e),this.timeStamp=t&&t.timeStamp||ce.now(),this[ce.expando]=!0,void 0):new ce.Event(t,e)},ce.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},ce.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ce.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!ce.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ce.support.submitBubbles||(ce.event.special.submit={setup:function(){return ce.nodeName(this,"form")?!1:(ce.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=ce.nodeName(i,"input")||ce.nodeName(i,"button")?i.form:e;n&&!ce._data(n,"submitBubbles")&&(ce.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),ce._data(n,"submitBubbles",!0))}),void 0)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ce.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ce.nodeName(this,"form")?!1:(ce.event.remove(this,"._submit"),void 0)}}),ce.support.changeBubbles||(ce.event.special.change={setup:function(){return Be.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ce.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ce.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ce.event.simulate("change",this,t,!0)})),!1):(ce.event.add(this,"beforeactivate._change",function(t){var e=t.target;Be.test(e.nodeName)&&!ce._data(e,"changeBubbles")&&(ce.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ce.event.simulate("change",this.parentNode,t,!0)}),ce._data(e,"changeBubbles",!0))}),void 0)},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ce.event.remove(this,"._change"),!Be.test(this.nodeName)}}),ce.support.focusinBubbles||ce.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){ce.event.simulate(e,t.target,ce.event.fix(t),!0)};ce.event.special[e]={setup:function(){0===i++&&X.addEventListener(t,n,!0)},teardown:function(){0===--i&&X.removeEventListener(t,n,!0)}}}),ce.fn.extend({on:function(t,i,n,s,o){var r,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(r in t)this.on(r,i,n,t[r],o);return this}if(null==n&&null==s?(s=i,n=i=e):null==s&&("string"==typeof i?(s=n,n=e):(s=n,n=i,i=e)),s===!1)s=h;else if(!s)return this;return 1===o&&(a=s,s=function(t){return ce().off(t),a.apply(this,arguments)},s.guid=a.guid||(a.guid=ce.guid++)),this.each(function(){ce.event.add(this,t,s,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){var s,o;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,ce(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof t){for(o in t)this.off(o,i,t[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=h),this.each(function(){ce.event.remove(this,t,n,i)})},trigger:function(t,e){return this.each(function(){ce.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?ce.event.trigger(t,e,i,!0):void 0}});var je=/^.[^:#\[\.,]*$/,$e=/^(?:parents|prev(?:Until|All))/,We=ce.expr.match.needsContext,Ve={children:!0,contents:!0,next:!0,prev:!0};ce.fn.extend({find:function(t){var e,i=[],n=this,s=n.length;if("string"!=typeof t)return this.pushStack(ce(t).filter(function(){for(e=0;s>e;e++)if(ce.contains(n[e],this))return!0}));for(e=0;s>e;e++)ce.find(t,n[e],i);return i=this.pushStack(s>1?ce.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},has:function(t){var e,i=ce(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(ce.contains(this,i[e]))return!0})},not:function(t){return this.pushStack(d(this,t||[],!0))},filter:function(t){return this.pushStack(d(this,t||[],!1))},is:function(t){return!!d(this,"string"==typeof t&&We.test(t)?ce(t):t||[],!1).length},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=We.test(t)||"string"!=typeof t?ce(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ce.find.matchesSelector(i,t))){i=o.push(i);break}return this.pushStack(o.length>1?ce.unique(o):o)},index:function(t){return t?"string"==typeof t?ce.inArray(this[0],ce(t)):ce.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var i="string"==typeof t?ce(t,e):ce.makeArray(t&&t.nodeType?[t]:t),n=ce.merge(this.get(),i);return this.pushStack(ce.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ce.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ce.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ce.dir(t,"parentNode",i)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return ce.dir(t,"nextSibling")},prevAll:function(t){return ce.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ce.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ce.dir(t,"previousSibling",i)},siblings:function(t){return ce.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ce.sibling(t.firstChild)},contents:function(t){return ce.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ce.merge([],t.childNodes)}},function(t,e){ce.fn[t]=function(i,n){var s=ce.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=ce.filter(n,s)),this.length>1&&(Ve[t]||(s=ce.unique(s)),$e.test(t)&&(s=s.reverse())),this.pushStack(s)}}),ce.extend({filter:function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ce.find.matchesSelector(n,t)?[n]:[]:ce.find.matches(t,ce.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,i,n){for(var s=[],o=t[i];o&&9!==o.nodeType&&(n===e||1!==o.nodeType||!ce(o).is(n));)1===o.nodeType&&s.push(o),o=o[i];return s},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var Ge="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+Ge+")[\\s/>]","i"),Ze=/^\s+/,Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Je=/<([\w:]+)/,Ke=/<tbody/i,Qe=/<|&#?\w+;/,ti=/<(?:script|style|link)/i,ei=/^(?:checkbox|radio)$/i,ii=/checked\s*(?:[^=]|=\s*.checked.)/i,ni=/^$|\/(?:java|ecma)script/i,si=/^true\/(.*)/,oi=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ri={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ce.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ai=p(X),li=ai.appendChild(X.createElement("div"));ri.optgroup=ri.option,ri.tbody=ri.tfoot=ri.colgroup=ri.caption=ri.thead,ri.th=ri.td,ce.fn.extend({text:function(t){return ce.access(this,function(t){return t===e?ce.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ce.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||ce.cleanData(b(i)),i.parentNode&&(e&&ce.contains(i.ownerDocument,i)&&v(b(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ce.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ce.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ce.clone(this,t,e)})},html:function(t){return ce.access(this,function(t){var i=this[0]||{},n=0,s=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(qe,""):e;if(!("string"!=typeof t||ti.test(t)||!ce.support.htmlSerialize&&Ye.test(t)||!ce.support.leadingWhitespace&&Ze.test(t)||ri[(Je.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Xe,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(ce.cleanData(b(i,!1)),i.innerHTML=t);i=0}catch(o){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=ce.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(i){var n=t[e++],s=t[e++];s&&(n&&n.parentNode!==s&&(n=this.nextSibling),ce(this).remove(),s.insertBefore(i,n))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,i){t=ne.apply([],t);var n,s,o,r,a,l,h=0,c=this.length,u=this,d=c-1,p=t[0],f=ce.isFunction(p);if(f||!(1>=c||"string"!=typeof p||ce.support.checkClone)&&ii.test(p))return this.each(function(n){var s=u.eq(n);f&&(t[0]=p.call(this,n,s.html())),s.domManip(t,e,i)});if(c&&(l=ce.buildFragment(t,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(r=ce.map(b(l,"script"),m),o=r.length;c>h;h++)s=l,h!==d&&(s=ce.clone(s,!0,!0),o&&ce.merge(r,b(s,"script"))),e.call(this[h],s,h);if(o)for(a=r[r.length-1].ownerDocument,ce.map(r,g),h=0;o>h;h++)s=r[h],ni.test(s.type||"")&&!ce._data(s,"globalEval")&&ce.contains(a,s)&&(s.src?ce._evalUrl(s.src):ce.globalEval((s.text||s.textContent||s.innerHTML||"").replace(oi,"")));l=n=null}return this}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ce.fn[t]=function(t){for(var i,n=0,s=[],o=ce(t),r=o.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ce(o[n])[e](i),se.apply(s,i.get());return this.pushStack(s)}}),ce.extend({clone:function(t,e,i){var n,s,o,r,a,l=ce.contains(t.ownerDocument,t);if(ce.support.html5Clone||ce.isXMLDoc(t)||!Ye.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(li.innerHTML=t.outerHTML,li.removeChild(o=li.firstChild)),!(ce.support.noCloneEvent&&ce.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ce.isXMLDoc(t)))for(n=b(o),a=b(t),r=0;null!=(s=a[r]);++r)n[r]&&y(s,n[r]);if(e)if(i)for(a=a||b(t),n=n||b(o),r=0;null!=(s=a[r]);r++)_(s,n[r]);else _(t,o);return n=b(o,"script"),n.length>0&&v(n,!l&&b(t,"script")),n=a=s=null,o},buildFragment:function(t,e,i,n){for(var s,o,r,a,l,h,c,u=t.length,d=p(e),f=[],m=0;u>m;m++)if(o=t[m],o||0===o)if("object"===ce.type(o))ce.merge(f,o.nodeType?[o]:o);else if(Qe.test(o)){for(a=a||d.appendChild(e.createElement("div")),l=(Je.exec(o)||["",""])[1].toLowerCase(),c=ri[l]||ri._default,a.innerHTML=c[1]+o.replace(Xe,"<$1></$2>")+c[2],s=c[0];s--;)a=a.lastChild;if(!ce.support.leadingWhitespace&&Ze.test(o)&&f.push(e.createTextNode(Ze.exec(o)[0])),!ce.support.tbody)for(o="table"!==l||Ke.test(o)?"<table>"!==c[1]||Ke.test(o)?0:a:a.firstChild,s=o&&o.childNodes.length;s--;)ce.nodeName(h=o.childNodes[s],"tbody")&&!h.childNodes.length&&o.removeChild(h);for(ce.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else f.push(e.createTextNode(o));for(a&&d.removeChild(a),ce.support.appendChecked||ce.grep(b(f,"input"),w),m=0;o=f[m++];)if((!n||-1===ce.inArray(o,n))&&(r=ce.contains(o.ownerDocument,o),a=b(d.appendChild(o),"script"),r&&v(a),i))for(s=0;o=a[s++];)ni.test(o.type||"")&&i.push(o);return a=null,d},cleanData:function(t,e){for(var i,n,s,o,r=0,a=ce.expando,l=ce.cache,h=ce.support.deleteExpando,c=ce.event.special;null!=(i=t[r]);r++)if((e||ce.acceptData(i))&&(s=i[a],o=s&&l[s])){if(o.events)for(n in o.events)c[n]?ce.event.remove(i,n):ce.removeEvent(i,n,o.handle);l[s]&&(delete l[s],h?delete i[a]:typeof i.removeAttribute!==Y?i.removeAttribute(a):i[a]=null,ee.push(s))}},_evalUrl:function(t){return ce.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ce.fn.extend({wrapAll:function(t){if(ce.isFunction(t))return this.each(function(e){ce(this).wrapAll(t.call(this,e))});if(this[0]){var e=ce(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ce.isFunction(t)?this.each(function(e){ce(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ce(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ce.isFunction(t);return this.each(function(i){ce(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ce.nodeName(this,"body")||ce(this).replaceWith(this.childNodes)}).end()}});var hi,ci,ui,di=/alpha\([^)]*\)/i,pi=/opacity\s*=\s*([^)]*)/,fi=/^(top|right|bottom|left)$/,mi=/^(none|table(?!-c[ea]).+)/,gi=/^margin/,vi=new RegExp("^("+ue+")(.*)$","i"),_i=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),yi=new RegExp("^([+-])=("+ue+")","i"),bi={BODY:"block"},wi={position:"absolute",visibility:"hidden",display:"block"},Ci={letterSpacing:0,fontWeight:400},xi=["Top","Right","Bottom","Left"],Ti=["Webkit","O","Moz","ms"];ce.fn.extend({css:function(t,i){return ce.access(this,function(t,i,n){var s,o,r={},a=0;if(ce.isArray(i)){for(o=ci(t),s=i.length;s>a;a++)r[i[a]]=ce.css(t,i[a],!1,o);return r}return n!==e?ce.style(t,i,n):ce.css(t,i)},t,i,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){x(this)?ce(this).show():ce(this).hide()})}}),ce.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ui(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ce.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a,l=ce.camelCase(i),h=t.style;if(i=ce.cssProps[l]||(ce.cssProps[l]=C(h,l)),a=ce.cssHooks[i]||ce.cssHooks[l],n===e)return a&&"get"in a&&(o=a.get(t,!1,s))!==e?o:h[i];if(r=typeof n,"string"===r&&(o=yi.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(ce.css(t,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||ce.cssNumber[l]||(n+="px"),ce.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(h[i]="inherit"),a&&"set"in a&&(n=a.set(t,n,s))===e)))try{h[i]=n}catch(c){}}},css:function(t,i,n,s){var o,r,a,l=ce.camelCase(i);return i=ce.cssProps[l]||(ce.cssProps[l]=C(t.style,l)),a=ce.cssHooks[i]||ce.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,n)),r===e&&(r=ui(t,i,s)),"normal"===r&&i in Ci&&(r=Ci[i]),""===n||n?(o=parseFloat(r),n===!0||ce.isNumeric(o)?o||0:r):r}}),t.getComputedStyle?(ci=function(e){return t.getComputedStyle(e,null)},ui=function(t,i,n){var s,o,r,a=n||ci(t),l=a?a.getPropertyValue(i)||a[i]:e,h=t.style;return a&&(""!==l||ce.contains(t.ownerDocument,t)||(l=ce.style(t,i)),_i.test(l)&&gi.test(i)&&(s=h.width,o=h.minWidth,r=h.maxWidth,h.minWidth=h.maxWidth=h.width=l,l=a.width,h.width=s,h.minWidth=o,h.maxWidth=r)),l}):X.documentElement.currentStyle&&(ci=function(t){return t.currentStyle},ui=function(t,i,n){var s,o,r,a=n||ci(t),l=a?a[i]:e,h=t.style;return null==l&&h&&h[i]&&(l=h[i]),_i.test(l)&&!fi.test(i)&&(s=h.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),h.left="fontSize"===i?"1em":l,l=h.pixelLeft+"px",h.left=s,r&&(o.left=r)),""===l?"auto":l}),ce.each(["height","width"],function(t,e){ce.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&mi.test(ce.css(t,"display"))?ce.swap(t,wi,function(){return k(t,e,n)}):k(t,e,n):void 0},set:function(t,i,n){var s=n&&ci(t);return A(t,i,n?S(t,e,n,ce.support.boxSizing&&"border-box"===ce.css(t,"boxSizing",!1,s),s):0)}}}),ce.support.opacity||(ce.cssHooks.opacity={get:function(t,e){return pi.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=ce.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ce.trim(o.replace(di,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=di.test(o)?o.replace(di,s):o+" "+s)}}),ce(function(){ce.support.reliableMarginRight||(ce.cssHooks.marginRight={get:function(t,e){return e?ce.swap(t,{display:"inline-block"},ui,[t,"marginRight"]):void 0}}),!ce.support.pixelPosition&&ce.fn.position&&ce.each(["top","left"],function(t,e){ce.cssHooks[e]={get:function(t,i){return i?(i=ui(t,e),_i.test(i)?ce(t).position()[e]+"px":i):void 0}}})}),ce.expr&&ce.expr.filters&&(ce.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ce.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ce.css(t,"display"))},ce.expr.filters.visible=function(t){return!ce.expr.filters.hidden(t)}),ce.each({margin:"",padding:"",border:"Width"},function(t,e){ce.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+xi[n]+e]=o[n]||o[n-2]||o[0];return s}},gi.test(t)||(ce.cssHooks[t+e].set=A)});var Ai=/%20/g,Si=/\[\]$/,ki=/\r?\n/g,Di=/^(?:submit|button|image|reset|file)$/i,Li=/^(?:input|select|textarea|keygen)/i;ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ce.prop(this,"elements");return t?ce.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ce(this).is(":disabled")&&Li.test(this.nodeName)&&!Di.test(t)&&(this.checked||!ei.test(t))}).map(function(t,e){var i=ce(this).val();return null==i?null:ce.isArray(i)?ce.map(i,function(t){return{name:e.name,value:t.replace(ki,"\r\n")}}):{name:e.name,value:i.replace(ki,"\r\n")}}).get()}}),ce.param=function(t,i){var n,s=[],o=function(t,e){e=ce.isFunction(e)?e():null==e?"":e,s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=ce.ajaxSettings&&ce.ajaxSettings.traditional),ce.isArray(t)||t.jquery&&!ce.isPlainObject(t))ce.each(t,function(){o(this.name,this.value)});else for(n in t)M(n,t[n],i,o);return s.join("&").replace(Ai,"+")},ce.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ce.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ce.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Mi,Ei,Ni=ce.now(),Pi=/\?/,Oi=/#.*$/,Ri=/([?&])_=[^&]*/,Ii=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zi=/^(?:GET|HEAD)$/,Ui=/^\/\//,Hi=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Fi=ce.fn.load,ji={},$i={},Wi="*/".concat("*");try{Ei=Z.href}catch(Vi){Ei=X.createElement("a"),Ei.href="",Ei=Ei.href}Mi=Hi.exec(Ei.toLowerCase())||[],ce.fn.load=function(t,i,n){if("string"!=typeof t&&Fi)return Fi.apply(this,arguments);var s,o,r,a=this,l=t.indexOf(" ");return l>=0&&(s=t.slice(l,t.length),t=t.slice(0,l)),ce.isFunction(i)?(n=i,i=e):i&&"object"==typeof i&&(r="POST"),a.length>0&&ce.ajax({url:t,type:r,dataType:"html",data:i}).done(function(t){o=arguments,a.html(s?ce("<div>").append(ce.parseHTML(t)).find(s):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ce.fn[e]=function(t){return this.on(e,t)}}),ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ei,type:"GET",isLocal:Bi.test(Mi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ce.parseJSON,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?P(P(t,ce.ajaxSettings),e):P(ce.ajaxSettings,t)},ajaxPrefilter:E(ji),ajaxTransport:E($i),ajax:function(t,i){function n(t,i,n,s){var o,u,_,y,w,x=i;2!==b&&(b=2,l&&clearTimeout(l),c=e,a=s||"",C.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(y=O(d,C,n)),y=R(d,y,C,o),o?(d.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(ce.lastModified[r]=w),w=C.getResponseHeader("etag"),w&&(ce.etag[r]=w)),204===t||"HEAD"===d.type?x="nocontent":304===t?x="notmodified":(x=y.state,u=y.data,_=y.error,o=!_)):(_=x,(t||!x)&&(x="error",0>t&&(t=0))),C.status=t,C.statusText=(i||x)+"",o?m.resolveWith(p,[u,x,C]):m.rejectWith(p,[C,x,_]),C.statusCode(v),v=e,h&&f.trigger(o?"ajaxSuccess":"ajaxError",[C,d,o?u:_]),g.fireWith(p,[C,x]),h&&(f.trigger("ajaxComplete",[C,d]),--ce.active||ce.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=e),i=i||{};var s,o,r,a,l,h,c,u,d=ce.ajaxSetup({},i),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?ce(p):ce.event,m=ce.Deferred(),g=ce.Callbacks("once memory"),v=d.statusCode||{},_={},y={},b=0,w="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!u)for(u={};e=Ii.exec(a);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,_[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else C.always(t[C.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),n(0,e),this}};if(m.promise(C).complete=g.add,C.success=C.done,C.error=C.fail,d.url=((t||d.url||Ei)+"").replace(Oi,"").replace(Ui,Mi[1]+"//"),d.type=i.method||i.type||d.method||d.type,d.dataTypes=ce.trim(d.dataType||"*").toLowerCase().match(de)||[""],null==d.crossDomain&&(s=Hi.exec(d.url.toLowerCase()),d.crossDomain=!(!s||s[1]===Mi[1]&&s[2]===Mi[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Mi[3]||("http:"===Mi[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ce.param(d.data,d.traditional)),N(ji,d,i,C),2===b)return C;h=d.global,h&&0===ce.active++&&ce.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!zi.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(Pi.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ri.test(r)?r.replace(Ri,"$1_="+Ni++):r+(Pi.test(r)?"&":"?")+"_="+Ni++)),d.ifModified&&(ce.lastModified[r]&&C.setRequestHeader("If-Modified-Since",ce.lastModified[r]),ce.etag[r]&&C.setRequestHeader("If-None-Match",ce.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wi+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)C.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(p,C,d)===!1||2===b))return C.abort();w="abort";for(o in{success:1,error:1,complete:1})C[o](d[o]);if(c=N($i,d,i,C)){C.readyState=1,h&&f.trigger("ajaxSend",[C,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){C.abort("timeout")},d.timeout));try{b=1,c.send(_,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return C},getJSON:function(t,e,i){return ce.get(t,e,i,"json")},getScript:function(t,i){return ce.get(t,e,i,"script")}}),ce.each(["get","post"],function(t,i){ce[i]=function(t,n,s,o){return ce.isFunction(n)&&(o=o||s,s=n,n=e),ce.ajax({url:t,type:i,dataType:o,data:n,success:s})}}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ce.globalEval(t),t}}}),ce.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)
}),ce.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=X.head||ce("head")[0]||X.documentElement;return{send:function(e,s){i=X.createElement("script"),i.async=!0,t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,e){(e||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,e||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(e,!0)}}}});var Gi=[],qi=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Gi.pop()||ce.expando+"_"+Ni++;return this[t]=!0,t}}),ce.ajaxPrefilter("json jsonp",function(i,n,s){var o,r,a,l=i.jsonp!==!1&&(qi.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&qi.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(o=i.jsonpCallback=ce.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(qi,"$1"+o):i.jsonp!==!1&&(i.url+=(Pi.test(i.url)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return a||ce.error(o+" was not called"),a[0]},i.dataTypes[0]="json",r=t[o],t[o]=function(){a=arguments},s.always(function(){t[o]=r,i[o]&&(i.jsonpCallback=n.jsonpCallback,Gi.push(o)),a&&ce.isFunction(r)&&r(a[0]),a=r=e}),"script"):void 0});var Yi,Zi,Xi=0,Ji=t.ActiveXObject&&function(){var t;for(t in Yi)Yi[t](e,!0)};ce.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&I()||B()}:I,Zi=ce.ajaxSettings.xhr(),ce.support.cors=!!Zi&&"withCredentials"in Zi,Zi=ce.support.ajax=!!Zi,Zi&&ce.ajaxTransport(function(i){if(!i.crossDomain||ce.support.cors){var n;return{send:function(s,o){var r,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)l.setRequestHeader(a,s[a])}catch(h){}l.send(i.hasContent&&i.data||null),n=function(t,s){var a,h,c,u;try{if(n&&(s||4===l.readyState))if(n=e,r&&(l.onreadystatechange=ce.noop,Ji&&delete Yi[r]),s)4!==l.readyState&&l.abort();else{u={},a=l.status,h=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{c=l.statusText}catch(d){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=u.text?200:404}}catch(p){s||o(-1,p)}u&&o(a,c,u,h)},i.async?4===l.readyState?setTimeout(n):(r=++Xi,Ji&&(Yi||(Yi={},ce(t).unload(Ji)),Yi[r]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(e,!0)}}}});var Ki,Qi,tn=/^(?:toggle|show|hide)$/,en=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),nn=/queueHooks$/,sn=[j],on={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=en.exec(e),o=s&&s[3]||(ce.cssNumber[t]?"":"px"),r=(ce.cssNumber[t]||"px"!==o&&+n)&&en.exec(ce.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,ce.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};ce.Animation=ce.extend(H,{tweener:function(t,e){ce.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],on[i]=on[i]||[],on[i].unshift(e)},prefilter:function(t,e){e?sn.unshift(t):sn.push(t)}}),ce.Tween=$,$.prototype={constructor:$,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ce.cssNumber[i]?"":"px")},cur:function(){var t=$.propHooks[this.prop];return t&&t.get?t.get(this):$.propHooks._default.get(this)},run:function(t){var e,i=$.propHooks[this.prop];return this.pos=e=this.options.duration?ce.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ce.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ce.fx.step[t.prop]?ce.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ce.cssProps[t.prop]]||ce.cssHooks[t.prop])?ce.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ce.each(["toggle","show","hide"],function(t,e){var i=ce.fn[e];ce.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(W(e,!0),t,n,s)}}),ce.fn.extend({fadeTo:function(t,e,i,n){return this.filter(x).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=ce.isEmptyObject(t),o=ce.speed(e,i,n),r=function(){var e=H(this,ce.extend({},t),o);(s||ce._data(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,i,n){var s=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=ce.timers,r=ce._data(this);if(i)r[i]&&r[i].stop&&s(r[i]);else for(i in r)r[i]&&r[i].stop&&nn.test(i)&&s(r[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&ce.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ce._data(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=ce.timers,r=n?n.length:0;for(i.finish=!0,ce.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ce.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ce.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ce.speed=function(t,e,i){var n=t&&"object"==typeof t?ce.extend({},t):{complete:i||!i&&e||ce.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ce.isFunction(e)&&e};return n.duration=ce.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ce.fx.speeds?ce.fx.speeds[n.duration]:ce.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ce.isFunction(n.old)&&n.old.call(this),n.queue&&ce.dequeue(this,n.queue)},n},ce.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ce.timers=[],ce.fx=$.prototype.init,ce.fx.tick=function(){var t,i=ce.timers,n=0;for(Ki=ce.now();n<i.length;n++)t=i[n],t()||i[n]!==t||i.splice(n--,1);i.length||ce.fx.stop(),Ki=e},ce.fx.timer=function(t){t()&&ce.timers.push(t)&&ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){Qi||(Qi=setInterval(ce.fx.tick,ce.fx.interval))},ce.fx.stop=function(){clearInterval(Qi),Qi=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fx.step={},ce.expr&&ce.expr.filters&&(ce.expr.filters.animated=function(t){return ce.grep(ce.timers,function(e){return t===e.elem}).length}),ce.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){ce.offset.setOffset(this,t,e)});var i,n,s={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return i=r.documentElement,ce.contains(i,o)?(typeof o.getBoundingClientRect!==Y&&(s=o.getBoundingClientRect()),n=V(r),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},ce.offset={setOffset:function(t,e,i){var n=ce.css(t,"position");"static"===n&&(t.style.position="relative");var s,o,r=ce(t),a=r.offset(),l=ce.css(t,"top"),h=ce.css(t,"left"),c=("absolute"===n||"fixed"===n)&&ce.inArray("auto",[l,h])>-1,u={},d={};c?(d=r.position(),s=d.top,o=d.left):(s=parseFloat(l)||0,o=parseFloat(h)||0),ce.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+s),null!=e.left&&(u.left=e.left-a.left+o),"using"in e?e.using.call(t,u):r.css(u)}},ce.fn.extend({position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ce.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ce.nodeName(t[0],"html")||(i=t.offset()),i.top+=ce.css(t[0],"borderTopWidth",!0),i.left+=ce.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ce.css(n,"marginTop",!0),left:e.left-i.left-ce.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||J;t&&!ce.nodeName(t,"html")&&"static"===ce.css(t,"position");)t=t.offsetParent;return t||J})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n=/Y/.test(i);ce.fn[t]=function(s){return ce.access(this,function(t,s,o){var r=V(t);return o===e?r?i in r?r[i]:r.document.documentElement[s]:t[s]:(r?r.scrollTo(n?ce(r).scrollLeft():o,n?o:ce(r).scrollTop()):t[s]=o,void 0)},t,s,arguments.length,null)}}),ce.each({Height:"height",Width:"width"},function(t,i){ce.each({padding:"inner"+t,content:i,"":"outer"+t},function(n,s){ce.fn[s]=function(s,o){var r=arguments.length&&(n||"boolean"!=typeof s),a=n||(s===!0||o===!0?"margin":"border");return ce.access(this,function(i,n,s){var o;return ce.isWindow(i)?i.document.documentElement["client"+t]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+t],o["scroll"+t],i.body["offset"+t],o["offset"+t],o["client"+t])):s===e?ce.css(i,n,a):ce.style(i,n,s,a)},i,r?s:e,r,null)}})}),ce.fn.size=function(){return this.length},ce.fn.andSelf=ce.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ce:(t.jQuery=t.$=ce,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce}))}(window),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,n=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},fire:function(e,i,n){var s=t.Event(i);return e.trigger(s,n),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(n){var s,o,r,a,l,h,c,u;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===e?null:a,h=n.data("with-credentials")||null,c=n.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,n.is("form")){s=n.attr("method"),o=n.attr("action"),r=n.serializeArray();var d=n.data("ujs:submit-button");d&&(r.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(s=n.data("method"),o=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(s=n.data("method")||"get",o=n.data("url"),r=n.serialize(),n.data("params")&&(r=r+"&"+n.data("params"))):(s=n.data("method"),o=i.href(n),r=n.data("params")||null);u={type:s||"GET",data:r,dataType:c,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),i.fire(n,"ajax:beforeSend",[t,s])},success:function(t,e,i){n.trigger("ajax:success",[t,e,i])},complete:function(t,e){n.trigger("ajax:complete",[t,e])},error:function(t,e,i){n.trigger("ajax:error",[t,e,i])},crossDomain:l},h&&(u.xhrFields={withCredentials:h}),o&&(u.url=o);var p=i.ajax(u);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var s=i.href(n),o=n.data("method"),r=n.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),h=t('<form method="post" action="'+s+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';l!==e&&a!==e&&(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),r&&h.attr("target",r),h.hide().append(c).appendTo("body"),h.submit()},disableFormElements:function(e){e.find(i.disableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with",e[i]()),e[i](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(i.enableSelector).each(function(){var e=t(this),i=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[i](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,n=t.data("confirm"),s=!1;return n?(i.fire(t,"confirm")&&(s=i.confirm(n),e=i.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,i,n){var s,o,r=t(),a=i||"input,textarea",l=e.find(a);return l.each(function(){if(s=t(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!o==!n){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;r=r.add(s)}}),r.length?r:!1},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,n){t.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var s=t(this),o=s.data("method"),r=s.data("params");if(!i.allowAction(s))return i.stopEverything(n);if(s.is(i.linkDisableSelector)&&i.disableElement(s),s.data("remote")!==e){if(!(!n.metaKey&&!n.ctrlKey||o&&"GET"!==o||r))return!0;var a=i.handleRemote(s);return a===!1?i.enableElement(s):a.error(function(){i.enableElement(s)}),!1}return s.data("method")?(i.handleMethod(s),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.inputChangeSelector,"change.rails",function(e){var n=t(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(e)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var s=t(this),o=s.data("remote")!==e,r=i.blankInputs(s,i.requiredInputSelector),a=i.nonBlankInputs(s,i.fileInputSelector);if(!i.allowAction(s))return i.stopEverything(n);if(r&&s.attr("novalidate")==e&&i.fire(s,"ajax:aborted:required",[r]))return i.stopEverything(n);if(o){if(a){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(e){var n=t(this);if(!i.allowAction(n))return i.stopEverything(e);var s=n.attr("name"),o=s?{name:s,value:n.val()}:null;n.closest("form").data("ujs:submit-button",o)}),n.delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)}))}(jQuery),jQuery.effects||function(t,e){var i=t.uiBackCompat!==!1,n="ui-effects-";t.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(e,i){function n(t,e,i){var n=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function s(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),m(h,function(e,s){var o,r=s.re.exec(t),a=r&&s.parse(r),l=s.space||"rgba";return a?(o=i[l](a),i[u[l].cache]=o[u[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var r,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},f=e("<p>")[0],m=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,m(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,a,l,h){if(o===i)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(a),a=i);var d=this,p=e.type(o),f=this._rgba=[];return a!==i&&(o=[o,a,l,h],p="array"),"string"===p?this.parse(s(o)||r._default):"array"===p?(m(u.rgba.props,function(t,e){f[e.idx]=n(o[e.idx],e)}),this):"object"===p?(o instanceof c?m(u,function(t,e){o[e.cache]&&(d[e.cache]=o[e.cache].slice())}):m(u,function(e,i){var s=i.cache;m(i.props,function(t,e){if(!d[s]&&i.to){if("alpha"===t||null==o[t])return;d[s]=i.to(d._rgba)}d[s][e.idx]=n(o[t],e,!0)}),d[s]&&t.inArray(null,d[s].slice(0,3))<0&&(d[s][3]=1,i.from&&(d._rgba=i.from(d[s])))}),this):void 0},is:function(t){var e=c(t),i=!0,n=this;return m(u,function(t,s){var o,r=e[s.cache];return r&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],m(s.props,function(t,e){return null!=r[e.idx]?i=r[e.idx]===o[e.idx]:void 0})),i}),i},_space:function(){var t=[],e=this;return m(u,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=c(t),s=i._space(),o=u[s],r=0===this.alpha()?c("transparent"):this,a=r[o.cache]||o.to(r._rgba),l=a.slice();return i=i[o.cache],m(o.props,function(t,s){var o=s.idx,r=a[o],h=i[o],c=d[s.type]||{};null!==h&&(null===r?l[o]=h:(c.mod&&(h-r>c.mod/2?r+=c.mod:r-h>c.mod/2&&(r-=c.mod)),l[o]=n((h-r)*e+r,s)))}),this[s](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(t)._rgba;return c(e.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,o=t[2]/255,r=t[3],a=Math.max(n,s,o),l=Math.min(n,s,o),h=a-l,c=a+l,u=.5*c;return e=l===a?0:n===a?60*(s-o)/h+360:s===a?60*(o-n)/h+120:60*(n-s)/h+240,i=0===u||1===u?u:.5>=u?h/c:h/(2-c),[Math.round(e)%360,i,u,null==r?1:r]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],s=t[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*o(a,r,e+1/3)),Math.round(255*o(a,r,e)),Math.round(255*o(a,r,e-1/3)),s]},m(u,function(t,s){var o=s.props,r=s.cache,a=s.to,h=s.from;c.fn[t]=function(t){if(a&&!this[r]&&(this[r]=a(this._rgba)),t===i)return this[r].slice();var s,l=e.type(t),u="array"===l||"object"===l?t:arguments,d=this[r].slice();return m(o,function(t,e){var i=u["object"===l?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=n(i,e)}),h?(s=c(h(d)),s[r]=d,s):c(d)},m(o,function(i,n){c.fn[i]||(c.fn[i]=function(s){var o,r=e.type(s),a="alpha"===i?this._hsla?"hsla":"rgba":t,h=this[a](),c=h[n.idx];return"undefined"===r?c:("function"===r&&(s=s.call(this,c),r=e.type(s)),null==s&&n.empty?this:("string"===r&&(o=l.exec(s),o&&(s=c+parseFloat(o[2])*("+"===o[1]?1:-1))),h[n.idx]=s,this[a](h)))})})}),m(a,function(t,i){e.cssHooks[i]={set:function(t,n){var o,r,a="";if("string"!==e.type(n)||(o=s(n))){if(n=c(o||n),!p.rgba&&1!==n._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return m(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var e,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)e=n[i],"string"==typeof n[e]&&(s[t.camelCase(e)]=n[e]);else for(e in n)"string"==typeof n[e]&&(s[e]=n[e]);return s}function n(e,i){var n,s,r={};for(n in i)s=i[n],e[n]!==s&&(o[n]||(t.fx.step[n]||!isNaN(parseFloat(s)))&&(r[n]=s));return r}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,o,r,a){var l=t.speed(o,r,a);return this.queue(function(){var o,r=t(this),a=r.attr("class")||"",h=l.children?r.find("*").andSelf():r;h=h.map(function(){var e=t(this);return{el:e,start:i.call(this)}}),o=function(){t.each(s,function(t,i){e[i]&&r[i+"Class"](e[i])})},o(),h=h.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),h=h.map(function(){var e=this,i=t.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,h.get()).done(function(){o(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(r[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,n,s){return i?t.effects.animateClass.call(this,{add:e},i,n,s):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,n,s){return i?t.effects.animateClass.call(this,{remove:e},i,n,s):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,n,s,o,r){return"boolean"==typeof n||n===e?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,r):this._toggleClass(i,n):t.effects.animateClass.call(this,{toggle:i},n,s,o)},switchClass:function(e,i,n,s,o){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,o)}})}(),function(){function s(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function o(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?!1:i&&t.effects[e]?!1:!0}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data(n+e[i],t[0].style[e[i]])},restore:function(t,i){var s,o;for(o=0;o<i.length;o++)null!==i[o]&&(s=t.data(n+i[o]),s===e&&(s=""),t.css(i[o],s))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},o=document.activeElement;try{o.id}catch(r){o=document.body}return e.wrap(n),(e[0]===o||t.contains(e[0],o))&&t(o).focus(),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var o=e.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(o)&&o.call(s[0]),t.isFunction(e)&&e()}var s=t(this),o=n.complete,r=n.mode;(s.is(":hidden")?"hide"===r:"show"===r)?i():a.call(s[0],n,i)}var n=s.apply(this,arguments),o=n.mode,r=n.queue,a=t.effects.effect[n.effect],l=!a&&i&&t.effects[n.effect];return t.fx.off||!a&&!l?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):a?r===!1?this.each(e):this.queue(r||"fx",e):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:t.fn.show,show:function(t){if(o(t))return this._show.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(o(t))return this._hide.apply(this,arguments);var e=s.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(o(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),/*!
 * jQuery UI Effects Slide 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(t){t.effects.effect.slide=function(e,i){var n,s=t(this),o=["position","top","bottom","left","right","width","height"],r=t.effects.setMode(s,e.mode||"show"),a="show"===r,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};t.effects.save(s,o),s.show(),n=e.distance||s["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(s).css({overflow:"hidden"}),a&&s.css(h,c?isNaN(n)?"-"+n:-n:n),u[h]=(a?c?"+=":"-=":c?"-=":"+=")+n,s.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===r&&s.hide(),t.effects.restore(s,o),t.effects.removeWrapper(s),i()}})}}(jQuery);/**
 * @license wysihtml5 v0.3.0
 * https://github.com/xing/wysihtml5
 *
 * Author: Christopher Blum (https://github.com/tiff)
 *
 * Copyright (C) 2012 XING AG
 * Licensed under the MIT license (MIT)
 *
 */
var wysihtml5={version:"0.3.0",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"﻿",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};/**
 * @license Rangy, a cross-browser JavaScript range and selection library
 * http://code.google.com/p/rangy/
 *
 * Copyright 2011, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.2
 * Build date: 13 November 2011
 */
window.rangy=function(){function t(t,e){var i=typeof t[e];return i==u||!(i!=c||!t[e])||"unknown"==i}function e(t,e){return!(typeof t[e]!=c||!t[e])}function i(t,e){return typeof t[e]!=d}function n(t){return function(e,i){for(var n=i.length;n--;)if(!t(e,i[n]))return!1;return!0}}function s(t){return t&&v(t,g)&&y(t,m)}function o(t){window.alert("Rangy not supported in your browser. Reason: "+t),b.initialized=!0,b.supported=!1}function r(t){var e="Rangy warning: "+t;b.config.alertOnWarn?window.alert(e):typeof window.console!=d&&typeof window.console.log!=d&&window.console.log(e)}function a(){if(!b.initialized){var i,n=!1,r=!1;t(document,"createRange")&&(i=document.createRange(),v(i,f)&&y(i,p)&&(n=!0),i.detach());var a=e(document,"body")?document.body:document.getElementsByTagName("body")[0];a&&t(a,"createTextRange")&&(i=a.createTextRange(),s(i)&&(r=!0)),n||r||o("Neither Range nor TextRange are implemented"),b.initialized=!0,b.features={implementsDomRange:n,implementsTextRange:r};for(var l=C.concat(w),h=0,c=l.length;c>h;++h)try{l[h](b)}catch(u){e(window,"console")&&t(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",u)}}}function l(t){t=t||window,a();for(var e=0,i=x.length;i>e;++e)x[e](t)}function h(t){this.name=t,this.initialized=!1,this.supported=!1}var c="object",u="function",d="undefined",p=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],f=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],m=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],g=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],v=n(t),_=n(e),y=n(i),b={version:"1.2.2",initialized:!1,supported:!0,util:{isHostMethod:t,isHostObject:e,isHostProperty:i,areHostMethods:v,areHostObjects:_,areHostProperties:y,isTextRange:s},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};b.fail=o,b.warn=r,{}.hasOwnProperty?b.util.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}:o("hasOwnProperty not supported");var w=[],C=[];b.init=a,b.addInitListener=function(t){b.initialized?t(b):w.push(t)};var x=[];b.addCreateMissingNativeApiListener=function(t){x.push(t)},b.createMissingNativeApi=l,h.prototype.fail=function(t){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+t)},h.prototype.warn=function(t){b.warn("Module "+this.name+": "+t)},h.prototype.createError=function(t){return new Error("Error in Rangy "+this.name+" module: "+t)},b.createModule=function(t,e){var i=new h(t);b.modules[t]=i,C.push(function(t){e(t,i),i.initialized=!0,i.supported=!0})},b.requireModules=function(t){for(var e,i,n=0,s=t.length;s>n;++n){if(i=t[n],e=b.modules[i],!(e&&e instanceof h))throw new Error("Module '"+i+"' not found");if(!e.supported)throw new Error("Module '"+i+"' not supported")}};var T=!1,A=function(){T||(T=!0,b.initialized||a())};return typeof window==d?(o("No window found"),void 0):typeof document==d?(o("No document found"),void 0):(t(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",A,!1),t(window,"addEventListener")?window.addEventListener("load",A,!1):t(window,"attachEvent")?window.attachEvent("onload",A):o("Window does not have required addEventListener or attachEvent method"),b)}(),rangy.createModule("DomUtil",function(t,e){function i(t){var e;return typeof t.namespaceURI==A||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function n(t){var e=t.parentNode;return 1==e.nodeType?e:null}function s(t){for(var e=0;t=t.previousSibling;)e++;return e}function o(t){var e;return h(t)?t.length:(e=t.childNodes)?e.length:0}function r(t,e){var i,n=[];for(i=t;i;i=i.parentNode)n.push(i);for(i=e;i;i=i.parentNode)if(L(n,i))return i;return null}function a(t,e,i){for(var n=i?e:e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}function l(t,e,i){for(var n,s=i?t:t.parentNode;s;){if(n=s.parentNode,n===e)return s;s=n}return null}function h(t){var e=t.nodeType;return 3==e||4==e||8==e}function c(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t}function u(t,e){var i=t.cloneNode(!1);return i.deleteData(0,e),t.deleteData(e,t.length-e),c(i,t),i}function d(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=A)return t.ownerDocument;if(typeof t.document!=A)return t.document;if(t.parentNode)return d(t.parentNode);throw new Error("getDocument: no document found for node")}function p(t){var e=d(t);if(typeof e.defaultView!=A)return e.defaultView;if(typeof e.parentWindow!=A)return e.parentWindow;throw new Error("Cannot get a window object for node")}function f(t){if(typeof t.contentDocument!=A)return t.contentDocument;if(typeof t.contentWindow!=A)return t.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function m(t){if(typeof t.contentWindow!=A)return t.contentWindow;if(typeof t.contentDocument!=A)return t.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function g(t){return S.isHostObject(t,"body")?t.body:t.getElementsByTagName("body")[0]}function v(t){for(var e;e=t.parentNode;)t=e;return t}function _(t,e,i,n){var o,a,h,c,u;if(t==i)return e===n?0:n>e?-1:1;if(o=l(i,t,!0))return e<=s(o)?-1:1;if(o=l(t,i,!0))return s(o)<n?-1:1;if(a=r(t,i),h=t===a?a:l(t,a,!0),c=i===a?a:l(i,a,!0),h===c)throw new Error("comparePoints got to case 4 and childA and childB are the same!");for(u=a.firstChild;u;){if(u===h)return-1;if(u===c)return 1;u=u.nextSibling}throw new Error("Should not be here!")}function y(t){for(var e,i=d(t).createDocumentFragment();e=t.firstChild;)i.appendChild(e);return i}function b(t){if(!t)return"[No node]";if(h(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">["+t.childNodes.length+"]"}return t.nodeName}function w(t){this.root=t,this._next=t}function C(t){return new w(t)}function x(t,e){this.node=t,this.offset=e}function T(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}var A="undefined",S=t.util;S.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),S.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var k=document.createElement("div");S.areHostMethods(k,["insertBefore","appendChild","cloneNode"]||!S.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),S.isHostProperty(k,"innerHTML")||e.fail("Element is missing innerHTML property");var D=document.createTextNode("test");S.areHostMethods(D,["splitText","deleteData","insertData","appendData","cloneNode"]||!S.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"])||!S.areHostProperties(D,["data"]))||e.fail("Incomplete Text Node implementation");var L=function(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1};w.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,i=this._current=this._next;if(this._current)if(t=i.firstChild)this._next=t;else{for(e=null;i!==this.root&&!(e=i.nextSibling);)i=i.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},x.prototype={equals:function(t){return this.node===t.node&this.offset==t.offset},inspect:function(){return"[DomPosition("+b(this.node)+":"+this.offset+")]"}},T.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},T.prototype.toString=function(){return this.message},t.dom={arrayContains:L,isHtmlNamespace:i,parentElement:n,getNodeIndex:s,getNodeLength:o,getCommonAncestor:r,isAncestorOf:a,getClosestAncestorIn:l,isCharacterDataNode:h,insertAfter:c,splitDataNode:u,getDocument:d,getWindow:p,getIframeWindow:m,getIframeDocument:f,getBody:g,getRootContainer:v,comparePoints:_,inspectNode:b,fragmentFromNodeChildren:y,createIterator:C,DomPosition:x},t.DOMException=T}),rangy.createModule("DomRange",function(t){function e(t,e){return 3!=t.nodeType&&(I.isAncestorOf(t,e.startContainer,!0)||I.isAncestorOf(t,e.endContainer,!0))}function i(t){return I.getDocument(t.startContainer)}function n(t,e,i){var n=t._listeners[e];if(n)for(var s=0,o=n.length;o>s;++s)n[s].call(t,{target:t,args:i})}function s(t){return new B(t.parentNode,I.getNodeIndex(t))}function o(t){return new B(t.parentNode,I.getNodeIndex(t)+1)}function r(t,e,i){var n=11==t.nodeType?t.firstChild:t;return I.isCharacterDataNode(e)?i==e.length?I.insertAfter(t,e):e.parentNode.insertBefore(t,0==i?e:I.splitDataNode(e,i)):i>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[i]),n}function a(t){for(var e,n,s,o=i(t.range).createDocumentFragment();n=t.next();){if(e=t.isPartiallySelectedSubtree(),n=n.cloneNode(!e),e&&(s=t.getSubtreeIterator(),n.appendChild(a(s)),s.detach(!0)),10==n.nodeType)throw new z("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function l(t,e,i){var n,s;i=i||{stop:!1};for(var o,r;o=t.next();)if(t.isPartiallySelectedSubtree()){if(e(o)===!1)return i.stop=!0,void 0;if(r=t.getSubtreeIterator(),l(r,e,i),r.detach(!0),i.stop)return}else for(n=I.createIterator(o);s=n.next();)if(e(s)===!1)return i.stop=!0,void 0}function h(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(e=t.getSubtreeIterator(),h(e),e.detach(!0)):t.remove()}function c(t){for(var e,n,s=i(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),n=t.getSubtreeIterator(),e.appendChild(c(n)),n.detach(!0)):t.remove(),10==e.nodeType)throw new z("HIERARCHY_REQUEST_ERR");s.appendChild(e)}return s}function u(t,e,i){var n,s=!(!e||!e.length),o=!!i;s&&(n=new RegExp("^("+e.join("|")+")$"));var r=[];return l(new p(t,!1),function(t){s&&!n.test(t.nodeType)||o&&!i(t)||r.push(t)}),r}function d(t){var e="undefined"==typeof t.getName?"Range":t.getName();return"["+e+"("+I.inspectNode(t.startContainer)+":"+t.startOffset+", "+I.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function p(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var i=t.commonAncestorContainer;this.sc===this.ec&&I.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||I.isCharacterDataNode(this.sc)?I.getClosestAncestorIn(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||I.isCharacterDataNode(this.ec)?I.getClosestAncestorIn(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function f(t){this.code=this[t],this.codeName=t,this.message="RangeException: "+this.codeName}function m(t,e,i){this.nodes=u(t,e,i),this._next=this.nodes[0],this._position=0}function g(t){return function(e,i){for(var n,s=i?e:e.parentNode;s;){if(n=s.nodeType,I.arrayContains(t,n))return s;s=s.parentNode}return null}}function v(t,e){if(q(t,e))throw new f("INVALID_NODE_TYPE_ERR")}function _(t){if(!t.startContainer)throw new z("INVALID_STATE_ERR")}function y(t,e){if(!I.arrayContains(e,t.nodeType))throw new f("INVALID_NODE_TYPE_ERR")}function b(t,e){if(0>e||e>(I.isCharacterDataNode(t)?t.length:t.childNodes.length))throw new z("INDEX_SIZE_ERR")}function w(t,e){if(V(t,!0)!==V(e,!0))throw new z("WRONG_DOCUMENT_ERR")}function C(t){if(G(t,!0))throw new z("NO_MODIFICATION_ALLOWED_ERR")}function x(t,e){if(!t)throw new z(e)}function T(t){return!I.arrayContains(H,t.nodeType)&&!V(t,!0)}function A(t,e){return e<=(I.isCharacterDataNode(t)?t.length:t.childNodes.length)}function S(t){if(_(t),T(t.startContainer)||T(t.endContainer)||!A(t.startContainer,t.startOffset)||!A(t.endContainer,t.endOffset))throw new Error("Range error: Range is no longer valid after DOM mutation ("+t.inspect()+")")}function k(){}function D(t){t.START_TO_START=Q,t.START_TO_END=te,t.END_TO_END=ee,t.END_TO_START=ie,t.NODE_BEFORE=ne,t.NODE_AFTER=se,t.NODE_BEFORE_AND_AFTER=oe,t.NODE_INSIDE=re}function L(t){D(t),D(t.prototype)}function M(t,e){return function(){S(this);var i,n,s=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,h=new p(this,!0);s!==a&&(i=I.getClosestAncestorIn(s,a,!0),n=o(i),s=n.node,r=n.offset),l(h,C),h.reset();var c=t(h);return h.detach(),e(this,s,r,s,r),c}}function E(i,n,r){function a(t,e){return function(i){_(this),y(i,U),y(W(i),H);var n=(t?s:o)(i);(e?l:u)(this,n.node,n.offset)}}function l(t,e,i){var s=t.endContainer,o=t.endOffset;(e!==t.startContainer||i!==t.startOffset)&&((W(e)!=W(s)||1==I.comparePoints(e,i,s,o))&&(s=e,o=i),n(t,e,i,s,o))}function u(t,e,i){var s=t.startContainer,o=t.startOffset;(e!==t.endContainer||i!==t.endOffset)&&((W(e)!=W(s)||-1==I.comparePoints(e,i,s,o))&&(s=e,o=i),n(t,s,o,e,i))}function d(t,e,i){(e!==t.startContainer||i!==t.startOffset||e!==t.endContainer||i!==t.endOffset)&&n(t,e,i,e,i)}i.prototype=new k,t.util.extend(i.prototype,{setStart:function(t,e){_(this),v(t,!0),b(t,e),l(this,t,e)},setEnd:function(t,e){_(this),v(t,!0),b(t,e),u(this,t,e)},setStartBefore:a(!0,!0),setStartAfter:a(!1,!0),setEndBefore:a(!0,!1),setEndAfter:a(!1,!1),collapse:function(t){S(this),t?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){_(this),v(t,!0),n(this,t,0,t,I.getNodeLength(t))},selectNode:function(t){_(this),v(t,!1),y(t,U);var e=s(t),i=o(t);n(this,e.node,e.offset,i.node,i.offset)},extractContents:M(c,n),deleteContents:M(h,n),canSurroundContents:function(){S(this),C(this.startContainer),C(this.endContainer);var t=new p(this,!0),i=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!i},detach:function(){r(this)},splitBoundaries:function(){S(this);var t=this.startContainer,e=this.startOffset,i=this.endContainer,s=this.endOffset,o=t===i;I.isCharacterDataNode(i)&&s>0&&s<i.length&&I.splitDataNode(i,s),I.isCharacterDataNode(t)&&e>0&&e<t.length&&(t=I.splitDataNode(t,e),o?(s-=e,i=t):i==t.parentNode&&s>=I.getNodeIndex(t)&&s++,e=0),n(this,t,e,i,s)},normalizeBoundaries:function(){S(this);var t=this.startContainer,e=this.startOffset,i=this.endContainer,s=this.endOffset,o=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(i=t,s=t.length,t.appendData(e.data),e.parentNode.removeChild(e))},r=function(n){var o=n.previousSibling;if(o&&o.nodeType==n.nodeType){t=n;var r=n.length;if(e=o.length,n.insertData(0,o.data),o.parentNode.removeChild(o),t==i)s+=e,i=t;else if(i==n.parentNode){var a=I.getNodeIndex(n);s==a?(i=n,s=r):s>a&&s--}}},a=!0;if(I.isCharacterDataNode(i))i.length==s&&o(i);else{if(s>0){var l=i.childNodes[s-1];l&&I.isCharacterDataNode(l)&&o(l)}a=!this.collapsed}if(a){if(I.isCharacterDataNode(t))0==e&&r(t);else if(e<t.childNodes.length){var h=t.childNodes[e];h&&I.isCharacterDataNode(h)&&r(h)}}else t=i,e=s;n(this,t,e,i,s)},collapseToPoint:function(t,e){_(this),v(t,!0),b(t,e),d(this,t,e)}}),L(i)}function N(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:I.getCommonAncestor(t.startContainer,t.endContainer)}function P(t,e,i,s,o){var r=t.startContainer!==e||t.startOffset!==i,a=t.endContainer!==s||t.endOffset!==o;t.startContainer=e,t.startOffset=i,t.endContainer=s,t.endOffset=o,N(t),n(t,"boundarychange",{startMoved:r,endMoved:a})}function O(t){_(t),t.startContainer=t.startOffset=t.endContainer=t.endOffset=null,t.collapsed=t.commonAncestorContainer=null,n(t,"detach",null),t._listeners=null}function R(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},N(this)}t.requireModules(["DomUtil"]);var I=t.dom,B=I.DomPosition,z=t.DOMException;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,I.isCharacterDataNode(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,i=this._current;!I.isCharacterDataNode(i)||i!==this.sc&&i!==this.ec?i.parentNode&&i.parentNode.removeChild(i):(t=i===this.sc?this.so:0,e=i===this.ec?this.eo:i.length,t!=e&&i.deleteData(t,e-t))},isPartiallySelectedSubtree:function(){var t=this._current;return e(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse();else{t=new R(i(this.range));var e=this._current,n=e,s=0,o=e,r=I.getNodeLength(e);I.isAncestorOf(e,this.sc,!0)&&(n=this.sc,s=this.so),I.isAncestorOf(e,this.ec,!0)&&(o=this.ec,r=this.eo),P(t,n,s,o,r)}return new p(t,this.clonePartiallySelectedTextNodes)},detach:function(t){t&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},f.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},f.prototype.toString=function(){return this.message},m.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var U=[1,3,4,5,7,8,10],H=[2,9,11],F=[5,6,10,12],j=[1,3,4,5,7,8,10,11],$=[1,3,4,5,7,8],W=I.getRootContainer,V=g([9,11]),G=g(F),q=g([6,10,12]),Y=document.createElement("style"),Z=!1;try{Y.innerHTML="<b>x</b>",Z=3==Y.firstChild.nodeType}catch(X){}t.features.htmlParsingConforms=Z;var J=Z?function(t){var e=this.startContainer,i=I.getDocument(e);if(!e)throw new z("INVALID_STATE_ERR");var n=null;return 1==e.nodeType?n=e:I.isCharacterDataNode(e)&&(n=I.parentElement(e)),n=null===n||"HTML"==n.nodeName&&I.isHtmlNamespace(I.getDocument(n).documentElement)&&I.isHtmlNamespace(n)?i.createElement("body"):n.cloneNode(!1),n.innerHTML=t,I.fragmentFromNodeChildren(n)}:function(t){_(this);var e=i(this),n=e.createElement("body");return n.innerHTML=t,I.fragmentFromNodeChildren(n)},K=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Q=0,te=1,ee=2,ie=3,ne=0,se=1,oe=2,re=3;k.prototype={attachListener:function(t,e){this._listeners[t].push(e)},compareBoundaryPoints:function(t,e){S(this),w(this.startContainer,e.startContainer);var i,n,s,o,r=t==ie||t==Q?"start":"end",a=t==te||t==Q?"start":"end";return i=this[r+"Container"],n=this[r+"Offset"],s=e[a+"Container"],o=e[a+"Offset"],I.comparePoints(i,n,s,o)},insertNode:function(t){if(S(this),y(t,j),C(this.startContainer),I.isAncestorOf(t,this.startContainer,!0))throw new z("HIERARCHY_REQUEST_ERR");var e=r(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){S(this);var t,e;if(this.collapsed)return i(this).createDocumentFragment();if(this.startContainer===this.endContainer&&I.isCharacterDataNode(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),e=i(this).createDocumentFragment(),e.appendChild(t),e;var n=new p(this,!0);return t=a(n),n.detach(),t},canSurroundContents:function(){S(this),C(this.startContainer),C(this.endContainer);var t=new p(this,!0),i=t._first&&e(t._first,this)||t._last&&e(t._last,this);return t.detach(),!i},surroundContents:function(t){if(y(t,$),!this.canSurroundContents())throw new f("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);r(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){S(this);for(var t,e=new R(i(this)),n=K.length;n--;)t=K[n],e[t]=this[t];return e},toString:function(){S(this);var t=this.startContainer;if(t===this.endContainer&&I.isCharacterDataNode(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],i=new p(this,!0);return l(i,function(t){(3==t.nodeType||4==t.nodeType)&&e.push(t.data)}),i.detach(),e.join("")},compareNode:function(t){S(this);var e=t.parentNode,i=I.getNodeIndex(t);if(!e)throw new z("NOT_FOUND_ERR");var n=this.comparePoint(e,i),s=this.comparePoint(e,i+1);return 0>n?s>0?oe:ne:s>0?se:re},comparePoint:function(t,e){return S(this),x(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),I.comparePoints(t,e,this.startContainer,this.startOffset)<0?-1:I.comparePoints(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:J,toHtml:function(){S(this);var t=i(this).createElement("div");return t.appendChild(this.cloneContents()),t.innerHTML},intersectsNode:function(t,e){if(S(this),x(t,"NOT_FOUND_ERR"),I.getDocument(t)!==i(this))return!1;var n=t.parentNode,s=I.getNodeIndex(t);x(n,"NOT_FOUND_ERR");var o=I.comparePoints(n,s,this.endContainer,this.endOffset),r=I.comparePoints(n,s+1,this.startContainer,this.startOffset);return e?0>=o&&r>=0:0>o&&r>0},isPointInRange:function(t,e){return S(this),x(t,"HIERARCHY_REQUEST_ERR"),w(t,this.startContainer),I.comparePoints(t,e,this.startContainer,this.startOffset)>=0&&I.comparePoints(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t,e){if(S(this),i(t)!=i(this))throw new z("WRONG_DOCUMENT_ERR");var n=I.comparePoints(this.startContainer,this.startOffset,t.endContainer,t.endOffset),s=I.comparePoints(this.endContainer,this.endOffset,t.startContainer,t.startOffset);return e?0>=n&&s>=0:0>n&&s>0},intersection:function(t){if(this.intersectsRange(t)){var e=I.comparePoints(this.startContainer,this.startOffset,t.startContainer,t.startOffset),i=I.comparePoints(this.endContainer,this.endOffset,t.endContainer,t.endOffset),n=this.cloneRange();return-1==e&&n.setStart(t.startContainer,t.startOffset),1==i&&n.setEnd(t.endContainer,t.endOffset),n}return null},union:function(t){if(this.intersectsRange(t,!0)){var e=this.cloneRange();return-1==I.comparePoints(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==I.comparePoints(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new f("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==re},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,I.getNodeLength(t))<=0},containsRange:function(t){return this.intersection(t).equals(t)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var i=e.getNodes([3]);if(i.length>0){e.setStart(i[0],0);var n=i.pop();e.setEnd(n,n.length);var s=this.containsRange(e);return e.detach(),s}return this.containsNodeContents(t)},createNodeIterator:function(t,e){return S(this),new m(this,t,e)},getNodes:function(t,e){return S(this),u(this,t,e)},getDocument:function(){return i(this)},collapseBefore:function(t){_(this),this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){_(this),this.setStartAfter(t),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(t){return R.rangesEqual(this,t)},inspect:function(){return d(this)}},E(R,P,O),t.rangePrototype=k.prototype,R.rangeProperties=K,R.RangeIterator=p,R.copyComparisonConstants=L,R.createPrototypeRange=E,R.inspect=d,R.getRangeDocument=i,R.rangesEqual=function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset},t.DomRange=R,t.RangeException=f}),rangy.createModule("WrappedRange",function(t){function e(t){var e=t.parentElement(),i=t.duplicate();i.collapse(!0);var n=i.parentElement();i=t.duplicate(),i.collapse(!1);var s=i.parentElement(),o=n==s?n:r.getCommonAncestor(n,s);return o==e?o:r.getCommonAncestor(e,o)}function i(t){return 0==t.compareEndPoints("StartToEnd",t)}function n(t,e,i,n){var s=t.duplicate();s.collapse(i);var o=s.parentElement();if(r.isAncestorOf(e,o,!0)||(o=e),!o.canHaveHTML)return new a(o.parentNode,r.getNodeIndex(o));var l,h,c,u,d,p=r.getDocument(o).createElement("span"),f=i?"StartToStart":"StartToEnd";do o.insertBefore(p,p.previousSibling),s.moveToElementText(p);while((l=s.compareEndPoints(f,t))>0&&p.previousSibling);if(d=p.nextSibling,-1==l&&d&&r.isCharacterDataNode(d)){s.setEndPoint(i?"EndToStart":"EndToEnd",t);var m;if(/[\r\n]/.test(d.data)){var g=s.duplicate(),v=g.text.replace(/\r\n/g,"\r").length;for(m=g.moveStart("character",v);-1==(l=g.compareEndPoints("StartToEnd",g));)m++,g.moveStart("character",1)}else m=s.text.length;u=new a(d,m)}else h=(n||!i)&&p.previousSibling,c=(n||i)&&p.nextSibling,u=c&&r.isCharacterDataNode(c)?new a(c,0):h&&r.isCharacterDataNode(h)?new a(h,h.length):new a(o,r.getNodeIndex(p));return p.parentNode.removeChild(p),u}function s(t,e){var i,n,s,o,a=t.offset,l=r.getDocument(t.node),h=l.body.createTextRange(),c=r.isCharacterDataNode(t.node);return c?(i=t.node,n=i.parentNode):(o=t.node.childNodes,i=a<o.length?o[a]:null,n=t.node),s=l.createElement("span"),s.innerHTML="&#feff;",i?n.insertBefore(s,i):n.appendChild(s),h.moveToElementText(s),h.collapse(!e),n.removeChild(s),c&&h[e?"moveStart":"moveEnd"]("character",a),h}t.requireModules(["DomUtil","DomRange"]);var o,r=t.dom,a=r.DomPosition,l=t.DomRange;if(!t.features.implementsDomRange||t.features.implementsTextRange&&t.config.preferTextRange){if(t.features.implementsTextRange){o=function(t){this.textRange=t,this.refresh()},o.prototype=new l(document),o.prototype.refresh=function(){var t,s,o=e(this.textRange);i(this.textRange)?s=t=n(this.textRange,o,!0,!0):(t=n(this.textRange,o,!0,!1),s=n(this.textRange,o,!1,!1)),this.setStart(t.node,t.offset),this.setEnd(s.node,s.offset)},l.copyComparisonConstants(o);var h=function(){return this}();"undefined"==typeof h.Range&&(h.Range=o),t.createNativeRange=function(t){return t=t||document,t.body.createTextRange()}}}else!function(){function e(t){for(var e,i=c.length;i--;)e=c[i],t[e]=t.nativeRange[e]}function i(t,e,i,n,s){var o=t.startContainer!==e||t.startOffset!=i,r=t.endContainer!==n||t.endOffset!=s;(o||r)&&(t.setEnd(n,s),t.setStart(e,i))}function n(t){t.nativeRange.detach(),t.detached=!0;for(var e,i=c.length;i--;)e=c[i],t[e]=null}var s,a,h,c=l.rangeProperties;o=function(t){if(!t)throw new Error("Range must be specified");this.nativeRange=t,e(this)},l.createPrototypeRange(o,i,n),s=o.prototype,s.selectNode=function(t){this.nativeRange.selectNode(t),e(this)},s.deleteContents=function(){this.nativeRange.deleteContents(),e(this)},s.extractContents=function(){var t=this.nativeRange.extractContents();return e(this),t},s.cloneContents=function(){return this.nativeRange.cloneContents()},s.surroundContents=function(t){this.nativeRange.surroundContents(t),e(this)},s.collapse=function(t){this.nativeRange.collapse(t),e(this)},s.cloneRange=function(){return new o(this.nativeRange.cloneRange())},s.refresh=function(){e(this)},s.toString=function(){return this.nativeRange.toString()};var u=document.createTextNode("test");r.getBody(document).appendChild(u);var d=document.createRange();d.setStart(u,0),d.setEnd(u,0);try{d.setStart(u,1),a=!0,s.setStart=function(t,i){this.nativeRange.setStart(t,i),e(this)},s.setEnd=function(t,i){this.nativeRange.setEnd(t,i),e(this)},h=function(t){return function(i){this.nativeRange[t](i),e(this)}}}catch(p){a=!1,s.setStart=function(t,i){try{this.nativeRange.setStart(t,i)}catch(n){this.nativeRange.setEnd(t,i),this.nativeRange.setStart(t,i)}e(this)},s.setEnd=function(t,i){try{this.nativeRange.setEnd(t,i)}catch(n){this.nativeRange.setStart(t,i),this.nativeRange.setEnd(t,i)}e(this)},h=function(t,i){return function(n){try{this.nativeRange[t](n)}catch(s){this.nativeRange[i](n),this.nativeRange[t](n)}e(this)}}}s.setStartBefore=h("setStartBefore","setEndBefore"),s.setStartAfter=h("setStartAfter","setEndAfter"),s.setEndBefore=h("setEndBefore","setStartBefore"),s.setEndAfter=h("setEndAfter","setStartAfter"),d.selectNodeContents(u),s.selectNodeContents=d.startContainer==u&&d.endContainer==u&&0==d.startOffset&&d.endOffset==u.length?function(t){this.nativeRange.selectNodeContents(t),e(this)}:function(t){this.setStart(t,0),this.setEnd(t,l.getEndOffset(t))},d.selectNodeContents(u),d.setEnd(u,3);var f=document.createRange();f.selectNodeContents(u),f.setEnd(u,4),f.setStart(u,2),s.compareBoundaryPoints=-1==d.compareBoundaryPoints(d.START_TO_END,f)&1==d.compareBoundaryPoints(d.END_TO_START,f)?function(t,e){return e=e.nativeRange||e,t==e.START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)},t.util.isHostMethod(d,"createContextualFragment")&&(s.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),r.getBody(document).removeChild(u),d.detach(),f.detach()}(),t.createNativeRange=function(t){return t=t||document,t.createRange()};t.features.implementsTextRange&&(o.rangeToTextRange=function(t){if(t.collapsed){var e=s(new a(t.startContainer,t.startOffset),!0);return e}var i=s(new a(t.startContainer,t.startOffset),!0),n=s(new a(t.endContainer,t.endOffset),!1),o=r.getDocument(t.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",i),o.setEndPoint("EndToEnd",n),o}),o.prototype.getName=function(){return"WrappedRange"},t.WrappedRange=o,t.createRange=function(e){return e=e||document,new o(t.createNativeRange(e))},t.createRangyRange=function(t){return t=t||document,new l(t)},t.createIframeRange=function(e){return t.createRange(r.getIframeDocument(e))},t.createIframeRangyRange=function(e){return t.createRangyRange(r.getIframeDocument(e))},t.addCreateMissingNativeApiListener(function(e){var i=e.document;"undefined"==typeof i.createRange&&(i.createRange=function(){return t.createRange(this)}),i=e=null})}),rangy.createModule("WrappedSelection",function(t,e){function i(t){return(t||window).getSelection()}function n(t){return(t||window).document.selection}function s(t,e,i){var n=i?"end":"start",s=i?"start":"end";t.anchorNode=e[n+"Container"],t.anchorOffset=e[n+"Offset"],t.focusNode=e[s+"Container"],t.focusOffset=e[s+"Offset"]}function o(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function r(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function a(e){var i;return e instanceof T?(i=e._selectionNativeRange,i||(i=t.createNativeRange(C.getDocument(e.startContainer)),i.setEnd(e.endContainer,e.endOffset),i.setStart(e.startContainer,e.startOffset),e._selectionNativeRange=i,e.attachListener("detach",function(){this._selectionNativeRange=null}))):e instanceof A?i=e.nativeRange:t.features.implementsDomRange&&e instanceof C.getWindow(e.startContainer).Range&&(i=e),i}function l(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,i=t.length;i>e;++e)if(!C.isAncestorOf(t[0],t[e]))return!1;return!0}function h(t){var e=t.getNodes();if(!l(e))throw new Error("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return e[0]}function c(t){return!!t&&"undefined"!=typeof t.text}function u(t,e){var i=new A(e);t._ranges=[i],s(t,i,!1),t.rangeCount=1,t.isCollapsed=i.collapsed}function d(e){if(e._ranges.length=0,"None"==e.docSelection.type)r(e);else{var i=e.docSelection.createRange();if(c(i))u(e,i);else{e.rangeCount=i.length;for(var n,o=C.getDocument(i.item(0)),a=0;a<e.rangeCount;++a)n=t.createRange(o),n.selectNode(i.item(a)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,s(e,e._ranges[e.rangeCount-1],!1)}}}function p(t,e){for(var i=t.docSelection.createRange(),n=h(e),s=C.getDocument(i.item(0)),o=C.getBody(s).createControlRange(),r=0,a=i.length;a>r;++r)o.add(i.item(r));try{o.add(n)}catch(l){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),d(t)}function f(t,e,i){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=i,this.refresh()}function m(t,e){for(var i,n=C.getDocument(e[0].startContainer),s=C.getBody(n).createControlRange(),o=0;rangeCount>o;++o){i=h(e[o]);try{s.add(i)}catch(r){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
}}s.select(),d(t)}function g(t,e){if(t.anchorNode&&C.getDocument(t.anchorNode)!==C.getDocument(e))throw new S("WRONG_DOCUMENT_ERR")}function v(t){var e=[],i=new k(t.anchorNode,t.anchorOffset),n=new k(t.focusNode,t.focusOffset),s="function"==typeof t.getName?t.getName():"Selection";if("undefined"!=typeof t.rangeCount)for(var o=0,r=t.rangeCount;r>o;++o)e[o]=T.inspect(t.getRangeAt(o));return"["+s+"(Ranges: "+e.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}t.requireModules(["DomUtil","DomRange","WrappedRange"]),t.config.checkSelectionRanges=!0;var _,y,b="boolean",w="_rangySelection",C=t.dom,x=t.util,T=t.DomRange,A=t.WrappedRange,S=t.DOMException,k=C.DomPosition,D="Control",L=t.util.isHostMethod(window,"getSelection"),M=t.util.isHostObject(document,"selection"),E=M&&(!L||t.config.preferTextRange);E?(_=n,t.isSelectionValid=function(t){var e=(t||window).document,i=e.selection;return"None"!=i.type||C.getDocument(i.createRange().parentElement())==e}):L?(_=i,t.isSelectionValid=function(){return!0}):e.fail("Neither document.selection or window.getSelection() detected."),t.getNativeSelection=_;var N=_(),P=t.createNativeRange(document),O=C.getBody(document),R=x.areHostObjects(N,["anchorNode","focusNode"]&&x.areHostProperties(N,["anchorOffset","focusOffset"]));t.features.selectionHasAnchorAndFocus=R;var I=x.isHostMethod(N,"extend");t.features.selectionHasExtend=I;var B="number"==typeof N.rangeCount;t.features.selectionHasRangeCount=B;var z=!1,U=!0;x.areHostMethods(N,["addRange","getRangeAt","removeAllRanges"])&&"number"==typeof N.rangeCount&&t.features.implementsDomRange&&function(){var t=document.createElement("iframe");O.appendChild(t);var e=C.getIframeDocument(t);e.open(),e.write("<html><head></head><body>12</body></html>"),e.close();var i=C.getIframeWindow(t).getSelection(),n=e.documentElement,s=n.lastChild,o=s.firstChild,r=e.createRange();r.setStart(o,1),r.collapse(!0),i.addRange(r),U=1==i.rangeCount,i.removeAllRanges();var a=r.cloneRange();r.setStart(o,0),a.setEnd(o,2),i.addRange(r),i.addRange(a),z=2==i.rangeCount,r.detach(),a.detach(),O.removeChild(t)}(),t.features.selectionSupportsMultipleRanges=z,t.features.collapsedNonEditableSelectionsSupported=U;var H,F=!1;O&&x.isHostMethod(O,"createControlRange")&&(H=O.createControlRange(),x.areHostProperties(H,["item","add"])&&(F=!0)),t.features.implementsControlRange=F,y=R?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return t.rangeCount?t.getRangeAt(t.rangeCount-1).collapsed:!1};var j;x.isHostMethod(N,"getRangeAt")?j=function(t,e){try{return t.getRangeAt(e)}catch(i){return null}}:R&&(j=function(e){var i=C.getDocument(e.anchorNode),n=t.createRange(i);return n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&(n.setStart(e.focusNode,e.focusOffset),n.setEnd(e.anchorNode,e.anchorOffset)),n}),t.getSelection=function(t){t=t||window;var e=t[w],i=_(t),s=M?n(t):null;return e?(e.nativeSelection=i,e.docSelection=s,e.refresh(t)):(e=new f(i,s,t),t[w]=e),e},t.getIframeSelection=function(e){return t.getSelection(C.getIframeWindow(e))};var $=f.prototype;if(!E&&R&&x.areHostMethods(N,["removeAllRanges","addRange"])){$.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),r(this)};var W=function(e,i){var n=T.getRangeDocument(i),s=t.createRange(n);s.collapseToPoint(i.endContainer,i.endOffset),e.nativeSelection.addRange(a(s)),e.nativeSelection.extend(i.startContainer,i.startOffset),e.refresh()};$.addRange=B?function(e,i){if(F&&M&&this.docSelection.type==D)p(this,e);else if(i&&I)W(this,e);else{var n;if(z?n=this.rangeCount:(this.removeAllRanges(),n=0),this.nativeSelection.addRange(a(e)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==n+1){if(t.config.checkSelectionRanges){var o=j(this.nativeSelection,this.rangeCount-1);o&&!T.rangesEqual(o,e)&&(e=new A(o))}this._ranges[this.rangeCount-1]=e,s(this,e,q(this.nativeSelection)),this.isCollapsed=y(this)}else this.refresh()}}:function(t,e){e&&I?W(this,t):(this.nativeSelection.addRange(a(t)),this.refresh())},$.setRanges=function(t){if(F&&t.length>1)m(this,t);else{this.removeAllRanges();for(var e=0,i=t.length;i>e;++e)this.addRange(t[e])}}}else{if(!(x.isHostMethod(N,"empty")&&x.isHostMethod(P,"select")&&F&&E))return e.fail("No means of selecting a Range or TextRange was found"),!1;$.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=C.getDocument(this.anchorNode);else if(this.docSelection.type==D){var e=this.docSelection.createRange();e.length&&(t=C.getDocument(e.item(0)).body.createTextRange())}if(t){var i=t.body.createTextRange();i.select(),this.docSelection.empty()}}}catch(n){}r(this)},$.addRange=function(t){this.docSelection.type==D?p(this,t):(A.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},$.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?m(this,t):e&&this.addRange(t[0])}}$.getRangeAt=function(t){if(0>t||t>=this.rangeCount)throw new S("INDEX_SIZE_ERR");return this._ranges[t]};var V;if(E)V=function(e){var i;t.isSelectionValid(e.win)?i=e.docSelection.createRange():(i=C.getBody(e.win.document).createTextRange(),i.collapse(!0)),e.docSelection.type==D?d(e):c(i)?u(e,i):r(e)};else if(x.isHostMethod(N,"getRangeAt")&&"number"==typeof N.rangeCount)V=function(e){if(F&&M&&e.docSelection.type==D)d(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var i=0,n=e.rangeCount;n>i;++i)e._ranges[i]=new t.WrappedRange(e.nativeSelection.getRangeAt(i));s(e,e._ranges[e.rangeCount-1],q(e.nativeSelection)),e.isCollapsed=y(e)}else r(e)};else{if(!R||typeof N.isCollapsed!=b||typeof P.collapsed!=b||!t.features.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;V=function(t){var e,i=t.nativeSelection;i.anchorNode?(e=j(i,0),t._ranges=[e],t.rangeCount=1,o(t),t.isCollapsed=y(t)):r(t)}}$.refresh=function(t){var e=t?this._ranges.slice(0):null;if(V(this),t){var i=e.length;if(i!=this._ranges.length)return!1;for(;i--;)if(!T.rangesEqual(e[i],this._ranges[i]))return!1;return!0}};var G=function(t,e){var i=t.getAllRanges(),n=!1;t.removeAllRanges();for(var s=0,o=i.length;o>s;++s)n||e!==i[s]?t.addRange(i[s]):n=!0;t.rangeCount||r(t)};$.removeRange=F?function(t){if(this.docSelection.type==D){for(var e,i=this.docSelection.createRange(),n=h(t),s=C.getDocument(i.item(0)),o=C.getBody(s).createControlRange(),r=!1,a=0,l=i.length;l>a;++a)e=i.item(a),e!==n||r?o.add(i.item(a)):r=!0;o.select(),d(this)}else G(this,t)}:function(t){G(this,t)};var q;!E&&R&&t.features.implementsDomRange?(q=function(t){var e=!1;return t.anchorNode&&(e=1==C.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e},$.isBackwards=function(){return q(this)}):q=$.isBackwards=function(){return!1},$.toString=function(){for(var t=[],e=0,i=this.rangeCount;i>e;++e)t[e]=""+this._ranges[e];return t.join("")},$.collapse=function(e,i){g(this,e);var n=t.createRange(C.getDocument(e));n.collapseToPoint(e,i),this.removeAllRanges(),this.addRange(n),this.isCollapsed=!0},$.collapseToStart=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},$.collapseToEnd=function(){if(!this.rangeCount)throw new S("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},$.selectAllChildren=function(e){g(this,e);var i=t.createRange(C.getDocument(e));i.selectNodeContents(e),this.removeAllRanges(),this.addRange(i)},$.deleteFromDocument=function(){if(F&&M&&this.docSelection.type==D){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var i=this.getAllRanges();this.removeAllRanges();for(var n=0,s=i.length;s>n;++n)i[n].deleteContents();this.addRange(i[s-1])}},$.getAllRanges=function(){return this._ranges.slice(0)},$.setSingleRange=function(t){this.setRanges([t])},$.containsNode=function(t,e){for(var i=0,n=this._ranges.length;n>i;++i)if(this._ranges[i].containsNode(t,e))return!0;return!1},$.toHtml=function(){var t="";if(this.rangeCount){for(var e=T.getRangeDocument(this._ranges[0]).createElement("div"),i=0,n=this._ranges.length;n>i;++i)e.appendChild(this._ranges[i].cloneContents());t=e.innerHTML}return t},$.getName=function(){return"WrappedSelection"},$.inspect=function(){return v(this)},$.detach=function(){this.win[w]=null,this.win=this.anchorNode=this.focusNode=null},f.inspect=v,t.Selection=f,t.selectionPrototype=$,t.addCreateMissingNativeApiListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return t.getSelection(this)}),e=null})});/*
	Base.js, version 1.1a
	Copyright 2006-2010, Dean Edwards
	License: http://www.opensource.org/licenses/mit-license.php
*/
var Base=function(){};if(Base.extend=function(t,e){var i=Base.prototype.extend;Base._prototyping=!0;var n=new this;i.call(n,t),n.base=function(){},delete Base._prototyping;var s=n.constructor,o=n.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==o)this._constructing=!0,s.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||i).call(arguments[0],n)};return o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=n,o.toString=this.toString,o.valueOf=function(t){return"object"==t?o:s.valueOf()},i.call(o,e),"function"==typeof o.init&&o.init(),o},Base.prototype={extend:function(t,e){if(arguments.length>1){var i=this[t];if(i&&"function"==typeof e&&(!i.valueOf||i.valueOf()!=e.valueOf())&&/\bbase\b/.test(e)){var n=e.valueOf();e=function(){var t=this.base||Base.prototype.base;this.base=i;var e=n.apply(this,arguments);return this.base=t,e},e.valueOf=function(t){return"object"==t?e:n},e.toString=Base.toString}this[t]=e}else if(t){var s=Base.prototype.extend;Base._prototyping||"function"==typeof this||(s=this.extend||s);for(var o={toSource:null},r=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=r[a++];)t[l]!=o[l]&&s.call(this,l,t[l]);for(var l in t)o[l]||s.call(this,l,t[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,i){for(var n in t)void 0===this.prototype[n]&&e.call(i,t[n],n,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}}),wysihtml5.browser=function(){function t(t){return(/ipad|iphone|ipod/.test(t)&&t.match(/ os (\d+).+? like mac os x/)||[,0])[1]}var e=navigator.userAgent,i=document.createElement("div"),n=-1!==e.indexOf("MSIE")&&-1===e.indexOf("Opera"),s=-1!==e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),o=-1!==e.indexOf("AppleWebKit/"),r=-1!==e.indexOf("Chrome/"),a=-1!==e.indexOf("Opera/");return{USER_AGENT:e,supported:function(){var e=this.USER_AGENT.toLowerCase(),n="contentEditable"in i,s=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,o=document.querySelector&&document.querySelectorAll,r=this.isIos()&&t(e)<5||-1!==e.indexOf("opera mobi")||-1!==e.indexOf("hpwos/");return n&&s&&o&&!r},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var t=this.USER_AGENT.toLowerCase();return-1!==t.indexOf("webkit")&&-1!==t.indexOf("mobile")},supportsSandboxedIframes:function(){return n},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return!s},hasCurrentStyleProperty:function(){return"currentStyle"in i},insertsLineBreaksOnReturn:function(){return s},supportsPlaceholderAttributeOn:function(t){return"placeholder"in t},supportsEvent:function(t){return"on"+t in i||function(){return i.setAttribute("on"+t,"return;"),"function"==typeof i["on"+t]}()},supportsEventsInIframeCorrectly:function(){return!a},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return o||s},supportsDataTransfer:function(){try{return o&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(t){return!1}},supportsHTML5Tags:function(t){var e=t.createElement("div"),i="<article>foo</article>";return e.innerHTML=i,e.innerHTML.toLowerCase()===i},supportsCommand:function(){var t={formatBlock:n,insertUnorderedList:n||a||o,insertOrderedList:n||a||o},e={insertHTML:s};return function(i,n){var s=t[n];if(!s){try{return i.queryCommandSupported(n)}catch(o){}try{return i.queryCommandEnabled(n)}catch(r){return!!e[n]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return s||a||o},supportsGetAttributeCorrectly:function(){var t=document.createElement("td");return"1"!=t.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return s||n||a},clearsListsInContentEditableCorrectly:function(){return s||n||o},autoScrollsToCaret:function(){return!o},autoClosesUnclosedTags:function(){var t,e,n=i.cloneNode(!1);return n.innerHTML="<p><div></div>",e=n.innerHTML.toLowerCase(),t="<p></p><div></div>"===e||"<p><div></div></p>"===e,this.autoClosesUnclosedTags=function(){return t},t},supportsNativeGetElementsByClassName:function(){return-1!==String(document.getElementsByClassName).indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},supportsClassList:function(){return"classList"in i},needsSpaceAfterLineBreak:function(){return a},supportsSpeechApiOn:function(t){var i=e.match(/Chrome\/(\d+)/)||[,0];return i[1]>=11&&("onwebkitspeechchange"in t||"speech"in t)},crashesWhenDefineProperty:function(t){return n&&("XMLHttpRequest"===t||"XDomainRequest"===t)},doesAsyncFocus:function(){return n},hasProblemsSettingCaretAfterImg:function(){return n},hasUndoInContextMenu:function(){return s||r||a}}}(),wysihtml5.lang.array=function(t){return{contains:function(e){if(t.indexOf)return-1!==t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return!0;return!1},without:function(e){e=wysihtml5.lang.array(e);for(var i=[],n=0,s=t.length;s>n;n++)e.contains(t[n])||i.push(t[n]);return i},get:function(){for(var e=0,i=t.length,n=[];i>e;e++)n.push(t[e]);return n}}},wysihtml5.lang.Dispatcher=Base.extend({observe:function(t,e){return this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e),this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(t,e){this.events=this.events||{};for(var i=this.events[t]||[],n=0;n<i.length;n++)i[n].call(this,e);return this},stopObserving:function(t,e){this.events=this.events||{};var i,n,s=0;if(t){for(i=this.events[t]||[],n=[];s<i.length;s++)i[s]!==e&&e&&n.push(i[s]);this.events[t]=n}else this.events={};return this}}),wysihtml5.lang.object=function(t){return{merge:function(e){for(var i in e)t[i]=e[i];return this},get:function(){return t},clone:function(){var e,i={};for(e in t)i[e]=t[e];return i},isArray:function(){return"[object Array]"===Object.prototype.toString.call(t)}}},function(){var t=/^\s+/,e=/\s+$/;wysihtml5.lang.string=function(i){return i=String(i),{trim:function(){return i.replace(t,"").replace(e,"")},interpolate:function(t){for(var e in t)i=this.replace("#{"+e+"}").by(t[e]);return i},replace:function(t){return{by:function(e){return i.split(t).join(e)}}}}}}(),function(t){function e(t){return o(t)?t:(t===t.ownerDocument.documentElement&&(t=t.ownerDocument.body),r(t))}function i(t){return t.replace(l,function(t,e){var i=(e.match(h)||[])[1]||"",n=u[i];e=e.replace(h,""),e.split(n).length>e.split(i).length&&(e+=i,i="");var s=e,o=e;return e.length>c&&(o=o.substr(0,c)+"..."),"www."===s.substr(0,4)&&(s="http://"+s),'<a href="'+s+'">'+o+"</a>"+i})}function n(t){var e=t._wysihtml5_tempElement;return e||(e=t._wysihtml5_tempElement=t.createElement("div")),e}function s(t){var e=t.parentNode,s=n(e.ownerDocument);for(s.innerHTML="<span></span>"+i(t.data),s.removeChild(s.firstChild);s.firstChild;)e.insertBefore(s.firstChild,t);e.removeChild(t)}function o(t){for(var e;t.parentNode;){if(t=t.parentNode,e=t.nodeName,a.contains(e))return!0;if("body"===e)return!1}return!1}function r(e){if(!a.contains(e.nodeName)){if(e.nodeType===t.TEXT_NODE&&e.data.match(l))return s(e),void 0;for(var i=t.lang.array(e.childNodes).get(),n=i.length,o=0;n>o;o++)r(i[o]);return e}}var a=t.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,h=/([^\w\/\-](,?))$/i,c=100,u={")":"(","]":"[","}":"{"};t.dom.autoLink=e,t.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(t){var e=t.browser.supportsClassList(),i=t.dom;i.addClass=function(t,n){return e?t.classList.add(n):(i.hasClass(t,n)||(t.className+=" "+n),void 0)},i.removeClass=function(t,i){return e?t.classList.remove(i):(t.className=t.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," "),void 0)},i.hasClass=function(t,i){if(e)return t.classList.contains(i);var n=t.className;return n.length>0&&(n==i||new RegExp("(^|\\s)"+i+"(\\s|$)").test(n))}}(wysihtml5),wysihtml5.dom.contains=function(){var t=document.documentElement;return t.contains?function(t,e){return e.nodeType!==wysihtml5.ELEMENT_NODE&&(e=e.parentNode),t!==e&&t.contains(e)}:t.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:void 0}(),wysihtml5.dom.convertToList=function(){function t(t,e){var i=t.createElement("li");return e.appendChild(i),i}function e(t,e){return t.createElement(e)}function i(i,n){if("UL"===i.nodeName||"OL"===i.nodeName||"MENU"===i.nodeName)return i;var s,o,r,a,l,h,c,u,d,p=i.ownerDocument,f=e(p,n),m=i.querySelectorAll("br"),g=m.length;for(d=0;g>d;d++)for(a=m[d];(l=a.parentNode)&&l!==i&&l.lastChild===a;){if("block"===wysihtml5.dom.getStyle("display").from(l)){l.removeChild(a);break}wysihtml5.dom.insert(a).after(a.parentNode)}for(s=wysihtml5.lang.array(i.childNodes).get(),o=s.length,d=0;o>d;d++)u=u||t(p,f),r=s[d],h="block"===wysihtml5.dom.getStyle("display").from(r),c="BR"===r.nodeName,h?(u=u.firstChild?t(p,f):u,u.appendChild(r),u=null):c?u=u.firstChild?null:u:u.appendChild(r);return i.parentNode.replaceChild(f,i),f}return i}(),wysihtml5.dom.copyAttributes=function(t){return{from:function(e){return{to:function(i){for(var n,s=0,o=t.length;o>s;s++)n=t[s],"undefined"!=typeof e[n]&&""!==e[n]&&(i[n]=e[n]);return{andTo:arguments.callee}}}}}},function(t){var e=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],i=function(e){return n(e)?parseInt(t.getStyle("width").from(e),10)<e.offsetWidth:!1},n=function(i){for(var n=0,s=e.length;s>n;n++)if("border-box"===t.getStyle(e[n]).from(i))return e[n]};t.copyStyles=function(n){return{from:function(s){i(s)&&(n=wysihtml5.lang.array(n).without(e));for(var o,r="",a=n.length,l=0;a>l;l++)o=n[l],r+=o+":"+t.getStyle(o).from(s)+";";return{to:function(e){return t.setStyles(r).on(e),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(t){t.dom.delegate=function(e,i,n,s){return t.dom.observe(e,n,function(n){for(var o=n.target,r=t.lang.array(e.querySelectorAll(i));o&&o!==e;){if(r.contains(o)){s.call(o,n);break}o=o.parentNode}})}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var t=function(t,e){var i=e.createElement("div");i.style.display="none",e.body.appendChild(i);try{i.innerHTML=t}catch(n){}return e.body.removeChild(i),i},e=function(t){if(!t._wysihtml5_supportsHTML5Tags){for(var e=0,n=i.length;n>e;e++)t.createElement(i[e]);t._wysihtml5_supportsHTML5Tags=!0}},i=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(i,n){n=n||document;var s;return"object"==typeof i&&i.nodeType?(s=n.createElement("div"),s.appendChild(i)):wysihtml5.browser.supportsHTML5Tags(n)?(s=n.createElement("div"),s.innerHTML=i):(e(n),s=t(i,n)),s}}(),wysihtml5.dom.getParentElement=function(){function t(t,e){return e&&e.length?"string"==typeof e?t===e:wysihtml5.lang.array(e).contains(t):!0}function e(t){return t.nodeType===wysihtml5.ELEMENT_NODE}function i(t,e,i){var n=(t.className||"").match(i)||[];return e?n[n.length-1]===e:!!n.length}function n(e,i,n){for(;n--&&e&&"BODY"!==e.nodeName;){if(t(e.nodeName,i))return e;e=e.parentNode}return null}function s(n,s,o,r,a){for(;a--&&n&&"BODY"!==n.nodeName;){if(e(n)&&t(n.nodeName,s)&&i(n,o,r))return n;n=n.parentNode}return null}return function(t,e,i){return i=i||50,e.className||e.classRegExp?s(t,e.nodeName,e.className,e.classRegExp,i):n(t,e.nodeName,i)}}(),wysihtml5.dom.getStyle=function(){function t(t){return t.replace(i,function(t){return t.charAt(1).toUpperCase()})}var e={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},i=/\-[a-z]/g;return function(i){return{from:function(n){if(n.nodeType===wysihtml5.ELEMENT_NODE){var s=n.ownerDocument,o=e[i]||t(i),r=n.style,a=n.currentStyle,l=r[o];if(l)return l;if(a)try{return a[o]}catch(h){}var c,u,d=s.defaultView||s.parentWindow,p=("height"===i||"width"===i)&&"TEXTAREA"===n.nodeName;return d.getComputedStyle?(p&&(c=r.overflow,r.overflow="hidden"),u=d.getComputedStyle(n,null).getPropertyValue(i),p&&(r.overflow=c||""),u):void 0}}}}}(),wysihtml5.dom.hasElementWithTagName=function(){function t(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=i++)}var e={},i=1;return function(i,n){var s=t(i)+":"+n,o=e[s];return o||(o=e[s]=i.getElementsByTagName(n)),o.length>0}}(),function(t){function e(t){return t._wysihtml5_identifier||(t._wysihtml5_identifier=n++)}var i={},n=1;t.dom.hasElementWithClassName=function(n,s){if(!t.browser.supportsNativeGetElementsByClassName())return!!n.querySelector("."+s);var o=e(n)+":"+s,r=i[o];return r||(r=i[o]=n.getElementsByClassName(s)),r.length>0}}(wysihtml5),wysihtml5.dom.insert=function(t){return{after:function(e){e.parentNode.insertBefore(t,e.nextSibling)},before:function(e){e.parentNode.insertBefore(t,e)},into:function(e){e.appendChild(t)}}},wysihtml5.dom.insertCSS=function(t){return t=t.join("\n"),{into:function(e){var i=e.head||e.getElementsByTagName("head")[0],n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),i&&i.appendChild(n)}}},wysihtml5.dom.observe=function(t,e,i){e="string"==typeof e?[e]:e;for(var n,s,o=0,r=e.length;r>o;o++)s=e[o],t.addEventListener?t.addEventListener(s,i,!1):(n=function(e){"target"in e||(e.target=e.srcElement),e.preventDefault=e.preventDefault||function(){this.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){this.cancelBubble=!0},i.call(t,e)},t.attachEvent("on"+s,n));return{stop:function(){for(var s,o=0,r=e.length;r>o;o++)s=e[o],t.removeEventListener?t.removeEventListener(s,i,!1):t.detachEvent("on"+s,n)}}},wysihtml5.dom.parse=function(){function t(t,i,n,s){wysihtml5.lang.object(u).merge(c).merge(i).get(),n=n||t.ownerDocument||document;var o,r,a,l=n.createDocumentFragment(),h="string"==typeof t;for(o=h?wysihtml5.dom.getAsDom(t,n):t;o.firstChild;)a=o.firstChild,o.removeChild(a),r=e(a,s),r&&l.appendChild(r);return o.innerHTML="",o.appendChild(l),h?wysihtml5.quirks.getCorrectInnerHTML(o):o}function e(t,i){var n,s=t.nodeType,o=t.childNodes,r=o.length,h=a[s],c=0;if(n=h&&h(t),!n)return null;for(c=0;r>c;c++)newChild=e(o[c],i),newChild&&n.appendChild(newChild);return i&&n.childNodes.length<=1&&n.nodeName.toLowerCase()===l&&!n.attributes.length?n.firstChild:n}function i(t){var e,i,s=u.tags,o=t.nodeName.toLowerCase(),r=t.scopeName;if(t._wysihtml5)return null;if(t._wysihtml5=1,"wysihtml5-temp"===t.className)return null;if(r&&"HTML"!=r&&(o=r+":"+o),"outerHTML"in t&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==t.nodeName||"</p>"===t.outerHTML.slice(-4).toLowerCase()||(o="div")),o in s){if(e=s[o],!e||e.remove)return null;e="string"==typeof e?{rename_tag:e}:e}else{if(!t.firstChild)return null;e={rename_tag:l}}return i=t.ownerDocument.createElement(e.rename_tag||o),n(t,i,e),t=null,i}function n(t,e,i){var n,o,r,a,l,c,d,m={},g=i.set_class,v=i.add_class,_=i.set_attributes,y=i.check_attributes,b=u.classes,w=0,C=[],x=[],T=[],A=[];if(_&&(m=wysihtml5.lang.object(_).clone()),y)for(l in y)d=p[y[l]],d&&(c=d(s(t,l)),"string"==typeof c&&(m[l]=c));if(g&&C.push(g),v)for(l in v)d=f[v[l]],d&&(a=d(s(t,l)),"string"==typeof a&&C.push(a));for(b["_wysihtml5-temp-placeholder"]=1,A=t.getAttribute("class"),A&&(C=C.concat(A.split(h))),n=C.length;n>w;w++)r=C[w],b[r]&&x.push(r);for(o=x.length;o--;)r=x[o],wysihtml5.lang.array(T).contains(r)||T.unshift(r);T.length&&(m["class"]=T.join(" "));for(l in m)try{e.setAttribute(l,m[l])}catch(S){}m.src&&("undefined"!=typeof m.width&&e.setAttribute("width",m.width),"undefined"!=typeof m.height&&e.setAttribute("height",m.height))}function s(t,e){e=e.toLowerCase();var i=t.nodeName;if("IMG"==i&&"src"==e&&o(t)===!0)return t.src;if(d&&"outerHTML"in t){var n=t.outerHTML.toLowerCase(),s=-1!=n.indexOf(" "+e+"=");return s?t.getAttribute(e):null}return t.getAttribute(e)}function o(t){try{return t.complete&&!t.mozMatchesSelector(":-moz-broken")}catch(e){if(t.complete&&"complete"===t.readyState)return!0}}function r(t){return t.ownerDocument.createTextNode(t.data)}var a={1:i,3:r},l="span",h=/\s+/,c={tags:{},classes:{}},u={},d=!wysihtml5.browser.supportsGetAttributeCorrectly(),p={url:function(){var t=/^https?:\/\//i;return function(e){return e&&e.match(t)?e.replace(t,function(t){return t.toLowerCase()}):null}}(),alt:function(){var t=/[^ a-z0-9_\-]/gi;return function(e){return e?e.replace(t,""):""}}(),numbers:function(){var t=/\D/g;return function(e){return e=(e||"").replace(t,""),e||null}}()},f={align_img:function(){var t={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(e){return t[String(e).toLowerCase()]}}(),align_text:function(){var t={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(e){return t[String(e).toLowerCase()]}}(),clear_br:function(){var t={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(e){return t[String(e).toLowerCase()]}}(),size_font:function(){var t={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(e){return t[String(e).charAt(0)]}}()};return t}(),wysihtml5.dom.removeEmptyTextNodes=function(t){for(var e,i=wysihtml5.lang.array(t.childNodes).get(),n=i.length,s=0;n>s;s++)e=i[s],e.nodeType===wysihtml5.TEXT_NODE&&""===e.data&&e.parentNode.removeChild(e)},wysihtml5.dom.renameElement=function(t,e){for(var i,n=t.ownerDocument.createElement(e);i=t.firstChild;)n.appendChild(i);return wysihtml5.dom.copyAttributes(["align","className"]).from(t).to(n),t.parentNode.replaceChild(n,t),n},wysihtml5.dom.replaceWithChildNodes=function(t){if(t.parentNode){if(!t.firstChild)return t.parentNode.removeChild(t),void 0;for(var e=t.ownerDocument.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);t.parentNode.replaceChild(e,t),t=e=null}},function(t){function e(e){return"block"===t.getStyle("display").from(e)}function i(t){return"BR"===t.nodeName}function n(t){var e=t.ownerDocument.createElement("br");t.appendChild(e)}function s(t){if("MENU"===t.nodeName||"UL"===t.nodeName||"OL"===t.nodeName){var s,o,r,a,l,h=t.ownerDocument,c=h.createDocumentFragment(),u=t.previousElementSibling||t.previousSibling;for(u&&!e(u)&&n(c);l=t.firstChild;){for(o=l.lastChild;s=l.firstChild;)r=s===o,a=r&&!e(s)&&!i(s),c.appendChild(s),a&&n(c);l.parentNode.removeChild(l)}t.parentNode.replaceChild(c,t)}}t.resolveList=s}(wysihtml5.dom),function(t){var e=document,i=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],n=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],s=["referrer","write","open","close"];t.dom.Sandbox=Base.extend({constructor:function(e,i){this.callback=e||t.EMPTY_FUNCTION,this.config=t.lang.object({}).merge(i).get(),this.iframe=this._createIframe()},insertInto:function(t){"string"==typeof t&&(t=e.getElementById(t)),t.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var t=this.getIframe();t.parentNode.removeChild(t)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var i=this,n=e.createElement("iframe");return n.className="wysihtml5-sandbox",t.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(n),t.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(n.src="javascript:'<html></html>'"),n.onload=function(){n.onreadystatechange=n.onload=null,i._onLoadIframe(n)},n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&(n.onreadystatechange=n.onload=null,i._onLoadIframe(n))},n},_onLoadIframe:function(o){if(t.dom.contains(e.documentElement,o)){var r=this,a=o.contentWindow,l=o.contentWindow.document,h=e.characterSet||e.charset||"utf-8",c=this._getHtml({charset:h,stylesheets:this.config.stylesheets});if(l.open("text/html","replace"),l.write(c),l.close(),this.getWindow=function(){return o.contentWindow},this.getDocument=function(){return o.contentWindow.document},a.onerror=function(t,e,i){throw new Error("wysihtml5.Sandbox: "+t,e,i)},!t.browser.supportsSandboxedIframes()){var u,d;for(u=0,d=i.length;d>u;u++)this._unset(a,i[u]);for(u=0,d=n.length;d>u;u++)this._unset(a,n[u],t.EMPTY_FUNCTION);for(u=0,d=s.length;d>u;u++)this._unset(l,s[u]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){r.callback(r)},0)}},_getHtml:function(e){var i,n=e.stylesheets,s="",o=0;if(n="string"==typeof n?[n]:n)for(i=n.length;i>o;o++)s+='<link rel="stylesheet" href="'+n[o]+'">';return e.stylesheets=s,t.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(e)},_unset:function(e,i,n,s){try{e[i]=n}catch(o){}try{e.__defineGetter__(i,function(){return n})}catch(o){}if(s)try{e.__defineSetter__(i,function(){})}catch(o){}if(!t.browser.crashesWhenDefineProperty(i))try{var r={get:function(){return n}};s&&(r.set=function(){}),Object.defineProperty(e,i,r)}catch(o){}}})}(wysihtml5),function(){var t={className:"class"};wysihtml5.dom.setAttributes=function(e){return{on:function(i){for(var n in e)i.setAttribute(t[n]||n,e[n])}}}}(),wysihtml5.dom.setStyles=function(t){return{on:function(e){var i=e.style;if("string"==typeof t)return i.cssText+=";"+t,void 0;for(var n in t)"float"===n?(i.cssFloat=t[n],i.styleFloat=t[n]):i[n]=t[n]}}},function(t){t.simulatePlaceholder=function(e,i,n){var s="placeholder",o=function(){i.hasPlaceholderSet()&&i.clear(),t.removeClass(i.element,s)},r=function(){i.isEmpty()&&(i.setValue(n),t.addClass(i.element,s))};e.observe("set_placeholder",r).observe("unset_placeholder",o).observe("focus:composer",o).observe("paste:composer",o).observe("blur:composer",r),r()}}(wysihtml5.dom),function(t){var e=document.documentElement;"textContent"in e?(t.setTextContent=function(t,e){t.textContent=e},t.getTextContent=function(t){return t.textContent}):"innerText"in e?(t.setTextContent=function(t,e){t.innerText=e},t.getTextContent=function(t){return t.innerText}):(t.setTextContent=function(t,e){t.nodeValue=e},t.getTextContent=function(t){return t.nodeValue})}(wysihtml5.dom),wysihtml5.quirks.cleanPastedHTML=function(){function t(t,i,n){i=i||e,n=n||t.ownerDocument||document;var s,o,r,a,l,h="string"==typeof t,c=0;s=h?wysihtml5.dom.getAsDom(t,n):t;for(l in i)for(r=s.querySelectorAll(l),o=i[l],a=r.length;a>c;c++)o(r[c]);return r=t=i=null,h?s.innerHTML:s}var e={"a u":wysihtml5.dom.replaceWithChildNodes};return t}(),function(t){var e=t.dom;t.quirks.ensureProperClearing=function(){var t=function(){var t=this;setTimeout(function(){var e=t.innerHTML.toLowerCase();("<p>&nbsp;</p>"==e||"<p>&nbsp;</p><p>&nbsp;</p>"==e)&&(t.innerHTML="")},0)};return function(i){e.observe(i.element,["cut","keydown"],t)}}(),t.quirks.ensureProperClearingOfLists=function(){var i=["OL","UL","MENU"],n=function(n,s){if(s.firstChild&&t.lang.array(i).contains(s.firstChild.nodeName)){var o=e.getParentElement(n,{nodeName:i});if(o){var r=o==s.firstChild;if(r){var a=o.childNodes.length<=1;if(a){var l=o.firstChild?""===o.firstChild.innerHTML:!0;l&&o.parentNode.removeChild(o)}}}}};return function(i){e.observe(i.element,"keydown",function(e){if(e.keyCode===t.BACKSPACE_KEY){var s=i.selection.getSelectedNode();n(s,i.element)}})}}()}(wysihtml5),function(t){var e="%7E";t.quirks.getCorrectInnerHTML=function(i){var n=i.innerHTML;if(-1===n.indexOf(e))return n;var s,o,r,a,l=i.querySelectorAll("[href*='~'], [src*='~']");for(a=0,r=l.length;r>a;a++)s=l[a].href||l[a].src,o=t.lang.string(s).replace("~").by(e),n=t.lang.string(n).replace(o).by(s);return n}}(wysihtml5),function(t){var e=t.dom,i=["LI","P","H1","H2","H3","H4","H5","H6"],n=["UL","OL","MENU"];t.quirks.insertLineBreakOnReturn=function(s){function o(i){var n=e.getParentElement(i,{nodeName:["P","DIV"]},2);if(n){var o=document.createTextNode(t.INVISIBLE_SPACE);e.insert(o).before(n),e.replaceWithChildNodes(n),s.selection.selectNode(o)}}function r(r){var a=r.keyCode;if(!(r.shiftKey||a!==t.ENTER_KEY&&a!==t.BACKSPACE_KEY)){var l=(r.target,s.selection.getSelectedNode()),h=e.getParentElement(l,{nodeName:i},4);return h?("LI"!==h.nodeName||a!==t.ENTER_KEY&&a!==t.BACKSPACE_KEY?h.nodeName.match(/H[1-6]/)&&a===t.ENTER_KEY&&setTimeout(function(){o(s.selection.getSelectedNode())},0):setTimeout(function(){var t,i=s.selection.getSelectedNode();i&&(t=e.getParentElement(i,{nodeName:n},2),t||o(i))},0),void 0):(a!==t.ENTER_KEY||t.browser.insertsLineBreaksOnReturn()||(s.commands.exec("insertLineBreak"),r.preventDefault()),void 0)}}e.observe(s.element.ownerDocument,"keydown",r)}}(wysihtml5),function(t){var e="wysihtml5-quirks-redraw";t.quirks.redraw=function(i){t.dom.addClass(i,e),t.dom.removeClass(i,e);try{var n=i.ownerDocument;n.execCommand("italic",!1,null),n.execCommand("italic",!1,null)}catch(s){}}}(wysihtml5),function(t){function e(t){var e=0;if(t.parentNode)do e+=t.offsetTop||0,t=t.offsetParent;while(t);return e}var i=t.dom;t.Selection=Base.extend({constructor:function(t){window.rangy.init(),this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},getBookmark:function(){var t=this.getRange();return t&&t.cloneRange()},setBookmark:function(t){t&&this.setSelection(t)},setBefore:function(t){var e=rangy.createRange(this.doc);return e.setStartBefore(t),e.setEndBefore(t),this.setSelection(e)},setAfter:function(t){var e=rangy.createRange(this.doc);return e.setStartAfter(t),e.setEndAfter(t),this.setSelection(e)},selectNode:function(e){var n=rangy.createRange(this.doc),s=e.nodeType===t.ELEMENT_NODE,o="canHaveHTML"in e?e.canHaveHTML:"IMG"!==e.nodeName,r=s?e.innerHTML:e.data,a=""===r||r===t.INVISIBLE_SPACE,l=i.getStyle("display").from(e),h="block"===l||"list-item"===l;if(a&&s&&o)try{e.innerHTML=t.INVISIBLE_SPACE}catch(c){}o?n.selectNodeContents(e):n.selectNode(e),o&&a&&s?n.collapse(h):o&&a&&(n.setStartAfter(e),n.setEndAfter(e)),this.setSelection(n)},getSelectedNode:function(t){var e,i;return t&&this.doc.selection&&"Control"===this.doc.selection.type&&(i=this.doc.selection.createRange(),i&&i.length)?i.item(0):(e=this.getSelection(this.doc),e.focusNode===e.anchorNode?e.focusNode:(i=this.getRange(this.doc),i?i.commonAncestorContainer:this.doc.body))},executeAndRestore:function(e,i){var n,s=this.doc.body,o=i&&s.scrollTop,r=i&&s.scrollLeft,a="_wysihtml5-temp-placeholder",l='<span class="'+a+'">'+t.INVISIBLE_SPACE+"</span>",h=this.getRange(this.doc);if(!h)return e(s,s),void 0;var c=h.createContextualFragment(l);h.insertNode(c);try{e(h.startContainer,h.endContainer)}catch(u){setTimeout(function(){throw u},0)}caretPlaceholder=this.doc.querySelector("."+a),caretPlaceholder?(n=rangy.createRange(this.doc),n.selectNode(caretPlaceholder),n.deleteContents(),this.setSelection(n)):s.focus(),i&&(s.scrollTop=o,s.scrollLeft=r);try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(d){}},executeAndRestoreSimple:function(t){var e,i,n,s,o,r=this.getRange(),a=this.doc.body;if(!r)return t(a,a),void 0;s=r.getNodes([3]),i=s[0]||r.startContainer,n=s[s.length-1]||r.endContainer,o={collapsed:r.collapsed,startContainer:i,startOffset:i===r.startContainer?r.startOffset:0,endContainer:n,endOffset:n===r.endContainer?r.endOffset:n.length};try{t(r.startContainer,r.endContainer)}catch(l){setTimeout(function(){throw l},0)}e=rangy.createRange(this.doc);try{e.setStart(o.startContainer,o.startOffset)}catch(h){}try{e.setEnd(o.endContainer,o.endOffset)}catch(c){}try{this.setSelection(e)}catch(u){}},insertHTML:function(t){var e=rangy.createRange(this.doc),i=e.createContextualFragment(t),n=i.lastChild;this.insertNode(i),n&&this.setAfter(n)},insertNode:function(t){var e=this.getRange();e&&e.insertNode(t)},surround:function(t){var e=this.getRange();if(e)try{e.surroundContents(t),this.selectNode(t)}catch(i){t.appendChild(e.extractContents()),e.insertNode(t)}},scrollIntoView:function(){var i,n=this.doc,s=n.documentElement.scrollHeight>n.documentElement.offsetHeight,o=n._wysihtml5ScrollIntoViewElement=n._wysihtml5ScrollIntoViewElement||function(){var e=n.createElement("span");return e.innerHTML=t.INVISIBLE_SPACE,e}();s&&(this.insertNode(o),i=e(o),o.parentNode.removeChild(o),i>n.body.scrollTop&&(n.body.scrollTop=i))},selectLine:function(){t.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var t=this.doc.defaultView,e=t.getSelection();e.modify("extend","left","lineboundary"),e.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var t,e,i,n,s,o=this.doc.selection.createRange(),r=o.boundingTop,a=(o.boundingHeight,this.doc.body.scrollWidth);if(o.moveToPoint){for(0===r&&(i=this.doc.createElement("span"),this.insertNode(i),r=i.offsetTop,i.parentNode.removeChild(i)),r+=1,n=-10;a>n;n+=2)try{o.moveToPoint(n,r);break}catch(l){}for(t=r,e=this.doc.selection.createRange(),s=a;s>=0;s--)try{e.moveToPoint(s,t);break}catch(h){}o.setEndPoint("EndToEnd",e),o.select()}},getText:function(){var t=this.getSelection();return t?t.toString():""},getNodes:function(t,e){var i=this.getRange();return i?i.getNodes([t],e):[]},getRange:function(){var t=this.getSelection();return t&&t.rangeCount&&t.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(t){var e=this.doc.defaultView||this.doc.parentWindow,i=rangy.getSelection(e);return i.setSingleRange(t)}})}(wysihtml5),function(t,e){function i(t,e,i){if(!t.className)return!1;var n=t.className.match(i)||[];return n[n.length-1]===e}function n(t,e,i){t.className?(s(t,i),t.className+=" "+e):t.className=e}function s(t,e){t.className&&(t.className=t.className.replace(e,""))}function o(t,e){return t.className.replace(p," ")==e.className.replace(p," ")}function r(t){for(var e=t.parentNode;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}function a(t,e){if(t.attributes.length!=e.attributes.length)return!1;for(var i,n,s,o=0,r=t.attributes.length;r>o;++o)if(i=t.attributes[o],s=i.name,"class"!=s){if(n=e.attributes.getNamedItem(s),i.specified!=n.specified)return!1;if(i.specified&&i.nodeValue!==n.nodeValue)return!1}return!0}function l(t,i){return e.dom.isCharacterDataNode(t)?0==i?!!t.previousSibling:i==t.length?!!t.nextSibling:!0:i>0&&i<t.childNodes.length}function h(t,i,n){var s;if(e.dom.isCharacterDataNode(i)&&(0==n?(n=e.dom.getNodeIndex(i),i=i.parentNode):n==i.length?(n=e.dom.getNodeIndex(i)+1,i=i.parentNode):s=e.dom.splitDataNode(i,n)),!s){s=i.cloneNode(!1),s.id&&s.removeAttribute("id");for(var o;o=i.childNodes[n];)s.appendChild(o);e.dom.insertAfter(s,i)}return i==t?s:h(t,s.parentNode,e.dom.getNodeIndex(s))}function c(e){this.isElementMerge=e.nodeType==t.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?e.lastChild:e,this.textNodes=[this.firstTextNode]}function u(t,e,i,n){this.tagNames=t||[d],this.cssClass=e||"",this.similarClassRegExp=i,this.normalize=n,this.applyToAnyTagName=!1}var d="span",p=/\s+/g;c.prototype={doMerge:function(){for(var t,e,i,n=[],s=0,o=this.textNodes.length;o>s;++s)t=this.textNodes[s],e=t.parentNode,n[s]=t.data,s&&(e.removeChild(t),e.hasChildNodes()||e.parentNode.removeChild(e));return this.firstTextNode.data=i=n.join(""),i},getLength:function(){for(var t=this.textNodes.length,e=0;t--;)e+=this.textNodes[t].length;return e},toString:function(){for(var t=[],e=0,i=this.textNodes.length;i>e;++e)t[e]="'"+this.textNodes[e].data+"'";return"[Merge("+t.join(",")+")]"}},u.prototype={getAncestorWithClass:function(n){for(var s;n;){if(s=this.cssClass?i(n,this.cssClass,this.similarClassRegExp):!0,n.nodeType==t.ELEMENT_NODE&&e.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&s)return n;n=n.parentNode}return!1},postApply:function(t,e){for(var i,n,s,o=t[0],r=t[t.length-1],a=[],l=o,h=r,u=0,d=r.length,p=0,f=t.length;f>p;++p)n=t[p],s=this.getAdjacentMergeableTextNode(n.parentNode,!1),s?(i||(i=new c(s),a.push(i)),i.textNodes.push(n),n===o&&(l=i.firstTextNode,u=l.length),n===r&&(h=i.firstTextNode,d=i.getLength())):i=null;
var m=this.getAdjacentMergeableTextNode(r.parentNode,!0);if(m&&(i||(i=new c(r),a.push(i)),i.textNodes.push(m)),a.length){for(p=0,f=a.length;f>p;++p)a[p].doMerge();e.setStart(l,u),e.setEnd(h,d)}},getAdjacentMergeableTextNode:function(e,i){var n,s=e.nodeType==t.TEXT_NODE,o=s?e.parentNode:e,r=i?"nextSibling":"previousSibling";if(s){if(n=e[r],n&&n.nodeType==t.TEXT_NODE)return n}else if(n=o[r],n&&this.areElementsMergeable(e,n))return n[i?"firstChild":"lastChild"];return null},areElementsMergeable:function(t,i){return e.dom.arrayContains(this.tagNames,(t.tagName||"").toLowerCase())&&e.dom.arrayContains(this.tagNames,(i.tagName||"").toLowerCase())&&o(t,i)&&a(t,i)},createContainer:function(t){var e=t.createElement(this.tagNames[0]);return this.cssClass&&(e.className=this.cssClass),e},applyToTextNode:function(t){var i=t.parentNode;if(1==i.childNodes.length&&e.dom.arrayContains(this.tagNames,i.tagName.toLowerCase()))this.cssClass&&n(i,this.cssClass,this.similarClassRegExp);else{var s=this.createContainer(e.dom.getDocument(t));t.parentNode.insertBefore(s,t),s.appendChild(t)}},isRemovable:function(i){return e.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&t.lang.string(i.className).trim()==this.cssClass},undoToTextNode:function(t,e,i){if(!e.containsNode(i)){var n=e.cloneRange();n.selectNode(i),n.isPointInRange(e.endContainer,e.endOffset)&&l(e.endContainer,e.endOffset)&&(h(i,e.endContainer,e.endOffset),e.setEndAfter(i)),n.isPointInRange(e.startContainer,e.startOffset)&&l(e.startContainer,e.startOffset)&&(i=h(i,e.startContainer,e.startOffset))}this.similarClassRegExp&&s(i,this.similarClassRegExp),this.isRemovable(i)&&r(i)},applyToRange:function(e){var i=e.getNodes([t.TEXT_NODE]);if(!i.length)try{var n=this.createContainer(e.endContainer.ownerDocument);return e.surroundContents(n),this.selectNode(e,n),void 0}catch(s){}if(e.splitBoundaries(),i=e.getNodes([t.TEXT_NODE]),i.length){for(var o,r=0,a=i.length;a>r;++r)o=i[r],this.getAncestorWithClass(o)||this.applyToTextNode(o);e.setStart(i[0],0),o=i[i.length-1],e.setEnd(o,o.length),this.normalize&&this.postApply(i,e)}},undoToRange:function(e){var i,n,s=e.getNodes([t.TEXT_NODE]);if(s.length)e.splitBoundaries(),s=e.getNodes([t.TEXT_NODE]);else{var o=e.endContainer.ownerDocument,r=o.createTextNode(t.INVISIBLE_SPACE);e.insertNode(r),e.selectNode(r),s=[r]}for(var a=0,l=s.length;l>a;++a)i=s[a],n=this.getAncestorWithClass(i),n&&this.undoToTextNode(i,e,n);1==l?this.selectNode(e,s[0]):(e.setStart(s[0],0),i=s[s.length-1],e.setEnd(i,i.length),this.normalize&&this.postApply(s,e))},selectNode:function(e,i){var n=i.nodeType===t.ELEMENT_NODE,s="canHaveHTML"in i?i.canHaveHTML:!0,o=n?i.innerHTML:i.data,r=""===o||o===t.INVISIBLE_SPACE;if(r&&n&&s)try{i.innerHTML=t.INVISIBLE_SPACE}catch(a){}e.selectNodeContents(i),r&&n?e.collapse(!1):r&&(e.setStartAfter(i),e.setEndAfter(i))},getTextSelectedByRange:function(t,e){var i=e.cloneRange();i.selectNodeContents(t);var n=i.intersection(e),s=n?n.toString():"";return i.detach(),s},isAppliedToRange:function(e){var i,n=[],s=e.getNodes([t.TEXT_NODE]);if(!s.length)return i=this.getAncestorWithClass(e.startContainer),i?[i]:!1;for(var o,r=0,a=s.length;a>r;++r){if(o=this.getTextSelectedByRange(s[r],e),i=this.getAncestorWithClass(s[r]),""!=o&&!i)return!1;n.push(i)}return n},toggleRange:function(t){this.isAppliedToRange(t)?this.undoToRange(t):this.applyToRange(t)}},t.selection.HTMLApplier=u}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.doc=this.composer.doc},support:function(t){return wysihtml5.browser.supportsCommand(this.doc,t)},exec:function(t,e){var i=wysihtml5.commands[t],n=wysihtml5.lang.array(arguments).get(),s=i&&i.exec,o=null;if(this.editor.fire("beforecommand:composer"),s)n.unshift(this.composer),o=s.apply(i,n);else try{o=this.doc.execCommand(t,!1,e)}catch(r){}return this.editor.fire("aftercommand:composer"),o},state:function(t){var e=wysihtml5.commands[t],i=wysihtml5.lang.array(arguments).get(),n=e&&e.state;if(n)return i.unshift(this.composer),n.apply(e,i);try{return this.doc.queryCommandState(t)}catch(s){return!1}},value:function(t){var e=wysihtml5.commands[t],i=e&&e.value;if(i)return i.call(e,this.composer,t);try{return this.doc.queryCommandValue(t)}catch(n){return null}}}),function(t){var e;t.commands.bold={exec:function(e,i){return t.commands.formatInline.exec(e,i,"b")},state:function(e,i){return t.commands.formatInline.state(e,i,"b")},value:function(){return e}}}(wysihtml5),function(t){function e(t,e){for(var i,n,s,r=e.length,a=0;r>a;a++)i=e[a],n=o.getParentElement(i,{nodeName:"code"}),s=o.getTextContent(i),s.match(o.autoLink.URL_REG_EXP)&&!n?n=o.renameElement(i,"code"):o.replaceWithChildNodes(i)}function i(e,i){var r,a,l,h,c,u,d,p,f,m=e.doc,g="_wysihtml5-temp-"+ +new Date,v=/non-matching-class/g,_=0;for(t.commands.formatInline.exec(e,n,s,g,v),a=m.querySelectorAll(s+"."+g),r=a.length;r>_;_++){l=a[_],l.removeAttribute("class");for(f in i)l.setAttribute(f,i[f])}u=l,1===r&&(d=o.getTextContent(l),h=!!l.querySelector("*"),c=""===d||d===t.INVISIBLE_SPACE,!h&&c&&(o.setTextContent(l,i.text||l.href),p=m.createTextNode(" "),e.selection.setAfter(l),e.selection.insertNode(p),u=p)),e.selection.setAfter(u)}var n,s="A",o=t.dom;t.commands.createLink={exec:function(t,n,s){var o=this.state(t,n);o?t.selection.executeAndRestore(function(){e(t,o)}):(s="object"==typeof s?s:{href:s},i(t,s))},state:function(e,i){return t.commands.formatInline.state(e,i,"A")},value:function(){return n}}}(wysihtml5),function(t){var e,i=/wysiwyg-font-size-[a-z\-]+/g;t.commands.fontSize={exec:function(e,n,s){return t.commands.formatInline.exec(e,n,"span","wysiwyg-font-size-"+s,i)},state:function(e,n,s){return t.commands.formatInline.state(e,n,"span","wysiwyg-font-size-"+s,i)},value:function(){return e}}}(wysihtml5),function(t){var e,i=/wysiwyg-color-[a-z]+/g;t.commands.foreColor={exec:function(e,n,s){return t.commands.formatInline.exec(e,n,"span","wysiwyg-color-"+s,i)},state:function(e,n,s){return t.commands.formatInline.state(e,n,"span","wysiwyg-color-"+s,i)},value:function(){return e}}}(wysihtml5),function(t){function e(t,e,n){t.className?(i(t,n),t.className+=" "+e):t.className=e}function i(t,e){t.className=t.className.replace(e,"")}function n(e){return e.nodeType===t.TEXT_NODE&&!t.lang.string(e.data).trim()}function s(t){for(var e=t.previousSibling;e&&n(e);)e=e.previousSibling;return e}function o(t){for(var e=t.nextSibling;e&&n(e);)e=e.nextSibling;return e}function r(t){var e=t.ownerDocument,i=o(t),n=s(t);i&&!c(i)&&t.parentNode.insertBefore(e.createElement("br"),i),n&&!c(n)&&t.parentNode.insertBefore(e.createElement("br"),t)}function a(t){var e=o(t),i=s(t);e&&h(e)&&e.parentNode.removeChild(e),i&&h(i)&&i.parentNode.removeChild(i)}function l(t){var e=t.lastChild;e&&h(e)&&e.parentNode.removeChild(e)}function h(t){return"BR"===t.nodeName}function c(t){return h(t)?!0:"block"===m.getStyle("display").from(t)?!0:!1}function u(e,i,n,s){if(s)var o=m.observe(e,"DOMNodeInserted",function(e){var i,n=e.target;n.nodeType===t.ELEMENT_NODE&&(i=m.getStyle("display").from(n),"inline"!==i.substr(0,6)&&(n.className+=" "+s))});e.execCommand(i,!1,n),o&&o.stop()}function d(t,e){t.selection.selectLine(),t.selection.surround(e),a(e),l(e),t.selection.selectNode(e)}function p(e){return!!t.lang.string(e.className).trim()}var f,m=t.dom,g="DIV",v=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",g];t.commands.formatBlock={exec:function(n,s,o,a,l){var h,c=n.doc,f=this.state(n,s,o,a,l);return o="string"==typeof o?o.toUpperCase():o,f?(n.selection.executeAndRestoreSimple(function(){l&&i(f,l);var t=p(f);t||f.nodeName!==(o||g)?t&&m.renameElement(f,g):(r(f),m.replaceWithChildNodes(f))}),void 0):(null===o||t.lang.array(v).contains(o))&&(h=n.selection.getSelectedNode(),f=m.getParentElement(h,{nodeName:v}))?(n.selection.executeAndRestoreSimple(function(){o&&(f=m.renameElement(f,o)),a&&e(f,a,l)}),void 0):n.commands.support(s)?(u(c,s,o||g,a),void 0):(f=c.createElement(o||g),a&&(f.className=a),d(n,f),void 0)},state:function(t,e,i,n,s){i="string"==typeof i?i.toUpperCase():i;var o=t.selection.getSelectedNode();return m.getParentElement(o,{nodeName:i,className:n,classRegExp:s})},value:function(){return f}}}(wysihtml5),function(t){function e(t){var e=s[t];return e?[t.toLowerCase(),e.toLowerCase()]:[t.toLowerCase()]}function i(i,n,s){var r=i+":"+n;return o[r]||(o[r]=new t.selection.HTMLApplier(e(i),n,s,!0)),o[r]}var n,s={strong:"b",em:"i",b:"strong",i:"em"},o={};t.commands.formatInline={exec:function(t,e,n,s,o){var r=t.selection.getRange();return r?(i(n,s,o).toggleRange(r),t.selection.setSelection(r),void 0):!1},state:function(e,n,o,r,a){var l,h=e.doc,c=s[o]||o;return t.dom.hasElementWithTagName(h,o)||t.dom.hasElementWithTagName(h,c)?r&&!t.dom.hasElementWithClassName(h,r)?!1:(l=e.selection.getRange(),l?i(o,r,a).isAppliedToRange(l):!1):!1},value:function(){return n}}}(wysihtml5),function(t){var e;t.commands.insertHTML={exec:function(t,e,i){t.commands.support(e)?t.doc.execCommand(e,!1,i):t.selection.insertHTML(i)},state:function(){return!1},value:function(){return e}}}(wysihtml5),function(t){var e="IMG";t.commands.insertImage={exec:function(i,n,s){s="object"==typeof s?s:{src:s};var o,r,a,l=i.doc,h=this.state(i);if(h)return i.selection.setBefore(h),a=h.parentNode,a.removeChild(h),t.dom.removeEmptyTextNodes(a),"A"!==a.nodeName||a.firstChild||(i.selection.setAfter(a),a.parentNode.removeChild(a)),t.quirks.redraw(i.element),void 0;h=l.createElement(e);for(r in s)h[r]=s[r];i.selection.insertNode(h),t.browser.hasProblemsSettingCaretAfterImg()?(o=l.createTextNode(t.INVISIBLE_SPACE),i.selection.insertNode(o),i.selection.setAfter(o)):i.selection.setAfter(h)},state:function(i){var n,s,o,r=i.doc;return t.dom.hasElementWithTagName(r,e)?(n=i.selection.getSelectedNode())?n.nodeName===e?n:n.nodeType!==t.ELEMENT_NODE?!1:(s=i.selection.getText(),(s=t.lang.string(s).trim())?!1:(o=i.selection.getNodes(t.ELEMENT_NODE,function(t){return"IMG"===t.nodeName}),1!==o.length?!1:o[0])):!1:!1},value:function(t){var e=this.state(t);return e&&e.src}}}(wysihtml5),function(t){var e,i="<br>"+(t.browser.needsSpaceAfterLineBreak()?" ":"");t.commands.insertLineBreak={exec:function(e,n){e.commands.support(n)?(e.doc.execCommand(n,!1,null),t.browser.autoScrollsToCaret()||e.selection.scrollIntoView()):e.commands.exec("insertHTML",i)},state:function(){return!1},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.insertOrderedList={exec:function(e,i){var n,s,o=e.doc,r=e.selection.getSelectedNode(),a=t.dom.getParentElement(r,{nodeName:"OL"}),l=t.dom.getParentElement(r,{nodeName:"UL"}),h="_wysihtml5-temp-"+(new Date).getTime();return e.commands.support(i)?(o.execCommand(i,!1,null),void 0):(a?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(a)}):l?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(l,"ol")}):(e.commands.exec("formatBlock","div",h),s=o.querySelector("."+h),n=""===s.innerHTML||s.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){a=t.dom.convertToList(s,"ol")}),n&&e.selection.selectNode(a.querySelector("li"))),void 0)},state:function(e){var i=e.selection.getSelectedNode();return t.dom.getParentElement(i,{nodeName:"OL"})},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.insertUnorderedList={exec:function(e,i){var n,s,o=e.doc,r=e.selection.getSelectedNode(),a=t.dom.getParentElement(r,{nodeName:"UL"}),l=t.dom.getParentElement(r,{nodeName:"OL"}),h="_wysihtml5-temp-"+(new Date).getTime();return e.commands.support(i)?(o.execCommand(i,!1,null),void 0):(a?e.selection.executeAndRestoreSimple(function(){t.dom.resolveList(a)}):l?e.selection.executeAndRestoreSimple(function(){t.dom.renameElement(l,"ul")}):(e.commands.exec("formatBlock","div",h),s=o.querySelector("."+h),n=""===s.innerHTML||s.innerHTML===t.INVISIBLE_SPACE,e.selection.executeAndRestoreSimple(function(){a=t.dom.convertToList(s,"ul")}),n&&e.selection.selectNode(a.querySelector("li"))),void 0)},state:function(e){var i=e.selection.getSelectedNode();return t.dom.getParentElement(i,{nodeName:"UL"})},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.italic={exec:function(e,i){return t.commands.formatInline.exec(e,i,"i")},state:function(e,i){return t.commands.formatInline.state(e,i,"i")},value:function(){return e}}}(wysihtml5),function(t){var e,i="wysiwyg-text-align-center",n=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyCenter={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,i,n)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,i,n)},value:function(){return e}}}(wysihtml5),function(t){var e,i="wysiwyg-text-align-left",n=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyLeft={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,i,n)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,i,n)},value:function(){return e}}}(wysihtml5),function(t){var e,i="wysiwyg-text-align-right",n=/wysiwyg-text-align-[a-z]+/g;t.commands.justifyRight={exec:function(e){return t.commands.formatBlock.exec(e,"formatBlock",null,i,n)},state:function(e){return t.commands.formatBlock.state(e,"formatBlock",null,i,n)},value:function(){return e}}}(wysihtml5),function(t){var e;t.commands.underline={exec:function(e,i){return t.commands.formatInline.exec(e,i,"u")},state:function(e,i){return t.commands.formatInline.state(e,i,"u")},value:function(){return e}}}(wysihtml5),function(t){function e(t){for(var e;e=t.querySelector("._wysihtml5-temp");)e.parentNode.removeChild(e)}var i=90,n=89,s=8,o=46,r=40,a='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",l='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+t.INVISIBLE_SPACE+"</span>",h=t.dom;t.UndoManager=t.lang.Dispatcher.extend({constructor:function(t){this.editor=t,this.composer=t.composer,this.element=this.composer.element,this.history=[this.composer.getValue()],this.position=1,this.composer.commands.support("insertHTML")&&this._observe()},_observe:function(){var r,c=this,u=this.composer.sandbox.getDocument();if(h.observe(this.element,"keydown",function(t){if(!t.altKey&&(t.ctrlKey||t.metaKey)){var e=t.keyCode,s=e===i&&!t.shiftKey,o=e===i&&t.shiftKey||e===n;s?(c.undo(),t.preventDefault()):o&&(c.redo(),t.preventDefault())}}),h.observe(this.element,"keydown",function(t){var e=t.keyCode;e!==r&&(r=e,(e===s||e===o)&&c.transact())}),t.browser.hasUndoInContextMenu()){var d,p,f=function(){e(u),clearInterval(d)};h.observe(this.element,"contextmenu",function(){f(),c.composer.selection.executeAndRestoreSimple(function(){c.element.lastChild&&c.composer.selection.setAfter(c.element.lastChild),u.execCommand("insertHTML",!1,a),u.execCommand("insertHTML",!1,l),u.execCommand("undo",!1,null)}),d=setInterval(function(){u.getElementById("_wysihtml5-redo")?(f(),c.redo()):u.getElementById("_wysihtml5-undo")||(f(),c.undo())},400),p||(p=!0,h.observe(document,"mousedown",f),h.observe(u,["mousedown","paste","cut","copy"],f))})}this.editor.observe("newword:composer",function(){c.transact()}).observe("beforecommand:composer",function(){c.transact()})},transact:function(){var t=this.history[this.position-1],e=this.composer.getValue();if(e!=t){var i=this.history.length=this.position;i>r&&(this.history.shift(),this.position--),this.position++,this.history.push(e)}},undo:function(){this.transact(),this.position<=1||(this.set(this.history[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.position>=this.history.length||(this.set(this.history[++this.position-1]),this.editor.fire("redo:composer"))},set:function(t){this.composer.setValue(t),this.editor.focus(!0)}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(t,e,i){this.parent=t,this.element=e,this.config=i,this._observeViewChange()},_observeViewChange:function(){var t=this;this.parent.observe("beforeload",function(){t.parent.observe("change_view",function(e){e===t.name?(t.parent.currentView=t,t.show(),setTimeout(function(){t.focus()},0)):t.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(t){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(t){var e=t.dom,i=t.browser;t.views.Composer=t.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(t,e,i){this.base(t,e,i),this.textarea=this.parent.textarea,this._initSandbox()},clear:function(){this.element.innerHTML=i.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var i=this.isEmpty()?"":t.quirks.getCorrectInnerHTML(this.element);return e&&(i=this.parent.parse(i)),i=t.lang.string(i).replace(t.INVISIBLE_SPACE).by("")},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.innerHTML=t},show:function(){this.iframe.style.display=this._displayStyle||"",this.disable(),this.enable()},hide:function(){this._displayStyle=e.getStyle("display").from(this.iframe),"none"===this._displayStyle&&(this._displayStyle=null),this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable"),this.base()},enable:function(){this.element.setAttribute("contentEditable","true"),this.base()},focus:function(e){t.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var i=this.element.lastChild;e&&i&&("BR"===i.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return e.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var t=this.element.innerHTML,e="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return""===t||t===this.CARET_HACK||this.hasPlaceholderSet()||""===this.getTextContent()&&!this.element.querySelector(e)},_initSandbox:function(){var t=this;this.sandbox=new e.Sandbox(function(){t._create()},{stylesheets:this.config.stylesheets}),this.iframe=this.sandbox.getIframe();var i=document.createElement("input");i.type="hidden",i.name="_wysihtml5_mode",i.value=1;var n=this.textarea.element;e.insert(this.iframe).after(n),e.insert(i).after(n)},_create:function(){var n=this;this.doc=this.sandbox.getDocument(),this.element=this.doc.body,this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0),this.enable(),this.selection=new t.Selection(this.parent),this.commands=new t.Commands(this.parent),e.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),e.addClass(this.element,this.config.composerClassName),this.config.style&&this.style(),this.observe();var s=this.config.name;s&&(e.addClass(this.element,s),e.addClass(this.iframe,s));var o="string"==typeof this.config.placeholder?this.config.placeholder:this.textarea.element.getAttribute("placeholder");o&&e.simulatePlaceholder(this.parent,this,o),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element)&&setTimeout(function(){n.focus()},100),t.quirks.insertLineBreakOnReturn(this),i.clearsContentEditableCorrectly()||t.quirks.ensureProperClearing(this),i.clearsListsInContentEditableCorrectly()||t.quirks.ensureProperClearingOfLists(this),this.initSync&&this.config.sync&&this.initSync(),this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var n=this,s=i.canDisableAutoLinking(),o=i.doesAutoLinkingInContentEditable();if(s&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink){(!o||o&&s)&&this.parent.observe("newword:composer",function(){n.selection.executeAndRestore(function(t,i){e.autoLink(i.parentNode)})});var r=this.sandbox.getDocument().getElementsByTagName("a"),a=e.autoLink.URL_REG_EXP,l=function(i){var n=t.lang.string(e.getTextContent(i)).trim();return"www."===n.substr(0,4)&&(n="http://"+n),n};e.observe(this.element,"keydown",function(t){if(r.length){var i,s=n.selection.getSelectedNode(t.target.ownerDocument),o=e.getParentElement(s,{nodeName:"A"},4);o&&(i=l(o),setTimeout(function(){var t=l(o);t!==i&&t.match(a)&&o.setAttribute("href",t)},0))}})}},_initObjectResizing:function(){var n=["width","height"],s=n.length,o=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing),this.config.allowObjectResizing?i.supportsEvent("resizeend")&&e.observe(o,"resizeend",function(e){for(var i,r=e.target||e.srcElement,a=r.style,l=0;s>l;l++)i=n[l],a[i]&&(r.setAttribute(i,parseInt(a[i],10)),a[i]="");t.quirks.redraw(o)}):i.supportsEvent("resizestart")&&e.observe(o,"resizestart",function(t){t.preventDefault()})},_initUndoManager:function(){new t.UndoManager(this.parent)}})}(wysihtml5),function(t){var e=t.dom,i=document,n=window,s=i.createElement("div"),o=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],r=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["width","height","top","left","right","bottom"],l=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",t.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],h=function(t){if(t.setActive)try{t.setActive()}catch(s){}else{var o=t.style,r=i.documentElement.scrollTop||i.body.scrollTop,a=i.documentElement.scrollLeft||i.body.scrollLeft,l={position:o.position,top:o.top,left:o.left,WebkitUserSelect:o.WebkitUserSelect};e.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(t),t.focus(),e.setStyles(l).on(t),n.scrollTo&&n.scrollTo(a,r)}};t.views.Composer.prototype.style=function(){var c=this,u=i.querySelector(":focus"),d=this.textarea.element,p=d.hasAttribute("placeholder"),f=p&&d.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||s.cloneNode(!1),this.blurStylesHost=this.blurStylesHost||s.cloneNode(!1),p&&d.removeAttribute("placeholder"),d===u&&d.blur(),e.copyStyles(r).from(d).to(this.iframe).andTo(this.blurStylesHost),e.copyStyles(o).from(d).to(this.element).andTo(this.blurStylesHost),e.insertCSS(l).into(this.element.ownerDocument),h(d),e.copyStyles(r).from(d).to(this.focusStylesHost),e.copyStyles(o).from(d).to(this.focusStylesHost);var m=t.lang.array(r).without(["display"]);if(u?u.focus():d.blur(),p&&d.setAttribute("placeholder",f),!t.browser.hasCurrentStyleProperty())var g=e.observe(n,"resize",function(){if(!e.contains(document.documentElement,c.iframe))return g.stop(),void 0;var t=e.getStyle("display").from(d),i=e.getStyle("display").from(c.iframe);d.style.display="",c.iframe.style.display="none",e.copyStyles(a).from(d).to(c.iframe).andTo(c.focusStylesHost).andTo(c.blurStylesHost),c.iframe.style.display=i,d.style.display=t});return this.parent.observe("focus:composer",function(){e.copyStyles(m).from(c.focusStylesHost).to(c.iframe),e.copyStyles(o).from(c.focusStylesHost).to(c.element)}),this.parent.observe("blur:composer",function(){e.copyStyles(m).from(c.blurStylesHost).to(c.iframe),e.copyStyles(o).from(c.blurStylesHost).to(c.element)}),this}}(wysihtml5),function(t){var e=t.dom,i=t.browser,n={66:"bold",73:"italic",85:"underline"};t.views.Composer.prototype.observe=function(){var s=this,o=this.getValue(),r=this.sandbox.getIframe(),a=this.element,l=i.supportsEventsInIframeCorrectly()?a:this.sandbox.getWindow(),h=i.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];e.observe(r,"DOMNodeRemoved",function(){clearInterval(c),s.parent.fire("destroy:composer")});var c=setInterval(function(){e.contains(document.documentElement,r)||(clearInterval(c),s.parent.fire("destroy:composer"))},250);e.observe(l,"focus",function(){s.parent.fire("focus").fire("focus:composer"),setTimeout(function(){o=s.getValue()},0)}),e.observe(l,"blur",function(){o!==s.getValue()&&s.parent.fire("change").fire("change:composer"),s.parent.fire("blur").fire("blur:composer")}),t.browser.isIos()&&e.observe(a,"blur",function(){var t=a.ownerDocument.createElement("input"),e=document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.scrollLeft||document.body.scrollLeft;try{s.selection.insertNode(t)}catch(n){a.appendChild(t)}t.focus(),t.parentNode.removeChild(t),window.scrollTo(i,e)}),e.observe(a,"dragenter",function(){s.parent.fire("unset_placeholder")}),i.firesOnDropOnlyWhenOnDragOverIsCancelled()&&e.observe(a,["dragover","dragenter"],function(t){t.preventDefault()}),e.observe(a,h,function(t){var e,n=t.dataTransfer;console.log("PASTED",t),n&&i.supportsDataTransfer()&&(e=n.getData("text/html")||n.getData("text/plain")),e?(a.focus(),s.commands.exec("insertHTML",e),s.parent.fire("paste").fire("paste:composer"),t.stopPropagation(),t.preventDefault()):setTimeout(function(){s.parent.fire("paste").fire("paste:composer")},0)}),e.observe(a,"keyup",function(e){var i=e.keyCode;(i===t.SPACE_KEY||i===t.ENTER_KEY)&&s.parent.fire("newword:composer")}),this.parent.observe("paste:composer",function(){setTimeout(function(){s.parent.fire("newword:composer")},0)}),i.canSelectImagesInContentEditable()||e.observe(a,"mousedown",function(t){var e=t.target;"IMG"===e.nodeName&&(s.selection.selectNode(e),t.preventDefault())}),e.observe(a,"keydown",function(t){var e=t.keyCode,i=n[e];(t.ctrlKey||t.metaKey)&&!t.altKey&&i&&(s.commands.exec(i),t.preventDefault())}),e.observe(a,"keydown",function(e){var i,n=s.selection.getSelectedNode(!0),o=e.keyCode;!n||"IMG"!==n.nodeName||o!==t.BACKSPACE_KEY&&o!==t.DELETE_KEY||(i=n.parentNode,i.removeChild(n),"A"!==i.nodeName||i.firstChild||i.parentNode.removeChild(i),setTimeout(function(){t.quirks.redraw(a)},0),e.preventDefault())});var u={IMG:"Image: ",A:"Link: "};e.observe(a,"mouseover",function(t){var e,i=t.target,n=i.nodeName;if("A"===n||"IMG"===n){var s=i.hasAttribute("title");s||(e=u[n]+(i.getAttribute("href")||i.getAttribute("src")),i.setAttribute("title",e))}})}}(wysihtml5),function(t){var e=400;t.views.Synchronizer=Base.extend({constructor:function(t,e,i){this.editor=t,this.textarea=e,this.composer=i,this._observe()},fromComposerToTextarea:function(e){this.textarea.setValue(t.lang.string(this.composer.getValue()).trim(),e)},fromTextareaToComposer:function(t){var e=this.textarea.getValue();e?this.composer.setValue(e,t):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(t){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(t):this.fromComposerToTextarea(t)},_observe:function(){var i,n=this,s=this.textarea.element.form,o=function(){i=setInterval(function(){n.fromComposerToTextarea()},e)},r=function(){clearInterval(i),i=null};o(),s&&(t.dom.observe(s,"submit",function(){n.sync(!0)}),t.dom.observe(s,"reset",function(){setTimeout(function(){n.fromTextareaToComposer()},0)})),this.editor.observe("change_view",function(t){"composer"!==t||i?"textarea"===t&&(n.fromComposerToTextarea(!0),r()):(n.fromTextareaToComposer(!0),o())}),this.editor.observe("destroy:composer",r)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(t,e,i){this.base(t,e,i),this._observe()},clear:function(){this.element.value=""},getValue:function(t){var e=this.isEmpty()?"":this.element.value;return t&&(e=this.parent.parse(e)),e},setValue:function(t,e){e&&(t=this.parent.parse(t)),this.element.value=t},hasPlaceholderSet:function(){var t=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),e=this.element.getAttribute("placeholder")||null,i=this.element.value,n=!i;return t&&n||i===e},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var t=this.element,e=this.parent,i={focusin:"focus",focusout:"blur"},n=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];e.observe("beforeload",function(){wysihtml5.dom.observe(t,n,function(t){var n=i[t.type]||t.type;e.fire(n).fire(n+":textarea")}),wysihtml5.dom.observe(t,["paste","drop"],function(){setTimeout(function(){e.fire("paste").fire("paste:textarea")},0)})})}}),function(t){var e=t.dom,i="wysihtml5-command-dialog-opened",n="input, select, textarea",s="[data-wysihtml5-dialog-field]",o="data-wysihtml5-dialog-field";t.toolbar.Dialog=t.lang.Dispatcher.extend({constructor:function(t,e){this.link=t,this.container=e},_observe:function(){if(!this._observed){var s=this,o=function(t){var e=s._serialize();e==s.elementToChange?s.fire("edit",e):s.fire("save",e),s.hide(),t.preventDefault(),t.stopPropagation()};e.observe(s.link,"click",function(){e.hasClass(s.link,i)&&setTimeout(function(){s.hide()},0)}),e.observe(this.container,"keydown",function(e){var i=e.keyCode;i===t.ENTER_KEY&&o(e),i===t.ESCAPE_KEY&&s.hide()}),e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",o),e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(t){s.fire("cancel"),s.hide(),t.preventDefault(),t.stopPropagation()});for(var r=this.container.querySelectorAll(n),a=0,l=r.length,h=function(){clearInterval(s.interval)};l>a;a++)e.observe(r[a],"change",h);this._observed=!0}},_serialize:function(){for(var t=this.elementToChange||{},e=this.container.querySelectorAll(s),i=e.length,n=0;i>n;n++)t[e[n].getAttribute(o)]=e[n].value;return t},_interpolate:function(t){for(var e,i,n,r=document.querySelector(":focus"),a=this.container.querySelectorAll(s),l=a.length,h=0;l>h;h++)e=a[h],e!==r&&(t&&"hidden"===e.type||(i=e.getAttribute(o),n=this.elementToChange?this.elementToChange[i]||"":e.defaultValue,e.value=n))},show:function(t){var s=this,o=this.container.querySelector(n);if(this.elementToChange=t,this._observe(),this._interpolate(),t&&(this.interval=setInterval(function(){s._interpolate(!0)},500)),e.addClass(this.link,i),this.container.style.display="",this.fire("show"),o&&!t)try{o.focus()}catch(r){}},hide:function(){clearInterval(this.interval),this.elementToChange=null,e.removeClass(this.link,i),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(t){var e=t.dom,i={position:"relative"},n={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},s={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},o={"x-webkit-speech":"",speech:""};t.toolbar.Speech=function(r,a){var l=document.createElement("input");if(!t.browser.supportsSpeechApiOn(l))return a.style.display="none",void 0;var h=document.createElement("div");t.lang.object(n).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),e.insert(l).into(h),e.insert(h).into(a),e.setStyles(s).on(l),e.setAttributes(o).on(l),e.setStyles(n).on(h),e.setStyles(i).on(a);var c="onwebkitspeechchange"in l?"webkitspeechchange":"speechchange";e.observe(l,c,function(){r.execCommand("insertText",l.value),l.value=""}),e.observe(l,"click",function(t){e.hasClass(a,"wysihtml5-command-disabled")&&t.preventDefault(),t.stopPropagation()})}}(wysihtml5),function(t){var e="wysihtml5-command-disabled",i="wysihtml5-commands-disabled",n="wysihtml5-command-active",s="wysihtml5-action-active",o=t.dom;
t.toolbar.Toolbar=Base.extend({constructor:function(e,i){this.editor=e,this.container="string"==typeof i?document.getElementById(i):i,this.composer=e.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),this.show();for(var n=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),s=n.length,o=0;s>o;o++)new t.toolbar.Speech(this,n[o])},_getLinks:function(e){for(var i,n,s,o,r,a=this[e+"Links"]=t.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+e+"]")).get(),l=a.length,h=0,c=this[e+"Mapping"]={};l>h;h++)i=a[h],s=i.getAttribute("data-wysihtml5-"+e),o=i.getAttribute("data-wysihtml5-"+e+"-value"),n=this.container.querySelector("[data-wysihtml5-"+e+"-group='"+s+"']"),r=this._getDialog(i,s),c[s+":"+o]={link:i,group:n,name:s,value:o,dialog:r,state:!1}},_getDialog:function(e,i){var n,s,o=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+i+"']");return r&&(n=new t.toolbar.Dialog(e,r),n.observe("show",function(){s=o.composer.selection.getBookmark(),o.editor.fire("show:dialog",{command:i,dialogContainer:r,commandLink:e})}),n.observe("save",function(t){s&&o.composer.selection.setBookmark(s),o._execCommand(i,t),o.editor.fire("save:dialog",{command:i,dialogContainer:r,commandLink:e})}),n.observe("cancel",function(){o.editor.focus(!1),o.editor.fire("cancel:dialog",{command:i,dialogContainer:r,commandLink:e})})),n},execCommand:function(t,e){if(!this.commandsDisabled){var i=this.commandMapping[t+":"+e];i&&i.dialog&&!i.state?i.dialog.show():this._execCommand(t,e)}},_execCommand:function(t,e){this.editor.focus(!1),this.composer.commands.exec(t,e),this._updateLinkStates()},execAction:function(t){var e=this.editor;switch(t){case"change_view":e.currentView===e.textarea?e.fire("change_view","composer"):e.fire("change_view","textarea")}},_observe:function(){for(var t=this,e=this.editor,n=this.container,s=this.commandLinks.concat(this.actionLinks),r=s.length,a=0;r>a;a++)o.setAttributes({href:"javascript:;",unselectable:"on"}).on(s[a]);o.delegate(n,"[data-wysihtml5-command]","mousedown",function(t){t.preventDefault()}),o.delegate(n,"[data-wysihtml5-command]","click",function(e){var i=this,n=i.getAttribute("data-wysihtml5-command"),s=i.getAttribute("data-wysihtml5-command-value");t.execCommand(n,s),e.preventDefault()}),o.delegate(n,"[data-wysihtml5-action]","click",function(e){var i=this.getAttribute("data-wysihtml5-action");t.execAction(i),e.preventDefault()}),e.observe("focus:composer",function(){t.bookmark=null,clearInterval(t.interval),t.interval=setInterval(function(){t._updateLinkStates()},500)}),e.observe("blur:composer",function(){clearInterval(t.interval)}),e.observe("destroy:composer",function(){clearInterval(t.interval)}),e.observe("change_view",function(e){setTimeout(function(){t.commandsDisabled="composer"!==e,t._updateLinkStates(),t.commandsDisabled?o.addClass(n,i):o.removeClass(n,i)},0)})},_updateLinkStates:function(){var i,r,a,l,h=(this.composer.element,this.commandMapping),c=this.actionMapping;for(i in h)l=h[i],this.commandsDisabled?(r=!1,o.removeClass(l.link,n),l.group&&o.removeClass(l.group,n),l.dialog&&l.dialog.hide()):(r=this.composer.commands.state(l.name,l.value),t.lang.object(r).isArray()&&(r=1===r.length?r[0]:!0),o.removeClass(l.link,e),l.group&&o.removeClass(l.group,e)),l.state!==r&&(l.state=r,r?(o.addClass(l.link,n),l.group&&o.addClass(l.group,n),l.dialog&&("object"==typeof r?l.dialog.show(r):l.dialog.hide())):(o.removeClass(l.link,n),l.group&&o.removeClass(l.group,n),l.dialog&&l.dialog.hide()));for(i in c)a=c[i],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?o.addClass(a.link,s):o.removeClass(a.link,s))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(t){var e,i={name:e,style:!0,toolbar:e,autoLink:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:t.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:e,allowObjectResizing:!0,supportTouchDevices:!0};t.Editor=t.lang.Dispatcher.extend({constructor:function(e,n){if(this.textareaElement="string"==typeof e?document.getElementById(e):e,this.config=t.lang.object({}).merge(i).merge(n).get(),this.textarea=new t.views.Textarea(this,this.textareaElement,this.config),this.currentView=this.textarea,this._isCompatible=t.browser.supported(),!this._isCompatible||!this.config.supportTouchDevices&&t.browser.isTouchDevice()){var s=this;return setTimeout(function(){s.fire("beforeload").fire("load")},0),void 0}t.dom.addClass(document.body,this.config.bodyClassName),this.composer=new t.views.Composer(this,this.textareaElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.observe("beforeload",function(){this.synchronizer=new t.views.Synchronizer(this,this.textarea,this.composer),this.config.toolbar&&(this.toolbar=new t.toolbar.Toolbar(this,this.config.toolbar))});try{console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")}catch(o){}},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(t){return this.currentView.getValue(t)},setValue:function(t,e){return t?(this.currentView.setValue(t,e),this):this.clear()},focus:function(t){return this.currentView.focus(t),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(e){var i=this.config.parser(e,this.config.parserRules,this.composer.sandbox.getDocument(),!0);return"object"==typeof e&&t.quirks.redraw(e),i},_initParser:function(){this.observe("paste:composer",function(){var e=!0,i=this;i.composer.selection.executeAndRestore(function(){t.quirks.cleanPastedHTML(i.composer.element),i.parse(i.composer.element)},e)}),this.observe("paste:textarea",function(){var t,e=this.textarea.getValue();t=this.parse(e),this.textarea.setValue(t)})}})}(wysihtml5),!function(t,e){"use strict";var i={"font-styles":function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+i+"' data-toggle='dropdown' href='#'>"+"<i class='icon-font'></i>&nbsp;<span class='current-font'>"+t.font_styles.normal+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div' tabindex='-1'>"+t.font_styles.normal+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1' tabindex='-1'>"+t.font_styles.h1+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2' tabindex='-1'>"+t.font_styles.h2+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h3' tabindex='-1'>"+t.font_styles.h3+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h4'>"+t.font_styles.h4+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h5'>"+t.font_styles.h5+"</a></li>"+"<li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h6'>"+t.font_styles.h6+"</a></li>"+"</ul>"+"</li>"},emphasis:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-command='bold' title='CTRL+B' tabindex='-1'>"+t.emphasis.bold+"</a>"+"<a class='btn"+i+"' data-wysihtml5-command='italic' title='CTRL+I' tabindex='-1'>"+t.emphasis.italic+"</a>"+"<a class='btn"+i+"' data-wysihtml5-command='underline' title='CTRL+U' tabindex='-1'>"+t.emphasis.underline+"</a>"+"</div>"+"</li>"},lists:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-command='insertUnorderedList' title='"+t.lists.unordered+"' tabindex='-1'><i class='icon-list'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='insertOrderedList' title='"+t.lists.ordered+"' tabindex='-1'><i class='icon-th-list'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='Outdent' title='"+t.lists.outdent+"' tabindex='-1'><i class='icon-indent-right'></i></a>"+"<a class='btn"+i+"' data-wysihtml5-command='Indent' title='"+t.lists.indent+"' tabindex='-1'><i class='icon-indent-left'></i></a>"+"</div>"+"</li>"},link:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.link.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>"+"<label class='checkbox'> <input type='checkbox' class='bootstrap-wysihtml5-insert-link-target' checked>"+t.link.target+"</label>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+t.link.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.link.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+i+"' data-wysihtml5-command='createLink' title='"+t.link.insert+"' tabindex='-1'><i class='icon-share'></i></a>"+"</li>"},image:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'>&times;</a><h3>"+t.image.insert+"</h3>"+"</div>"+"<div class='modal-body'>"+"<input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'>"+"</div>"+"<div class='modal-footer'>"+"<a href='#' class='btn' data-dismiss='modal'>"+t.image.cancel+"</a>"+"<a href='#' class='btn btn-primary' data-dismiss='modal'>"+t.image.insert+"</a>"+"</div>"+"</div>"+"<a class='btn"+i+"' data-wysihtml5-command='insertImage' title='"+t.image.insert+"' tabindex='-1'><i class='icon-picture'></i></a>"+"</li>"},html:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li><div class='btn-group'><a class='btn"+i+"' data-wysihtml5-action='change_view' title='"+t.html.edit+"' tabindex='-1'><i class='icon-pencil'></i></a>"+"</div>"+"</li>"},color:function(t,e){var i=e&&e.size?" btn-"+e.size:"";return"<li class='dropdown'><a class='btn dropdown-toggle"+i+"' data-toggle='dropdown' href='#' tabindex='-1'>"+"<span class='current-color'>"+t.colours.black+"</span>&nbsp;<b class='caret'></b>"+"</a>"+"<ul class='dropdown-menu'>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='black'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='black'>"+t.colours.black+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='silver'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='silver'>"+t.colours.silver+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='gray'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='gray'>"+t.colours.gray+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='maroon'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='maroon'>"+t.colours.maroon+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='red'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='red'>"+t.colours.red+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='purple'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='purple'>"+t.colours.purple+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='green'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='green'>"+t.colours.green+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='olive'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='olive'>"+t.colours.olive+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='navy'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='navy'>"+t.colours.navy+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='blue'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='blue'>"+t.colours.blue+"</a></li>"+"<li><div class='wysihtml5-colors' data-wysihtml5-command-value='orange'></div><a class='wysihtml5-colors-title' data-wysihtml5-command='foreColor' data-wysihtml5-command-value='orange'>"+t.colours.orange+"</a></li>"+"</ul>"+"</li>"}},n=function(t,e,n){return i[t](e,n)},s=function(e,n){this.el=e;var s=n||r;for(var o in s.customTemplates)i[o]=s.customTemplates[o];this.toolbar=this.createToolbar(e,s),this.editor=this.createEditor(n),window.editor=this.editor,t("iframe.wysihtml5-sandbox").each(function(e,i){t(i.contentWindow).off("focus.wysihtml5").on({"focus.wysihtml5":function(){t("li.dropdown").removeClass("open")}})})};s.prototype={constructor:s,createEditor:function(i){i=i||{},i=t.extend(!0,{},i),i.toolbar=this.toolbar[0];var n=new e.Editor(this.el[0],i);if(i&&i.events)for(var s in i.events)n.on(s,i.events[s]);return n},createToolbar:function(e,i){var s=this,o=t("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),l=i.locale||r.locale||"en";for(var h in r){var c=!1;void 0!==i[h]?i[h]===!0&&(c=!0):c=r[h],c===!0&&(o.append(n(h,a[l],i)),"html"===h&&this.initHtml(o),"link"===h&&this.initInsertLink(o),"image"===h&&this.initInsertImage(o))}if(i.toolbar)for(h in i.toolbar)o.append(i.toolbar[h]);return o.find("a[data-wysihtml5-command='formatBlock']").click(function(e){var i=e.target||e.srcElement,n=t(i);s.toolbar.find(".current-font").text(n.html())}),o.find("a[data-wysihtml5-command='foreColor']").click(function(e){var i=e.target||e.srcElement,n=t(i);s.toolbar.find(".current-color").text(n.html())}),this.el.before(o),o},initHtml:function(t){var e="a[data-wysihtml5-action='change_view']";t.find(e).click(function(){t.find("a.btn").not(e).toggleClass("disabled")})},initInsertImage:function(e){var i,n=this,s=e.find(".bootstrap-wysihtml5-insert-image-modal"),o=s.find(".bootstrap-wysihtml5-insert-image-url"),r=s.find("a.btn-primary"),a=o.val(),l=function(){var t=o.val();o.val(a),n.editor.currentView.element.focus(),i&&(n.editor.composer.selection.setBookmark(i),i=null),n.editor.composer.commands.exec("insertImage",t)};o.keypress(function(t){13==t.which&&(l(),s.modal("hide"))}),r.click(l),s.on("shown",function(){o.focus()}),s.on("hide",function(){n.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=insertImage]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(n.editor.currentView.element.focus(!1),i=n.editor.composer.selection.getBookmark(),s.appendTo("body").modal("show"),s.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})},initInsertLink:function(e){var i,n=this,s=e.find(".bootstrap-wysihtml5-insert-link-modal"),o=s.find(".bootstrap-wysihtml5-insert-link-url"),r=s.find(".bootstrap-wysihtml5-insert-link-target"),a=s.find("a.btn-primary"),l=o.val(),h=function(){var t=o.val();o.val(l),n.editor.currentView.element.focus(),i&&(n.editor.composer.selection.setBookmark(i),i=null);var e=r.prop("checked");n.editor.composer.commands.exec("createLink",{href:t,target:e?"_blank":"_self",rel:e?"nofollow":""})};o.keypress(function(t){13==t.which&&(h(),s.modal("hide"))}),a.click(h),s.on("shown",function(){o.focus()}),s.on("hide",function(){n.editor.currentView.element.focus()}),e.find("a[data-wysihtml5-command=createLink]").click(function(){var e=t(this).hasClass("wysihtml5-command-active");return e?!0:(n.editor.currentView.element.focus(!1),i=n.editor.composer.selection.getBookmark(),s.appendTo("body").modal("show"),s.on("click.dismiss.modal",'[data-dismiss="modal"]',function(t){t.stopPropagation()}),!1)})}};var o={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(e){return this.each(function(){var i=t(this);i.data("wysihtml5",new s(i,e))})},shallowExtend:function(e){var i=t.extend({},t.fn.wysihtml5.defaultOptions,e||{},t(this).data()),n=this;return o.bypassDefaults.apply(n,[i])},deepExtend:function(e){var i=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,e||{}),n=this;return o.bypassDefaults.apply(n,[i])},init:function(t){var e=this;return o.shallowExtend.apply(e,[t])}};t.fn.wysihtml5=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.wysihtml5"),void 0):o.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=s;var r=t.fn.wysihtml5.defaultOptions={"font-styles":!0,color:!1,emphasis:!0,lists:!0,html:!1,link:!0,image:!0,events:{},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url",target:"alt",rel:"alt"}},span:1,div:1,code:1,pre:1}},stylesheets:["/assets/bootstrap-wysihtml5/wysiwyg-color.css"],locale:"en"};"undefined"==typeof t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var a=t.fn.wysihtml5.locale={en:{font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}}(window.jQuery,window.wysihtml5),function(t){var e={init:function(i){return this.each(function(){e.destroy.call(this),this.opt=t.extend(!0,{},t.fn.raty.defaults,i);var n=t(this),s=["number","readOnly","score","scoreName"];e._callback.call(this,s),this.opt.precision&&e._adjustPrecision.call(this),this.opt.number=e._between(this.opt.number,0,this.opt.numberMax),this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/"),this.stars=e._createStars.call(this),this.score=e._createScore.call(this),e._apply.call(this,this.opt.score);var o=this.opt.space?4:0,r=this.opt.width||this.opt.number*this.opt.size+this.opt.number*o;this.opt.cancel&&(this.cancel=e._createCancel.call(this),r+=this.opt.size+o),this.opt.readOnly?e._lock.call(this):(n.css("cursor","pointer"),e._binds.call(this)),this.opt.width!==!1&&n.css("width",r),e._target.call(this,this.opt.score),n.data({settings:this.opt,raty:!0})})},_adjustPrecision:function(){this.opt.targetType="score",this.opt.half=!0},_apply:function(t){t&&t>0&&(t=e._between(t,0,this.opt.number),this.score.val(t)),e._fill.call(this,t),t&&e._roundStars.call(this,t)},_between:function(t,e,i){return Math.min(Math.max(parseFloat(t),e),i)},_binds:function(){this.cancel&&e._bindCancel.call(this),e._bindClick.call(this),e._bindOut.call(this),e._bindOver.call(this)},_bindCancel:function(){e._bindClickCancel.call(this),e._bindOutCancel.call(this),e._bindOverCancel.call(this)},_bindClick:function(){var e=this,i=t(e);e.stars.on("click.raty",function(t){e.score.val(e.opt.half||e.opt.precision?i.data("score"):this.alt),e.opt.click&&e.opt.click.call(e,parseFloat(e.score.val()),t)})},_bindClickCancel:function(){var t=this;t.cancel.on("click.raty",function(e){t.score.removeAttr("value"),t.opt.click&&t.opt.click.call(t,null,e)})},_bindOut:function(){var i=this;t(this).on("mouseleave.raty",function(t){var n=parseFloat(i.score.val())||void 0;e._apply.call(i,n),e._target.call(i,n,t),i.opt.mouseout&&i.opt.mouseout.call(i,n,t)})},_bindOutCancel:function(){var e=this;e.cancel.on("mouseleave.raty",function(i){t(this).attr("src",e.opt.path+e.opt.cancelOff),e.opt.mouseout&&e.opt.mouseout.call(e,e.score.val()||null,i)})},_bindOverCancel:function(){var i=this;i.cancel.on("mouseover.raty",function(n){t(this).attr("src",i.opt.path+i.opt.cancelOn),i.stars.attr("src",i.opt.path+i.opt.starOff),e._target.call(i,null,n),i.opt.mouseover&&i.opt.mouseover.call(i,null)})},_bindOver:function(){var i=this,n=t(i),s=i.opt.half?"mousemove.raty":"mouseover.raty";i.stars.on(s,function(s){var o=parseInt(this.alt,10);if(i.opt.half){var r=parseFloat((s.pageX-t(this).offset().left)/i.opt.size),a=r>.5?1:.5;o=o-1+a,e._fill.call(i,o),i.opt.precision&&(o=o-a+r),e._roundStars.call(i,o),n.data("score",o)}else e._fill.call(i,o);e._target.call(i,o,s),i.opt.mouseover&&i.opt.mouseover.call(i,o,s)})},_callback:function(t){for(i in t)"function"==typeof this.opt[t[i]]&&(this.opt[t[i]]=this.opt[t[i]].call(this))},_createCancel:function(){var e=t(this),i=this.opt.path+this.opt.cancelOff,n=t("<img />",{src:i,alt:"x",title:this.opt.cancelHint,"class":"raty-cancel"});return"left"==this.opt.cancelPlace?e.prepend("&#160;").prepend(n):e.append("&#160;").append(n),n},_createScore:function(){return t("<input />",{type:"hidden",name:this.opt.scoreName}).appendTo(this)},_createStars:function(){for(var i=t(this),n=1;n<=this.opt.number;n++){var s=e._getHint.call(this,n),o=this.opt.score&&this.opt.score>=n?"starOn":"starOff";o=this.opt.path+this.opt[o],t("<img />",{src:o,alt:n,title:s}).appendTo(this),this.opt.space&&i.append(n<this.opt.number?"&#160;":"")}return i.children("img")},_error:function(e){t(this).html(e),t.error(e)},_fill:function(t){for(var e=this,i=0,n=1;n<=e.stars.length;n++){var s=e.stars.eq(n-1),o=e.opt.single?n==t:t>=n;if(e.opt.iconRange&&e.opt.iconRange.length>i){var r=e.opt.iconRange[i],a=r.on||e.opt.starOn,l=r.off||e.opt.starOff,h=o?a:l;n<=r.range&&s.attr("src",e.opt.path+h),n==r.range&&i++}else{var h=o?"starOn":"starOff";s.attr("src",this.opt.path+this.opt[h])}}},_getHint:function(t){var e=this.opt.hints[t-1];return""===e?"":e||t},_lock:function(){var i=parseInt(this.score.val(),10);i?e._getHint.call(this,i):this.opt.noRatedMsg,t(this).data("readonly",!0).css("cursor",""),this.score.attr("readonly","readonly"),this.cancel&&this.cancel.hide()},_roundStars:function(t){var e=(t-Math.floor(t)).toFixed(2);if(e>this.opt.round.down){var i="starOn";this.opt.halfShow&&e<this.opt.round.up?i="starHalf":e<this.opt.round.full&&(i="starOff"),this.stars.eq(Math.ceil(t)-1).attr("src",this.opt.path+this.opt[i])}},_target:function(i,n){if(this.opt.target){var s=t(this.opt.target);0===s.length&&e._error.call(this,"Target selector invalid or missing!"),this.opt.targetFormat.indexOf("{score}")<0&&e._error.call(this,'Template "{score}" missing!');var o=n&&"mouseover"==n.type;void 0===i?i=this.opt.targetText:null===i?i=o?this.opt.cancelHint:this.opt.targetText:("hint"==this.opt.targetType?i=e._getHint.call(this,Math.ceil(i)):this.opt.precision&&(i=parseFloat(i).toFixed(1)),o||this.opt.targetKeep||(i=this.opt.targetText)),i&&(i=this.opt.targetFormat.toString().replace("{score}",i)),s.is(":input")?s.val(i):s.html(i)}},_unlock:function(){t(this).data("readonly",!1).css("cursor","pointer").removeAttr("title"),this.score.removeAttr("readonly","readonly");for(var i=0;i<this.opt.number;i++)this.stars.eq(i).attr("title",e._getHint.call(this,i+1));this.cancel&&this.cancel.css("display","")},cancel:function(i){return this.each(function(){t(this).data("readonly")!==!0&&(e[i?"click":"score"].call(this,null),this.score.removeAttr("value"))})},click:function(i){return t(this).each(function(){t(this).data("readonly")!==!0&&(e._apply.call(this,i),this.opt.click||e._error.call(this,'You must add the "click: function(score, evt) { }" callback.'),this.opt.click.call(this,i,t.Event("click")),e._target.call(this,i))})},destroy:function(){return t(this).each(function(){var e=t(this),i=e.data("raw");i?e.off(".raty").empty().css({cursor:i.style.cursor,width:i.style.width}).removeData("readonly"):e.data("raw",e.clone()[0])})},getScore:function(){var e,i=[];return t(this).each(function(){e=this.score.val(),i.push(e?parseFloat(e):void 0)}),i.length>1?i:i[0]},readOnly:function(i){return this.each(function(){var n=t(this);n.data("readonly")!==i&&(i?(n.off(".raty").children("img").off(".raty"),e._lock.call(this)):(e._binds.call(this),e._unlock.call(this)),n.data("readonly",i))})},reload:function(){return e.set.call(this,{})},score:function(){return arguments.length?e.setScore.apply(this,arguments):e.getScore.call(this)},set:function(e){return this.each(function(){var i=t(this),n=i.data("settings"),s=t.extend({},n,e);i.raty(s)})},setScore:function(i){return t(this).each(function(){t(this).data("readonly")!==!0&&(e._apply.call(this,i),e._target.call(this,i))})}};t.fn.raty=function(i){return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(t.error("Method "+i+" does not exist!"),void 0):e.init.apply(this,arguments)},t.fn.raty.defaults={cancel:!1,cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:void 0,half:!1,halfShow:!0,hints:["Very Poor","Poor","OK","Good","Excellent"],iconRange:void 0,mouseout:void 0,mouseover:void 0,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:"",precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:void 0,scoreName:"score",single:!1,size:16,space:!0,starHalf:"/assets/raty/star-half.png",starOff:"/assets/raty/star-off.png",starOn:"/assets/raty/star-on.png",target:void 0,targetFormat:"{score}",targetKeep:!1,targetText:"",targetType:"hint",width:void 0}}(jQuery),function(t){t.titleAlert=function(e,i){if(t.titleAlert._running&&t.titleAlert.stop(),t.titleAlert._settings=i=t.extend({},t.titleAlert.defaults,i),!i.requireBlur||!t.titleAlert.hasFocus){i.originalTitleInterval=i.originalTitleInterval||i.interval,t.titleAlert._running=!0,t.titleAlert._initialText=document.title,document.title=e;var n=!0,s=function(){t.titleAlert._running&&(n=!n,document.title=n?e:t.titleAlert._initialText,t.titleAlert._intervalToken=setTimeout(s,n?i.interval:i.originalTitleInterval))};t.titleAlert._intervalToken=setTimeout(s,i.interval),i.stopOnMouseMove&&t(document).mousemove(function(e){t(this).unbind(e),t.titleAlert.stop()}),i.duration>0&&(t.titleAlert._timeoutToken=setTimeout(function(){t.titleAlert.stop()},i.duration))}},t.titleAlert.defaults={interval:500,originalTitleInterval:null,duration:0,stopOnFocus:!0,requireBlur:!1,stopOnMouseMove:!1},t.titleAlert.stop=function(){clearTimeout(t.titleAlert._intervalToken),clearTimeout(t.titleAlert._timeoutToken),document.title=t.titleAlert._initialText,t.titleAlert._timeoutToken=null,t.titleAlert._intervalToken=null,t.titleAlert._initialText=null,t.titleAlert._running=!1,t.titleAlert._settings=null},t.titleAlert.hasFocus=!0,t.titleAlert._running=!1,t.titleAlert._intervalToken=null,t.titleAlert._timeoutToken=null,t.titleAlert._initialText=null,t.titleAlert._settings=null,t.titleAlert._focus=function(){if(t.titleAlert.hasFocus=!0,t.titleAlert._running&&t.titleAlert._settings.stopOnFocus){var e=t.titleAlert._initialText;t.titleAlert.stop(),setTimeout(function(){t.titleAlert._running||(document.title=".",document.title=e)},1e3)}},t.titleAlert._blur=function(){t.titleAlert.hasFocus=!1},t(window).bind("focus",t.titleAlert._focus),t(window).bind("blur",t.titleAlert._blur)}(jQuery),function(t){"use strict";function e(t,i,n,s,o,r,a,l){var h,c,u,d,p,f=function(t){return(l?a:"")+t+(l?"":a)};return l?(h=0===s?"":n.slice(-s),c=n.slice(-o)):(h=n.slice(0,s),c=n.slice(0,o)),i<r.html(a)[t]()?0:(d=r.html(f(c))[t](),p=r.html(f(h))[t](),p>d?o:(u=parseInt((s+o)/2,10),h=l?n.slice(-u):n.slice(0,u),r.html(f(h)),r[t]()===i?u:(r[t]()>i?o=u-1:s=u+1,e(t,i,n,s,o,r,a,l))))}t.fn.truncate=function(i){i&&i.center&&!i.side&&(i.side="center",delete i.center),i&&!/^(left|right|center)$/.test(i.side)&&delete i.side;var n={width:"auto",token:"&hellip;",side:"right",addclass:!1,addtitle:!1,multiline:!1};return i=t.extend(n,i),this.each(function(){var n,s,o,r=t(this),a={fontFamily:r.css("fontFamily"),fontSize:r.css("fontSize"),fontStyle:r.css("fontStyle"),fontWeight:r.css("fontWeight"),"font-variant":r.css("font-variant"),"text-indent":r.css("text-indent"),"text-transform":r.css("text-transform"),"letter-spacing":r.css("letter-spacing"),"word-spacing":r.css("word-spacing"),display:"none"},l=r.text(),h=t("<span/>").css(a).html(l).appendTo("body"),c=h.width(),u=parseInt(i.width,10)||r.width(),d="width";if(i.multiline?(h.width(r.width()),d="height",s=h.height(),o=r.height()+1):(s=c,o=u),s>o){var p,f;h.text(""),"left"===i.side?(p=e(d,o,l,0,l.length,h,i.token,!0),n=[i.token,l.slice(-1*p)].join("")):"center"===i.side?(o=parseInt(o/2,10)-1,p=e(d,o,l,0,l.length,h,i.token,!1),f=e(d,o,l,0,l.length,h,"",!0),n=[l.slice(0,p),i.token,l.slice(-1*f)].join("")):"right"===i.side&&(p=e(d,o,l,0,l.length,h,i.token,!1),n=[l.slice(0,p),i.token].join("")),i.addclass&&r.addClass(i.addclass),i.addtitle&&r.attr("title",l),r.empty().append(n)}h.remove()})}}(jQuery),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function s(t,n){var s=this,o=i(s);if(s.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),t===!0)return o[0].value=n;o.focus()}else s.value="",o.removeClass("placeholder"),s==e.activeElement&&s.select()}function o(){var t,e=this,o=i(e),r=this.id;if(""==e.value){if("password"==e.type){if(!o.data("placeholder-textinput")){try{t=o.clone().attr({type:"text"})}catch(a){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":r}).bind("focus.placeholder",s),o.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}o=o.removeAttr("id").hide().prev().attr("id",r).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var r,a,l="placeholder"in e.createElement("input"),h="placeholder"in e.createElement("textarea"),c=i.fn,u=i.valHooks;l&&h?(a=c.placeholder=function(){return this},a.input=a.textarea=!0):(a=c.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":s,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},a.input=l,a.textarea=h,r={get:function(t){var e=i(t);return e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,n){var r=i(t);return r.data("placeholder-enabled")?(""==n?(t.value=n,t!=e.activeElement&&o.call(t)):r.hasClass("placeholder")?s.call(t,!0,n)||(t.value=n):t.value=n,r):t.value=n}},l||(u.input=r),h||(u.textarea=r),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(s);setTimeout(function(){t.each(o)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2013 Brian Cherne
 */
function(t){t.fn.hoverIntent=function(e,i,n){var s={interval:100,sensitivity:7,timeout:0};s="object"==typeof e?t.extend(s,e):t.isFunction(i)?t.extend(s,{over:e,out:i,selector:n}):t.extend(s,{over:e,out:e,selector:i});var o,r,a,l,h=function(t){o=t.pageX,r=t.pageY},c=function(e,i){return i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(a-o)+Math.abs(l-r)<s.sensitivity?(t(i).off("mousemove.hoverIntent",h),i.hoverIntent_s=1,s.over.apply(i,[e])):(a=o,l=r,i.hoverIntent_t=setTimeout(function(){c(e,i)},s.interval),void 0)},u=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=0,s.out.apply(e,[t])},d=function(e){var i=jQuery.extend({},e),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"==e.type?(a=i.pageX,l=i.pageY,t(n).on("mousemove.hoverIntent",h),1!=n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){c(i,n)},s.interval))):(t(n).off("mousemove.hoverIntent",h),1==n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){u(i,n)},s.timeout)))};return this.on({"mouseenter.hoverIntent":d,"mouseleave.hoverIntent":d},s.selector)}}(jQuery),// Copyright (c) 2011 Harvest http://getharvest.com
function(){var t;t=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,n,s,o,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:t.label,children:0,disabled:t.disabled}),o=t.childNodes,r=[],n=0,s=o.length;s>n;n++)i=o[n],r.push(this.add_option(i,e,t.disabled));return r},t.prototype.add_option=function(t,e,i){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:i===!0?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t}(),t.select_to_array=function(e){var i,n,s,o,r;for(n=new t,r=e.childNodes,s=0,o=r.length;o>s;s++)i=r[s],n.add_node(i);return n.parsed},this.SelectParser=t}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var t,e;e=this,t=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.result_add_option=function(t){var e,i;return t.disabled?"":(t.dom_id=this.container_id+"_o_"+t.array_index,e=t.selected&&this.is_multiple?[]:["active-result"],t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=""!==t.style.cssText?' style="'+t.style+'"':"",'<li id="'+t.dom_id+'" class="'+e.join(" ")+'"'+i+">"+t.html+"</li>")},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.generate_field_id=function(){var t;return t=this.generate_random_id(),this.form_field.id=t,t},t.prototype.generate_random_char=function(){var t,e,i;return t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=Math.floor(Math.random()*t.length),e=t.substring(i,i+1)},t.prototype.container_width=function(){var t;return null!=this.options.width?this.options.width:(t=null!=window.getComputedStyle?parseFloat(window.getComputedStyle(this.form_field).getPropertyValue("width")):"undefined"!=typeof jQuery&&null!==jQuery&&null!=this.form_field_jq?this.form_field_jq.outerWidth():this.form_field.getWidth(),t+"px")},t.browser_is_supported=function(){var t;return"Microsoft Internet Explorer"===window.navigator.appName?null!==(t=document.documentMode)&&t>=8:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),e.AbstractChosen=t}.call(this),/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/
function(){var t,e,i,n={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};i=this,t=jQuery,t.fn.extend({chosen:function(i){return AbstractChosen.browser_is_supported()?this.each(function(){var n;return n=t(this),n.hasClass("chzn-done")?void 0:n.data("chosen",new e(this,i))}):this}}),e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},n.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},n.prototype.set_up_html=function(){var e,i;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",e=["chzn-container"],e.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chzn-rtl"),i={id:this.container_id,"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop"><ul class="chzn-results"></ul></div>'):this.container.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chzn-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.mousedown(function(e){t.container_mousedown(e)}),this.container.mouseup(function(e){t.container_mouseup(e)}),this.container.mouseenter(function(e){t.mouse_enter(e)}),this.container.mouseleave(function(e){t.mouse_leave(e)}),this.search_results.mouseup(function(e){t.search_results_mouseup(e)}),this.search_results.mouseover(function(e){t.search_results_mouseover(e)}),this.search_results.mouseout(function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel DOMMouseScroll",function(e){t.search_results_mousewheel(e)}),this.form_field_jq.bind("liszt:updated",function(e){t.results_update_field(e)}),this.form_field_jq.bind("liszt:activate",function(e){t.activate_field(e)}),this.form_field_jq.bind("liszt:open",function(e){t.container_mousedown(e)}),this.search_field.blur(function(e){t.input_blur(e)}),this.search_field.keyup(function(e){t.keyup_checker(e)}),this.search_field.keydown(function(e){t.keydown_checker(e)}),this.search_field.focus(function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.click(function(e){t.choices_click(e)}):this.container.click(function(t){t.preventDefault()})},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},n.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chzn-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).click(this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e,i,n;return e=-(null!=(i=t.originalEvent)?i.wheelDelta:void 0)||(null!=(n=t.originialEvent)?n.detail:void 0),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return t(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){return t(e.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){var t,e,n,s,o;for(this.parsing=!0,this.results_data=i.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),t="",o=this.results_data,n=0,s=o.length;s>n;n++)e=o[n],e.group?t+=this.result_add_group(e):e.empty||(t+=this.result_add_option(e),e.selected&&this.is_multiple?this.choice_build(e):e.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(e.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(t),this.parsing=!1},n.prototype.result_add_group=function(e){return e.disabled?"":(e.dom_id=this.container_id+"_g_"+e.array_index,'<li id="'+e.dom_id+'" class="group-result">'+t("<div />").text(e.label).html()+"</li>")},n.prototype.result_do_highlight=function(t){var e,i,n,s,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),s=n+o,i=this.result_highlight.position().top+this.search_results.scrollTop(),e=i+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-n>0?e-n:0);if(o>i)return this.search_results.scrollTop(i)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){if(null!=this.result_single_selected)this.result_do_highlight(this.result_single_selected);else if(this.is_multiple&&this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return this.container.addClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},n.prototype.results_hide=function(){return this.result_clear_highlight(),this.container.removeClass("chzn-with-drop"),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.results_showing=!1},n.prototype.set_tab_index=function(){var t;return this.form_field_jq.attr("tabindex")?(t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)):void 0},n.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for="+this.form_field.id+"]")),this.form_field_label.length>0?this.form_field_label.click(function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(e),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(e){var i;return i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},n.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(e){var i,n,s,o=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(i=this.container_id+"_c_"+e.array_index,this.choices+=1,n=e.disabled?'<li class="search-choice search-choice-disabled" id="'+i+'"><span>'+e.html+"</span></li>":'<li class="search-choice" id="'+i+'"><span>'+e.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+e.array_index+'"></a></li>',this.search_container.before(n),s=t("#"+i).find("a").first(),s.click(function(t){return o.choice_destroy_link_click(t)}))},n.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){return this.result_deselect(t.attr("rel"))?(this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,i,n,s;return this.result_highlight?(e=this.result_highlight,i=e.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(e):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=e,this.selected_item.removeClass("chzn-default")),e.addClass("result-selected"),s=i.substr(i.lastIndexOf("_")+1),n=this.results_data[s],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.is_multiple?this.choice_build(n):(this.selected_item.find("span").first().text(n.text),this.allow_single_deselect&&this.single_deselect_control_build()),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale()):void 0},n.prototype.result_activate=function(t){return t.addClass("active-result")},n.prototype.result_deactivate=function(t){return t.removeClass("active-result")},n.prototype.result_deselect=function(e){var i,n;return n=this.results_data[e],this.form_field.options[n.options_index].disabled?!1:(n.selected=!1,this.form_field.options[n.options_index].selected=!1,i=t("#"+this.container_id+"_o_"+e),i.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[n.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},n.prototype.winnow_results=function(){var e,i,n,s,o,r,a,l,h,c,u,d,p,f,m,g,v,_;for(this.no_results_clear(),h=0,c=this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html(),r=this.search_contains?"":"^",o=new RegExp(r+c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=new RegExp(c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),_=this.results_data,f=0,g=_.length;g>f;f++)if(i=_[f],!i.disabled&&!i.empty)if(i.group)t("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(e=!1,l=i.dom_id,a=t("#"+l),o.test(i.html))e=!0,h+=1;else if(this.enable_split_word_search&&(i.html.indexOf(" ")>=0||0===i.html.indexOf("["))&&(s=i.html.replace(/\[|\]/g,"").split(" "),s.length))for(m=0,v=s.length;v>m;m++)n=s[m],o.test(n)&&(e=!0,h+=1);e?(c.length?(u=i.html.search(p),d=i.html.substr(0,u+c.length)+"</em>"+i.html.substr(u+c.length),d=d.substr(0,u)+"<em>"+d.substr(u)):d=i.html,a.html(d),this.result_activate(a),null!=i.group_array_index&&t("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&l===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(a))}return 1>h&&c.length?this.no_results(c):this.winnow_results_set_highlight()},n.prototype.winnow_results_clear=function(){var e,i,n,s,o;for(this.search_field.val(""),i=this.search_results.find("li"),o=[],n=0,s=i.length;s>n;n++)e=i[n],e=t(e),e.hasClass("group-result")?o.push(e.css("display","auto")):this.is_multiple&&e.hasClass("result-selected")?o.push(void 0):o.push(this.result_activate(e));return o},n.prototype.winnow_results_set_highlight=function(){var t,e;return this.result_highlight||(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null==t)?void 0:this.result_do_highlight(t)},n.prototype.no_results=function(e){var i;return i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(e),this.search_results.append(i)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e,i;return this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first(),i&&this.result_do_highlight(i)):(e=this.search_results.find("li.active-result").first(),e&&this.result_do_highlight(t(e))),this.results_showing?void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,i,n,s,o,r,a,l;if(this.is_multiple){for(i=0,r=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],a=0,l=o.length;l>a;a++)n=o[a],s+=n+":"+this.search_field.css(n)+";";return e=t("<div />",{style:s}),e.text(this.search_field.val()),t("body").append(e),r=e.width()+25,e.remove(),this.f_width||(this.f_width=this.container.outerWidth()),r>this.f_width-10&&(r=this.f_width-10),this.search_field.css({width:r+"px"})}},n.prototype.generate_random_id=function(){var e;for(e="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();t("#"+e).length>0;)e+=this.generate_random_char();return e},n}(AbstractChosen),i.Chosen=e}.call(this),/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.1
 *
 */
function(e){jQuery.fn.extend({slimScroll:function(i){var n={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",animate:!1,railBorderRadius:"7px"},s=e.extend(n,i);return this.each(function(){function n(t){if(c){var t=t||window.event,i=0;t.wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3);var n=t.target||t.srcTarget||t.srcElement;e(n).closest("."+s.wrapperClass).is(w.parent())&&o(i,!0),t.preventDefault&&!b&&t.preventDefault(),b||(t.returnValue=!1)}}function o(t,e,i){b=!1;var n=t,o=w.outerHeight()-S.outerHeight();if(e&&(n=parseInt(S.css("top"))+t*parseInt(s.wheelStep)/100*S.outerHeight(),n=Math.min(Math.max(n,0),o),n=t>0?Math.ceil(n):Math.floor(n),S.css({top:n+"px"})),g=parseInt(S.css("top"))/(w.outerHeight()-S.outerHeight()),n=g*(w[0].scrollHeight-w.outerHeight()),i){n=t;var r=n/w[0].scrollHeight*w.outerHeight();r=Math.min(Math.max(r,0),o),S.css({top:r+"px"})}s.animate?w.animate({scrollTop:n}):w.scrollTop(n),w.trigger("slimscrolling",~~n),l(),h()}function r(){window.addEventListener?(this.addEventListener("DOMMouseScroll",n,!1),this.addEventListener("mousewheel",n,!1),this.addEventListener("MozMousePixelScroll",n,!1)):document.attachEvent("onmousewheel",n)}function a(){m=Math.max(w.outerHeight()/w[0].scrollHeight*w.outerHeight(),y),S.css({height:m+"px"});var t=m==w.outerHeight()?"none":"block";S.css({display:t})}function l(){if(a(),clearTimeout(p),g==~~g){if(b=s.allowPageScroll,v!=g){var t=0==~~g?"top":"bottom";w.trigger("slimscroll",t)}}else b=!1;return v=g,m>=w.outerHeight()?(b=!0,void 0):(S.stop(!0,!0).fadeIn("fast"),s.railVisible&&A.stop(!0,!0).fadeIn("fast"),void 0)}function h(){s.alwaysVisible||(p=setTimeout(function(){s.disableFadeOut&&c||u||d||(S.fadeOut("slow"),A.fadeOut("slow"))},1e3))}var c,u,d,p,f,m,g,v,_="<div></div>",y=30,b=!1,w=e(this);if(w.parent().hasClass(s.wrapperClass)){var C=w.scrollTop();if(S=w.parent().find("."+s.barClass),A=w.parent().find("."+s.railClass),a(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){w.parent().css("height","auto"),w.css("height","auto");var x=w.parent().parent().height();w.parent().css("height",x),w.css("height",x)}if("scrollTo"in i)C=parseInt(s.scrollTo);else if("scrollBy"in i)C+=parseInt(s.scrollBy);else if("destroy"in i)return S.remove(),A.remove(),w.unwrap(),void 0;o(C,!1,!0)}}else{s.height="auto"==s.height?w.parent().height():s.height;var T=e(_).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",width:s.width,height:s.height});w.css({overflow:"hidden",width:s.width,height:s.height});var A=e(_).addClass(s.railClass).css({width:s.size,height:"100%",position:"absolute",top:0,display:s.alwaysVisible&&s.railVisible?"block":"none","border-radius":s.railBorderRadius,background:s.railColor,opacity:s.railOpacity,zIndex:90}),S=e(_).addClass(s.barClass).css({background:s.color,width:s.size,position:"absolute",top:0,opacity:s.opacity,display:s.alwaysVisible?"block":"none","border-radius":s.borderRadius,BorderRadius:s.borderRadius,MozBorderRadius:s.borderRadius,WebkitBorderRadius:s.borderRadius,zIndex:99}),k="right"==s.position?{right:s.distance}:{left:s.distance};A.css(k),S.css(k),w.wrap(T),w.parent().append(S),w.parent().append(A),s.railDraggable&&S.bind("mousedown",function(i){var n=e(document);return d=!0,t=parseFloat(S.css("top")),pageY=i.pageY,n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,S.css("top",currTop),o(0,S.position().top,!1)}),n.bind("mouseup.slimscroll",function(){d=!1,h(),n.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),A.hover(function(){l()},function(){h()}),S.hover(function(){u=!0},function(){u=!1}),w.hover(function(){c=!0,l(),h()},function(){c=!1,h()}),w.bind("touchstart",function(t){t.originalEvent.touches.length&&(f=t.originalEvent.touches[0].pageY)}),w.bind("touchmove",function(t){if(b||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var e=(f-t.originalEvent.touches[0].pageY)/s.touchScrollStep;o(e,!0),f=t.originalEvent.touches[0].pageY}}),a(),"bottom"===s.start?(S.css({top:w.outerHeight()-S.outerHeight()}),o(0,!0)):"top"!==s.start&&(o(e(s.start).position().top,null,!0),s.alwaysVisible||S.hide()),r()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery),/**
 * Bootstrap.js by @fat & @mdo
 * plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-dropdown.js, bootstrap-scrollspy.js, bootstrap-tab.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-affix.js, bootstrap-alert.js, bootstrap-button.js, bootstrap-collapse.js, bootstrap-carousel.js, bootstrap-typeahead.js
 * Copyright 2012 Twitter, Inc.
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 */
!function(t){t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]!==t.target&&!e.$element.has(t.target).length&&e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var i=t.fn.modal;t.fn.modal=function(i){return this.each(function(){var n=t(this),s=n.data("modal"),o=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new e(this,o)),"string"==typeof i?s[i]():o.show&&s.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());e.preventDefault(),s.modal(o).one("hide",function(){i.focus()})})}(window.jQuery),!function(t){var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var s,o,r,a,l;for(this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i,n=t.fn[this.type].defaults,s={};return this._options&&t.each(this._options,function(t,e){n[t]!=e&&(s[t]=e)},this),i=t(e.currentTarget)[this.type](s).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var e,i,n,s,o,r,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),i=this.getPosition(),n=e[0].offsetWidth,s=e[0].offsetHeight,o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(r,o),this.$element.trigger("shown")}},applyPlacement:function(t,e){var i,n,s,o,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(t).addClass(e).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==e&&n!=l&&(t.top=t.top+l-n,o=!0),"bottom"==e||"top"==e?(s=0,t.left<0&&(s=-2*t.left,t.left=0,r.offset(t),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(s-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&r.offset(t)},replaceArrow:function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){i.off(t.support.transition.end).detach()},500);i.one(t.support.transition.end,function(){clearTimeout(e),i.detach()})}var i=this.tip(),n=t.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),!function(t){var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,i=this.options;return t=("function"==typeof i.content?i.content.call(e[0]):i.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),s=n.data("popover"),o="object"==typeof i&&i;s||n.data("popover",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.cinit("clickover",t,e)};e.prototype=t.extend({},t.fn.popover.Constructor.prototype,{constructor:e,cinit:function(e,i,n){this.attr={},this.attr.me=(10*Math.random()+"").replace(/\D/g,""),this.attr.click_event_ns="click."+this.attr.me+" touchstart."+this.attr.me,n||(n={}),n.trigger="manual",this.init(e,i,n),this.$element.on("click",this.options.selector,t.proxy(this.clickery,this))},clickery:function(e){if(e&&(e.preventDefault(),e.stopPropagation()),this.options.width&&this.tip().width(this.options.width),this.options.height&&this.tip().height(this.options.height),this.options.tip_id&&this.tip().attr("id",this.options.tip_id),this.options.class_name&&this.tip().addClass(this.options.class_name),this[this.isShown()?"hide":"show"](),this.isShown()){var i=this;this.options.global_close&&t("body").on(this.attr.click_event_ns,function(t){i.tip().has(t.target).length||i.clickery()}),this.options.esc_close&&t(document).bind("keyup.clickery",function(t){27==t.keyCode&&i.clickery()}),!this.options.allow_multiple&&t("[data-clickover-open=1]").each(function(){t(this).data("clickover")&&t(this).data("clickover").clickery()}),this.$element.attr("data-clickover-open",1),this.tip().on("click",'[data-dismiss="clickover"]',t.proxy(this.clickery,this)),this.options.auto_close&&this.options.auto_close>0&&(this.attr.tid=setTimeout(t.proxy(this.clickery,this),this.options.auto_close)),"function"==typeof this.options.onShown&&this.options.onShown.call(this),this.$element.trigger("shown")}else this.$element.removeAttr("data-clickover-open"),this.options.esc_close&&t(document).unbind("keyup.clickery"),t("body").off(this.attr.click_event_ns),"number"==typeof this.attr.tid&&(clearTimeout(this.attr.tid),delete this.attr.tid),"function"==typeof this.options.onHidden&&this.options.onHidden.call(this),this.$element.trigger("hidden")},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var t,e,i,n,s,o,r;if(this.hasContent()&&this.enabled){switch(t=this.tip(),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(o),i=this.getPosition(e),n=t[0].offsetWidth,s=t[0].offsetHeight,e?o.split(" ")[1]:o){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-s/2,left:i.left+i.width}}t.css(r)}},debughide:function(){var t=(new Date).toString();console.log(t+": clickover hide"),this.hide()}}),t.fn.clickover=function(i){return this.each(function(){var n=t(this),s=n.data("clickover"),o="object"==typeof i&&i;s||n.data("clickover",s=new e(this,o)),"string"==typeof i&&s[i]()})},t.fn.clickover.Constructor=e,t.fn.clickover.defaults=t.extend({},t.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery),/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Improvements by Sébastien Malot
 * Improvements by Yun Lai
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(e,i){var o=this;this.element=t(e),this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=s.parseFormat(i.format||this.element.data("date-format")||n[this.language].format||s.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=s.parseFormat(i.linkFormat||this.element.data("link-format")||s.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=s.convertViewMode(this.minView),this.maxView=s.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=s.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=s.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=s.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(s.template).appendTo(this.isInline?this.element:"body").on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&o.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,i,n=0;n<this._events.length;n++)e=this._events[n][0],i=this._events[n][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=s.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),s.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=s.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,1/0!==this.endDate&&(this.endDate=s.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e,i,n,s=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10;this.component?(e=this.component.offset(),n=e.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(n+=this.component.outerWidth()-this.picker.outerWidth())):(e=this.element.offset(),n=e.left),i="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?e.top-this.picker.outerHeight():e.top+this.height,this.picker.css({top:i,left:n,zIndex:s})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,t||(t=new Date,e=!1),this.date=s.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+n[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+n[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),o=i.getUTCFullYear(),r=i.getUTCMonth(),a=i.getUTCDate(),l=i.getUTCHours(),h=i.getUTCMinutes(),c=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,u=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,d=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,p=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,f=new e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[r]+" "+o),"time"==this.formatViewType){var g=l%12?l%12:12,v=(10>g?"0":"")+g,_=(10>h?"0":"")+h,y=n[this.language].meridiem[12>l?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+_+" "+y.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+_+" "+y.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(a+" "+n[this.language].months[r]+" "+o),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(a+" "+n[this.language].months[r]+" "+o);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var b=e(o,r-1,28,0,0,0,0),w=s.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth());b.setUTCDate(w),b.setUTCDate(w-(b.getUTCDay()-this.weekStart+7)%7);var C=new Date(b);C.setUTCDate(C.getUTCDate()+42),C=C.valueOf();for(var x,T=[];b.valueOf()<C;)b.getUTCDay()==this.weekStart&&T.push("<tr>"),x="",b.getUTCFullYear()<o||b.getUTCFullYear()==o&&b.getUTCMonth()<r?x+=" old":(b.getUTCFullYear()>o||b.getUTCFullYear()==o&&b.getUTCMonth()>r)&&(x+=" new"),this.todayHighlight&&b.getUTCFullYear()==m.getFullYear()&&b.getUTCMonth()==m.getMonth()&&b.getUTCDate()==m.getDate()&&(x+=" today"),b.valueOf()==f&&(x+=" active"),(b.valueOf()+864e5<=this.startDate||b.valueOf()>this.endDate||-1!==t.inArray(b.getUTCDay(),this.daysOfWeekDisabled))&&(x+=" disabled"),T.push('<td class="day'+x+'">'+b.getUTCDate()+"</td>"),b.getUTCDay()==this.weekEnd&&T.push("</tr>"),b.setUTCDate(b.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(T.join("")),T=[];for(var A="",S="",k="",D=0;24>D;D++){var L=e(o,r,a,D);x="",L.valueOf()+36e5<=this.startDate||L.valueOf()>this.endDate?x+=" disabled":l==D&&(x+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(S=12>D?n[this.language].meridiem[0]:n[this.language].meridiem[1],S!=k&&(""!=k&&T.push("</fieldset>"),T.push('<fieldset class="hour"><legend>'+S.toUpperCase()+"</legend>")),k=S,A=D%12?D%12:12,T.push('<span class="hour'+x+" hour_"+(12>D?"am":"pm")+'">'+A+"</span>"),23==D&&T.push("</fieldset>")):(A=D+":00",T.push('<span class="hour'+x+'">'+A+"</span>"))}this.picker.find(".datetimepicker-hours td").html(T.join("")),T=[],A="",S="",k="";for(var D=0;60>D;D+=this.minuteStep){var L=e(o,r,a,l,D,0);x="",L.valueOf()<this.startDate||L.valueOf()>this.endDate?x+=" disabled":Math.floor(h/this.minuteStep)==Math.floor(D/this.minuteStep)&&(x+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(S=12>l?n[this.language].meridiem[0]:n[this.language].meridiem[1],S!=k&&(""!=k&&T.push("</fieldset>"),T.push('<fieldset class="minute"><legend>'+S.toUpperCase()+"</legend>")),k=S,A=l%12?l%12:12,T.push('<span class="minute'+x+'">'+A+":"+(10>D?"0"+D:D)+"</span>"),59==D&&T.push("</fieldset>")):(A=D+":00",T.push('<span class="minute'+x+'">'+l+":"+(10>D?"0"+D:D)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(T.join(""));var M=this.date.getUTCFullYear(),E=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");M==o&&E.eq(this.date.getUTCMonth()).addClass("active"),(c>o||o>d)&&E.addClass("disabled"),o==c&&E.slice(0,u).addClass("disabled"),o==d&&E.slice(p+1).addClass("disabled"),T="",o=10*parseInt(o/10,10);var N=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var D=-1;11>D;D++)T+='<span class="year'+(-1==D||10==D?" old":"")+(M==o?" active":"")+(c>o||o>d?" disabled":"")+'">'+o+"</span>",o+=1;N.html(T),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),n=t.getUTCDate(),s=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&s<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&s>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=e.originalEvent,n=i.wheelDelta,s=n>0?1:0===n?0:-1;this.wheelViewModeNavigationInverseDirection&&(s=-s),this.showMode(s),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(i){i.stopPropagation(),i.preventDefault();var n=t(i.target).closest("span, td, th, legend");if(1==n.length){if(n.is(".disabled"))return this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate}),void 0;switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var o=s.modes[this.viewMode].navStep*("prev"==n[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var r=new Date;r=e(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),0),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(r),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!n.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();if(n.is(".month")?(this.viewDate.setUTCDate(1),l=n.parent().find("span").index(n),h=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(e(a,l,h,c,u,d,0))):n.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(n.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(e(a,l,h,c,u,d,0))):n.is(".hour")?(c=parseInt(n.text(),10)||0,(n.hasClass("hour_am")||n.hasClass("hour_pm"))&&(12==c&&n.hasClass("hour_am")?c=0:12!=c&&n.hasClass("hour_pm")&&(c+=12)),this.viewDate.setUTCHours(c),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(e(a,l,h,c,u,d,0))):n.is(".minute")&&(u=parseInt(n.text().substr(n.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(u),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(e(a,l,h,c,u,d,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var h=parseInt(n.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();n.is(".old")?0===l?(l=11,a-=1):l-=1:n.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(l),this.viewDate.setUTCDate(h),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(e(a,l,h,c,u,d,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+e*this.minuteStep),i},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,n,s=new Date(t.valueOf()),o=s.getUTCDate(),r=s.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)n=-1==e?function(){return s.getUTCMonth()==r}:function(){return s.getUTCMonth()!=i},i=r+e,s.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;a>l;l++)s=this.moveMonth(s,e);i=s.getUTCMonth(),s.setUTCDate(o),n=function(){return i!=s.getUTCMonth()}}for(;n();)s.setUTCDate(--o),s.setUTCMonth(i);return s},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return 27==t.keyCode&&this.show(),void 0;var e,i,n,s=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,e),n=this.moveDate(this.viewDate,e)):1==viewMode?(i=this.moveHour(this.date,e),n=this.moveHour(this.viewDate,e)):0==viewMode&&(i=this.moveMinute(this.date,e),n=this.moveMinute(this.viewDate,e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),n=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),n=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,7*e),n=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*e),n=this.moveHour(this.viewDate,6*e)):(i=this.moveHour(this.date,4*e),n=this.moveHour(this.viewDate,4*e)):0==viewMode&&(i=this.moveMinute(this.date,4*e),n=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),t.preventDefault(),s=!0);break;case 13:if(0!=this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(s){var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(s.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+s.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")}},t.fn.datetimepicker=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var s=t(this),o=s.data("datetimepicker"),r="object"==typeof e&&e;o||s.data("datetimepicker",o=new i(this,t.extend({},t.fn.datetimepicker.defaults,r))),"string"==typeof e&&"function"==typeof o[e]&&o[e].apply(o,n)})},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=i;var n=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},s={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return 0===t%4&&0!==t%100||0===t%400},getDaysInMonth:function(t,e){return[31,s.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var i=t.replace(this.validParts(e),"\0").split("\0"),n=t.match(this.validParts(e));if(!i||!i.length||!n||0==n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(s,o,r,a){if(s instanceof Date){var l=new Date(s.valueOf()-6e4*s.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(s)&&(o=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(s)){var h,c,u=/([-+]\d+)([dmwy])/,d=s.match(/([-+]\d+)([dmwy])/g);s=new Date;for(var p=0;p<d.length;p++)switch(h=u.exec(d[p]),c=parseInt(h[1]),h[2]){case"d":s.setUTCDate(s.getUTCDate()+c);break;case"m":s=i.prototype.moveMonth.call(i.prototype,s,c);break;case"w":s.setUTCDate(s.getUTCDate()+7*c);break;case"y":s=i.prototype.moveYear.call(i.prototype,s,c)}return e(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0)}var f,m,h,d=s&&s.match(this.nonpunctuation)||[],s=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],_={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(_.M=_.MM=_.mm=_.m,_.dd=_.d,_.P=_.p,s=e(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),d.length==o.parts.length){for(var p=0,y=o.parts.length;y>p;p++){if(f=parseInt(d[p],10),h=o.parts[p],isNaN(f))switch(h){case"MM":m=t(n[r].months).filter(function(){var t=this.slice(0,d[p].length),e=d[p].slice(0,t.length);return t==e}),f=t.inArray(m[0],n[r].months)+1;break;case"M":m=t(n[r].monthsShort).filter(function(){var t=this.slice(0,d[p].length),e=d[p].slice(0,t.length);return t==e}),f=t.inArray(m[0],n[r].monthsShort)+1;break;case"p":case"P":f=t.inArray(d[p].toLowerCase(),n[r].meridiem)}g[h]=f}for(var b,p=0;p<v.length;p++)b=v[p],b in g&&!isNaN(g[b])&&_[b](s,g[b])}return s},formatDate:function(e,i,o,r){if(null==e)return"";var a;if("standard"==r)a={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:n[o].monthsShort[e.getUTCMonth()],MM:n[o].months[e.getUTCMonth()],d:e.getUTCDate(),D:n[o].daysShort[e.getUTCDay()],DD:n[o].days[e.getUTCDay()],p:2==n[o].meridiem.length?n[o].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.H=0==a.h%12?12:a.h%12,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=r)throw new Error("Invalid format type.");a={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:n[o].months[e.getUTCMonth()],M:n[o].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:s.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:n[o].days[e.getUTCDay()],D:n[o].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=n[o].suffix.length?n[o].suffix[e.getUTCDate()%10-1]:"",a:2==n[o].meridiem.length?n[o].meridiem[e.getUTCHours()<12?0:1]:"",g:0==e.getUTCHours()%12?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var e=[],l=t.extend([],i.separators),h=0,c=i.parts.length;c>h;h++)l.length&&e.push(l.shift()),e.push(a[i.parts[h]]);return e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};s.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+s.headTemplate+"<tbody></tbody>"+s.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+s.headTemplate+s.contTemplate+s.footTemplate+"</table>"+"</div>"+"</div>",t.fn.datetimepicker.DPGlobal=s,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=old,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var i=t(this);i.data("datetimepicker")||(e.preventDefault(),i.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),/*!
* bootstrap-lightbox.js v0.6.1 
* Copyright 2013 Jason Butz
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote)};e.prototype=t.extend({},t.fn.modal.Constructor.prototype),e.prototype.constructor=e,e.prototype.enforceFocus=function(){var e=this;t(document).on("focusin.lightbox",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},e.prototype.show=function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.preloadSize(function(){e.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")})}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},e.prototype.escape=function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.lightbox",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.lightbox")},e.prototype.preloadSize=function(e){var i=t.Callbacks();e&&i.add(e);var n,s,o,r,a,l,h,c,u,d,p=this;n=t(window).height(),s=t(window).width(),o=parseInt(p.$element.find(".lightbox-content").css("padding-top"),10),r=parseInt(p.$element.find(".lightbox-content").css("padding-bottom"),10),a=parseInt(p.$element.find(".lightbox-content").css("padding-left"),10),l=parseInt(p.$element.find(".lightbox-content").css("padding-right"),10),h=p.$element.find(".lightbox-content").find("img:first"),c=new Image,c.onload=function(){c.width+a+l>=s&&(u=c.width,d=c.height,c.width=s-a-l,c.height=d/u*c.width),c.height+o+r>=n&&(u=c.width,d=c.height,c.height=n-o-r,c.width=u/d*c.height),p.$element.css({position:"fixed",width:c.width+a+l,height:c.height+o+r,top:n/2-(c.height+o+r)/2,left:"50%","margin-left":-1*(c.width+a+l)/2}),p.$element.find(".lightbox-content").css({width:c.width,height:c.height}),i.fire()},c.src=h.attr("src")};var i=t.fn.lightbox;t.fn.lightbox=function(i){return this.each(function(){var n=t(this),s=n.data("lightbox"),o=t.extend({},t.fn.lightbox.defaults,n.data(),"object"==typeof i&&i);s||n.data("lightbox",s=new e(this,o)),"string"==typeof i?s[i]():o.show&&s.show()})},t.fn.lightbox.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.lightbox.Constructor=e,t.fn.lightbox.noConflict=function(){return t.fn.lightbox=i,this},t(document).on("click.lightbox.data-api",'[data-toggle*="lightbox"]',function(e){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("lightbox")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());e.preventDefault(),s.lightbox(o).one("hide",function(){i.focus()})})}(window.jQuery),/*!
 * Pusher JavaScript Library v2.1.2
 * http://pusherapp.com/
 *
 * Copyright 2013, Pusher
 * Released under the MIT licence.
 */
function(){function t(e,i){(null===e||void 0===e)&&t.warn("Warning","You must pass your app key when you instantiate Pusher.");var i=i||{},n=this;this.key=e,this.config=t.Util.extend(t.getGlobalConfig(),i.cluster?t.getClusterConfig(i.cluster):{},i),this.channels=new t.Channels,this.global_emitter=new t.EventsDispatcher,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new t.Timeline(this.key,this.sessionID,{features:t.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:t.Timeline.INFO,version:t.VERSION}),this.config.disableStats||(this.timelineSender=new t.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline"})),this.connection=new t.ConnectionManager(this.key,t.Util.extend({getStrategy:function(e){return t.StrategyBuilder.build(t.getDefaultStrategy(n.config),t.Util.extend({},n.config,e))},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){n.subscribeAll(),n.timelineSender&&n.timelineSender.send(n.connection.isEncrypted())}),this.connection.bind("message",function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var i=n.channel(t.channel);i&&i.handleEvent(t.event,t.data)}e||n.global_emitter.emit(t.event,t.data)}),this.connection.bind("disconnected",function(){n.channels.disconnect()}),this.connection.bind("error",function(e){t.warn("Error",e)}),t.instances.push(this),t.isReady&&n.connect()}var e=t.prototype;t.instances=[],t.isReady=!1,t.debug=function(){t.log&&t.log(t.Util.stringify.apply(this,arguments))},t.warn=function(){var e=t.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(e):window.console.log&&window.console.log(e)),t.log&&t.log(e)},t.ready=function(){t.isReady=!0;for(var e=0,i=t.instances.length;i>e;e++)t.instances[e].connect()},e.channel=function(t){return this.channels.find(t)},e.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isEncrypted(),i=this.timelineSender;this.timelineSenderTimer=new t.PeriodicTimer(6e4,function(){i.send(e)})}},e.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.bind=function(t,e){return this.global_emitter.bind(t,e),this},e.bind_all=function(t){return this.global_emitter.bind_all(t),this},e.subscribeAll=function(){for(var t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},e.subscribe=function(t){return t=this.channels.add(t,this),"connected"===this.connection.state&&t.subscribe(),t},e.unsubscribe=function(t){t=this.channels.remove(t),"connected"===this.connection.state&&t.unsubscribe()},e.send_event=function(t,e,i){return this.connection.send_event(t,e,i)},e.isEncrypted=function(){return"https:"===t.Util.getDocumentLocation().protocol?!0:Boolean(this.config.encrypted)},this.Pusher=t}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},extend:function(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];for(i in n)t[i]=n[i]&&n[i].constructor&&n[i].constructor===Object?Pusher.Util.extend(t[i]||{},n[i]):n[i]}return t},stringify:function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):void 0===window.JSON?t.push(arguments[e].toString()):t.push(JSON.stringify(arguments[e]));return t.join(" : ")},arrayIndexOf:function(t,e){var i=Array.prototype.indexOf;if(null===t)return-1;if(i&&t.indexOf===i)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},keys:function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},apply:function(t,e){for(var i=0;i<t.length;i++)e(t[i],i,t)},objectApply:function(t,e){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(t[i],i,t)},map:function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n,t,i));return i},mapObject:function(t,e){var i,n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=e(t[i]));return n},filter:function(t,e){for(var e=e||function(t){return!!t},i=[],n=0;n<t.length;n++)e(t[n],n,t,i)&&i.push(t[n]);return i},filterObject:function(t,e){var i,e=e||function(t){return!!t},n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(t[i],i,t,n)&&(n[i]=t[i]);return n},flatten:function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push([e,t[e]]);return i},any:function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return!0;return!1},all:function(t,e){for(var i=0;i<t.length;i++)if(!e(t[i],i,t))return!1;return!0},method:function(t){var e=Array.prototype.slice.call(arguments,1);return function(i){return i[t].apply(i,e.concat(arguments))}},getDocument:function(){return document},getDocumentLocation:function(){return Pusher.Util.getDocument().location},getLocalStorage:function(){try{return window.localStorage}catch(t){}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport,flash:Pusher.FlashTransport},function(t){return t.isSupported()}))}}}.call(this),function(){Pusher.VERSION="2.1.2",Pusher.PROTOCOL=6,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://d3dy5gmtp8yhk7.cloudfront.net/",Pusher.dependency_suffix=".min",Pusher.getDefaultStrategy=function(t){return[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort}],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","flash","flash",2,":ws_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","flash_loop",[":sequential",":timeouts",":flash"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],[":best_connected_ever",":ws_loop",[":delayed",2e3,[":sockjs_loop"]]],[":if",[":is_supported",":flash"],[":best_connected_ever",":flash_loop",[":delayed",2e3,[":sockjs_loop"]]],[":sockjs_loop"]]]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}.call(this),function(){function t(t){var e=function(e){Error.call(this,e),this.name=t};return Pusher.Util.extend(e.prototype,Error.prototype),e}Pusher.Errors={UnsupportedTransport:t("UnsupportedTransport"),UnsupportedStrategy:t("UnsupportedStrategy"),TransportPriorityTooLow:t("TransportPriorityTooLow"),TransportClosed:t("TransportClosed")}}.call(this),function(){function t(t){this.callbacks=new e,this.global_callbacks=[],this.failThrough=t}function e(){this._callbacks={}}var i=t.prototype;i.bind=function(t,e){return this.callbacks.add(t,e),this},i.bind_all=function(t){return this.global_callbacks.push(t),this},i.unbind=function(t,e){return this.callbacks.remove(t,e),this},i.emit=function(t,e){var i;for(i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,e);var n=this.callbacks.get(t);if(n&&n.length>0)for(i=0;i<n.length;i++)n[i](e);else this.failThrough&&this.failThrough(t,e);return this},e.prototype.get=function(t){return this._callbacks[this._prefix(t)]},e.prototype.add=function(t,e){var i=this._prefix(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push(e)},e.prototype.remove=function(t,e){if(this.get(t)){var i=Pusher.Util.arrayIndexOf(this.get(t),e);if(-1!==i){var n=this._callbacks[this._prefix(t)].slice(0);n.splice(i,1),this._callbacks[this._prefix(t)]=n}}},e.prototype._prefix=function(t){return"_"+t},Pusher.EventsDispatcher=t}.call(this),function(){function t(t){this.options=t,this.loading={},this.loaded={}}function e(t,e){Pusher.Util.getDocument().addEventListener?t.addEventListener("load",e,!1):t.attachEvent("onreadystatechange",function(){("loaded"===t.readyState||"complete"===t.readyState)&&e()})}function i(t,i){var n=Pusher.Util.getDocument(),s=n.getElementsByTagName("head")[0],n=n.createElement("script");n.setAttribute("src",t),n.setAttribute("type","text/javascript"),n.setAttribute("async",!0),e(n,function(){setTimeout(i,0)}),s.appendChild(n)}var n=t.prototype;n.load=function(t,e){var n=this;this.loaded[t]?e():this.loading[t]&&this.loading[t].length>0?this.loading[t].push(e):(this.loading[t]=[e],i(this.getPath(t),function(){if(n.loaded[t]=!0,n.loading[t]){for(var e=0;e<n.loading[t].length;e++)n.loading[t][e]();delete n.loading[t]}}))},n.getRoot=function(t){var e=Pusher.Util.getDocumentLocation().protocol;return(t&&t.encrypted||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},n.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},Pusher.DependencyLoader=t}.call(this),function(){function t(){Pusher.ready()}function e(t){document.body?t():setTimeout(function(){e(t)},0)}function i(){e(t)}Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix}),!window.WebSocket&&window.MozWebSocket&&(window.WebSocket=window.MozWebSocket),window.JSON?i():Pusher.Dependencies.load("json2",i)}(),function(){function t(t,e){var i=this;this.timeout=setTimeout(function(){null!==i.timeout&&(e(),i.timeout=null)},t)}var e=t.prototype;e.isRunning=function(){return null!==this.timeout},e.ensureAborted=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},Pusher.Timer=t}.call(this),function(){function t(t,e){var i=this;this.interval=setInterval(function(){null!==i.interval&&e()},t)}var e=t.prototype;e.isRunning=function(){return null!==this.interval},e.ensureAborted=function(){this.interval&&(clearInterval(this.interval),this.interval=null)},Pusher.PeriodicTimer=t}.call(this),function(){for(var t=String.fromCharCode,e=0;64>e;e++)"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e);var i=function(e){var i=e.charCodeAt(0);return 128>i?e:2048>i?t(192|i>>>6)+t(128|63&i):t(224|15&i>>>12)+t(128|63&i>>>6)+t(128|63&i)},n=function(t){var e=[0,2,1][t.length%3],t=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>>18),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t>>>12),e>=2?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t>>>6),e>=1?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t)].join("")},s=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,n)};Pusher.Base64={encode:function(t){return s(t.replace(/[^\x00-\x7F]/g,i))}}}.call(this),function(){function t(t){this.options=t}function e(t){return Pusher.Util.mapObject(t,function(t){return"object"==typeof t&&(t=JSON.stringify(t)),encodeURIComponent(Pusher.Base64.encode(t.toString()))})}t.send=function(t,e){var i=new Pusher.JSONPRequest({url:t.url,receiver:t.receiverName,tagPrefix:t.tagPrefix}),n=t.receiver.register(function(t,n){i.cleanup(),e(t,n)});return i.send(n,t.data,function(e){var i=t.receiver.unregister(n);i&&i(e)})};var i=t.prototype;i.send=function(t,i,n){if(this.script)return!1;var s=this.options.tagPrefix||"_pusher_jsonp_",i=Pusher.Util.extend({},i,{receiver:this.options.receiver}),i=Pusher.Util.map(Pusher.Util.flatten(e(Pusher.Util.filterObject(i,function(t){return void 0!==t}))),Pusher.Util.method("join","=")).join("&");this.script=document.createElement("script"),this.script.id=s+t,this.script.src=this.options.url+"/"+t+"?"+i,this.script.type="text/javascript",this.script.charset="UTF-8",this.script.onerror=this.script.onload=n,void 0===this.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)&&(s=this.options.receiver||"Pusher.JSONP.receive",this.errorScript=document.createElement("script"),this.errorScript.text=s+"("+t+", true);",this.script.async=this.errorScript.async=!1);var o=this;return this.script.onreadystatechange=function(){o.script&&/loaded|complete/.test(o.script.readyState)&&n(!0)},t=document.getElementsByTagName("head")[0],t.insertBefore(this.script,t.firstChild),this.errorScript&&t.insertBefore(this.errorScript,this.script.nextSibling),!0},i.cleanup=function(){this.script&&this.script.parentNode&&(this.script.parentNode.removeChild(this.script),this.script=null),this.errorScript&&this.errorScript.parentNode&&(this.errorScript.parentNode.removeChild(this.errorScript),this.errorScript=null)},Pusher.JSONPRequest=t}.call(this),function(){function t(){this.lastId=0,this.callbacks={}}var e=t.prototype;e.register=function(t){this.lastId++;var e=this.lastId;return this.callbacks[e]=t,e},e.unregister=function(t){if(this.callbacks[t]){var e=this.callbacks[t];return delete this.callbacks[t],e}return null},e.receive=function(t,e,i){(t=this.unregister(t))&&t(e,i)},Pusher.JSONPReceiver=t,Pusher.JSONP=new t}.call(this),function(){function t(t,e,i){this.key=t,this.session=e,this.events=[],this.options=i||{},this.uniqueID=this.sent=0}var e=t.prototype;t.ERROR=3,t.INFO=6,t.DEBUG=7,e.log=function(t,e){(void 0===this.options.level||t<=this.options.level)&&(this.events.push(Pusher.Util.extend({},e,{timestamp:Pusher.Util.now(),level:t})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.error=function(e){this.log(t.ERROR,e)},e.info=function(e){this.log(t.INFO,e)},e.debug=function(e){this.log(t.DEBUG,e)},e.isEmpty=function(){return 0===this.events.length},e.send=function(t,e){var i=this,n={};return 0===this.sent&&(n=Pusher.Util.extend({key:this.key,features:this.options.features,version:this.options.version},this.options.params||{})),n.session=this.session,n.timeline=this.events,n=Pusher.Util.filterObject(n,function(t){return void 0!==t}),this.events=[],t(n,function(t,n){t||i.sent++,e&&e(t,n)}),!0},e.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=t}.call(this),function(){function t(t,e){this.timeline=t,this.options=e||{}}t.prototype.send=function(t,e){if(!this.timeline.isEmpty()){var i=this,n="http"+(t?"s":"")+"://";i.timeline.send(function(t,e){return Pusher.JSONPRequest.send({data:t,url:n+(i.host||i.options.host)+i.options.path,receiver:Pusher.JSONP},function(t,n){n.host&&(i.host=n.host),e&&e(t,n)})},e)}},Pusher.TimelineSender=t}.call(this),function(){function t(t){this.strategies=t}function e(t,e,i){var s=Pusher.Util.map(t,function(t,n,s,o){return t.connect(e,i(n,o))});return{abort:function(){Pusher.Util.apply(s,n)},forceMinPriority:function(t){Pusher.Util.apply(s,function(e){e.forceMinPriority(t)})}}}function i(t){return Pusher.Util.all(t,function(t){return Boolean(t.error)})}function n(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var s=t.prototype;s.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},s.connect=function(t,n){return e(this.strategies,t,function(t,e){return function(s,o){(e[t].error=s)?i(e)&&n(!0):(Pusher.Util.apply(e,function(t){t.forceMinPriority(o.transport.priority)}),n(null,o))}})},Pusher.BestConnectedEverStrategy=t}.call(this),function(){function t(t,e,i){this.strategy=t,this.transports=e,this.ttl=i.ttl||18e5,this.timeline=i.timeline}function e(){var t=Pusher.Util.getLocalStorage();return t&&t.pusherTransport?JSON.parse(t.pusherTransport):null}var i=t.prototype;i.isSupported=function(){return this.strategy.isSupported()},i.connect=function(t,i){var n=e(),s=[this.strategy];if(n&&n.timestamp+this.ttl>=Pusher.Util.now()){var o=this.transports[n.transport];o&&(this.timeline.info({cached:!0,transport:n.transport}),s.push(new Pusher.SequentialStrategy([o],{timeout:2*n.latency,failFast:!0})))}var r=Pusher.Util.now(),a=s.pop().connect(t,function l(e,n){if(e){var o=Pusher.Util.getLocalStorage();if(o&&o.pusherTransport)try{delete o.pusherTransport}catch(h){o.pusherTransport=void 0}s.length>0?(r=Pusher.Util.now(),a=s.pop().connect(t,l)):i(e)}else{var o=Pusher.Util.now()-r,c=n.transport.name,u=Pusher.Util.getLocalStorage();if(u)try{u.pusherTransport=JSON.stringify({timestamp:Pusher.Util.now(),transport:c,latency:o})}catch(d){}i(null,n)}});return{abort:function(){a.abort()},forceMinPriority:function(e){t=e,a&&a.forceMinPriority(e)}}},Pusher.CachedStrategy=t}.call(this),function(){function t(t,e){this.strategy=t,this.options={delay:e.delay}}var e=t.prototype;e.isSupported=function(){return this.strategy.isSupported()},e.connect=function(t,e){var i,n=this.strategy,s=new Pusher.Timer(this.options.delay,function(){i=n.connect(t,e)});return{abort:function(){s.ensureAborted(),i&&i.abort()},forceMinPriority:function(e){t=e,i&&i.forceMinPriority(e)}}},Pusher.DelayedStrategy=t}.call(this),function(){function t(t){this.strategy=t}var e=t.prototype;e.isSupported=function(){return this.strategy.isSupported()},e.connect=function(t,e){var i=this.strategy.connect(t,function(t,n){n&&i.abort(),e(t,n)});return i},Pusher.FirstConnectedStrategy=t}.call(this),function(){function t(t,e,i){this.test=t,this.trueBranch=e,this.falseBranch=i}var e=t.prototype;e.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},Pusher.IfStrategy=t}.call(this),function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}var e=t.prototype;e.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},e.connect=function(t,e){var i=this,n=this.strategies,s=0,o=this.timeout,r=null,a=function(l,h){h?e(null,h):(s+=1,i.loop&&(s%=n.length),s<n.length?(o&&(o*=2,i.timeoutLimit&&(o=Math.min(o,i.timeoutLimit))),r=i.tryStrategy(n[s],t,{timeout:o,failFast:i.failFast},a)):e(!0))},r=this.tryStrategy(n[s],t,{timeout:o,failFast:this.failFast},a);return{abort:function(){r.abort()},forceMinPriority:function(e){t=e,r&&r.forceMinPriority(e)}}},e.tryStrategy=function(t,e,i,n){var s=null,o=null,o=t.connect(e,function(t,e){t&&s&&s.isRunning()&&!i.failFast||(s&&s.ensureAborted(),n(t,e))});return i.timeout>0&&(s=new Pusher.Timer(i.timeout,function(){o.abort(),n(!0)})),{abort:function(){s&&s.ensureAborted(),o.abort()},forceMinPriority:function(t){o.forceMinPriority(t)}}},Pusher.SequentialStrategy=t}.call(this),function(){function t(t,e,i,n){this.name=t,this.priority=e,this.transport=i,this.options=n||{}}function e(t,e){return new Pusher.Timer(0,function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var i=t.prototype;i.isSupported=function(){return this.transport.isSupported({disableFlash:!!this.options.disableFlash})},i.connect=function(t,i){if(!this.transport.isSupported())return e(new Pusher.Errors.UnsupportedStrategy,i);if(this.priority<t)return e(new Pusher.Errors.TransportPriorityTooLow,i);var n=this,s=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),r=null,a=function(){o.unbind("initialized",a),o.connect()},l=function(){r=new Pusher.Handshake(o,function(t){s=!0,u(),i(null,t)})},h=function(t){u(),i(t)},c=function(){u(),i(new Pusher.Errors.TransportClosed(o))},u=function(){o.unbind("initialized",a),o.unbind("open",l),o.unbind("error",h),o.unbind("closed",c)};return o.bind("initialized",a),o.bind("open",l),o.bind("error",h),o.bind("closed",c),o.initialize(),{abort:function(){s||(u(),r?r.close():o.close())},forceMinPriority:function(t){s||n.priority<t&&(r?r.close():o.close())}}},Pusher.TransportStrategy=t}.call(this),function(){function t(t,e,i,n){Pusher.EventsDispatcher.call(this),this.name=t,this.priority=e,this.key=i,this.state="new",this.timeline=n.timeline,this.id=this.timeline.generateUniqueID(),this.options={encrypted:Boolean(n.encrypted),hostUnencrypted:n.hostUnencrypted,hostEncrypted:n.hostEncrypted}}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),t.isSupported=function(){return!1},e.supportsPing=function(){return!1},e.initialize=function(){this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initialized")},e.connect=function(){var t=this.getURL(this.key,this.options);if(this.timeline.debug(this.buildTimelineMessage({method:"connect",url:t})),this.socket||"initialized"!==this.state)return!1;try{this.socket=this.createSocket(t)}catch(e){var i=this;return new Pusher.Timer(0,function(){i.onError(e),i.changeState("closed")}),!1}return this.bindListeners(),Pusher.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},e.close=function(){return this.timeline.debug(this.buildTimelineMessage({method:"close"})),this.socket?(this.socket.close(),!0):!1},e.send=function(t){if(this.timeline.debug(this.buildTimelineMessage({method:"send",data:t})),"open"===this.state){var e=this;return setTimeout(function(){e.socket&&e.socket.send(t)},0),!0}return!1},e.requestPing=function(){this.emit("ping_request")},e.onOpen=function(){this.changeState("open"),this.socket.onopen=void 0},e.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({}))},e.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.socket=void 0},e.onMessage=function(t){this.timeline.debug(this.buildTimelineMessage({message:t.data})),this.emit("message",t)},e.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)}},e.createSocket=function(){return null},e.getScheme=function(){return this.options.encrypted?"wss":"ws"},e.getBaseURL=function(){var t;return t=this.options.encrypted?this.options.hostEncrypted:this.options.hostUnencrypted,this.getScheme()+"://"+t},e.getPath=function(){return"/app/"+this.key},e.getQueryString=function(){return"?protocol="+Pusher.PROTOCOL+"&client=js&version="+Pusher.VERSION},e.getURL=function(){return this.getBaseURL()+this.getPath()+this.getQueryString()},e.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.buildTimelineMessage=function(t){return Pusher.Util.extend({cid:this.id},t)},Pusher.AbstractTransport=t}.call(this),function(){function t(t,e,i,n){Pusher.AbstractTransport.call(this,t,e,i,n)}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,i,n,s){return new t(e,i,n,s)},t.isSupported=function(t){if(t&&t.disableFlash)return!1;try{return Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){return Boolean(navigator&&navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"])}},e.initialize=function(){var t=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),void 0===window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&(window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR=!0),window.WEB_SOCKET_SWF_LOCATION=Pusher.Dependencies.getRoot()+"/WebSocketMain.swf",Pusher.Dependencies.load("flashfallback",function(){t.changeState("initialized")})},e.createSocket=function(t){return new FlashWebSocket(t)},e.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=true"},Pusher.FlashTransport=t}.call(this),function(){function t(t,e,i,n){Pusher.AbstractTransport.call(this,t,e,i,n),this.options.ignoreNullOrigin=n.ignoreNullOrigin}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,i,n,s){return new t(e,i,n,s)},t.isSupported=function(){return!0},e.initialize=function(){var t=this;this.timeline.info(this.buildTimelineMessage({transport:this.name+(this.options.encrypted?"s":"")})),this.timeline.debug(this.buildTimelineMessage({method:"initialize"})),this.changeState("initializing"),Pusher.Dependencies.load("sockjs",function(){t.changeState("initialized")})},e.supportsPing=function(){return!0},e.createSocket=function(t){return new SockJS(t,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:this.options.encrypted}),ignore_null_origin:this.options.ignoreNullOrigin})},e.getScheme=function(){return this.options.encrypted?"https":"http"},e.getPath=function(){return this.options.httpPath||"/pusher"},e.getQueryString=function(){return""},e.onOpen=function(){this.socket.send(JSON.stringify({path:Pusher.AbstractTransport.prototype.getPath.call(this)+Pusher.AbstractTransport.prototype.getQueryString.call(this)})),this.changeState("open"),this.socket.onopen=void 0},Pusher.SockJSTransport=t}.call(this),function(){function t(t,e,i,n){Pusher.AbstractTransport.call(this,t,e,i,n)}var e=t.prototype;Pusher.Util.extend(e,Pusher.AbstractTransport.prototype),t.createConnection=function(e,i,n,s){return new t(e,i,n,s)},t.isSupported=function(){return void 0!==window.WebSocket||void 0!==window.MozWebSocket},e.createSocket=function(t){return new(window.WebSocket||window.MozWebSocket)(t)},e.getQueryString=function(){return Pusher.AbstractTransport.prototype.getQueryString.call(this)+"&flash=false"},Pusher.WSTransport=t}.call(this),function(){function t(t,e,i){this.manager=t,this.transport=e,this.minPingDelay=i.minPingDelay,this.maxPingDelay=i.maxPingDelay,this.pingDelay=null}var e=t.prototype;e.createConnection=function(t,e,i,n){var s=this.transport.createConnection(t,e,i,n),o=this,r=null,a=null,l=function(){s.unbind("open",l),r=Pusher.Util.now(),o.pingDelay&&(a=setInterval(function(){a&&s.requestPing()},o.pingDelay)),s.bind("closed",h)},h=function(t){s.unbind("closed",h),a&&(clearInterval(a),a=null),1002===t.code||1003===t.code?o.manager.reportDeath():!t.wasClean&&r&&(t=Pusher.Util.now()-r,t<2*o.maxPingDelay)&&(o.manager.reportDeath(),o.pingDelay=Math.max(t/2,o.minPingDelay))};return s.bind("open",l),s},e.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},Pusher.AssistantToTheTransportManager=t}.call(this),function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}var e=t.prototype;e.getAssistant=function(t){return new Pusher.AssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.isAlive=function(){return this.livesLeft>0},e.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=t}.call(this),function(){function t(t){return function(e){return[t.apply(this,arguments),e]}}function e(t,i){if(0===t.length)return[[],i];var s=n(t[0],i),o=e(t.slice(1),s[1]);return[[s[0]].concat(o[0]),o[1]]}function i(t,i){if("string"==typeof t[0]&&":"===t[0].charAt(0)){var s=i[t[0].slice(1)];if(t.length>1){if("function"!=typeof s)throw"Calling non-function "+t[0];var o=[Pusher.Util.extend({},i)].concat(Pusher.Util.map(t.slice(1),function(t){return n(t,Pusher.Util.extend({},i))[0]}));return s.apply(this,o)}return[s,i]}return e(t,i)}function n(t,e){if("string"==typeof t){var n;if("string"==typeof t&&":"===t.charAt(0)){if(n=e[t.slice(1)],void 0===n)throw"Undefined symbol "+t;n=[n,e]}else n=[t,e];return n}return"object"==typeof t&&t instanceof Array&&t.length>0?i(t,e):[t,e]}var s={ws:Pusher.WSTransport,flash:Pusher.FlashTransport,sockjs:Pusher.SockJSTransport},o={def:function(t,e,i){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=i,[void 0,t]},def_transport:function(t,e,i,n,o,r){var a=s[i];if(!a)throw new Pusher.Errors.UnsupportedTransport(i);return i=Pusher.Util.extend({},{key:t.key,encrypted:t.encrypted,timeline:t.timeline,disableFlash:t.disableFlash,ignoreNullOrigin:t.ignoreNullOrigin},o),r&&(a=r.getAssistant(a)),n=new Pusher.TransportStrategy(e,n,a,i),r=t.def(t,e,n)[1],r.transports=t.transports||{},r.transports[e]=n,[void 0,r]},transport_manager:t(function(t,e){return new Pusher.TransportManager(e)}),sequential:t(function(t,e){var i=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(i,e)}),cached:t(function(t,e,i){return new Pusher.CachedStrategy(i,t.transports,{ttl:e,timeline:t.timeline})}),first_connected:t(function(t,e){return new Pusher.FirstConnectedStrategy(e)}),best_connected_ever:t(function(){var t=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(t)}),delayed:t(function(t,e,i){return new Pusher.DelayedStrategy(i,{delay:e})}),"if":t(function(t,e,i,n){return new Pusher.IfStrategy(e,i,n)}),is_supported:t(function(t,e){return function(){return e.isSupported()}})};Pusher.StrategyBuilder={build:function(t,e){var i=Pusher.Util.extend({},o,e);return n(t,i)[1].strategy}}}.call(this),function(){Protocol={decodeMessage:function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(i){if(!(i instanceof SyntaxError))throw i}return e}catch(n){throw{type:"MessageParseError",error:n,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){if(t=this.decodeMessage(t),"pusher:connection_established"===t.event)return{action:"connected",id:t.data.socket_id};if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},Pusher.Protocol=Protocol}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this),this.id=t,this.transport=e,this.bindListeners()}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.supportsPing=function(){return this.transport.supportsPing()},e.send=function(t){return this.transport.send(t)},e.send_event=function(t,e,i){return t={event:t,data:e},i&&(t.channel=i),Pusher.debug("Event sent",t),this.send(Pusher.Protocol.encodeMessage(t))},e.close=function(){this.transport.close()},e.bindListeners=function(){var t=this,e=function(e){var i;try{i=Pusher.Protocol.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==i){switch(Pusher.debug("Event recd",i),i.event){case"pusher:error":t.emit("error",{type:"PusherError",data:i.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",i)}},i=function(){t.emit("ping_request")},n=function(e){t.emit("error",{type:"WebSocketError",error:e})},s=function(o){t.transport.unbind("closed",s),t.transport.unbind("error",n),t.transport.unbind("ping_request",i),t.transport.unbind("message",e),o&&o.code&&t.handleCloseEvent(o),t.transport=null,t.emit("closed")};t.transport.bind("message",e),t.transport.bind("ping_request",i),t.transport.bind("error",n),t.transport.bind("closed",s)},e.handleCloseEvent=function(t){var e=Pusher.Protocol.getCloseAction(t);(t=Pusher.Protocol.getCloseError(t))&&this.emit("error",t),e&&this.emit(e)},Pusher.Connection=t}.call(this),function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}var e=t.prototype;e.close=function(){this.unbindListeners(),this.transport.close()},e.bindListeners=function(){var t=this;t.onMessage=function(e){t.unbindListeners();try{var i=Pusher.Protocol.processHandshake(e);"connected"===i.action?t.finish("connected",{connection:new Pusher.Connection(i.id,t.transport)}):(t.finish(i.action,{error:i.error}),t.transport.close())
}catch(n){t.finish("error",{error:n}),t.transport.close()}},t.onClosed=function(e){t.unbindListeners();var i=Pusher.Protocol.getCloseAction(e)||"backoff",e=Pusher.Protocol.getCloseError(e);t.finish(i,{error:e})},t.transport.bind("message",t.onMessage),t.transport.bind("closed",t.onClosed)},e.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.finish=function(t,e){this.callback(Pusher.Util.extend({transport:this.transport,action:t},e))},Pusher.Handshake=t}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this),this.key=t,this.options=e||{},this.state="initialized",this.connection=null,this.encrypted=!!e.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var i=this;Pusher.Network.bind("online",function(){i.timeline.info({netinfo:"online"}),"unavailable"===i.state&&i.connect()}),Pusher.Network.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.shouldRetry()&&(i.disconnect(),i.updateState("unavailable"))}),this.updateStrategy()}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.connect=function(){var t=this;if(!t.connection&&"connecting"!==t.state)if(t.strategy.isSupported())if(Pusher.Network.isOnline()===!1)t.updateState("unavailable");else{t.updateState("connecting");var e=function(i,n){i?t.runner=t.strategy.connect(0,e):"error"===n.action?t.timeline.error({handshakeError:n.error}):(t.runner.abort(),t.handshakeCallbacks[n.action](n))};t.runner=t.strategy.connect(0,e),t.setUnavailableTimer()}else t.updateState("failed")},e.send=function(t){return this.connection?this.connection.send(t):!1},e.send_event=function(t,e,i){return this.connection?this.connection.send_event(t,e,i):!1},e.disconnect=function(){this.runner&&this.runner.abort(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.stopActivityCheck(),this.updateState("disconnected"),this.connection&&(this.connection.close(),this.abandonConnection())},e.isEncrypted=function(){return this.encrypted},e.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.retryIn=function(t){var e=this;e.timeline.info({action:"retry",delay:t}),t>0&&e.emit("connecting_in",Math.round(t/1e3)),e.retryTimer=new Pusher.Timer(t||0,function(){e.disconnect(),e.connect()})},e.clearRetryTimer=function(){this.retryTimer&&this.retryTimer.ensureAborted()},e.setUnavailableTimer=function(){var t=this;t.unavailableTimer=new Pusher.Timer(t.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.resetActivityCheck=function(){if(this.stopActivityCheck(),!this.connection.supportsPing()){var t=this;t.activityTimer=new Pusher.Timer(t.options.activityTimeout,function(){t.send_event("pusher:ping",{}),t.activityTimer=new Pusher.Timer(t.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.connection.close()})})}},e.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},ping_request:function(){t.send_event("pusher:ping",{})},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.buildHandshakeCallbacks=function(t){var e=this;return Pusher.Util.extend({},t,{connected:function(t){e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.timeline.info({socket_id:e.socket_id}),e.updateState("connected")}})},e.buildErrorCallbacks=function(){function t(t){return function(i){i.error&&e.emit("error",{type:"WebSocketError",error:i.error}),t(i)}}var e=this;return{ssl_only:t(function(){e.encrypted=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},e.setConnection=function(t){this.connection=t;for(var e in this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.abandonConnection=function(){if(this.connection){for(var t in this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);this.connection=null}},e.updateState=function(t,e){var i=this.state;this.state=t,i!==t&&(Pusher.debug("State changed",i+" -> "+t),this.timeline.info({state:t}),this.emit("state_change",{previous:i,current:t}),this.emit(t,e))},e.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},Pusher.ConnectionManager=t}.call(this),function(){function t(){Pusher.EventsDispatcher.call(this);var t=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1))}Pusher.Util.extend(t.prototype,Pusher.EventsDispatcher.prototype),t.prototype.isOnline=function(){return void 0===window.navigator.onLine?!0:window.navigator.onLine},Pusher.NetInfo=t,Pusher.Network=new t}.call(this),function(){function t(){this.reset()}var e=t.prototype;e.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.each=function(t){var e=this;Pusher.Util.objectApply(e.members,function(i,n){t(e.get(n))})},e.setMyID=function(t){this.myID=t},e.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},e.reset=function(){this.members={},this.count=0,this.me=this.myID=null},Pusher.Members=t}.call(this),function(){function t(t,e){Pusher.EventsDispatcher.call(this,function(e){Pusher.debug("No callbacks on "+t+" for "+e)}),this.name=t,this.pusher=e,this.subscribed=!1}var e=t.prototype;Pusher.Util.extend(e,Pusher.EventsDispatcher.prototype),e.authorize=function(t,e){return e(!1,{})},e.trigger=function(t,e){return this.pusher.send_event(t,e,this.name)},e.disconnect=function(){this.subscribed=!1},e.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},e.subscribe=function(){var t=this;t.authorize(t.pusher.connection.socket_id,function(e,i){e?t.handleEvent("pusher:subscription_error",i):t.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:t.name})})},e.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=t}.call(this),function(){function t(t,e){Pusher.Channel.call(this,t,e)}var e=t.prototype;Pusher.Util.extend(e,Pusher.Channel.prototype),e.authorize=function(t,e){return new Pusher.Channel.Authorizer(this,this.pusher.config).authorize(t,e)},Pusher.PrivateChannel=t}.call(this),function(){function t(t,e){Pusher.PrivateChannel.call(this,t,e),this.members=new Pusher.Members}var e=t.prototype;Pusher.Util.extend(e,Pusher.PrivateChannel.prototype),e.authorize=function(t,e){var i=this;Pusher.PrivateChannel.prototype.authorize.call(i,t,function(t,n){if(!t){if(void 0===n.channel_data)return Pusher.warn("Invalid auth response for channel '"+i.name+"', expected 'channel_data' field"),e("Invalid auth response"),void 0;var s=JSON.parse(n.channel_data);i.members.setMyID(s.user_id)}e(t,n)})},e.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.members.onSubscription(e),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":this.emit("pusher:member_added",this.members.addMember(e));break;case"pusher_internal:member_removed":var i=this.members.removeMember(e);i&&this.emit("pusher:member_removed",i);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,t,e)}},e.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=t}.call(this),function(){function t(){this.channels={}}var e=t.prototype;e.add=function(t,e){return this.channels[t]||(this.channels[t]=0===t.indexOf("private-")?new Pusher.PrivateChannel(t,e):0===t.indexOf("presence-")?new Pusher.PresenceChannel(t,e):new Pusher.Channel(t,e)),this.channels[t]},e.find=function(t){return this.channels[t]},e.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},e.disconnect=function(){Pusher.Util.objectApply(this.channels,function(t){t.disconnect()})},Pusher.Channels=t}.call(this),function(){Pusher.Channel.Authorizer=function(t,e){this.channel=t,this.type=e.authTransport,this.options=e,this.authOptions=(e||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(t){var e,t="&socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(e in this.authOptions.params)t+="&"+encodeURIComponent(e)+"="+encodeURIComponent(this.authOptions.params[e]);return t},authorize:function(t,e){return Pusher.authorizers[this.type].call(this,t,e)}};var t=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(t,e){var i;i=Pusher.XHR?new Pusher.XHR:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.open("POST",this.options.authEndpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var n in this.authOptions.headers)i.setRequestHeader(n,this.authOptions.headers[n]);return i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var t,n=!1;try{t=JSON.parse(i.responseText),n=!0}catch(s){e(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+i.responseText)}n&&e(!1,t)}else Pusher.warn("Couldn't get auth info from your webapp",i.status),e(!0,i.status)},i.send(this.composeQuery(t)),i},jsonp:function(e,i){void 0!==this.authOptions.headers&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var n=t.toString();t++;var s=Pusher.Util.getDocument(),o=s.createElement("script");Pusher.auth_callbacks[n]=function(t){i(!1,t)},o.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+n+"']")+this.composeQuery(e),n=s.getElementsByTagName("head")[0]||s.documentElement,n.insertBefore(o,n.firstChild)}}}.call(this),!AmCharts)var AmCharts={};AmCharts.inheriting={},AmCharts.Class=function(t){var e=function(){arguments[0]!==AmCharts.inheriting&&(this.events={},this.construct.apply(this,arguments))};t.inherits?(e.prototype=new t.inherits(AmCharts.inheriting),e.base=t.inherits.prototype,delete t.inherits):(e.prototype.createEvents=function(){for(var t=0,e=arguments.length;e>t;t++)this.events[arguments[t]]=[]},e.prototype.listenTo=function(t,e,i){t.events[e].push({handler:i,scope:this})},e.prototype.addListener=function(t,e,i){this.events[t].push({handler:e,scope:i})},e.prototype.removeListener=function(t,e,i){for(t=t.events[e],e=t.length-1;e>=0;e--)t[e].handler===i&&t.splice(e,1)},e.prototype.fire=function(t,e){for(var i=this.events[t],n=0,s=i.length;s>n;n++){var o=i[n];o.handler.call(o.scope,e)}});for(var i in t)e.prototype[i]=t[i];return e},AmCharts.charts=[],AmCharts.addChart=function(t){AmCharts.charts.push(t)},AmCharts.removeChart=function(t){for(var e=AmCharts.charts,i=e.length-1;i>=0;i--)e[i]==t&&e.splice(i,1)},AmCharts.IEversion=0,AmCharts.isModern=!0,AmCharts.navigator=navigator.userAgent.toLowerCase(),-1!=AmCharts.navigator.indexOf("msie")&&(AmCharts.IEversion=parseInt(AmCharts.navigator.split("msie")[1]),document.documentMode&&(AmCharts.IEversion=Number(document.documentMode)),9>AmCharts.IEversion&&(AmCharts.isModern=!1)),AmCharts.dx=0,AmCharts.dy=0,(document.addEventListener||window.opera)&&(AmCharts.isNN=!0,AmCharts.isIE=!1,AmCharts.dx=.5,AmCharts.dy=.5),document.attachEvent&&(AmCharts.isNN=!1,AmCharts.isIE=!0,AmCharts.isModern||(AmCharts.dx=0,AmCharts.dy=0)),window.chrome&&(AmCharts.chrome=!0),AmCharts.handleResize=function(){for(var t=AmCharts.charts,e=0;e<t.length;e++){var i=t[e];i&&i.div&&i.handleResize()}},AmCharts.handleMouseUp=function(t){for(var e=AmCharts.charts,i=0;i<e.length;i++){var n=e[i];n&&n.handleReleaseOutside(t)}},AmCharts.handleMouseMove=function(t){for(var e=AmCharts.charts,i=0;i<e.length;i++){var n=e[i];n&&n.handleMouseMove(t)}},AmCharts.resetMouseOver=function(){for(var t=AmCharts.charts,e=0;e<t.length;e++){var i=t[e];i&&(i.mouseIsOver=!1)}},AmCharts.onReadyArray=[],AmCharts.ready=function(t){AmCharts.onReadyArray.push(t)},AmCharts.handleLoad=function(){for(var t=AmCharts.onReadyArray,e=0;e<t.length;e++)t[e]()},AmCharts.useUTC=!1,AmCharts.updateRate=40,AmCharts.uid=0,AmCharts.getUniqueId=function(){return AmCharts.uid++,"AmChartsEl-"+AmCharts.uid},AmCharts.isNN&&(document.addEventListener("mousemove",AmCharts.handleMouseMove,!0),window.addEventListener("resize",AmCharts.handleResize,!0),document.addEventListener("mouseup",AmCharts.handleMouseUp,!0),window.addEventListener("load",AmCharts.handleLoad,!0)),AmCharts.isIE&&(document.attachEvent("onmousemove",AmCharts.handleMouseMove),window.attachEvent("onresize",AmCharts.handleResize),document.attachEvent("onmouseup",AmCharts.handleMouseUp),window.attachEvent("onload",AmCharts.handleLoad)),AmCharts.clear=function(){var t=AmCharts.charts;if(t)for(var e=0;e<t.length;e++)t[e].clear();AmCharts.charts=null,AmCharts.isNN&&(document.removeEventListener("mousemove",AmCharts.handleMouseMove,!0),window.removeEventListener("resize",AmCharts.handleResize,!0),document.removeEventListener("mouseup",AmCharts.handleMouseUp,!0),window.removeEventListener("load",AmCharts.handleLoad,!0)),AmCharts.isIE&&(document.detachEvent("onmousemove",AmCharts.handleMouseMove),window.detachEvent("onresize",AmCharts.handleResize),document.detachEvent("onmouseup",AmCharts.handleMouseUp),window.detachEvent("onload",AmCharts.handleLoad))},AmCharts.toBoolean=function(t,e){if(void 0===t)return e;switch(String(t).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}},AmCharts.removeFromArray=function(t,e){var i;for(i=t.length-1;i>=0;i--)t[i]==e&&t.splice(i,1)},AmCharts.getStyle=function(t,e){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),i=t.currentStyle[e]),i},AmCharts.removePx=function(t){return Number(t.substring(0,t.length-2))},AmCharts.getURL=function(t,e){if(t)if("_self"!=e&&e)if("_top"==e&&window.top)window.top.location.href=t;else if("_parent"==e&&window.parent)window.parent.location.href=t;else{var i=document.getElementsByName(e)[0];i?i.src=t:window.open(t)}else window.location.href=t},AmCharts.ifArray=function(t){return t&&0<t.length?!0:!1},AmCharts.callMethod=function(t,e){var i;for(i=0;i<e.length;i++){var n=e[i];if(n){n[t]&&n[t]();var s=n.length;if(s>0){var o;for(o=0;s>o;o++){var r=n[o];r&&r[t]&&r[t]()}}}}},AmCharts.toNumber=function(t){return"number"==typeof t?t:Number(String(t).replace(/[^0-9\-.]+/g,""))},AmCharts.toColor=function(t){if(""!==t&&void 0!==t)if(-1!=t.indexOf(",")){t=t.split(",");var e;for(e=0;e<t.length;e++){var i=t[e].substring(t[e].length-6,t[e].length);t[e]="#"+i}}else t=t.substring(t.length-6,t.length),t="#"+t;return t},AmCharts.toCoordinate=function(t,e,i){var n;return void 0!==t&&(t=String(t),i&&e>i&&(e=i),n=Number(t),-1!=t.indexOf("!")&&(n=e-Number(t.substr(1))),-1!=t.indexOf("%")&&(n=e*Number(t.substr(0,t.length-1))/100)),n},AmCharts.fitToBounds=function(t,e,i){return e>t&&(t=e),t>i&&(t=i),t},AmCharts.isDefined=function(t){return void 0===t?!1:!0},AmCharts.stripNumbers=function(t){return t.replace(/[0-9]+/g,"")},AmCharts.roundTo=function(t,e){if(0>e)return t;var i=Math.pow(10,e);return Math.round(t*i)/i},AmCharts.toFixed=function(t,e){var i=String(Math.round(t*Math.pow(10,e)));if(e>0){var n=i.length;if(e>n){var s;for(s=0;e-n>s;s++)i="0"+i}return n=i.substring(0,i.length-e),""===n&&(n=0),n+"."+i.substring(i.length-e,i.length)}return String(i)},AmCharts.formatDuration=function(t,e,i,n,s,o){var r=AmCharts.intervals,a=o.decimalSeparator;if(t>=r[e].contains){var l=t-Math.floor(t/r[e].contains)*r[e].contains;return"ss"==e&&(l=AmCharts.formatNumber(l,o),1==l.split(a)[0].length&&(l="0"+l)),("mm"==e||"hh"==e)&&10>l&&(l="0"+l),i=l+""+n[e]+i,t=Math.floor(t/r[e].contains),e=r[e].nextInterval,AmCharts.formatDuration(t,e,i,n,s,o)}if("ss"==e&&(t=AmCharts.formatNumber(t,o),1==t.split(a)[0].length&&(t="0"+t)),("mm"==e||"hh"==e)&&10>t&&(t="0"+t),i=t+""+n[e]+i,r[s].count>r[e].count)for(t=r[e].count;t<r[s].count;t++)e=r[e].nextInterval,"ss"==e||"mm"==e||"hh"==e?i="00"+n[e]+i:"DD"==e&&(i="0"+n[e]+i);return":"==i.charAt(i.length-1)&&(i=i.substring(0,i.length-1)),i},AmCharts.formatNumber=function(t,e,i,n,s){t=AmCharts.roundTo(t,e.precision),isNaN(i)&&(i=e.precision);var o=e.decimalSeparator;e=e.thousandsSeparator;var r;r=0>t?"-":"",t=Math.abs(t);var a=String(t),l=!1;-1!=a.indexOf("e")&&(l=!0),i>=0&&!l&&(a=AmCharts.toFixed(t,i));var h="";if(l)h=a;else{var c,a=a.split("."),l=String(a[0]);for(c=l.length;c>=0;c-=3)h=c!=l.length?0!==c?l.substring(c-3,c)+e+h:l.substring(c-3,c)+h:l.substring(c-3,c);void 0!==a[1]&&(h=h+o+a[1]),void 0!==i&&i>0&&"0"!=h&&(h=AmCharts.addZeroes(h,o,i))}return h=r+h,""===r&&!0===n&&0!==t&&(h="+"+h),!0===s&&(h+="%"),h},AmCharts.addZeroes=function(t,e,i){return t=t.split(e),void 0===t[1]&&i>0&&(t[1]="0"),t[1].length<i?(t[1]+="0",AmCharts.addZeroes(t[0]+e+t[1],e,i)):void 0!==t[1]?t[0]+e+t[1]:t[0]},AmCharts.scientificToNormal=function(t){var e;t=String(t).split("e");var i;if("-"==t[1].substr(0,1)){for(e="0.",i=0;i<Math.abs(Number(t[1]))-1;i++)e+="0";e+=t[0].split(".").join("")}else{var n=0;for(e=t[0].split("."),e[1]&&(n=e[1].length),e=t[0].split(".").join(""),i=0;i<Math.abs(Number(t[1]))-n;i++)e+="0"}return e},AmCharts.toScientific=function(t,e){if(0===t)return"0";var i=Math.floor(Math.log(Math.abs(t))*Math.LOG10E);return Math.pow(10,i),mantissa=String(mantissa).split(".").join(e),String(mantissa)+"e"+i},AmCharts.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},AmCharts.hitTest=function(t,e,i){var n=!1,s=t.x,o=t.x+t.width,r=t.y,a=t.y+t.height,l=AmCharts.isInRectangle;return n||(n=l(s,r,e)),n||(n=l(s,a,e)),n||(n=l(o,r,e)),n||(n=l(o,a,e)),n||!0===i||(n=AmCharts.hitTest(e,t,!0)),n},AmCharts.isInRectangle=function(t,e,i){return t>=i.x-5&&t<=i.x+i.width+5&&e>=i.y-5&&e<=i.y+i.height+5?!0:!1},AmCharts.isPercents=function(t){return-1!=String(t).indexOf("%")?!0:void 0},AmCharts.findPosX=function(t){var e=t,i=t.offsetLeft;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetLeft;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollLeft||0}return i},AmCharts.findPosY=function(t){var e=t,i=t.offsetTop;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetTop;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollTop||0}return i},AmCharts.findIfFixed=function(t){if(t.offsetParent)for(;t=t.offsetParent;)if("fixed"==AmCharts.getStyle(t,"position"))return!0;return!1},AmCharts.findIfAuto=function(t){return t.style&&"auto"==AmCharts.getStyle(t,"overflow")?!0:t.parentNode?AmCharts.findIfAuto(t.parentNode):!1},AmCharts.findScrollLeft=function(t,e){return t.scrollLeft&&(e+=t.scrollLeft),t.parentNode?AmCharts.findScrollLeft(t.parentNode,e):e},AmCharts.findScrollTop=function(t,e){return t.scrollTop&&(e+=t.scrollTop),t.parentNode?AmCharts.findScrollTop(t.parentNode,e):e},AmCharts.formatValue=function(t,e,i,n,s,o,r,a){if(e){void 0===s&&(s="");var l;for(l=0;l<i.length;l++){var h=i[l],c=e[h];void 0!==c&&(c=o?AmCharts.addPrefix(c,a,r,n):AmCharts.formatNumber(c,n),t=t.replace(RegExp("\\[\\["+s+h+"\\]\\]","g"),c))}}return t},AmCharts.formatDataContextValue=function(t,e){if(t){var i,n=t.match(/\[\[.*?\]\]/g);for(i=0;i<n.length;i++){var s=n[i],s=s.substr(2,s.length-4);void 0!==e[s]&&(t=t.replace(RegExp("\\[\\["+s+"\\]\\]","g"),e[s]))}}return t},AmCharts.massReplace=function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];void 0===n&&(n=""),t=t.replace(i,n)}return t},AmCharts.cleanFromEmpty=function(t){return t.replace(/\[\[[^\]]*\]\]/g,"")},AmCharts.addPrefix=function(t,e,i,n,s){var o,r,a,l=AmCharts.formatNumber(t,n),h="";if(0===t)return"0";if(0>t&&(h="-"),t=Math.abs(t),t>1){for(o=e.length-1;o>-1;o--)if(t>=e[o].number&&(r=t/e[o].number,a=Number(n.precision),1>a&&(a=1),i=AmCharts.roundTo(r,a),a=AmCharts.formatNumber(i,{precision:-1,decimalSeparator:n.decimalSeparator,thousandsSeparator:n.thousandsSeparator}),!s||r==i)){l=h+""+a+e[o].prefix;break}}else for(o=0;o<i.length;o++)if(t<=i[o].number){r=t/i[o].number,a=Math.abs(Math.round(Math.log(r)*Math.LOG10E)),r=AmCharts.roundTo(r,a),l=h+""+r+i[o].prefix;break}return l},AmCharts.remove=function(t){t&&t.remove()},AmCharts.copyProperties=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"events"!=i&&void 0!==t[i]&&"function"!=typeof t[i]&&(e[i]=t[i])},AmCharts.recommended=function(){var t="js";return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||swfobject&&swfobject.hasFlashPlayerVersion("8")&&(t="flash"),t},AmCharts.getEffect=function(t){return">"==t&&(t="easeOutSine"),"<"==t&&(t="easeInSine"),"elastic"==t&&(t="easeOutElastic"),t},AmCharts.extend=function(t,e){for(var i in e)void 0!==e[i]&&(t.hasOwnProperty(i)||(t[i]=e[i]))},AmCharts.fixNewLines=function(t){if(!AmCharts.isModern){var e=RegExp("\\n","g");t&&(t=t.replace(e,"<br />"))}return t},AmCharts.deleteObject=function(t,e){if(t&&((void 0===e||null===e)&&(e=20),0!==e))if("[object Array]"===Object.prototype.toString.call(t))for(var i=0;i<t.length;i++)AmCharts.deleteObject(t[i],e-1),t[i]=null;else try{for(i in t)t[i]&&("object"==typeof t[i]&&AmCharts.deleteObject(t[i],e-1),"function"!=typeof t[i]&&(t[i]=null))}catch(n){}},AmCharts.bounce=function(t,e,i,n,s){return(e/=s)<1/2.75?7.5625*n*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},AmCharts.easeInSine=function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},AmCharts.easeOutSine=function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},AmCharts.easeOutElastic=function(t,e,i,n,s){t=1.70158;var o=0,r=n;return 0===e?i:1==(e/=s)?i+n:(o||(o=.3*s),r<Math.abs(n)?(r=n,t=o/4):t=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin(2*(e*s-t)*Math.PI/o)+n+i)},AmCharts.AxisBase=AmCharts.Class({construct:function(){this.viY=this.viX=this.y=this.x=this.dy=this.dx=0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridCount=this.tickLength=5,this.gridAlpha=.15,this.gridThickness=1,this.gridColor="#000000",this.dashLength=0,this.labelFrequency=1,this.showLastLabel=this.showFirstLabel=!0,this.fillColor="#FFFFFF",this.fillAlpha=0,this.labelsEnabled=!0,this.labelRotation=0,this.autoGridCount=!0,this.valueRollOverColor="#CC0000",this.offset=0,this.guides=[],this.visible=!0,this.counter=0,this.guides=[],this.ignoreAxisWidth=this.inside=!1,this.minGap=75,this.titleBold=!0,this.minorGridEnabled=!1,this.minorGridAlpha=.07},zoom:function(t,e){this.start=t,this.end=e,this.dataChanged=!0,this.draw()},fixAxisPosition:function(){var t=this.position;"H"==this.orientation?("left"==t&&(t="bottom"),"right"==t&&(t="top")):("bottom"==t&&(t="left"),"top"==t&&(t="right")),this.position=t},draw:function(){var t=this.chart;void 0===this.titleColor&&(this.titleColor=t.color),isNaN(this.titleFontSize)&&(this.titleFontSize=t.fontSize+1),this.allLabels=[],this.counter=0,this.destroy(),this.fixAxisPosition(),this.labels=[];var e=t.container,i=e.set();t.gridSet.push(i),this.set=i,e=e.set(),t.axesLabelsSet.push(e),this.labelsSet=e,this.axisLine=new this.axisRenderer(this),this.autoGridCount&&("V"==this.orientation?(t=this.height/35,3>t&&(t=3)):t=this.width/this.minGap,this.gridCount=Math.max(t,1)),this.axisWidth=this.axisLine.axisWidth,this.addTitle()},setOrientation:function(t){this.orientation=t?"H":"V"},addTitle:function(){var t=this.title;if(t){var e=this.chart;this.titleLabel=AmCharts.text(e.container,t,this.titleColor,e.fontFamily,this.titleFontSize,"middle",this.titleBold)}},positionTitle:function(){var t=this.titleLabel;if(t){var e,i,n=this.labelsSet,s={};0<n.length()?s=n.getBBox():(s.x=0,s.y=0,s.width=this.viW,s.height=this.viH),n.push(t);var n=s.x,o=s.y;AmCharts.VML&&(this.rotate?n-=this.x:o-=this.y);var r=s.width,s=s.height,a=this.viW,l=this.viH;t.getBBox();var h=0,c=this.titleFontSize/2,u=this.inside;switch(this.position){case"top":e=a/2,i=o-10-c;break;case"bottom":e=a/2,i=o+s+10+c;break;case"left":e=n-10-c,u&&(e-=5),i=l/2,h=-90;break;case"right":e=n+r+10+c-3,u&&(e+=7),i=l/2,h=-90}this.marginsChanged?(t.translate(e,i),this.tx=e,this.ty=i):t.translate(this.tx,this.ty),this.marginsChanged=!1,0!==h&&t.rotate(h)}},pushAxisItem:function(t,e){var i=t.graphics();0<i.length()&&(e?this.labelsSet.push(i):this.set.push(i)),(i=t.getLabel())&&this.labelsSet.push(i)},addGuide:function(t){this.guides.push(t)},removeGuide:function(t){var e,i=this.guides;for(e=0;e<i.length;e++)i[e]==t&&i.splice(e,1)},handleGuideOver:function(t){clearTimeout(this.chart.hoverInt);var e=t.graphics.getBBox(),i=e.x+e.width/2,e=e.y+e.height/2,n=t.fillColor;void 0===n&&(n=t.lineColor),this.chart.showBalloon(t.balloonText,n,!0,i,e)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(t,e){var i=this;t.mouseover(function(){i.handleGuideOver(e)}),t.mouseout(function(){i.handleGuideOut(e)})},getBBox:function(){var t=this.labelsSet.getBBox();return AmCharts.VML||(t={x:t.x+this.x,y:t.y+this.y,width:t.width,height:t.height}),t},destroy:function(){AmCharts.remove(this.set),AmCharts.remove(this.labelsSet);var t=this.axisLine;t&&AmCharts.remove(t.set),AmCharts.remove(this.grid0)}}),AmCharts.ValueAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(){this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed"),AmCharts.ValueAxis.base.construct.call(this),this.dataChanged=!0,this.gridCount=8,this.stackType="none",this.position="left",this.unitPosition="right",this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1,this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""},this.scrollbar=!1,this.baseValue=0,this.radarCategoriesEnabled=!0,this.gridType="polygons",this.useScientificNotation=!1,this.axisTitleOffset=10,this.minMaxMultiplier=1},updateData:function(){0>=this.gridCount&&(this.gridCount=1),this.totals=[],this.data=this.chart.chartData,"xy"!=this.chart.chartType&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step")),this.recalculateToPercents&&this.recalculate(),this.synchronizationMultiplier&&this.synchronizeWith?this.foundGraphs=!0:(this.foundGraphs=!1,this.getMinMax())},draw:function(){AmCharts.ValueAxis.base.draw.call(this);var t=this.chart,e=this.set;if("duration"==this.type&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),this.logarithmic&&(0>=this.getMin(0,this.data.length-1)||0>=this.minimum))this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:t});else{this.grid0=null;var i,n,s=t.dx,o=t.dy,r=!1,a=this.logarithmic,l=t.chartType;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||1/0==this.min||-1/0==this.max)r=!0;else{var h,c=this.labelFrequency,u=this.showFirstLabel,d=this.showLastLabel,p=1,f=0,m=Math.round((this.max-this.min)/this.step)+1;!0===a?(h=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/h,h>2&&(m=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,f=Math.round(Math.log(this.minReal)*Math.LOG10E),m>this.gridCount&&(p=Math.ceil(m/this.gridCount)))):this.stepWidth=this.axisWidth/(this.max-this.min);var g=0;1>this.step&&-1<this.step&&(g=this.getDecimals(this.step)),this.integersOnly&&(g=0),g>this.maxDecCount&&(g=this.maxDecCount);var v=this.precision;isNaN(v)||(g=v),this.max=AmCharts.roundTo(this.max,this.maxDecCount),this.min=AmCharts.roundTo(this.min,this.maxDecCount);var _={};_.precision=g,_.decimalSeparator=t.numberFormatter.decimalSeparator,_.thousandsSeparator=t.numberFormatter.thousandsSeparator,this.numberFormatter=_;var y,b=this.guides,w=b.length;if(w>0){for(i=this.fillAlpha,n=this.fillAlpha=0;w>n;n++){var C=b[n],x=0/0,T=C.above;isNaN(C.toValue)||(x=this.getCoordinate(C.toValue),y=new this.axisItemRenderer(this,x,"",!0,0/0,0/0,C),this.pushAxisItem(y,T));var A=0/0;isNaN(C.value)||(A=this.getCoordinate(C.value),y=new this.axisItemRenderer(this,A,C.label,!0,0/0,(x-A)/2,C),this.pushAxisItem(y,T)),isNaN(x-A)||(y=new this.guideFillRenderer(this,A,x,C),this.pushAxisItem(y,T),y=y.graphics(),C.graphics=y,C.balloonText&&this.addEventListeners(y,C))}this.fillAlpha=i}for(b=!1,n=f;m>n;n+=p)w=AmCharts.roundTo(this.step*n+this.min,g),-1!=String(w).indexOf("e")&&(b=!0,String(w).split("e"));this.duration&&(this.maxInterval=AmCharts.getMaxInterval(this.max,this.duration));var S,g=this.step,w=this.minorGridAlpha;for(this.minorGridEnabled&&(S=this.getMinorGridStep(g,this.stepWidth*g)),n=f;m>n;n+=p)if(f=g*n+this.min,f=AmCharts.roundTo(f,this.maxDecCount+1),!(this.integersOnly&&Math.round(f)!=f||!isNaN(v)&&Number(AmCharts.toFixed(f,v))!=f)){if(!0===a&&(0===f&&(f=this.minReal),h>2&&(f=Math.pow(10,n)),b=-1!=String(f).indexOf("e")?!0:!1),this.useScientificNotation&&(b=!0),this.usePrefixes&&(b=!1),b?(y=-1==String(f).indexOf("e")?f.toExponential(15):String(f),i=y.split("e"),y=Number(i[0]),i=Number(i[1]),y=AmCharts.roundTo(y,14),10==y&&(y=1,i+=1),y=y+"e"+i,0===f&&(y="0"),1==f&&(y="1")):(a&&(y=String(f).split("."),_.precision=y[1]?y[1].length:-1),y=this.usePrefixes?AmCharts.addPrefix(f,t.prefixesOfBigNumbers,t.prefixesOfSmallNumbers,_,!0):AmCharts.formatNumber(f,_,_.precision)),this.duration&&(y=AmCharts.formatDuration(f,this.duration,"",this.durationUnits,this.maxInterval,_)),this.recalculateToPercents?y+="%":(i=this.unit)&&(y="left"==this.unitPosition?i+y:y+i),Math.round(n/c)!=n/c&&(y=void 0),(0===n&&!u||n==m-1&&!d)&&(y=" "),i=this.getCoordinate(f),this.labelFunction&&(y=this.labelFunction(f,y,this)),y=new this.axisItemRenderer(this,i,y),this.pushAxisItem(y),f==this.baseValue&&"radar"!=l){var k,D,T=this.viW,x=this.viH;y=this.viX,C=this.viY,"H"==this.orientation?i>=0&&T+1>=i&&(k=[i,i,i+s],D=[x,0,o]):i>=0&&x+1>=i&&(k=[0,T,T+s],D=[i,i,i+o]),k&&(i=AmCharts.fitToBounds(2*this.gridAlpha,0,1),i=AmCharts.line(t.container,k,D,this.gridColor,i,1,this.dashLength),i.translate(y,C),this.grid0=i,t.axesSet.push(i),i.toBack())}if(!isNaN(S)&&w>0&&m-1>n){for(y=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,i=1;g/S>i;i++)C=this.getCoordinate(f+S*i),C=new this.axisItemRenderer(this,C,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(C);this.gridAlpha=y}}n=this.baseValue,this.min>this.baseValue&&this.max>this.baseValue&&(n=this.min),this.min<this.baseValue&&this.max<this.baseValue&&(n=this.max),a&&n<this.minReal&&(n=this.minReal),this.baseCoord=this.getCoordinate(n),t={type:"axisChanged",target:this,chart:t},t.min=a?this.minReal:this.min,t.max=this.max,this.fire("axisChanged",t),this.axisCreated=!0}a=this.axisLine.set,t=this.labelsSet,this.positionTitle(),"radar"!=l?(l=this.viX,n=this.viY,e.translate(l,n),t.translate(l,n)):a.toFront(),!this.visible||r?(e.hide(),a.hide(),t.hide()):(e.show(),a.show(),t.show())}},getDecimals:function(t){var e=0;return isNaN(t)||(t=String(t),-1!=t.indexOf("e-")?e=Number(t.split("-")[1]):-1!=t.indexOf(".")&&(e=t.split(".")[1].length)),e},getMinorGridStep:function(t,e){var i=[5,4,2];60>e&&i.shift();for(var n=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),s=0;s<i.length;s++){var o=t/i[s],r=Math.floor(Math.log(Math.abs(o))*Math.LOG10E);if(!(0<Math.abs(n-r)))if(1>t){if(r=Math.pow(10,-r)*o,r==Math.round(r))return o}else if(o==Math.round(o))return o}},stackGraphs:function(t){var e=this.stackType;"stacked"==e&&(e="regular"),"line"==e&&(e="none"),"100% stacked"==e&&(e="100%"),this.stackType=e;var i,n,s,o,r,a=[],l=[],h=[],c=[],u=this.chart.graphs,d=this.baseValue,p=!1;if(("line"==t||"step"==t||"smoothedLine"==t)&&(p=!0),p&&("regular"==e||"100%"==e))for(r=0;r<u.length;r++)o=u[r],o.hidden||(s=o.type,o.chart==this.chart&&o.valueAxis==this&&t==s&&o.stackable&&(n&&(o.stackGraph=n),n=o));for(n=this.start;n<=this.end;n++){var f=0;for(r=0;r<u.length;r++)if(o=u[r],!o.hidden&&(s=o.type,o.chart==this.chart&&o.valueAxis==this&&t==s&&o.stackable&&(s=this.data[n].axes[this.id].graphs[o.id],i=s.values.value,!isNaN(i)))){var m=this.getDecimals(i);
m>f&&(f=m),isNaN(c[n])?c[n]=Math.abs(i):c[n]+=Math.abs(i),c[n]=AmCharts.roundTo(c[n],f),o=o.fillToGraph,p&&o&&(o=this.data[n].axes[this.id].graphs[o.id])&&(s.values.open=o.values.value),"regular"==e&&(p&&(isNaN(a[n])?(a[n]=i,s.values.close=i,s.values.open=this.baseValue):(s.values.close=isNaN(i)?a[n]:i+a[n],s.values.open=a[n],a[n]=s.values.close)),"column"!=t||isNaN(i)||(s.values.close=i,0>i?(s.values.close=i,isNaN(l[n])?s.values.open=d:(s.values.close+=l[n],s.values.open=l[n]),l[n]=s.values.close):(s.values.close=i,isNaN(h[n])?s.values.open=d:(s.values.close+=h[n],s.values.open=h[n]),h[n]=s.values.close)))}}for(n=this.start;n<=this.end;n++)for(r=0;r<u.length;r++)o=u[r],o.hidden||(s=o.type,o.chart==this.chart&&o.valueAxis==this&&t==s&&o.stackable&&(s=this.data[n].axes[this.id].graphs[o.id],i=s.values.value,isNaN(i)||(a=100*(i/c[n]),s.values.percents=a,s.values.total=c[n],"100%"==e&&(isNaN(l[n])&&(l[n]=0),isNaN(h[n])&&(h[n]=0),0>a?(s.values.close=AmCharts.fitToBounds(a+l[n],-100,100),s.values.open=l[n],l[n]=s.values.close):(s.values.close=AmCharts.fitToBounds(a+h[n],-100,100),s.values.open=h[n],h[n]=s.values.close)))))},recalculate:function(){var t,e=this.chart.graphs;for(t=0;t<e.length;t++){var i=e[t];if(i.valueAxis==this){var n="value";("candlestick"==i.type||"ohlc"==i.type)&&(n="open");var s,o,r=this.end+2,r=AmCharts.fitToBounds(this.end+1,0,this.data.length-1),a=this.start;a>0&&a--;var l;for(o=this.start,i.compareFromStart&&(o=0),l=o;r>=l&&(o=this.data[l].axes[this.id].graphs[i.id],s=o.values[n],isNaN(s));l++);for(n=a;r>=n;n++){o=this.data[n].axes[this.id].graphs[i.id],o.percents={};var h,a=o.values;for(h in a)o.percents[h]="percents"!=h?100*(a[h]/s)-100:a[h]}}}},getMinMax:function(){var t,e=!1,i=this.chart,n=i.graphs;for(t=0;t<n.length;t++){var s=n[t].type;("line"==s||"step"==s||"smoothedLine"==s)&&this.expandMinMax&&(e=!0)}if(e&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==i.chartType&&(!0!==i.categoryAxis.parseDates||e||this.end<this.data.length-1&&this.end++),e=this.minMaxMultiplier,this.min=this.getMin(this.start,this.end),this.max=this.getMax(),e=(this.max-this.min)*(e-1),this.min-=e,this.max+=e,e=this.guides.length,this.includeGuidesInMinMax&&e>0)for(i=0;e>i;i++)n=this.guides[i],n.toValue<this.min&&(this.min=n.toValue),n.value<this.min&&(this.min=n.value),n.toValue>this.max&&(this.max=n.toValue),n.value>this.max&&(this.max=n.value);isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum),this.min>this.max&&(e=this.max,this.max=this.min,this.min=e),isNaN(this.minTemp)||(this.min=this.minTemp),isNaN(this.maxTemp)||(this.max=this.maxTemp),this.minReal=this.min,this.maxReal=this.max,0===this.min&&0===this.max&&(this.max=9),this.min>this.max&&(this.min=this.max-1),e=this.min,i=this.max,n=this.max-this.min,t=0===n?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10,isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/t)*t+t),isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/t)*t-t),0>this.min&&e>=0&&(this.min=0),0<this.max&&0>=i&&(this.max=0),"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100),n=this.max-this.min,t=Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))/10,this.step=Math.ceil(n/this.gridCount/t)*t,n=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),n=this.fixStepE(n),t=Math.ceil(this.step/n),t>5&&(t=10),5>=t&&t>2&&(t=5),this.step=Math.ceil(this.step/(n*t))*n*t,1>n?(this.maxDecCount=Math.abs(Math.log(Math.abs(n))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=AmCharts.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0,this.min=this.step*Math.floor(this.min/this.step),this.max=this.step*Math.ceil(this.max/this.step),0>this.min&&e>=0&&(this.min=0),0<this.max&&0>=i&&(this.max=0),1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal)),n=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E)),0===this.min&&(this.minReal=n),0===this.min&&1<this.minReal&&(this.minReal=1),0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min),n=Math.log(i)*Math.LOG10E-Math.log(e)*Math.LOG10E,this.logarithmic&&(n>2?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(e))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(i))*Math.LOG10E))):(i=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,e=Math.pow(10,Math.floor(Math.log(Math.abs(e))*Math.LOG10E))/10,e>i&&(this.minReal=this.min=10*e)))},fixStepE:function(t){t=t.toExponential(0).split("e");var e=Number(t[1]);return 9==Number(t[0])&&e++,this.generateNumber(1,e)},generateNumber:function(t,e){var i,n="";i=0>e?Math.abs(e)-1:Math.abs(e);var s;for(s=0;i>s;s++)n+="0";return 0>e?Number("0."+n+String(t)):Number(String(t)+n)},getMin:function(t,e){var i,n;for(n=t;e>=n;n++){var s,o=this.data[n].axes[this.id].graphs;for(s in o)if(o.hasOwnProperty(s)){var r=this.chart.getGraphById(s);if(r.includeInMinMax&&(!r.hidden||this.includeHidden)){isNaN(i)&&(i=1/0),this.foundGraphs=!0,r=o[s].values,this.recalculateToPercents&&(r=o[s].percents);var a;if(this.minMaxField)a=r[this.minMaxField],i>a&&(i=a);else for(var l in r)r.hasOwnProperty(l)&&"percents"!=l&&"total"!=l&&(a=r[l],i>a&&(i=a))}}}return i},getMax:function(){var t,e;for(e=this.start;e<=this.end;e++){var i,n=this.data[e].axes[this.id].graphs;for(i in n)if(n.hasOwnProperty(i)){var s=this.chart.getGraphById(i);if(s.includeInMinMax&&(!s.hidden||this.includeHidden)){isNaN(t)&&(t=-1/0),this.foundGraphs=!0,s=n[i].values,this.recalculateToPercents&&(s=n[i].percents);var o;if(this.minMaxField)o=s[this.minMaxField],o>t&&(t=o);else for(var r in s)s.hasOwnProperty(r)&&"percents"!=r&&"total"!=r&&(o=s[r],o>t&&(t=o))}}}return t},dispatchZoomEvent:function(t,e){var i={type:"axisZoomed",startValue:t,endValue:e,target:this,chart:this.chart};this.fire(i.type,i)},zoomToValues:function(t,e){if(t>e){var i=e;e=t,t=i}t<this.min&&(t=this.min),e>this.max&&(e=this.max),i={type:"axisSelfZoomed"},i.chart=this.chart,i.valueAxis=this,i.multiplier=this.axisWidth/Math.abs(this.getCoordinate(e)-this.getCoordinate(t)),i.position="V"==this.orientation?this.reversed?this.getCoordinate(t):this.getCoordinate(e):this.reversed?this.getCoordinate(e):this.getCoordinate(t),this.fire(i.type,i)},coordinateToValue:function(t){if(isNaN(t))return 0/0;var e=this.axisWidth,i=this.stepWidth,n=this.reversed,s=this.rotate,o=this.min,r=this.minReal;return!0===this.logarithmic?Math.pow(10,(s?!0===n?(e-t)/i:t/i:!0===n?t/i:(e-t)/i)+Math.log(r)*Math.LOG10E):!0===n?s?o-(t-e)/i:t/i+o:s?t/i+o:o-(t-e)/i},getCoordinate:function(t){if(isNaN(t))return 0/0;var e=this.rotate,i=this.reversed,n=this.axisWidth,s=this.stepWidth,o=this.min,r=this.minReal;return!0===this.logarithmic?(t=Math.log(t)*Math.LOG10E-Math.log(r)*Math.LOG10E,e=e?!0===i?n-s*t:s*t:!0===i?s*t:n-s*t):e=!0===i?e?n-s*(t-o):s*(t-o):e?s*(t-o):n-s*(t-o),e=this.rotate?e+(this.x-this.viX):e+(this.y-this.viY),Math.round(e)},synchronizeWithAxis:function(t){this.synchronizeWith=t,this.removeListener(this.synchronizeWith,"axisChanged",this.handleSynchronization),this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(t){var e=this.synchronizeWith;t=e.min;var i=e.max,e=e.step,n=this.synchronizationMultiplier;n&&(this.min=t*n,this.max=i*n,this.step=e*n,t=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),t=Math.abs(Math.log(Math.abs(t))*Math.LOG10E),this.maxDecCount=t=Math.round(t),this.draw())}}),AmCharts.RecAxis=AmCharts.Class({construct:function(t){var e=t.chart,i=t.axisThickness,n=t.axisColor,s=t.axisAlpha,o=t.offset,r=t.dx,a=t.dy,l=t.viX,h=t.viY,c=t.viH,u=t.viW,d=e.container;"H"==t.orientation?(n=AmCharts.line(d,[0,u],[0,0],n,s,i),this.axisWidth=t.width,"bottom"==t.position?(t=i/2+o+c+h-1,i=l):(t=-i/2-o+h+a,i=r+l)):(this.axisWidth=t.height,"right"==t.position?(n=AmCharts.line(d,[0,0,-r],[0,c,c-a],n,s,i),t=h+a,i=i/2+o+r+u+l-1):(n=AmCharts.line(d,[0,0],[0,c],n,s,i),t=h,i=-i/2-o+l)),n.translate(i,t),e.axesSet.push(n),this.set=n}}),AmCharts.RecItem=AmCharts.Class({construct:function(t,e,i,n,s,o,r,a,l,h){e=Math.round(e),void 0==i&&(i=""),l||(l=0),void 0==n&&(n=!0);var c=t.chart.fontFamily,u=t.fontSize;void 0==u&&(u=t.chart.fontSize);var d=t.color;void 0==d&&(d=t.chart.color);var p=t.chart.container,f=p.set();this.set=f;var m,g,v=t.axisThickness,_=t.axisColor,y=t.axisAlpha,b=t.tickLength,w=t.gridAlpha,C=t.gridThickness,x=t.gridColor,T=t.dashLength,A=t.fillColor,S=t.fillAlpha,k=t.labelsEnabled,D=t.labelRotation,L=t.counter,M=t.inside,E=t.dx,N=t.dy,P=t.orientation,O=t.position,R=t.previousCoord,I=t.viH,B=t.viW,z=t.offset;r?(k=!0,isNaN(r.tickLength)||(b=r.tickLength),void 0!=r.lineColor&&(x=r.lineColor),void 0!=r.color&&(d=r.color),isNaN(r.lineAlpha)||(w=r.lineAlpha),isNaN(r.dashLength)||(T=r.dashLength),isNaN(r.lineThickness)||(C=r.lineThickness),!0===r.inside&&(M=!0),isNaN(r.labelRotation)||(D=r.labelRotation),isNaN(r.fontSize)||(u=r.fontSize),r.position&&(O=r.position)):""===i&&(b=0),g="start",s&&(g="middle");var U,H=D*Math.PI/180,F=0,j=0,$=0,W=U=0;"V"==P&&(D=0);var V;k&&(V=AmCharts.text(p,i,d,c,u,g,a),W=V.getBBox().width),"H"==P?(e>=0&&B+1>=e&&(b>0&&y>0&&B+1>=e+l&&(m=AmCharts.line(p,[e+l,e+l],[0,b],_,y,C),f.push(m)),w>0&&(g=AmCharts.line(p,[e,e+E,e+E],[I,I+N,N],x,w,C,T),f.push(g))),j=0,F=e,r&&90==D&&(F-=u),!1===n?(g="start",j="bottom"==O?M?j+b:j-b:M?j-b:j+b,F+=3,s&&(F+=s/2,g="middle"),D>0&&(g="middle")):g="middle",1==L&&S>0&&!r&&!h&&B>R&&(n=AmCharts.fitToBounds(e,0,B),R=AmCharts.fitToBounds(R,0,B),U=n-R,U>0&&(fill=AmCharts.rect(p,U,t.height,A,S),fill.translate(n-U+E,N),f.push(fill))),"bottom"==O?(j+=I+u/2+z,M?D>0?(j=I-W/2*Math.sin(H)-b-3,F+=W/2*Math.cos(H)):j-=b+u+3+3:D>0?(j=I+W/2*Math.sin(H)+b+3,F-=W/2*Math.cos(H)):j+=b+v+3+3):(j+=N+u/2-z,F+=E,M?D>0?(j=W/2*Math.sin(H)+b+3,F-=W/2*Math.cos(H)):j+=b+3:D>0?(j=-(W/2)*Math.sin(H)-b-6,F+=W/2*Math.cos(H)):j-=b+u+3+v+3),"bottom"==O?U=(M?I-b-1:I+v-1)+z:($=E,U=(M?N:N-b-v+1)-z),o&&(F+=o),N=F,D>0&&(N+=W/2*Math.cos(H)),V&&(O=0,M&&(O=W/2*Math.cos(H)),N+O>B+2||0>N)&&(V.remove(),V=null)):(e>=0&&I+1>=e&&(b>0&&y>0&&I+1>=e+l&&(m=AmCharts.line(p,[0,b],[e+l,e+l],_,y,C),f.push(m)),w>0&&(g=AmCharts.line(p,[0,E,B+E],[e,e+N,e+N],x,w,C,T),f.push(g))),g="end",(!0===M&&"left"==O||!1===M&&"right"==O)&&(g="start"),j=e-u/2,1==L&&S>0&&!r&&!h&&(n=AmCharts.fitToBounds(e,0,I),R=AmCharts.fitToBounds(R,0,I),H=n-R,fill=AmCharts.polygon(p,[0,t.width,t.width,0],[0,0,H,H],A,S),fill.translate(E,n-H+N),f.push(fill)),j+=u/2,"right"==O?(F+=E+B+z,j+=N,M?(F-=b+4,o||(j-=u/2+3)):(F+=b+4+v,j-=2)):M?(F+=b+4-z,o||(j-=u/2+3),r&&(F+=E,j+=N)):(F+=-b-v-4-2-z,j-=2),m&&("right"==O?($+=E+z+B,U+=N,$=M?$-v:$+v):($-=z,M||($-=b+v))),o&&(j+=o),M=-3,"right"==O&&(M+=N),V&&(j>I+1||M>j)&&(V.remove(),V=null)),m&&m.translate($,U),!1===t.visible&&(m&&m.remove(),V&&(V.remove(),V=null)),V&&(V.attr({"text-anchor":g}),V.translate(F,j),0!==D&&V.rotate(-D,t.chart.backgroundColor),t.allLabels.push(V)," "!=i&&(this.label=V)),h||(t.counter=0===L?1:0,t.previousCoord=e),0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}}),AmCharts.RecFill=AmCharts.Class({construct:function(t,e,i,n){var s=t.dx,o=t.dy,r=t.orientation,a=0;if(e>i){var l=e;e=i,i=l}var h=n.fillAlpha;isNaN(h)&&(h=0),l=t.chart.container,n=n.fillColor,"V"==r?(e=AmCharts.fitToBounds(e,0,t.viH),i=AmCharts.fitToBounds(i,0,t.viH)):(e=AmCharts.fitToBounds(e,0,t.viW),i=AmCharts.fitToBounds(i,0,t.viW)),i-=e,isNaN(i)&&(i=4,a=2,h=0),0>i&&"object"==typeof n&&(n=n.join(",").split(",").reverse()),"V"==r?(t=AmCharts.rect(l,t.width,i,n,h),t.translate(s,e-a+o)):(t=AmCharts.rect(l,i,t.height,n,h),t.translate(e-a+s,o)),this.set=l.set([t])},graphics:function(){return this.set},getLabel:function(){}}),AmCharts.AmChart=AmCharts.Class({construct:function(){this.version="3.1.1",AmCharts.addChart(this),this.createEvents("dataUpdated","init","rendered","drawn"),this.height=this.width="100%",this.dataChanged=!0,this.chartCreated=!1,this.previousWidth=this.previousHeight=0,this.backgroundColor="#FFFFFF",this.borderAlpha=this.backgroundAlpha=0,this.color=this.borderColor="#000000",this.fontFamily="Verdana",this.fontSize=11,this.usePrefixes=!1,this.numberFormatter={precision:-1,decimalSeparator:".",thousandsSeparator:","},this.percentFormatter={precision:2,decimalSeparator:".",thousandsSeparator:","},this.labels=[],this.allLabels=[],this.titles=[],this.marginRight=this.marginLeft=this.autoMarginOffset=0,this.timeOuts=[];var t=document.createElement("div"),e=t.style;e.overflow="hidden",e.position="relative",e.textAlign="left",this.chartDiv=t,t=document.createElement("div"),e=t.style,e.overflow="hidden",e.position="relative",e.textAlign="left",this.legendDiv=t,this.balloon=new AmCharts.AmBalloon,this.balloon.chart=this,this.titleHeight=0,this.hideBalloonTime=150,this.handDrawScatter=2,this.handDrawThickness=1,this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}],this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:"μ"},{number:.001,prefix:"m"}],this.panEventsEnabled=!1,AmCharts.bezierX=3,AmCharts.bezierY=6,this.product="amcharts",this.animations=[]},drawChart:function(){this.drawBackground(),this.redrawLabels(),this.drawTitles()},drawBackground:function(){AmCharts.remove(this.background);var t=this.container,e=this.backgroundColor,i=this.backgroundAlpha,n=this.set;AmCharts.isModern||0!==i||(i=.001);var s=this.updateWidth();this.realWidth=s;var o=this.updateHeight();this.realHeight=o,this.background=e=AmCharts.polygon(t,[0,s-1,s-1,0],[0,0,o-1,o-1],e,i,1,this.borderColor,this.borderAlpha),n.push(e),(e=this.backgroundImage)&&(this.path&&(e=this.path+e),this.bgImg=t=t.image(e,0,0,s,o),n.push(t))},drawTitles:function(){var t=this.titles;if(AmCharts.ifArray(t)){var e,i=20;for(e=0;e<t.length;e++){var n=t[e],s=n.color;void 0===s&&(s=this.color);var o=n.size;isNaN(n.alpha);var r=this.marginLeft,s=AmCharts.text(this.container,n.text,s,this.fontFamily,o);s.translate(r+(this.realWidth-this.marginRight-r)/2,i),r=!0,void 0!==n.bold&&(r=n.bold),r&&s.attr({"font-weight":"bold"}),i+=o+6,this.freeLabelsSet.push(s)}}},write:function(t){var e=this.balloon;e&&!e.chart&&(e.chart=this),t="object"!=typeof t?document.getElementById(t):t,t.innerHTML="",this.div=t,t.style.overflow="hidden",t.style.textAlign="left";var e=this.chartDiv,i=this.legendDiv,n=this.legend,s=i.style,o=e.style;this.measure();var r,a;if(n)switch(n.position){case"bottom":t.appendChild(e),t.appendChild(i);break;case"top":t.appendChild(i),t.appendChild(e);break;case"absolute":r=document.createElement("div"),a=r.style,a.position="relative",a.width=t.style.width,a.height=t.style.height,t.appendChild(r),s.position="absolute",o.position="absolute",void 0!==n.left&&(s.left=n.left+"px"),void 0!==n.right&&(s.right=n.right+"px"),void 0!==n.top&&(s.top=n.top+"px"),void 0!==n.bottom&&(s.bottom=n.bottom+"px"),n.marginLeft=0,n.marginRight=0,r.appendChild(e),r.appendChild(i);break;case"right":r=document.createElement("div"),a=r.style,a.position="relative",a.width=t.style.width,a.height=t.style.height,t.appendChild(r),s.position="relative",o.position="absolute",r.appendChild(e),r.appendChild(i);break;case"left":r=document.createElement("div"),a=r.style,a.position="relative",a.width=t.style.width,a.height=t.style.height,t.appendChild(r),s.position="absolute",o.position="relative",r.appendChild(e),r.appendChild(i);break;case"outside":t.appendChild(e)}else t.appendChild(e);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0),this.initChart()},createLabelsSet:function(){AmCharts.remove(this.labelsSet),this.labelsSet=this.container.set(),this.freeLabelsSet.push(this.labelsSet)},initChart:function(){this.divIsFixed=AmCharts.findIfFixed(this.chartDiv),this.previousHeight=this.divRealHeight,this.previousWidth=this.divRealWidth,this.destroy(),this.startInterval();var t=0;document.attachEvent&&!window.opera&&(t=1),this.dmouseX=this.dmouseY=0;var e=document.getElementsByTagName("html")[0];e&&window.getComputedStyle&&(e=window.getComputedStyle(e,null))&&(this.dmouseY=AmCharts.removePx(e.getPropertyValue("margin-top")),this.dmouseX=AmCharts.removePx(e.getPropertyValue("margin-left"))),this.mouseMode=t,t=new AmCharts.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this),t.handDrawn=this.handDrawn,t.handDrawScatter=this.handDrawScatter,t.handDrawThickness=this.handDrawThickness,this.container=t,(AmCharts.VML||AmCharts.SVG)&&(t=this.container,this.set=t.set(),this.gridSet=t.set(),this.graphsBehindSet=t.set(),this.bulletBehindSet=t.set(),this.columnSet=t.set(),this.graphsSet=t.set(),this.trendLinesSet=t.set(),this.axesLabelsSet=t.set(),this.axesSet=t.set(),this.cursorSet=t.set(),this.scrollbarsSet=t.set(),this.bulletSet=t.set(),this.freeLabelsSet=t.set(),this.balloonsSet=t.set(),this.balloonsSet.setAttr("id","balloons"),this.zoomButtonSet=t.set(),this.linkSet=t.set(),this.brrr(),this.renderFix())},measure:function(){var t=this.div,e=this.chartDiv,i=t.offsetWidth,n=t.offsetHeight,s=this.container;t.clientHeight&&(i=t.clientWidth,n=t.clientHeight);var o=AmCharts.removePx(AmCharts.getStyle(t,"padding-left")),r=AmCharts.removePx(AmCharts.getStyle(t,"padding-right")),a=AmCharts.removePx(AmCharts.getStyle(t,"padding-top")),l=AmCharts.removePx(AmCharts.getStyle(t,"padding-bottom"));isNaN(o)||(i-=o),isNaN(r)||(i-=r),isNaN(a)||(n-=a),isNaN(l)||(n-=l),o=t.style,t=o.width,o=o.height,-1!=t.indexOf("px")&&(i=AmCharts.removePx(t)),-1!=o.indexOf("px")&&(n=AmCharts.removePx(o)),t=AmCharts.toCoordinate(this.width,i),o=AmCharts.toCoordinate(this.height,n),(t!=this.previousWidth||o!=this.previousHeight)&&(e.style.width=t+"px",e.style.height=o+"px",s&&s.setSize(t,o),this.balloon.setBounds(2,2,t-2,o)),this.realWidth=t,this.realHeight=o,this.divRealWidth=i,this.divRealHeight=n},destroy:function(){this.chartDiv.innerHTML="",this.clearTimeOuts(),this.interval&&clearInterval(this.interval),this.interval=0/0},clearTimeOuts:function(){var t=this.timeOuts;if(t){var e;for(e=0;e<t.length;e++)clearTimeout(t[e])}this.timeOuts=[]},clear:function(t){AmCharts.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]),this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null,this.clearTimeOuts(),this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv)),t||AmCharts.removeChart(this)},setMouseCursor:function(t){"auto"==t&&AmCharts.isNN&&(t="default"),this.chartDiv.style.cursor=t,this.legendDiv.style.cursor=t},redrawLabels:function(){this.labels=[];var t=this.allLabels;this.createLabelsSet();var e;for(e=0;e<t.length;e++)this.drawLabel(t[e])},drawLabel:function(t){if(this.container){var e=t.y,i=t.text,n=t.align,s=t.size,o=t.color,r=t.rotation,a=t.alpha,l=t.bold,h=AmCharts.toCoordinate(t.x,this.realWidth),e=AmCharts.toCoordinate(e,this.realHeight);h||(h=0),e||(e=0),void 0===o&&(o=this.color),isNaN(s)&&(s=this.fontSize),n||(n="start"),"left"==n&&(n="start"),"right"==n&&(n="end"),"center"==n&&(n="middle",r?e=this.realHeight-e+e/2:h=this.realWidth/2-h),void 0===a&&(a=1),void 0===r&&(r=0),e+=s/2,i=AmCharts.text(this.container,i,o,this.fontFamily,s,n,l,a),i.translate(h,e),0!==r&&i.rotate(r),t.url&&(i.setAttr("cursor","pointer"),i.click(function(){AmCharts.getURL(t.url)})),this.labelsSet.push(i),this.labels.push(i)}},addLabel:function(t,e,i,n,s,o,r,a,l,h){t={x:t,y:e,text:i,align:n,size:s,color:o,alpha:a,rotation:r,bold:l,url:h},this.container&&this.drawLabel(t),this.allLabels.push(t)},clearLabels:function(){var t,e=this.labels;for(t=e.length-1;t>=0;t--)e[t].remove();this.labels=[],this.allLabels=[]},updateHeight:function(){var t=this.divRealHeight,e=this.legend;if(e){var i=this.legendDiv.offsetHeight,e=e.position;("top"==e||"bottom"==e)&&(t-=i,0>t&&(t=0),this.chartDiv.style.height=t+"px")}return t},updateWidth:function(){var t=this.divRealWidth,e=this.divRealHeight,i=this.legend;if(i){var n=this.legendDiv,s=n.offsetWidth,o=n.offsetHeight,n=n.style,r=this.chartDiv.style,i=i.position;("right"==i||"left"==i)&&(t-=s,0>t&&(t=0),r.width=t+"px","left"==i?r.left=s+"px":n.left=t+"px",n.top=(e-o)/2+"px")}return t},getTitleHeight:function(){var t=0,e=this.titles;if(0<e.length){var i,t=15;for(i=0;i<e.length;i++)t+=e[i].size+6}return t},addTitle:function(t,e,i,n,s){return isNaN(e)&&(e=this.fontSize+2),t={text:t,size:e,color:i,alpha:n,bold:s},this.titles.push(t),t},addMouseWheel:function(){var t=this;window.addEventListener&&(window.addEventListener("DOMMouseScroll",function(e){t.handleWheel.call(t,e)},!1),document.addEventListener("mousewheel",function(e){t.handleWheel.call(t,e)},!1))},handleWheel:function(t){if(this.mouseIsOver){var e=0;t||(t=window.event),t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e&&this.handleWheelReal(e),t.preventDefault&&t.preventDefault(),t.returnValue=!1}},handleWheelReal:function(){},addListeners:function(){var t=this,e=t.chartDiv;document.addEventListener?(t.panEventsEnabled&&"ontouchstart"in document.documentElement&&(e.addEventListener("touchstart",function(e){t.handleTouchMove.call(t,e),t.handleTouchStart.call(t,e)},!0),e.addEventListener("touchmove",function(e){t.handleTouchMove.call(t,e)},!0),e.addEventListener("touchend",function(e){t.handleTouchEnd.call(t,e)},!0)),e.addEventListener("mousedown",function(e){t.handleMouseDown.call(t,e)},!0),e.addEventListener("mouseover",function(e){t.handleMouseOver.call(t,e)},!0),e.addEventListener("mouseout",function(e){t.handleMouseOut.call(t,e)},!0)):(e.attachEvent("onmousedown",function(e){t.handleMouseDown.call(t,e)}),e.attachEvent("onmouseover",function(e){t.handleMouseOver.call(t,e)}),e.attachEvent("onmouseout",function(e){t.handleMouseOut.call(t,e)}))},dispDUpd:function(){var t;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,t="dataUpdated",this.fire(t,{type:t,chart:this})),this.chartCreated||(t="init",this.fire(t,{type:t,chart:this})),this.chartRendered||(t="rendered",this.fire(t,{type:t,chart:this}),this.chartRendered=!0),t="drawn",this.fire(t,{type:t,chart:this})},brrr:function(){},validateSize:function(){var t=this;t.measure();var e=t.legend;if((t.realWidth!=t.previousWidth||t.realHeight!=t.previousHeight)&&0<t.realWidth&&0<t.realHeight){if(t.sizeChanged=!0,e){clearTimeout(t.legendInitTO);var i=setTimeout(function(){e.invalidateSize()},100);t.timeOuts.push(i),t.legendInitTO=i}t.marginsUpdated="xy"!=t.chartType?!1:!0,clearTimeout(t.initTO),i=setTimeout(function(){t.initChart()},150),t.timeOuts.push(i),t.initTO=i}t.renderFix(),e&&e.renderFix()},invalidateSize:function(){this.previousHeight=this.previousWidth=0/0,this.invalidateSizeReal()},invalidateSizeReal:function(){var t=this;t.marginsUpdated=!1,clearTimeout(t.validateTO);var e=setTimeout(function(){t.validateSize()},5);t.timeOuts.push(e),t.validateTO=e},validateData:function(t){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated="xy"!=this.chartType?!1:!0,this.initChart(t))},validateNow:function(){this.listenersAdded=!1,this.write(this.div)},showItem:function(t){t.hidden=!1,this.initChart()},hideItem:function(t){t.hidden=!0,this.initChart()},hideBalloon:function(){var t=this;clearInterval(t.hoverInt),clearTimeout(t.balloonTO),t.hoverInt=setTimeout(function(){t.hideBalloonReal.call(t)},t.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var t=this.balloon;t&&t.hide()},showBalloon:function(t,e,i,n,s){var o=this;clearTimeout(o.balloonTO),clearInterval(o.hoverInt),o.balloonTO=setTimeout(function(){o.showBalloonReal.call(o,t,e,i,n,s)},1)},showBalloonReal:function(t,e,i,n,s){this.handleMouseMove();var o=this.balloon;o.enabled&&(o.followCursor(!1),o.changeColor(e),!i||o.fixedPosition?(o.setPosition(n,s),o.followCursor(!1)):o.followCursor(!0),t&&o.showBalloon(t))},handleTouchMove:function(t){this.hideBalloon();var e=this.chartDiv;t.touches&&(t=t.touches.item(0),this.mouseX=t.pageX-AmCharts.findPosX(e),this.mouseY=t.pageY-AmCharts.findPosY(e))},handleMouseOver:function(){AmCharts.resetMouseOver(),this.mouseIsOver=!0},handleMouseOut:function(){AmCharts.resetMouseOver(),this.mouseIsOver=!1},handleMouseMove:function(t){if(this.mouseIsOver){var e=this.chartDiv;t||(t=window.event);var i,n;if(t){switch(this.posX=AmCharts.findPosX(e),this.posY=AmCharts.findPosY(e),this.mouseMode){case 1:if(i=t.clientX-this.posX,n=t.clientY-this.posY,!this.divIsFixed){var s,o,e=document.body;e&&(s=e.scrollLeft,y1=e.scrollTop),(e=document.documentElement)&&(o=e.scrollLeft,y2=e.scrollTop),s=Math.max(s,o),o=Math.max(y1,y2),i+=s,n+=o}break;case 0:this.divIsFixed?(i=t.clientX-this.posX,n=t.clientY-this.posY):(i=t.pageX-this.posX,n=t.pageY-this.posY)}t.touches&&(t=t.touches.item(0),i=t.pageX-this.posX,n=t.pageY-this.posY),this.mouseX=i-this.dmouseX,this.mouseY=n-this.dmouseY}}},handleTouchStart:function(t){this.handleMouseDown(t)},handleTouchEnd:function(t){AmCharts.resetMouseOver(),this.handleReleaseOutside(t)},handleReleaseOutside:function(){},handleMouseDown:function(t){AmCharts.resetMouseOver(),this.mouseIsOver=!0,t&&t.preventDefault&&t.preventDefault()},addLegend:function(t,e){AmCharts.extend(t,new AmCharts.AmLegend);var i;i="object"!=typeof e?document.getElementById(e):e,this.legend=t,t.chart=this,i?(t.div=i,t.position="outside",t.autoMargins=!1):t.div=this.legendDiv,i=this.handleLegendEvent,this.listenTo(t,"showItem",i),this.listenTo(t,"hideItem",i),this.listenTo(t,"clickMarker",i),this.listenTo(t,"rollOverItem",i),this.listenTo(t,"rollOutItem",i),this.listenTo(t,"rollOverMarker",i),this.listenTo(t,"rollOutMarker",i),this.listenTo(t,"clickLabel",i)},removeLegend:function(){this.legend=void 0,this.legendDiv.innerHTML=""},handleResize:function(){(AmCharts.isPercents(this.width)||AmCharts.isPercents(this.height))&&this.invalidateSizeReal(),this.renderFix()},renderFix:function(){if(!AmCharts.VML){var t=this.container;t&&t.renderFix()}},getSVG:function(){return AmCharts.hasSVG?this.container:void 0},animate:function(t,e,i,n,s,o,r){return t["an_"+e]&&AmCharts.removeFromArray(this.animations,t["an_"+e]),i={obj:t,frame:0,attribute:e,from:i,to:n,time:s,effect:o,suffix:r},t["an_"+e]=i,this.animations.push(i),i},startInterval:function(){var t=this;clearInterval(t.interval),t.interval=setInterval(function(){t.updateAnimations.call(t)},AmCharts.updateRate)},stopAnim:function(t){AmCharts.removeFromArray(this.animations,t)},updateAnimations:function(){var t;for(this.container&&this.container.update(),t=this.animations.length-1;t>=0;t--){var e=this.animations[t],i=1e3*e.time/AmCharts.updateRate,n=e.frame+1,s=e.obj,o=e.attribute;if(i>=n){e.frame++;var r=Number(e.from),a=Number(e.to)-r,i=AmCharts[e.effect](0,n,r,a,i);0===a?this.animations.splice(t,1):s.node.style[o]=i+e.suffix}else s.node.style[o]=Number(e.to)+e.suffix,this.animations.splice(t,1)}}}),AmCharts.Slice=AmCharts.Class({construct:function(){}}),AmCharts.SerialDataItem=AmCharts.Class({construct:function(){}}),AmCharts.GraphDataItem=AmCharts.Class({construct:function(){}}),AmCharts.Guide=AmCharts.Class({construct:function(){}}),AmCharts.AmGraph=AmCharts.Class({construct:function(){this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph"),this.type="line",this.stackable=!0,this.columnCount=1,this.columnIndex=0,this.centerCustomBullets=this.showBalloon=!0,this.maxBulletSize=50,this.minBulletSize=0,this.balloonText="[[value]]",this.hidden=this.scrollbar=this.animationPlayed=!1,this.pointPosition="middle",this.depthCount=1,this.includeInMinMax=!0,this.negativeBase=0,this.visibleInLegend=!0,this.showAllValueLabels=!1,this.showBalloonAt="close",this.lineThickness=1,this.dashLength=0,this.connect=!0,this.lineAlpha=1,this.bullet="none",this.bulletBorderThickness=2,this.bulletBorderAlpha=0,this.bulletAlpha=1,this.bulletSize=8,this.hideBulletsCount=this.bulletOffset=0,this.labelPosition="top",this.cornerRadiusTop=0,this.cursorBulletAlpha=1,this.gradientOrientation="vertical",this.dy=this.dx=0,this.periodValue="",this.clustered=!0,this.y=this.x=0},draw:function(){var t=this.chart,e=t.container;this.container=e,this.destroy();var i=e.set(),n=e.set();if(this.behindColumns?(t.graphsBehindSet.push(i),t.bulletBehindSet.push(n)):(t.graphsSet.push(i),t.bulletSet.push(n)),this.bulletSet=n,!this.scrollbar){var s=t.marginLeftReal,t=t.marginTopReal;i.translate(s,t),n.translate(s,t)}e=e.set(),AmCharts.remove(this.columnsSet),i.push(e),this.set=i,this.columnsSet=e,this.columnsArray=[],this.ownColumns=[],this.allBullets=[],this.animationArray=[],AmCharts.ifArray(this.data)&&(i=!1,"xy"==this.chartType?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(i=!0):this.valueAxis.axisCreated&&(i=!0),!this.hidden&&i&&this.createGraph())},createGraph:function(){var t=this,e=t.chart;if("inside"==t.labelPosition&&(t.labelPosition="bottom"),t.startAlpha=e.startAlpha,t.seqAn=e.sequencedAnimation,t.baseCoord=t.valueAxis.baseCoord,t.fillColors||(t.fillColors=t.lineColor),void 0===t.fillAlphas&&(t.fillAlphas=0),void 0===t.bulletColor&&(t.bulletColor=t.lineColor,t.bulletColorNegative=t.negativeLineColor),void 0===t.bulletAlpha&&(t.bulletAlpha=t.lineAlpha),clearTimeout(t.playedTO),!isNaN(t.valueAxis.min)&&!isNaN(t.valueAxis.max)){switch(t.chartType){case"serial":t.createSerialGraph(),"candlestick"==t.type&&1>t.valueAxis.minMaxMultiplier&&t.positiveClip(t.set);break;case"radar":t.createRadarGraph();break;case"xy":t.createXYGraph(),t.positiveClip(t.set)}t.playedTO=setTimeout(function(){t.setAnimationPlayed.call(t)},500*t.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var t=[],e=[],i=this.xAxis,n=this.yAxis;this.pmh=n.viH+1,this.pmw=i.viW+1,this.pmy=this.pmx=0;var s;for(s=this.start;s<=this.end;s++){var o=this.data[s].axes[i.id].graphs[this.id],r=o.values,a=r.x,l=r.y,r=i.getCoordinate(a),h=n.getCoordinate(l);!isNaN(a)&&!isNaN(l)&&(t.push(r),e.push(h),(a=this.createBullet(o,r,h,s))||(a=0),l=this.labelText)&&(o=this.createLabel(o,r,h,l),this.allBullets.push(o),this.positionLabel(r,h,o,this.labelPosition,a))}this.drawLineGraph(t,e),this.launchAnimation()},createRadarGraph:function(){var t,e,i,n=this.valueAxis.stackType,s=[],o=[];for(i=this.start;i<=this.end;i++){var r,a=this.data[i].axes[this.valueAxis.id].graphs[this.id];if(r="none"==n||"3d"==n?a.values.value:a.values.close,isNaN(r))this.drawLineGraph(s,o),s=[],o=[];else{var l=this.y-(this.valueAxis.getCoordinate(r)-this.height),h=180-360/(this.end-this.start+1)*i;r=l*Math.sin(h/180*Math.PI),l*=Math.cos(h/180*Math.PI),s.push(r),o.push(l),(h=this.createBullet(a,r,l,i))||(h=0);var c=this.labelText;c&&(a=this.createLabel(a,r,l,c),this.allBullets.push(a),this.positionLabel(r,l,a,this.labelPosition,h)),isNaN(t)&&(t=r),isNaN(e)&&(e=l)}}s.push(t),o.push(e),this.drawLineGraph(s,o),this.launchAnimation()},positionLabel:function(t,e,i,n,s){var o=i.getBBox();switch(n){case"left":t-=(o.width+s)/2+2;break;case"top":e-=(s+o.height)/2+1;break;case"right":t+=(o.width+s)/2+2;break;case"bottom":e+=(s+o.height)/2+1}i.translate(t,e)},getGradRotation:function(){var t=270;return"horizontal"==this.gradientOrientation&&(t=0),this.gradientRotation=t},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var t=this.chart,e=this.id,i=this.index,n=this.data,s=this.chart.container,o=this.valueAxis,r=this.type,a=this.columnWidthReal;isNaN(this.columnWidth)||(a=this.columnWidth);var l,h,c,u,d,p=this.width,f=this.height,m=this.y,g=this.rotate,v=this.columnCount,_=AmCharts.toCoordinate(this.cornerRadiusTop,a/2),y=this.connect,b=[],w=[],C=this.chart.graphs.length,x=this.dx/this.depthCount,T=this.dy/this.depthCount,A=o.stackType,S=this.labelPosition,k=this.start,D=this.end,L=this.scrollbar,M=this.categoryAxis,E=this.baseCoord,N=this.negativeBase,P=this.columnIndex,O=this.lineThickness,R=this.lineAlpha,I=this.lineColor,B=this.dashLength,z=this.set;"above"==S&&(S="top"),"below"==S&&(S="bottom");var U=S,H=this.getGradRotation(),F=this.chart.columnSpacing,j=M.cellWidth,$=(j*a-v)/v;F>$&&(F=$);var W,V,G,q,Y,Z,X,J=f+1,K=p+1,Q=0,te=0,ee=this.fillColors,ie=this.negativeFillColors,ne=this.negativeLineColor,se=this.fillAlphas,oe=this.negativeFillAlphas;"object"==typeof se&&(se=se[0]),"object"==typeof oe&&(oe=oe[0]);var re=o.getCoordinate(o.min);if(o.logarithmic&&(re=o.getCoordinate(o.minReal)),this.minCoord=re,this.resetBullet&&(this.bullet="none"),!L&&("line"==r||"smoothedLine"==r||"step"==r)&&(1==n.length&&"step"!=r&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),ie||void 0!=ne)){var ae=N;
ae>o.max&&(ae=o.max),ae<o.min&&(ae=o.min),o.logarithmic&&(ae=o.minReal);var le=o.getCoordinate(ae),he=o.getCoordinate(o.max);g?(J=f,K=Math.abs(he-le),q=f,Y=Math.abs(re-le),X=te=0,o.reversed?(Q=0,Z=le):(Q=le,Z=0)):(K=p,J=Math.abs(he-le),Y=p,q=Math.abs(re-le),Z=Q=0,o.reversed?(X=m,te=le):X=le+1)}var ce=Math.round;this.pmx=ce(Q),this.pmy=ce(te),this.pmh=ce(J),this.pmw=ce(K),this.nmx=ce(Z),this.nmy=ce(X),this.nmh=ce(q),this.nmw=ce(Y),AmCharts.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),a="column"==r?(j*a-F*(v-1))/v:j*a,1>a&&(a=1);var ue;if("line"==r||"step"==r||"smoothedLine"==r){if(k>0)for(ue=k-1;ue>-1;ue--)if(W=n[ue],V=W.axes[o.id].graphs[e],G=V.values.value,!isNaN(G)){k=ue;break}if(D<n.length-1)for(ue=D+1;ue<n.length;ue++)if(W=n[ue],V=W.axes[o.id].graphs[e],G=V.values.value,!isNaN(G)){D=ue;break}}D<n.length-1&&D++;var de=[],pe=[],fe=!1;("line"==r||"step"==r||"smoothedLine"==r)&&(this.stackable&&"regular"==A||"100%"==A||this.fillToGraph)&&(fe=!0);var me=this.noStepRisers;for(ue=k;D>=ue;ue++){W=n[ue],V=W.axes[o.id].graphs[e],V.index=ue;var ge,ve,_e,ye,be,we,Ce=0/0,xe=0/0,Te=0/0,Ae=0/0,Se=0/0,ke=0/0,De=0/0,Le=0/0,Me=0/0,Ee=0/0,Ne=0/0,Pe=0/0,Oe=0/0,Re=0/0,Ie=0/0,Be=0/0,ze=0/0,Ue=void 0,He=ee,Fe=se,je=I,$e=this.pattern;void 0!=V.pattern&&($e=V.pattern),void 0!=V.color&&(He=V.color),V.fillColors&&(He=V.fillColors),isNaN(V.alpha)||(Fe=V.alpha),isNaN(V.dashLength)||(B=V.dashLength);var We=V.values;if(o.recalculateToPercents&&(We=V.percents),We){if(Re=this.stackable&&"none"!=A&&"3d"!=A?We.close:We.value,("candlestick"==r||"ohlc"==r)&&(Re=We.close,Be=We.low,De=o.getCoordinate(Be),Ie=We.high,Me=o.getCoordinate(Ie)),ze=We.open,Te=o.getCoordinate(Re),isNaN(ze)||(Se=o.getCoordinate(ze)),!L)switch(this.showBalloonAt){case"close":V.y=Te;break;case"open":V.y=Se;break;case"high":V.y=Me;break;case"low":V.y=De}var Ce=W.x[M.id],Ve=Math.floor(j/2),Ge=Ve;if("start"==this.pointPosition&&(Ce-=j/2,Ve=0,Ge=j),me){var qe=this.columnWidth;isNaN(qe)||(Ve*=qe,Ge*=qe)}switch(L||(V.x=Ce),-1e5>Ce&&(Ce=-1e5),Ce>p+1e5&&(Ce=p+1e5),g?(xe=Te,Ae=Se,Se=Te=Ce,isNaN(ze)&&!this.fillToGraph&&(Ae=E),ke=De,Le=Me):(Ae=xe=Ce,isNaN(ze)&&!this.fillToGraph&&(Se=E)),ze>Re&&(V.isNegative=!0,ie&&(He=ie),oe&&(Fe=oe),void 0!=ne&&(je=ne)),r){case"line":isNaN(Re)?y||(this.drawLineGraph(b,w,de,pe),b=[],w=[],de=[],pe=[]):(V.isNegative=N>Re?!0:!1,b.push(xe),w.push(Te),Ee=xe,Ne=Te,Pe=xe,Oe=Te,!fe||isNaN(Se)||isNaN(Ae)||(de.push(Ae),pe.push(Se)),void 0==V.lineColor&&void 0==V.fillColors&&isNaN(V.dashLength)||(this.drawLineGraph(b,w,de,pe),b=[xe],w=[Te],de=[],pe=[],this.lineColorSwitched=V.lineColor,this.fillColorsSwitched=V.fillColors,this.dashLengthSwitched=V.dashLength));break;case"smoothedLine":isNaN(Re)?y||(this.drawSmoothedGraph(b,w,de,pe),b=[],w=[],de=[],pe=[]):(V.isNegative=N>Re?!0:!1,b.push(xe),w.push(Te),Ee=xe,Ne=Te,Pe=xe,Oe=Te,!fe||isNaN(Se)||isNaN(Ae)||(de.push(Ae),pe.push(Se)),void 0==V.lineColor&&void 0==V.fillColors&&isNaN(V.dashLength)||(this.drawSmoothedGraph(b,w,de,pe),b=[xe],w=[Te],de=[],pe=[],this.lineColorSwitched=V.lineColor,this.fillColorsSwitched=V.fillColors,this.dashLengthSwitched=V.dashLength));break;case"step":isNaN(Re)?y||(l=h=0/0,this.drawLineGraph(b,w,de,pe),b=[],w=[],de=[],pe=[]):(V.isNegative=N>Re?!0:!1,void 0==V.lineColor&&void 0==V.fillColors&&isNaN(V.dashLength)||(this.drawLineGraph(b,w,de,pe),b=[],w=[],de=[],pe=[],this.lineColorSwitched=V.lineColor,this.fillColorsSwitched=V.fillColors,this.dashLengthSwitched=V.dashLength),g?(isNaN(l)||(b.push(l),w.push(Te-Ve)),w.push(Te-Ve),b.push(xe),w.push(Te+Ge),b.push(xe),!fe||isNaN(Se)||isNaN(Ae)||(de.push(c),pe.push(Se-Ve),de.push(Ae),pe.push(Se-Ve),de.push(Ae),pe.push(Se+Ge))):(isNaN(h)||(w.push(h),b.push(xe-Ve)),b.push(xe-Ve),w.push(Te),b.push(xe+Ge),w.push(Te),!fe||isNaN(Se)||isNaN(Ae)||(de.push(Ae-Ve),pe.push(u),de.push(Ae-Ve),pe.push(Se),de.push(Ae+Ge),pe.push(Se))),l=xe,h=Te,c=Ae,u=Se,Ee=xe,Ne=Te,Pe=xe,Oe=Te,me&&(l=h=0/0,this.drawLineGraph(b,w,de,pe),b=[],w=[],de=[],pe=[]));break;case"column":if(be=je,void 0!=V.lineColor&&(be=V.lineColor),!isNaN(Re)){N>Re?(V.isNegative=!0,ie&&(He=ie),void 0!=ne&&(be=ne)):V.isNegative=!1;var Ye=o.min,Ze=o.max;if(!(Ye>Re&&Ye>ze||Re>Ze&&ze>Ze))if(g){"3d"==A?(ve=Te-.5*(a+F)+F/2+T*P,ge=Ae+x*P):(ve=Te-(v/2-P)*(a+F)+F/2,ge=Ae),_e=a,Ee=xe,Ne=ve+a/2,Pe=xe,Oe=ve+a/2,ve+_e>f&&(_e=f-ve),0>ve&&(_e+=ve,ve=0),ye=xe-Ae;var Xe=ge;ge=AmCharts.fitToBounds(ge,0,p),ye+=Xe-ge,ye=AmCharts.fitToBounds(ye,-ge,p-ge+x*P),f>ve&&_e>0&&(Ue=new AmCharts.Cuboid(s,ye,_e,x-t.d3x,T-t.d3y,He,Fe,O,be,R,H,_,g,B,$e),"bottom"!=S)&&(S=o.reversed?"left":"right",0>Re?S=o.reversed?"right":"left":("regular"==A||"100%"==A)&&(Ee+=this.dx))}else{"3d"==A?(ge=xe-.5*(a+F)+F/2+x*P,ve=Se+T*P):(ge=xe-(v/2-P)*(a+F)+F/2,ve=Se),_e=a,Ee=ge+a/2,Ne=Te,Pe=ge+a/2,Oe=Te,ge+_e>p+P*x&&(_e=p-ge+P*x),0>ge&&(_e+=ge,ge=0),ye=Te-Se;var Je=ve;ve=AmCharts.fitToBounds(ve,this.dy,f),ye+=Je-ve,ye=AmCharts.fitToBounds(ye,-ve+T*P,f-ve),p+P*x>ge&&_e>0&&(Ue=new AmCharts.Cuboid(s,_e,ye,x-t.d3x,T-t.d3y,He,Fe,O,be,this.lineAlpha,H,_,g,B,$e),0>Re&&"middle"!=S?S="bottom":(S=U,("regular"==A||"100%"==A)&&(Ne+=this.dy)))}Ue&&(we=Ue.set,we.translate(ge,ve),this.columnsSet.push(we),(V.url||this.showHandOnHover)&&we.setAttr("cursor","pointer"),!L)&&("none"==A&&(d=g?(this.end+1-ue)*C-i:C*ue+i),"3d"==A&&(g?(d=(C-i)*(this.end+1-ue),Ee+=x*this.columnIndex,Pe+=x*this.columnIndex,V.y+=x*this.columnIndex):(d=(C-i)*(ue+1),Ee+=3,Ne+=T*this.columnIndex+7,Oe+=T*this.columnIndex,V.y+=T*this.columnIndex)),("regular"==A||"100%"==A)&&(S="middle",d=g?0<We.value?(this.end+1-ue)*C+i:(this.end+1-ue)*C-i:0<We.value?C*ue+i:C*ue-i),this.columnsArray.push({column:Ue,depth:d}),V.x=g?ve+_e/2:ge+_e/2,this.ownColumns.push(Ue),this.animateColumns(Ue,ue,xe,Ae,Te,Se),this.addListeners(we,V))}break;case"candlestick":if(!isNaN(ze)&&!isNaN(Re)){var Ke,Qe;if(be=je,void 0!=V.lineColor&&(be=V.lineColor),g){if(ve=Te-a/2,ge=Ae,_e=a,ve+_e>f&&(_e=f-ve),0>ve&&(_e+=ve,ve=0),f>ve&&_e>0){var ti,ei;Re>ze?(ti=[xe,Le],ei=[Ae,ke]):(ti=[Ae,Le],ei=[xe,ke]),!isNaN(Le)&&!isNaN(ke)&&f>Te&&Te>0&&(Ke=AmCharts.line(s,ti,[Te,Te],be,R,O),Qe=AmCharts.line(s,ei,[Te,Te],be,R,O)),ye=xe-Ae,Ue=new AmCharts.Cuboid(s,ye,_e,x,T,He,se,O,be,R,H,_,g,B)}}else if(ge=xe-a/2,ve=Se+O/2,_e=a,ge+_e>p&&(_e=p-ge),0>ge&&(_e+=ge,ge=0),ye=Te-Se,p>ge&&_e>0){var ii,ni,Ue=new AmCharts.Cuboid(s,_e,ye,x,T,He,Fe,O,be,R,H,_,g,B);Re>ze?(ii=[Te,Me],ni=[Se,De]):(ii=[Se,Me],ni=[Te,De]),!isNaN(Me)&&!isNaN(De)&&p>xe&&xe>0&&(Ke=AmCharts.line(s,[xe,xe],ii,be,R,O),Qe=AmCharts.line(s,[xe,xe],ni,be,R,O))}Ue&&(we=Ue.set,z.push(we),we.translate(ge,ve-O/2),(V.url||this.showHandOnHover)&&we.setAttr("cursor","pointer"),Ke&&(z.push(Ke),z.push(Qe)),Ee=xe,Ne=Te,Pe=xe,Oe=Te,L||(V.x=g?ve+_e/2:ge+_e/2,this.animateColumns(Ue,ue,xe,Ae,Te,Se),this.addListeners(we,V)))}break;case"ohlc":if(!(isNaN(ze)||isNaN(Ie)||isNaN(Be)||isNaN(Re))){ze>Re&&(V.isNegative=!0,void 0!=ne&&(je=ne));var si,oi,ri;if(g){var ai=Te-a/2,ai=AmCharts.fitToBounds(ai,0,f),li=AmCharts.fitToBounds(Te,0,f),hi=Te+a/2,hi=AmCharts.fitToBounds(hi,0,f);oi=AmCharts.line(s,[Ae,Ae],[ai,li],je,R,O,B),Te>0&&f>Te&&(si=AmCharts.line(s,[ke,Le],[Te,Te],je,R,O,B)),ri=AmCharts.line(s,[xe,xe],[li,hi],je,R,O,B)}else{var ci=xe-a/2,ci=AmCharts.fitToBounds(ci,0,p),ui=AmCharts.fitToBounds(xe,0,p),di=xe+a/2,di=AmCharts.fitToBounds(di,0,p);oi=AmCharts.line(s,[ci,ui],[Se,Se],je,R,O,B),xe>0&&p>xe&&(si=AmCharts.line(s,[xe,xe],[De,Me],je,R,O,B)),ri=AmCharts.line(s,[ui,di],[Te,Te],je,R,O,B)}z.push(oi),z.push(si),z.push(ri),Ee=xe,Ne=Te,Pe=xe,Oe=Te}}if(!L&&!isNaN(Re)){var pi=this.hideBulletsCount;if(this.end-this.start<=pi||0===pi){var fi=this.createBullet(V,Pe,Oe,ue);fi||(fi=0);var mi=this.labelText;if(mi){var gi=this.createLabel(V,0,0,mi),vi=0,_i=0,yi=gi.getBBox(),bi=yi.width,wi=yi.height;switch(S){case"left":vi=-(bi/2+fi/2+3);break;case"top":_i=-(wi/2+fi/2+3);break;case"right":vi=fi/2+2+bi/2;break;case"bottom":g&&"column"==r?(Ee=E,0>Re?(vi=-6,gi.attr({"text-anchor":"end"})):(vi=6,gi.attr({"text-anchor":"start"}))):(_i=fi/2+wi/2,gi.x=-(bi/2+2));break;case"middle":"column"==r&&(g?(_i=-(wi/2)+this.fontSize/2,vi=-(xe-Ae)/2-x,0>ye&&(vi+=x),Math.abs(xe-Ae)<bi&&!this.showAllValueLabels&&(gi.remove(),gi=null)):(_i=-(Te-Se)/2,0>ye&&(_i-=T),Math.abs(Te-Se)<wi&&!this.showAllValueLabels&&(gi.remove(),gi=null)))}if(gi){if(isNaN(Ne)||isNaN(Ee))gi.remove(),gi=null;else if(Ee+=vi,Ne+=_i,gi.translate(Ee,Ne),g)(0>Ne||Ne>f)&&(gi.remove(),gi=null);else{var Ci=0;"3d"==A&&(Ci=x*P),(0>Ee||Ee>p+Ci)&&(gi.remove(),gi=null)}gi&&this.allBullets.push(gi)}}if("column"==r&&"regular"==A||"100%"==A){var xi=o.totalText;if(xi){var Ti=this.createLabel(V,0,0,xi,o.totalTextColor);this.allBullets.push(Ti);var Ai,Si,ki=Ti.getBBox(),Di=ki.width,Li=ki.height,Mi=o.totals[ue];Mi&&Mi.remove(),g?(Si=Te,Ai=0>Re?xe-Di/2-2:xe+Di/2+3):(Ai=xe,Si=0>Re?Te+Li/2:Te-Li/2-3),Ti.translate(Ai,Si),o.totals[ue]=Ti,g?(0>Si||Si>f)&&Ti.remove():(0>Ai||Ai>p)&&Ti.remove()}}}}}}("line"==r||"step"==r||"smoothedLine"==r)&&("smoothedLine"==r?this.drawSmoothedGraph(b,w,de,pe):this.drawLineGraph(b,w,de,pe),L||this.launchAnimation()),this.bulletsHidden&&this.hideBullets()},animateColumns:function(t,e,i){var n=this;i=n.chart.startDuration,i>0&&!n.animationPlayed&&(n.seqAn?(t.set.hide(),n.animationArray.push(t),t=setTimeout(function(){n.animate.call(n)},1e3*(i/(n.end-n.start+1))*(e-n.start)),n.timeOuts.push(t)):n.animate(t))},createLabel:function(t,e,i,n,s){var o=this.chart,r=t.labelColor;return r||(r=this.color),r||(r=o.color),s&&(r=s),s=this.fontSize,void 0===s&&(this.fontSize=s=o.fontSize),t=o.formatString(n,t,this),t=AmCharts.cleanFromEmpty(t),o=AmCharts.text(this.container,t,r,o.fontFamily,s),o.translate(e,i),this.bulletSet.push(o),o},positiveClip:function(t){t.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(t){t.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(t,e,i,n){var s=this;if(1<t.length){var o=s.set,r=s.container,a=r.set(),l=r.set();o.push(l),o.push(a);var h=s.lineAlpha,c=s.lineThickness,o=s.fillAlphas,u=s.lineColor,d=s.negativeLineAlpha;isNaN(d)&&(d=h);var p=s.lineColorSwitched;p&&(u=p);var p=s.fillColors,f=s.fillColorsSwitched;f&&(p=f);var m=s.dashLength;(f=s.dashLengthSwitched)&&(m=f);var f=s.negativeLineColor,g=s.negativeFillColors,v=s.negativeFillAlphas,_=s.baseCoord;0!==s.negativeBase&&(_=s.valueAxis.getCoordinate(s.negativeBase)),h=AmCharts.line(r,t,e,u,h,c,m,!1,!0),a.push(h),a.click(function(){s.handleGraphClick()}),void 0!==f&&(c=AmCharts.line(r,t,e,f,d,c,m,!1,!0),l.push(c)),(o>0||v>0)&&(c=t.join(";").split(";"),d=e.join(";").split(";"),"serial"==s.chartType&&(0<i.length?(i.reverse(),n.reverse(),c=t.concat(i),d=e.concat(n)):s.rotate?(d.push(d[d.length-1]),c.push(_),d.push(d[0]),c.push(_),d.push(d[0]),c.push(c[0])):(c.push(c[c.length-1]),d.push(_),c.push(c[0]),d.push(_),c.push(t[0]),d.push(d[0]))),t=s.gradientRotation,o>0&&(e=AmCharts.polygon(r,c,d,p,o,1,"#000",0,t),e.pattern(s.pattern),a.push(e)),(g||void 0!==f)&&(isNaN(v)&&(v=o),g||(g=f),r=AmCharts.polygon(r,c,d,g,v,1,"#000",0,t),r.pattern(s.pattern),l.push(r),l.click(function(){s.handleGraphClick()}))),s.applyMask(l,a)}},applyMask:function(t,e){var i=t.length();"serial"!=this.chartType||this.scrollbar||(this.positiveClip(e),i>0&&this.negativeClip(t))},drawSmoothedGraph:function(t,e,i,n){if(1<t.length){var s=this.set,o=this.container,r=o.set(),a=o.set();s.push(a),s.push(r);var l=this.lineAlpha,h=this.lineThickness,s=this.dashLength,c=this.fillAlphas,u=this.lineColor,d=this.fillColors,p=this.negativeLineColor,f=this.negativeFillColors,m=this.negativeFillAlphas,g=this.baseCoord,v=this.lineColorSwitched;v&&(u=v),(v=this.fillColorsSwitched)&&(d=v),v=this.negativeLineAlpha,isNaN(v)&&(v=l),l=new AmCharts.Bezier(o,t,e,u,l,h,d,0,s),r.push(l.path),void 0!==p&&(h=new AmCharts.Bezier(o,t,e,p,v,h,d,0,s),a.push(h.path)),c>0&&(l=t.join(";").split(";"),u=e.join(";").split(";"),h="",0<i.length?(i.reverse(),n.reverse(),l=t.concat(i),u=e.concat(n)):(this.rotate?(h+=" L"+g+","+e[e.length-1],h+=" L"+g+","+e[0]):(h+=" L"+t[t.length-1]+","+g,h+=" L"+t[0]+","+g),h+=" L"+t[0]+","+e[0]),i=new AmCharts.Bezier(o,l,u,0/0,0,0,d,c,s,h),i.path.pattern(this.pattern),r.push(i.path),f||void 0!==p)&&(m||(m=c),f||(f=p),t=new AmCharts.Bezier(o,t,e,0/0,0,0,f,m,s,h),t.path.pattern(this.pattern),a.push(t.path)),this.applyMask(a,r)}},launchAnimation:function(){var t=this,e=t.chart.startDuration;if(e>0&&!t.animationPlayed){var i=t.set,n=t.bulletSet;AmCharts.VML||(i.attr({opacity:t.startAlpha}),n.attr({opacity:t.startAlpha})),i.hide(),n.hide(),t.seqAn?(e=setTimeout(function(){t.animateGraphs.call(t)},1e3*t.index*e),t.timeOuts.push(e)):t.animateGraphs()}},animateGraphs:function(){var t=this.chart,e=this.set,i=this.bulletSet,n=this.x,s=this.y;e.show(),i.show();var o=t.startDuration,t=t.startEffect;e&&(this.rotate?(e.translate(-1e3,s),i.translate(-1e3,s)):(e.translate(n,-1e3),i.translate(n,-1e3)),e.animate({opacity:1,translate:n+","+s},o,t),i.animate({opacity:1,translate:n+","+s},o,t))},animate:function(t){var e=this.chart,i=this.animationArray;!t&&0<i.length&&(t=i[0],i.shift()),i=AmCharts[AmCharts.getEffect(e.startEffect)],e=e.startDuration,t&&(this.rotate?t.animateWidth(e,i):t.animateHeight(e,i),t.set.show())},legendKeyColor:function(){var t=this.legendColor,e=this.lineAlpha;return void 0===t&&(t=this.lineColor,0===e&&(e=this.fillColors)&&(t="object"==typeof e?e[0]:e)),t},legendKeyAlpha:function(){var t=this.legendAlpha;return void 0===t&&(t=this.lineAlpha,0===t&&this.fillAlphas&&(t=this.fillAlphas),0===t&&(t=this.bulletAlpha),0===t&&(t=1)),t},createBullet:function(t,e,i,n){n=this.container;var s=this.bulletOffset,o=this.bulletSize;isNaN(t.bulletSize)||(o=t.bulletSize);var r=t.values.value;isNaN(this.maxValue)||isNaN(r)||(o=r/this.maxValue*this.maxBulletSize);var a=o;this.bulletAxis&&(o=t.values.error,isNaN(o)||(r=o),o=this.bulletAxis.stepWidth*r),o<this.minBulletSize&&(o=this.minBulletSize),this.rotate?e+=s:i-=s;var l,h=this.bulletColor;t.lineColor&&(this.bulletColorSwitched=t.lineColor),this.bulletColorSwitched&&(h=this.bulletColorSwitched),t.isNegative&&void 0!==this.bulletColorNegative&&(h=this.bulletColorNegative),void 0!==t.color&&(h=t.color),s=this.bullet,t.bullet&&(s=t.bullet);var r=this.bulletBorderThickness,c=this.bulletBorderColor,u=this.bulletBorderAlpha,d=this.bulletAlpha;c||(c=h);var p=t.alpha;return isNaN(p)||(d=p),("none"!=this.bullet||t.bullet)&&(l=AmCharts.bullet(n,s,o,h,d,r,c,u,a)),(this.customBullet||t.customBullet)&&(a=this.customBullet,t.customBullet&&(a=t.customBullet),a&&(l&&l.remove(),"function"==typeof a?(l=new a,l.chart=this.chart,t.bulletConfig&&(l.availableSpace=i,l.graph=this,t.bulletConfig.minCoord=this.minCoord-i,l.bulletConfig=t.bulletConfig),l.write(n),l=l.set):(this.chart.path&&(a=this.chart.path+a),l=n.set(),n=n.image(a,0,0,o,o),l.push(n),this.centerCustomBullets&&n.translate(-o/2,-o/2)))),l&&((t.url||this.showHandOnHover)&&l.setAttr("cursor","pointer"),"serial"==this.chartType&&(0>e-0||e-0>this.width||-o/2>i||i-0>this.height)&&(l.remove(),l=null),l&&(this.bulletSet.push(l),l.translate(e,i),this.addListeners(l,t),this.allBullets.push(l)),t.bx=e,t.by=i),t.bulletGraphics=l,o},showBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!1,t=0;t<e.length;t++)e[t].show()},hideBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!0,t=0;t<e.length;t++)e[t].hide()},addListeners:function(t,e){var i=this;t.mouseover(function(t){i.handleRollOver(e,t)}).mouseout(function(t){i.handleRollOut(e,t)}).touchend(function(t){i.handleRollOver(e,t)}).touchstart(function(t){i.handleRollOver(e,t)}).click(function(t){i.handleClick(e,t)}).dblclick(function(t){i.handleDoubleClick(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},handleRollOver:function(t,e){if(t){var i=this.chart,n={type:"rollOverGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};if(this.fire("rollOverGraphItem",n),i.fire("rollOverGraphItem",n),clearTimeout(i.hoverInt),n=this.showBalloon,i.chartCursor&&"serial"==this.chartType&&(n=!1,!i.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(n=!0)),n){var n=i.formatString(this.balloonText,t,t.graph),s=this.balloonFunction;s&&(n=s(t,t.graph)),n=AmCharts.cleanFromEmpty(n),s=i.getBalloonColor(this,t),i.balloon.showBullet=!1,i.balloon.pointerOrientation="V";var o=t.x,r=t.y;i.rotate&&(o=t.y,r=t.x),i.showBalloon(n,s,!0,o+i.marginLeftReal,r+i.marginTopReal)}}},handleRollOut:function(t,e){if(this.chart.hideBalloon(),t){var i={type:"rollOutGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rollOutGraphItem",i),this.chart.fire("rollOutGraphItem",i)}},handleClick:function(t,e){if(t){var i={type:"clickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("clickGraphItem",i),this.chart.fire("clickGraphItem",i),AmCharts.getURL(t.url,this.urlTarget)}this.handleGraphClick()},handleGraphClick:function(){var t={type:"clickGraph",graph:this,target:this,chart:this.chart};this.fire("clickGraph",t),this.chart.fire("clickGraph",t)},handleRightClick:function(t,e){if(t){var i={type:"rightClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rightClickGraphItem",i),this.chart.fire("rightClickGraphItem",i)}},handleDoubleClick:function(t,e){if(t){var i={type:"doubleClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("doubleClickGraphItem",i),this.chart.fire("doubleClickGraphItem",i)}},zoom:function(t,e){this.start=t,this.end=e,this.draw()},changeOpacity:function(t){var e=this.set;if(e&&e.setAttr("opacity",t),e=this.ownColumns){var i;for(i=0;i<e.length;i++){var n=e[i].set;n&&n.setAttr("opacity",t)}}(e=this.bulletSet)&&e.setAttr("opacity",t)},destroy:function(){AmCharts.remove(this.set),AmCharts.remove(this.bulletSet);var t=this.timeOuts;if(t){var e;for(e=0;e<t.length;e++)clearTimeout(t[e])}this.timeOuts=[]}}),AmCharts.ChartCursor=AmCharts.Class({construct:function(){this.createEvents("changed","zoomed","onHideCursor","draw","selected"),this.enabled=!0,this.cursorAlpha=1,this.selectionAlpha=.2,this.cursorColor="#CC0000",this.categoryBalloonAlpha=1,this.color="#FFFFFF",this.type="cursor",this.zoomed=!1,this.zoomable=!0,this.pan=!1,this.categoryBalloonDateFormat="MMM DD, YYYY",this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0,this.rolledOver=!1,this.cursorPosition="middle",this.bulletsEnabled=this.skipZoomDispatch=!1,this.bulletSize=8,this.selectWithoutZooming=this.oneBalloonOnly=!1,this.graphBulletSize=1.7,this.animationDuration=.3},draw:function(){var t=this;t.destroy();var e=t.chart,i=e.container;t.rotate=e.rotate,t.container=i,i=i.set(),i.translate(t.x,t.y),t.set=i,e.cursorSet.push(i),i=new AmCharts.AmBalloon,i.chart=e,t.categoryBalloon=i,AmCharts.copyProperties(e.balloon,i),i.cornerRadius=0,i.shadowAlpha=0,i.borderThickness=1,i.borderAlpha=1,i.showBullet=!1;var n=t.categoryBalloonColor;if(void 0===n&&(n=t.cursorColor),i.fillColor=n,i.fillAlpha=t.categoryBalloonAlpha,i.borderColor=n,i.color=t.color,t.rotate&&(i.pointerOrientation="H"),t.prevX=[],t.prevY=[],t.prevTX=[],t.prevTY=[],t.valueBalloonsEnabled)for(i=0;i<e.graphs.length;i++)n=new AmCharts.AmBalloon,n.chart=e,AmCharts.copyProperties(e.balloon,n),e.graphs[i].valueBalloon=n;"cursor"==t.type?t.createCursor():t.createCrosshair(),t.interval=setInterval(function(){t.detectMovement.call(t)},40)},updateData:function(){var t=this.chart;this.data=t.chartData,this.firstTime=t.firstTime,this.lastTime=t.lastTime},createCursor:function(){var t,e,i=this.chart,n=this.cursorAlpha,s=i.categoryAxis,o=s.position,r=s.inside,a=s.axisThickness,l=this.categoryBalloon,h=i.dx,c=i.dy,u=this.x,d=this.y,p=this.width,f=this.height,i=i.rotate,m=s.tickLength;l.pointerWidth=m,i?(t=[0,p,p+h],e=[0,0,c]):(t=[h,0,0],e=[c,0,f]),this.line=n=AmCharts.line(this.container,t,e,this.cursorColor,n,1),this.set.push(n),i?(r&&(l.pointerWidth=0),"right"==o?r?l.setBounds(u,d+c,u+p+h,d+f+c):l.setBounds(u+p+h+a,d+c,u+p+1e3,d+f+c):r?l.setBounds(u,d,p+u,f+d):l.setBounds(-1e3,-1e3,u-m-a,d+f+15)):(l.maxWidth=p,s.parseDates&&(m=0,l.pointerWidth=0),"top"==o?r?l.setBounds(u+h,d+c,p+h+u,f+d):l.setBounds(u+h,-1e3,p+h+u,d+c-m-a):r?l.setBounds(u,d,p+u,f+d-m):l.setBounds(u,d+f+m+a-1,u+p,d+f+m+a)),this.hideCursor()},createCrosshair:function(){var t=this.cursorAlpha,e=this.container,i=AmCharts.line(e,[0,0],[0,this.height],this.cursorColor,t,1),t=AmCharts.line(e,[0,this.width],[0,0],this.cursorColor,t,1);this.set.push(i),this.set.push(t),this.vLine=i,this.hLine=t,this.hideCursor()},detectMovement:function(){var t=this.chart;if(t.mouseIsOver){var e=t.mouseX-this.x,i=t.mouseY-this.y;e>0&&e<this.width&&i>0&&i<this.height?(this.drawing?this.rolledOver||t.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||t.setMouseCursor("move")),this.rolledOver=!0,this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},getMousePosition:function(){var t,e=this.width,i=this.height;return t=this.chart,this.rotate?(t=t.mouseY-this.y,0>t&&(t=0),t>i&&(t=i)):(t=t.mouseX-this.x,0>t&&(t=0),t>e&&(t=e)),t},updateCrosshair:function(){var t=this.chart,e=t.mouseX-this.x,i=t.mouseY-this.y,n=this.vLine,s=this.hLine,e=AmCharts.fitToBounds(e,0,this.width),i=AmCharts.fitToBounds(i,0,this.height);0<this.cursorAlpha&&(n.show(),s.show(),n.translate(e,0),s.translate(0,i)),this.zooming&&(t.hideXScrollbar&&(e=0/0),t.hideYScrollbar&&(i=0/0),this.updateSelectionSize(e,i)),t.mouseIsOver||this.zooming||this.hideCursor()},updateSelectionSize:function(t,e){AmCharts.remove(this.selection);var i=this.selectionPosX,n=this.selectionPosY,s=0,o=0,r=this.width,a=this.height;isNaN(t)||(i>t&&(s=t,r=i-t),t>i&&(s=i,r=t-i),i==t&&(s=t,r=0)),isNaN(e)||(n>e&&(o=e,a=n-e),e>n&&(o=n,a=e-n),n==e&&(o=e,a=0)),r>0&&a>0&&(i=AmCharts.rect(this.container,r,a,this.cursorColor,this.selectionAlpha),i.translate(s+this.x,o+this.y),this.selection=i)},arrangeBalloons:function(){var t=this.valueBalloons,e=this.x,i=this.y,n=this.height+i;t.sort(this.compareY);var s;for(s=0;s<t.length;s++){var o=t[s].balloon;o.setBounds(e,i,e+this.width,n),o.prevX=this.prevX[s],o.prevY=this.prevY[s],o.prevTX=this.prevTX[s],o.prevTY=this.prevTY[s],o.draw(),n=o.yPos-3}this.arrangeBalloons2()},compareY:function(t,e){return t.yy<e.yy?1:-1},arrangeBalloons2:function(){var t=this.valueBalloons;t.reverse();var e,i,n,s=this.x,o=t.length;for(n=0;o>n;n++){var r=t[n].balloon;e=r.bottom;var a=r.bottom-r.yPos,l=o-n-1;n>0&&i+3>e-a&&(r.setBounds(s,i+3,s+this.width,i+a+3),r.prevX=this.prevX[l],r.prevY=this.prevY[l],r.prevTX=this.prevTX[l],r.prevTY=this.prevTY[l],r.draw()),r.set&&r.set.show(),this.prevX[l]=r.prevX,this.prevY[l]=r.prevY,this.prevTX[l]=r.prevTX,this.prevTY[l]=r.prevTY,i=r.bottom}},showBullets:function(){AmCharts.remove(this.allBullets);var t=this.container,e=t.set();this.set.push(e),this.set.show(),this.allBullets=e;var i,e=this.chart.graphs;for(i=0;i<e.length;i++){var n=e[i];if(!n.hidden&&n.balloonText){var s=this.data[this.index].axes[n.valueAxis.id].graphs[n.id],o=s.y;if(!isNaN(o)){var r,a;r=s.x,this.rotate?(a=o,o=r):a=r,n=AmCharts.circle(t,this.bulletSize/2,this.chart.getBalloonColor(n,s),n.cursorBulletAlpha),n.translate(a,o),this.allBullets.push(n)}}}},destroy:function(){this.clear(),AmCharts.remove(this.selection),this.selection=null;var t=this.categoryBalloon;t&&t.destroy(),this.destroyValueBalloons(),AmCharts.remove(this.set)},clear:function(){clearInterval(this.interval)},destroyValueBalloons:function(){var t=this.valueBalloons;if(t){var e;for(e=0;e<t.length;e++)t[e].balloon.hide()}},zoom:function(t,e,i,n){var s=this.chart;this.destroyValueBalloons(),this.zooming=!1;var o;this.rotate?this.selectionPosY=o=s.mouseY:this.selectionPosX=o=s.mouseX,this.start=t,this.end=e,this.startTime=i,this.endTime=n,this.zoomed=!0;var r=s.categoryAxis,s=this.rotate;o=this.width;var a=this.height;r.parseDates&&!r.equalSpacing?(t=n-i+r.minDuration(),t=s?a/t:o/t):t=s?a/(e-t):o/(e-t),this.stepWidth=t,this.tempVal=this.valueBalloonsEnabled,this.valueBalloonsEnabled=!1,this.setPosition(),this.valueBalloonsEnabled=this.tempVal,this.hideCursor()},hideObj:function(t){t&&t.hide()},hideCursor:function(t){void 0===t&&(t=!0),this.hideObj(this.set),this.hideObj(this.categoryBalloon),this.hideObj(this.line),this.hideObj(this.vLine),this.hideObj(this.hLine),this.hideObj(this.allBullets),this.destroyValueBalloons(),this.selectWithoutZooming||AmCharts.remove(this.selection),this.previousIndex=0/0,t&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this}),this.drawing||this.chart.setMouseCursor("auto"),this.normalizeBulletSize()},setPosition:function(t,e){if(void 0===e&&(e=!0),"cursor"==this.type){if(AmCharts.ifArray(this.data)){if(isNaN(t)&&(t=this.getMousePosition()),(t!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(t)){var i=this.chart.categoryAxis.xToIndex(t);(i!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(i,e),this.zoomed=!1)}this.previousMousePosition=t}}else this.updateCrosshair()},normalizeBulletSize:function(){var t=this.resizedBullets;if(t)for(var e=0;e<t.length;e++){var i=t[e],n=i.bulletGraphics;n&&n.translate(i.bx,i.by,1)}},updateCursor:function(t,e){var i=this.chart,n=i.mouseX-this.x,s=i.mouseY-this.y;if(this.drawingNow&&(AmCharts.remove(this.drawingLine),this.drawingLine=AmCharts.line(this.container,[this.x+this.drawStartX,this.x+n],[this.y+this.drawStartY,this.y+s],this.cursorColor,1,1)),this.enabled){void 0===e&&(e=!0),this.index=t;var o=i.categoryAxis,r=i.dx,a=i.dy,l=this.x,h=this.y,c=this.width,u=this.height,d=this.data[t];if(d){var p=d.x[o.id],f=i.rotate,m=o.inside,g=this.stepWidth,v=this.categoryBalloon,_=this.firstTime,y=this.lastTime,b=this.cursorPosition,w=o.position,C=this.zooming,x=this.panning,T=i.graphs,A=o.axisThickness;if(i.mouseIsOver||C||x||this.forceShow)if(this.forceShow=!1,x){var r=this.panClickPos,i=this.panClickEndTime,C=this.panClickStartTime,S=this.panClickEnd,l=this.panClickStart,n=(f?r-s:r-n)/g;(!o.parseDates||o.equalSpacing)&&(n=Math.round(n)),0!==n&&(r={type:"zoomed",target:this},r.chart=this.chart,o.parseDates&&!o.equalSpacing?(i+n>y&&(n=y-i),_>C+n&&(n=_-C),r.start=C+n,r.end=i+n,this.fire(r.type,r)):S+n>=this.data.length||0>l+n||(r.start=l+n,r.end=S+n,this.fire(r.type,r)))}else{if("start"==b&&(p-=o.cellWidth/2),"mouse"==b&&i.mouseIsOver&&(p=f?s-2:n-2),f){if(0>p){if(!C)return this.hideCursor(),void 0;p=0}if(p>u+1){if(!C)return this.hideCursor(),void 0;p=u+1}}else{if(0>p){if(!C)return this.hideCursor(),void 0;p=0}if(p>c){if(!C)return this.hideCursor(),void 0;p=c}}if(0<this.cursorAlpha&&(_=this.line,f?(y=0,g=p+a):(y=p,g=0),b=this.animationDuration,b>0&&!this.zooming?isNaN(this.previousX)?_.translate(y,g):(_.translate(this.previousX,this.previousY),_.animate({translate:y+","+g},b,"easeOutSine")):_.translate(y,g),this.previousX=y,this.previousY=g,_.show()),this.linePos=f?p+a:p,C&&(f?this.updateSelectionSize(0/0,p):this.updateSelectionSize(p,0/0)),g=!0,C&&(g=!1),this.categoryBalloonEnabled&&g?(f?(m&&("right"==w?v.setBounds(l,h+a,l+c+r,h+p+a):v.setBounds(l,h+a,l+c+r,h+p)),"right"==w?m?v.setPosition(l+c+r,h+p+a):v.setPosition(l+c+r+A,h+p+a):m?v.setPosition(l,h+p):v.setPosition(l-A,h+p)):"top"==w?m?v.setPosition(l+p+r,h+a):v.setPosition(l+p+r,h+a-A+1):m?v.setPosition(l+p,h+u):v.setPosition(l+p,h+u+A-1),(_=this.categoryBalloonFunction)?v.showBalloon(_(d.category)):o.parseDates?(o=AmCharts.formatDate(d.category,this.categoryBalloonDateFormat),-1!=o.indexOf("fff")&&(o=AmCharts.formatMilliseconds(o,d.category)),v.showBalloon(o)):v.showBalloon(d.category)):v.hide(),T&&this.bulletsEnabled&&this.showBullets(),this.oneBalloonOnly){for(a=1/0,y=0;y<T.length;y++)o=T[y],o.showBalloon&&!o.hidden&&o.balloonText&&(v=d.axes[o.valueAxis.id].graphs[o.id],_=v.y,isNaN(_)||(f?Math.abs(n-_)<a&&(a=Math.abs(n-_),S=o):Math.abs(s-_)<a&&(a=Math.abs(s-_),S=o)));this.mostCloseGraph&&(S=this.mostCloseGraph)}if((t!=this.previousIndex||S!=this.previousMostCloseGraph)&&(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],T&&this.valueBalloonsEnabled&&g&&i.balloon.enabled)){for(this.valueBalloons=a=[],y=0;y<T.length;y++)o=T[y],this.oneBalloonOnly&&o!=S||!o.showBalloon||o.hidden||!o.balloonText||(v=d.axes[o.valueAxis.id].graphs[o.id],_=v.y,isNaN(_))||(m=v.x,g=!0,f?(p=_,(0>m||m>u)&&(g=!1)):(p=m,m=_,(0>p||p>c+r)&&(g=!1)),g&&(1!=this.graphBulletSize&&AmCharts.isModern&&(g=v.bulletGraphics)&&(g.getBBox(),g.translate(v.bx,v.by,this.graphBulletSize),this.resizedBullets.push(v)),g=o.valueBalloon,w=i.getBalloonColor(o,v),g.setBounds(l,h,l+c,h+u),g.pointerOrientation="H",g.changeColor(w),void 0!==o.balloonAlpha&&(g.fillAlpha=o.balloonAlpha),void 0!==o.balloonTextColor&&(g.color=o.balloonTextColor),g.setPosition(p+l,m+h),p=i.formatString(o.balloonText,v,o),(m=o.balloonFunction)&&(p=m(v,o)),""!==p&&(f?g.showBalloon(p):(g.text=p,g.show=!0)),!f&&g.set&&g.set.hide(),a.push({yy:_,balloon:g})));f||this.arrangeBalloons()}e?(r={type:"changed"},r.index=t,r.target=this,r.chart=this.chart,r.zooming=C,r.mostCloseGraph=S,r.position=f?s:n,r.target=this,i.fire("changed",r),this.fire("changed",r),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,i.updateLegendValues(t)),this.previousIndex=t,this.previousMostCloseGraph=S}}}else this.hideCursor()},enableDrawing:function(t){this.enabled=!t,this.hideCursor(),this.rolledOver=!1,this.drawing=t},isZooming:function(t){t&&t!=this.zooming&&this.handleMouseDown("fake"),t||t==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var t={type:"changed",index:void 0,target:this};t.chart=this.chart,this.fire("changed",t),this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var t,e=this.chart,i=this.data;if(e){var n=e.mouseX-this.x,s=e.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1,AmCharts.remove(this.drawingLine),t=this.drawStartX;var o=this.drawStartY;(2<Math.abs(t-n)||2<Math.abs(o-s))&&(t={type:"draw",target:this,chart:e,initialX:t,initialY:o,finalX:n,finalY:s},this.fire(t.type,t))}if(this.enabled&&0<i.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){if(t=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"},t.target=this,t.chart=e,"cursor"==this.type)this.rotate?this.selectionPosY=s:this.selectionPosX=s=n,2>Math.abs(s-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(t.end=this.fromIndex,t.start=this.index):(t.end=this.index,t.start=this.fromIndex),s=e.categoryAxis,s.parseDates&&!s.equalSpacing&&(t.start=i[t.start].time,t.end=e.getEndTime(i[t.end].time)),this.skipZoomDispatch||this.fire(t.type,t));else{var r=this.initialMouseX,a=this.initialMouseY;3>Math.abs(n-r)&&3>Math.abs(s-a)||(i=Math.min(r,n),o=Math.min(a,s),n=Math.abs(r-n),s=Math.abs(a-s),e.hideXScrollbar&&(i=0,n=this.width),e.hideYScrollbar&&(o=0,s=this.height),t.selectionHeight=s,t.selectionWidth=n,t.selectionY=o,t.selectionX=i,this.skipZoomDispatch||this.fire(t.type,t))}this.selectWithoutZooming||AmCharts.remove(this.selection)}this.panning=this.zooming=this.skipZoomDispatch=!1}}},showCursorAt:function(t){var e=this.chart.categoryAxis;t=e.parseDates?e.dateToCoordinate(t):e.categoryToCoordinate(t),this.previousMousePosition=0/0,this.forceShow=!0,this.setPosition(t,!1)},handleMouseDown:function(t){if(this.zoomable||this.pan||this.drawing){var e=this.rotate,i=this.chart,n=i.mouseX-this.x,s=i.mouseY-this.y;(n>0&&n<this.width&&s>0&&s<this.height||"fake"==t)&&(this.setPosition(),this.selectWithoutZooming&&AmCharts.remove(this.selection),this.drawing?(this.drawStartY=s,this.drawStartX=n,this.drawingNow=!0):this.pan?(this.zoomable=!1,i.setMouseCursor("move"),this.panning=!0,this.panClickPos=e?s:n,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,e?(this.initialMouse=s,this.selectionPosY=this.linePos):(this.initialMouse=n,this.selectionPosX=this.linePos)):(this.initialMouseX=n,this.initialMouseY=s,this.selectionPosX=n,this.selectionPosY=s),this.zooming=!0))}}}),AmCharts.SimpleChartScrollbar=AmCharts.Class({construct:function(){this.createEvents("zoomed"),this.backgroundColor="#D4D4D4",this.backgroundAlpha=1,this.selectedBackgroundColor="#EFEFEF",this.scrollDuration=this.selectedBackgroundAlpha=1,this.resizeEnabled=!0,this.hideResizeGrips=!1,this.scrollbarHeight=20,this.updateOnReleaseOnly=!1,9>document.documentMode&&(this.updateOnReleaseOnly=!0),this.dragIconWidth=18,this.dragIconHeight=25},draw:function(){var t=this;t.destroy(),t.interval=setInterval(function(){t.updateScrollbar.call(t)},40);var e=t.chart.container,i=t.rotate,n=t.chart,s=e.set();
t.set=s,n.scrollbarsSet.push(s);var o,r;if(i?(o=t.scrollbarHeight,r=n.plotAreaHeight):(r=t.scrollbarHeight,o=n.plotAreaWidth),t.width=o,(t.height=r)&&o){var a=AmCharts.rect(e,o,r,t.backgroundColor,t.backgroundAlpha,1,t.backgroundColor,t.backgroundAlpha);t.bg=a,s.push(a),a=AmCharts.rect(e,o,r,"#000",.005),s.push(a),t.invisibleBg=a,a.click(function(){t.handleBgClick()}).mouseover(function(){t.handleMouseOver()}).mouseout(function(){t.handleMouseOut()}).touchend(function(){t.handleBgClick()}),a=AmCharts.rect(e,o,r,t.selectedBackgroundColor,t.selectedBackgroundAlpha),t.selectedBG=a,s.push(a),o=AmCharts.rect(e,o,r,"#000",.005),t.dragger=o,s.push(o),o.mousedown(function(e){t.handleDragStart(e)}).mouseup(function(){t.handleDragStop()}).mouseover(function(){t.handleDraggerOver()}).mouseout(function(){t.handleMouseOut()}).touchstart(function(e){t.handleDragStart(e)}).touchend(function(){t.handleDragStop()}),o=n.pathToImages,i?(a=o+"dragIconH.gif",o=t.dragIconWidth,i=t.dragIconHeight):(a=o+"dragIcon.gif",i=t.dragIconWidth,o=t.dragIconHeight),r=e.image(a,0,0,i,o);var a=e.image(a,0,0,i,o),l=10,h=20;n.panEventsEnabled&&(l=25,h=t.scrollbarHeight);var c=AmCharts.rect(e,l,h,"#000",.005),u=AmCharts.rect(e,l,h,"#000",.005);u.translate(-(l-i)/2,-(h-o)/2),c.translate(-(l-i)/2,-(h-o)/2),i=e.set([r,u]),e=e.set([a,c]),t.iconLeft=i,s.push(t.iconLeft),t.iconRight=e,s.push(e),i.mousedown(function(){t.leftDragStart()}).mouseup(function(){t.leftDragStop()}).mouseover(function(){t.iconRollOver()}).mouseout(function(){t.iconRollOut()}).touchstart(function(){t.leftDragStart()}).touchend(function(){t.leftDragStop()}),e.mousedown(function(){t.rightDragStart()}).mouseup(function(){t.rightDragStop()}).mouseover(function(){t.iconRollOver()}).mouseout(function(){t.iconRollOut()}).touchstart(function(){t.rightDragStart()}).touchend(function(){t.rightDragStop()}),AmCharts.ifArray(n.chartData)?s.show():s.hide(),t.hideDragIcons()}s.translate(t.x,t.y),t.clipDragger(!1)},updateScrollbarSize:function(t,e){var i,n,s,o,r=this.dragger;this.rotate?(i=0,n=t,s=this.width+1,o=e-t,r.setAttr("height",e-t),r.setAttr("y",n)):(i=t,n=0,s=e-t,o=this.height+1,r.setAttr("width",e-t),r.setAttr("x",i)),this.clipAndUpdate(i,n,s,o)},updateScrollbar:function(){var t,e,i,n=!1,s=this.x,o=this.y,r=this.dragger,a=this.getDBox();e=a.x+s,i=a.y+o;var l=a.width,a=a.height,h=this.rotate,c=this.chart,u=this.width,d=this.height,p=c.mouseX,f=c.mouseY;t=this.initialMouse,c.mouseIsOver&&(this.dragging&&(c=this.initialCoord,h?(t=c+(f-t),0>t&&(t=0),c=d-a,t>c&&(t=c),r.setAttr("y",t)):(t=c+(p-t),0>t&&(t=0),c=u-l,t>c&&(t=c),r.setAttr("x",t))),this.resizingRight&&(h?(t=f-i,t+i>d+o&&(t=d-i+o),0>t?(this.resizingRight=!1,n=this.resizingLeft=!0):(0===t&&(t=.1),r.setAttr("height",t))):(t=p-e,t+e>u+s&&(t=u-e+s),0>t?(this.resizingRight=!1,n=this.resizingLeft=!0):(0===t&&(t=.1),r.setAttr("width",t)))),this.resizingLeft&&(h?(e=i,i=f,o>i&&(i=o),i>d+o&&(i=d+o),t=!0===n?e-i:a+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,r.setAttr("y",e+a-o)):(0===t&&(t=.1),r.setAttr("y",i-o),r.setAttr("height",t))):(i=p,s>i&&(i=s),i>u+s&&(i=u+s),t=!0===n?e-i:l+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,r.setAttr("x",e+l-s)):(0===t&&(t=.1),r.setAttr("x",i-s),r.setAttr("width",t)))),this.clipDragger(!0))},clipDragger:function(t){var e=this.getDBox(),i=e.x,n=e.y,s=e.width,e=e.height,o=!1;this.rotate?(i=0,s=this.width+1,(this.clipY!=n||this.clipH!=e)&&(o=!0)):(n=0,e=this.height+1,(this.clipX!=i||this.clipW!=s)&&(o=!0)),o&&(this.clipAndUpdate(i,n,s,e),t&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))},maskGraphs:function(){},clipAndUpdate:function(t,e,i,n){this.clipX=t,this.clipY=e,this.clipW=i,this.clipH=n,this.selectedBG.clipRect(t,e,i,n),this.updateDragIconPositions(),this.maskGraphs(t,e,i,n)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t=this.chart;t.hideBalloon();var e=this.getDBox(),i=e.x,n=e.y,s=e.width,e=e.height;this.rotate?(i=n,s=this.height/e):s=this.width/s,t={type:"zoomed",position:i,chart:t,target:this,multiplier:s},this.fire(t.type,t)}},updateDragIconPositions:function(){var t,e,i=this.getDBox(),n=i.x,s=i.y,o=this.iconLeft,r=this.iconRight,a=this.scrollbarHeight;this.rotate?(t=this.dragIconWidth,e=this.dragIconHeight,o.translate((a-e)/2,s-t/2),r.translate((a-e)/2,s+i.height-t/2)):(t=this.dragIconHeight,e=this.dragIconWidth,o.translate(n-e/2,(a-t)/2),r.translate(n+-e/2+i.width,(a-t)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||(this.hideResizeGrips&&(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(t,e){this.dragger.stop(),this.multiplier=t,this.position=e,this.updateScrollbarSize(e,this.rotate?e+this.height/t:e+this.width/t)},destroy:function(){this.clear(),AmCharts.remove(this.set)},clear:function(){clearInterval(this.interval)},handleDragStart:function(){var t=this.chart;this.dragger.stop(),this.removeCursors(),this.dragging=!0;var e=this.getDBox();this.rotate?(this.initialCoord=e.y,this.initialMouse=t.mouseY):(this.initialCoord=e.x,this.initialMouse=t.mouseX)},handleDragStop:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent()),this.dragging=!1,this.mouseIsOver&&this.removeCursors(),this.updateScrollbar()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop(),this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},rightDragStart:function(){this.dragger.stop(),this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize"),this.handleMouseOver()},getDBox:function(){return this.dragger.getBBox()},handleBgClick:function(){if(!this.resizingRight&&!this.resizingLeft){this.zooming=!0;var t,e,i=this.scrollDuration,n=this.dragger;t=this.getDBox();var s=t.height,o=t.width;e=this.chart;var r=this.y,a=this.x,l=this.rotate;l?(t="y",e=e.mouseY-s/2-r,e=AmCharts.fitToBounds(e,0,this.height-s)):(t="x",e=e.mouseX-o/2-a,e=AmCharts.fitToBounds(e,0,this.width-o)),this.updateOnReleaseOnly?(this.skipEvent=!1,n.setAttr(t,e),this.dispatchScrollbarEvent(),this.clipDragger()):(e=Math.round(e),l?n.animate({y:e},i,">"):n.animate({x:e},i,">"))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.updateScrollbar())},handleMouseOver:function(){this.mouseIsOver=!0,this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1,this.hideDragIcons()}}),AmCharts.ChartScrollbar=AmCharts.Class({inherits:AmCharts.SimpleChartScrollbar,construct:function(){AmCharts.ChartScrollbar.base.construct.call(this),this.graphLineColor="#BBBBBB",this.graphLineAlpha=0,this.graphFillColor="#BBBBBB",this.graphFillAlpha=1,this.selectedGraphLineColor="#888888",this.selectedGraphLineAlpha=0,this.selectedGraphFillColor="#888888",this.selectedGraphFillAlpha=1,this.gridCount=0,this.gridColor="#FFFFFF",this.gridAlpha=.7,this.skipEvent=this.autoGridCount=!1,this.color="#FFFFFF",this.scrollbarCreated=!1},init:function(){var t=this.categoryAxis,e=this.chart;if(t||(this.categoryAxis=t=new AmCharts.CategoryAxis),t.chart=e,t.id="scrollbar",t.dateFormats=e.categoryAxis.dateFormats,t.boldPeriodBeginning=e.categoryAxis.boldPeriodBeginning,t.axisItemRenderer=AmCharts.RecItem,t.axisRenderer=AmCharts.RecAxis,t.guideFillRenderer=AmCharts.RecFill,t.inside=!0,t.fontSize=this.fontSize,t.tickLength=0,t.axisAlpha=0,t=this.graph){var i=this.valueAxis;i||(this.valueAxis=i=new AmCharts.ValueAxis,i.visible=!1,i.scrollbar=!0,i.axisItemRenderer=AmCharts.RecItem,i.axisRenderer=AmCharts.RecAxis,i.guideFillRenderer=AmCharts.RecFill,i.labelsEnabled=!1,i.chart=e),e=this.unselectedGraph,e||(e=new AmCharts.AmGraph,e.scrollbar=!0,this.unselectedGraph=e,e.negativeBase=t.negativeBase,e.noStepRisers=t.noStepRisers),e=this.selectedGraph,e||(e=new AmCharts.AmGraph,e.scrollbar=!0,this.selectedGraph=e,e.negativeBase=t.negativeBase,e.noStepRisers=t.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var t=this;AmCharts.ChartScrollbar.base.draw.call(t),t.scrollbarCreated||t.init();var e=t.chart,i=e.chartData,n=t.categoryAxis,s=t.rotate,o=t.x,r=t.y,a=t.width,l=t.height,h=e.categoryAxis,c=t.set;if(n.setOrientation(!s),n.parseDates=h.parseDates,n.rotate=s,n.equalSpacing=h.equalSpacing,n.minPeriod=h.minPeriod,n.startOnAxis=h.startOnAxis,n.viW=a,n.viH=l,n.width=a,n.height=l,n.gridCount=t.gridCount,n.gridColor=t.gridColor,n.gridAlpha=t.gridAlpha,n.color=t.color,n.autoGridCount=t.autoGridCount,n.parseDates&&!n.equalSpacing&&n.timeZoom(e.firstTime,e.lastTime),n.zoom(0,i.length-1),h=t.graph){var u=t.valueAxis,d=h.valueAxis;u.id=d.id,u.rotate=s,u.setOrientation(s),u.width=a,u.height=l,u.viW=a,u.viH=l,u.dataProvider=i,u.reversed=d.reversed,u.logarithmic=d.logarithmic,u.gridAlpha=0,u.axisAlpha=0,c.push(u.set),s?u.y=r:u.x=o;var p,o=1/0,r=-1/0;for(p=0;p<i.length;p++){var f,m=i[p].axes[d.id].graphs[h.id].values;for(f in m)if(m.hasOwnProperty(f)&&"percents"!=f&&"total"!=f){var g=m[f];o>g&&(o=g),g>r&&(r=g)}}1/0!=o&&(u.minimum=o),-1/0!=r&&(u.maximum=r+.1*(r-o)),o==r&&(u.minimum-=1,u.maximum+=1),void 0!==t.minimum&&(u.minimum=t.minimum),void 0!==t.maximum&&(u.maximum=t.maximum),u.zoom(0,i.length-1),f=t.unselectedGraph,f.id=h.id,f.rotate=s,f.chart=e,f.chartType=e.chartType,f.data=i,f.valueAxis=u,f.chart=h.chart,f.categoryAxis=t.categoryAxis,f.valueField=h.valueField,f.openField=h.openField,f.closeField=h.closeField,f.highField=h.highField,f.lowField=h.lowField,f.lineAlpha=t.graphLineAlpha,f.lineColor=t.graphLineColor,f.fillAlphas=t.graphFillAlpha,f.fillColors=t.graphFillColor,f.connect=h.connect,f.hidden=h.hidden,f.width=a,f.height=l,d=t.selectedGraph,d.id=h.id,d.rotate=s,d.chart=e,d.chartType=e.chartType,d.data=i,d.valueAxis=u,d.chart=h.chart,d.categoryAxis=n,d.valueField=h.valueField,d.openField=h.openField,d.closeField=h.closeField,d.highField=h.highField,d.lowField=h.lowField,d.lineAlpha=t.selectedGraphLineAlpha,d.lineColor=t.selectedGraphLineColor,d.fillAlphas=t.selectedGraphFillAlpha,d.fillColors=t.selectedGraphFillColor,d.connect=h.connect,d.hidden=h.hidden,d.width=a,d.height=l,e=t.graphType,e||(e=h.type),f.type=e,d.type=e,i=i.length-1,f.zoom(0,i),d.zoom(0,i),d.set.click(function(){t.handleBackgroundClick()}).mouseover(function(){t.handleMouseOver()}).mouseout(function(){t.handleMouseOut()}),f.set.click(function(){t.handleBackgroundClick()}).mouseover(function(){t.handleMouseOver()}).mouseout(function(){t.handleMouseOut()}),c.push(f.set),c.push(d.set)}c.push(n.set),c.push(n.labelsSet),t.bg.toBack(),t.invisibleBg.toFront(),t.dragger.toFront(),t.iconLeft.toFront(),t.iconRight.toFront()},timeZoom:function(t,e){this.startTime=t,this.endTime=e,this.timeDifference=e-t,this.skipEvent=!0,this.zoomScrollbar()},zoom:function(t,e){this.start=t,this.end=e,this.skipEvent=!0,this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t,e,i=this.chart.chartData,n=this.dragger.getBBox();t=n.x,e=n.y;var s=n.width,o=n.height,n=this.chart;this.rotate?(t=e,e=o):e=s,s={type:"zoomed",target:this},s.chart=n;var o=this.categoryAxis,r=this.stepWidth;o.parseDates&&!o.equalSpacing?(i=n.firstTime,o.minDuration(),n=Math.round(t/r)+i,i=this.dragging?n+this.timeDifference:Math.round((t+e)/r)+i,n>i&&(n=i),(n!=this.startTime||i!=this.endTime)&&(this.startTime=n,this.endTime=i,s.start=n,s.end=i,s.startDate=new Date(n),s.endDate=new Date(i),this.fire(s.type,s))):(o.startOnAxis||(t+=r/2),e-=this.stepWidth/2,n=o.xToIndex(t),t=o.xToIndex(t+e),(n!=this.start||this.end!=t)&&(o.startOnAxis&&(this.resizingRight&&n==t&&t++,this.resizingLeft&&n==t&&(n>0?n--:t=1)),this.start=n,this.end=this.dragging?this.start+this.difference:t,s.start=this.start,s.end=this.end,o.parseDates&&(i[this.start]&&(s.startDate=new Date(i[this.start].time)),i[this.end]&&(s.endDate=new Date(i[this.end].time))),this.fire(s.type,s)))}},zoomScrollbar:function(){var t,e;t=this.chart;var i=t.chartData,n=this.categoryAxis;n.parseDates&&!n.equalSpacing?(i=n.stepWidth,n=t.firstTime,t=i*(this.startTime-n),e=i*(this.endTime-n)):(t=i[this.start].x[n.id],e=i[this.end].x[n.id],i=n.stepWidth,n.startOnAxis||(n=i/2,t-=n,e+=n)),this.stepWidth=i,this.updateScrollbarSize(t,e)},maskGraphs:function(t,e,i,n){var s=this.selectedGraph;s&&s.set.clipRect(t,e,i,n)},handleDragStart:function(){AmCharts.ChartScrollbar.base.handleDragStart.call(this),this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){AmCharts.ChartScrollbar.base.handleBackgroundClick.call(this),this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}}),AmCharts.AmBalloon=AmCharts.Class({construct:function(){this.enabled=!0,this.fillColor="#FFFFFF",this.fillAlpha=.8,this.borderThickness=2,this.borderColor="#FFFFFF",this.borderAlpha=1,this.cornerRadius=0,this.maximumWidth=220,this.horizontalPadding=8,this.verticalPadding=4,this.pointerWidth=6,this.pointerOrientation="V",this.color="#000000",this.adjustBorderColor=!0,this.show=this.follow=this.showBullet=!1,this.bulletSize=3,this.shadowAlpha=.4,this.shadowColor="#000000",this.fadeOutDuration=this.animationDuration=.3,this.fixedPosition=!1,this.offsetY=6,this.offsetX=1,AmCharts.isModern||(this.offsetY*=1.5)},draw:function(){var t=this.pointToX,e=this.pointToY;this.deltaSignX=this.deltaSignY=1;var i=this.chart;if(AmCharts.VML&&(this.fadeOutDuration=0),this.xAnim&&i.stopAnim(this.xAnim),this.yAnim&&i.stopAnim(this.yAnim),!isNaN(t)){var n=this.follow,s=i.container,o=this.set;if(AmCharts.remove(o),this.removeDiv(),this.set=o=s.set(),i.balloonsSet.push(o),this.show){var r=this.l,a=this.t,l=this.r,h=this.b,c=this.balloonColor,u=this.fillColor,d=this.borderColor,p=u;void 0!=c&&(this.adjustBorderColor?p=d=c:u=c);var f=this.horizontalPadding,m=this.verticalPadding,g=this.pointerWidth,v=this.pointerOrientation,_=this.cornerRadius,y=i.fontFamily,b=this.fontSize;void 0==b&&(b=i.fontSize);var c=document.createElement("div"),w=c.style;w.position="absolute",c.innerHTML='<div style="max-width:'+this.maxWidth+"px; font-size:"+b+"px; color:"+this.color+"; font-family:"+y+'">'+this.text+"</div>",i.chartDiv.appendChild(c),this.textDiv=c,b=c.offsetWidth,y=c.offsetHeight,c.clientHeight&&(b=c.clientWidth,y=c.clientHeight);var y=y+2*m,C=b+2*f;window.opera&&(y+=2);var x,T=!1;x=this.offsetY,i.handDrawn&&(x+=i.handDrawScatter+2),"H"!=v?(b=t-C/2,a+y+10>e&&"down"!=v?(T=!0,n&&(e+=x),x=e+g,this.deltaSignY=-1):(n&&(e-=x),x=e-y-g,this.deltaSignY=1)):(2*g>y&&(g=y/2),x=e-y/2,r+(l-r)/2>t?(b=t+g,this.deltaSignX=-1):(b=t-C-g,this.deltaSignX=1)),x+y>=h&&(x=h-y),a>x&&(x=a),r>b&&(b=r),b+C>l&&(b=l-C);var A,a=x+m,h=b+f,m=this.shadowAlpha,S=this.shadowColor,f=this.borderThickness,k=this.bulletSize;_>0||0===g?(m>0&&(t=AmCharts.rect(s,C,y,u,0,f+1,S,m,this.cornerRadius),AmCharts.isModern?t.translate(1,1):t.translate(4,4),o.push(t)),u=AmCharts.rect(s,C,y,u,this.fillAlpha,f,d,this.borderAlpha,this.cornerRadius),this.showBullet&&(A=AmCharts.circle(s,k,p,this.fillAlpha),o.push(A))):(p=[],_=[],"H"!=v?(r=t-b,r>C-g&&(r=C-g),g>r&&(r=g),p=[0,r-g,t-b,r+g,C,C,0,0],_=T?[0,0,e-x,0,0,y,y,0]:[y,y,e-x,y,y,0,0,y]):(p=e-x,p>y-g&&(p=y-g),g>p&&(p=g),_=[0,p-g,e-x,p+g,y,y,0,0],p=r+(l-r)/2>t?[0,0,t>b?0:t-b,0,0,C,C,0]:[C,C,b+C>t?C:t-b,C,C,0,0,C]),m>0&&(t=AmCharts.polygon(s,p,_,u,0,f,S,m),t.translate(1,1),o.push(t)),u=AmCharts.polygon(s,p,_,u,this.fillAlpha,f,d,this.borderAlpha)),this.bg=u,o.push(u),u.toFront(),s=1*this.deltaSignX,w.left=h+"px",w.top=a+"px",o.translate(b-s,x),u=u.getBBox(),this.bottom=x+y+1,this.yPos=u.y+x,A&&A.translate(this.pointToX-b+s,e-x),e=this.animationDuration,0<this.animationDuration&&!n&&!isNaN(this.prevX)&&(o.translate(this.prevX,this.prevY),o.animate({translate:b-s+","+x},e,"easeOutSine"),c&&(w.left=this.prevTX+"px",w.top=this.prevTY+"px",this.xAnim=i.animate({node:c},"left",this.prevTX,h,e,"easeOutSine","px"),this.yAnim=i.animate({node:c},"top",this.prevTY,a,e,"easeOutSine","px"))),this.prevX=b-s,this.prevY=x,this.prevTX=h,this.prevTY=a}}},followMouse:function(){if(this.follow&&this.show){var t=this.chart.mouseX-this.offsetX*this.deltaSignX,e=this.chart.mouseY;if(this.pointToX=t,this.pointToY=e,t!=this.previousX||e!=this.previousY)if(this.previousX=t,this.previousY=e,0===this.cornerRadius)this.draw();else{var i=this.set;if(i){var n=i.getBBox(),t=t-n.width/2,s=e-n.height-10;t<this.l&&(t=this.l),t>this.r-n.width&&(t=this.r-n.width),s<this.t&&(s=e+10),i.translate(t,s),e=this.textDiv.style,e.left=t+this.horizontalPadding+"px",e.top=s+this.verticalPadding+"px"}}}},changeColor:function(t){this.balloonColor=t},setBounds:function(t,e,i,n){this.l=t,this.t=e,this.r=i,this.b=n,this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(t){this.text=t,this.show=!0,this.destroyTO&&clearTimeout(this.destroyTO),t=this.chart,this.fadeAnim1&&t.stopAnim(this.fadeAnim1),this.fadeAnim2&&t.stopAnim(this.fadeAnim2),this.draw()},hide:function(){var t=this,e=t.fadeOutDuration,i=t.chart;if(e>0){t.destroyTO=setTimeout(function(){t.destroy.call(t)},1e3*e),t.follow=!1,t.show=!1;var n=t.set;n&&(n.setAttr("opacity",t.fillAlpha),t.fadeAnim1=n.animate({opacity:0},e,"easeInSine")),t.textDiv&&(t.fadeAnim2=i.animate({node:t.textDiv},"opacity",1,0,e,"easeInSine",""))}else t.show=!1,t.follow=!1,t.destroy()},setPosition:function(t,e,i){this.pointToX=t,this.pointToY=e,i&&(t==this.previousX&&e==this.previousY||this.draw()),this.previousX=t,this.previousY=e},followCursor:function(t){var e=this;(e.follow=t)?(e.pShowBullet=e.showBullet,e.showBullet=!1):void 0!==e.pShowBullet&&(e.showBullet=e.pShowBullet),clearInterval(e.interval);var i=e.chart.mouseX,n=e.chart.mouseY;!isNaN(i)&&t&&(e.pointToX=i-e.offsetX*e.deltaSignX,e.pointToY=n,e.followMouse(),e.interval=setInterval(function(){e.followMouse.call(e)},40))},removeDiv:function(){if(this.textDiv){var t=this.textDiv.parentNode;t&&t.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval),AmCharts.remove(this.set),this.removeDiv(),this.set=null}}),AmCharts.AmCoordinateChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(){AmCharts.AmCoordinateChart.base.construct.call(this),this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph"),this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.startAlpha=1,this.startDuration=0,this.startEffect="elastic",this.sequencedAnimation=!0,this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.balloonDateFormat="MMM DD, YYYY",this.valueAxes=[],this.graphs=[]},initChart:function(){AmCharts.AmCoordinateChart.base.initChart.call(this),this.createValueAxes(),AmCharts.VML&&(this.startAlpha=1);var t=this.legend;t&&t.setData(this.graphs)},createValueAxes:function(){if(0===this.valueAxes.length){var t=new AmCharts.ValueAxis;this.addValueAxis(t)}},parseData:function(){this.processValueAxes(),this.processGraphs()},parseSerialData:function(){var t,e=this.graphs,i={},n=this.seriesIdField;n||(n=this.categoryField),this.chartData=[];var s=this.dataProvider;if(s){var o,r,a=!1,l=this.categoryAxis;l&&(a=l.parseDates,r=l.forceShowField,o=l.categoryFunction);var h,c;a&&(t=AmCharts.extractPeriod(l.minPeriod),h=t.period,c=t.count);var u={};this.lookupTable=u;var d,p=this.dataDateFormat;for(d=0;d<s.length;d++){var f={},m=s[d];t=m[this.categoryField],f.category=o?o(t,m,l):String(t),r&&(f.forceShow=m[r]),u[m[n]]=f,a&&(t=l.categoryFunction?l.categoryFunction(t,m,l):t instanceof Date?"fff"==l.minPeriod?AmCharts.useUTC?new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()):new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()):new Date(t):p?AmCharts.stringToDate(t,p):new Date(t),t=AmCharts.resetDateToMin(t,h,c,l.firstDayOfWeek),f.category=t,f.time=t.getTime());var g=this.valueAxes;f.axes={},f.x={};var v;for(v=0;v<g.length;v++){var _=g[v].id;f.axes[_]={},f.axes[_].graphs={};var y;for(y=0;y<e.length;y++){t=e[y];var b=t.id,w=t.periodValue;if(t.valueAxis.id==_){f.axes[_].graphs[b]={};var C={};C.index=d;var x=m;t.dataProvider&&(x=i),C.values=this.processValues(x,t,w),this.processFields(t,C,x),C.category=f.category,C.serialDataItem=f,C.graph=t,f.axes[_].graphs[b]=C}}}this.chartData[d]=f}}for(i=0;i<e.length;i++)t=e[i],t.dataProvider&&this.parseGraphData(t)},processValues:function(t,e,i){var n,s={},o=!1;return"candlestick"!=e.type&&"ohlc"!=e.type||""===i||(o=!0),n=Number(t[e.valueField+i]),isNaN(n)||(s.value=n),n=Number(t[e.errorField+i]),isNaN(n)||(s.error=n),o&&(i="Open"),n=Number(t[e.openField+i]),isNaN(n)||(s.open=n),o&&(i="Close"),n=Number(t[e.closeField+i]),isNaN(n)||(s.close=n),o&&(i="Low"),n=Number(t[e.lowField+i]),isNaN(n)||(s.low=n),o&&(i="High"),n=Number(t[e.highField+i]),isNaN(n)||(s.high=n),s},parseGraphData:function(t){var e=t.dataProvider,i=t.seriesIdField;i||(i=this.seriesIdField),i||(i=this.categoryField);var n;for(n=0;n<e.length;n++){var s=e[n],o=this.lookupTable[String(s[i])],r=t.valueAxis.id;o&&(r=o.axes[r].graphs[t.id],r.serialDataItem=o,r.values=this.processValues(s,t,t.periodValue),this.processFields(t,r,s))}},addValueAxis:function(t){t.chart=this,this.valueAxes.push(t),this.validateData()},removeValueAxesAndGraphs:function(){var t,e=this.valueAxes;for(t=e.length-1;t>-1;t--)this.removeValueAxis(e[t])},removeValueAxis:function(t){var e,i=this.graphs;for(e=i.length-1;e>=0;e--){var n=i[e];n&&n.valueAxis==t&&this.removeGraph(n)}for(i=this.valueAxes,e=i.length-1;e>=0;e--)i[e]==t&&i.splice(e,1);this.validateData()},addGraph:function(t){this.graphs.push(t),this.chooseGraphColor(t,this.graphs.length-1),this.validateData()},removeGraph:function(t){var e,i=this.graphs;for(e=i.length-1;e>=0;e--)i[e]==t&&(i.splice(e,1),t.destroy());this.validateData()},processValueAxes:function(){var t,e=this.valueAxes;for(t=0;t<e.length;t++){var i=e[t];i.chart=this,i.id||(i.id="valueAxis"+t+"_"+(new Date).getTime()),(!0===this.usePrefixes||!1===this.usePrefixes)&&(i.usePrefixes=this.usePrefixes)}},processGraphs:function(){var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.chart=this,i.valueAxis||(i.valueAxis=this.valueAxes[0]),i.id||(i.id="graph"+t+"_"+(new Date).getTime())}},formatString:function(t,e){var i=e.graph,n=i.valueAxis;return n.duration&&e.values.value&&(n=AmCharts.formatDuration(e.values.value,n.duration,"",n.durationUnits,n.maxInterval,n.numberFormatter),t=t.split("[[value]]").join(n)),t=AmCharts.massReplace(t,{"[[title]]":i.title,"[[description]]":e.description}),t=AmCharts.fixNewLines(t),t=AmCharts.cleanFromEmpty(t)},getBalloonColor:function(t,e){var i=t.lineColor,n=t.balloonColor,s=t.fillColors;if("object"==typeof s?i=s[0]:void 0!==s&&(i=s),e.isNegative){var s=t.negativeLineColor,o=t.negativeFillColors;"object"==typeof o?s=o[0]:void 0!==o&&(s=o),void 0!==s&&(i=s)}return void 0!==e.color&&(i=e.color),void 0===n&&(n=i),n},getGraphById:function(t){return this.getObjById(this.graphs,t)},getValueAxisById:function(t){return this.getObjById(this.valueAxes,t)},getObjById:function(t,e){var i,n;for(n=0;n<t.length;n++){var s=t[n];s.id==e&&(i=s)}return i},processFields:function(t,e,i){if(t.itemColors){var n=t.itemColors,s=e.index;e.color=s<n.length?n[s]:AmCharts.randomColor()}for(n="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern".split(" "),s=0;s<n.length;s++){var o=n[s],r=t[o+"Field"];r&&(r=i[r],AmCharts.isDefined(r)&&(e[o]=r))}e.dataContext=i},chooseGraphColor:function(t,e){if(!t.lineColor){var i;i=this.colors.length>e?this.colors[e]:AmCharts.randomColor(),t.lineColor=i}},handleLegendEvent:function(t){var e=t.type;if(t=t.dataItem){var i=t.hidden,n=t.showBalloon;switch(e){case"clickMarker":n?this.hideGraphsBalloon(t):this.showGraphsBalloon(t);break;case"clickLabel":n?this.hideGraphsBalloon(t):this.showGraphsBalloon(t);break;case"rollOverItem":i||this.highlightGraph(t);break;case"rollOutItem":i||this.unhighlightGraph();break;case"hideItem":this.hideGraph(t);break;case"showItem":this.showGraph(t)}}},highlightGraph:function(t){var e,i=this.graphs,n=.2;if(this.legend&&(n=this.legend.rollOverGraphAlpha),1!=n)for(e=0;e<i.length;e++){var s=i[e];s!=t&&s.changeOpacity(n)}},unhighlightGraph:function(){var t;if(this.legend&&(t=this.legend.rollOverGraphAlpha),1!=t){t=this.graphs;var e;for(e=0;e<t.length;e++)t[e].changeOpacity(1)}},showGraph:function(t){t.hidden=!1,this.dataChanged=!0,this.marginsUpdated=!1,this.chartCreated&&this.initChart()},hideGraph:function(t){this.dataChanged=!0,this.marginsUpdated=!1,t.hidden=!0,this.chartCreated&&this.initChart()},hideGraphsBalloon:function(t){t.showBalloon=!1,this.updateLegend()},showGraphsBalloon:function(t){t.showBalloon=!0,this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var t=this.graphs;if(t){var e;for(e=0;e<t.length;e++)t[e].animationPlayed=!1}},animateAgain:function(){this.resetAnimation(),this.validateNow()}}),AmCharts.AmSlicedChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),AmCharts.AmSlicedChart.base.construct.call(this),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[]},initChart:function(){AmCharts.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.legend&&this.legend.setData(this.chartData)),this.drawChart()},handleLegendEvent:function(t){var e=t.type;if(t=t.dataItem){var i=t.hidden;switch(e){case"clickMarker":i||this.clickSlice(t);break;case"clickLabel":i||this.clickSlice(t);break;case"rollOverItem":i||this.rollOverSlice(t,!1);break;case"rollOutItem":i||this.rollOutSlice(t);break;case"hideItem":this.hideSlice(t);break;case"showItem":this.showSlice(t)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var t=this.legend;t&&t.invalidateSize()},addEventListeners:function(t,e){var i=this;t.mouseover(function(t){i.rollOverSlice(e,!0,t)}).mouseout(function(t){i.rollOutSlice(e,t)}).click(function(t){i.clickSlice(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},formatString:function(t,e){return t=AmCharts.formatValue(t,e,["value"],this.numberFormatter,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),t=AmCharts.formatValue(t,e,["percents"],this.percentFormatter),t=AmCharts.massReplace(t,{"[[title]]":e.title,"[[description]]":e.description}),-1!=t.indexOf("[[")&&(t=AmCharts.formatDataContextValue(t,e.dataContext)),t=AmCharts.fixNewLines(t),t=AmCharts.cleanFromEmpty(t)},startSlices:function(){var t;for(t=0;t<this.chartData.length;t++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(t):this.startSlice(this.chartData[t])},setStartTO:function(t){var e=this;t=setTimeout(function(){e.startSequenced.call(e)},500*(e.startDuration/e.chartData.length)*t),e.timeOuts.push(t)},pullSlices:function(t){var e,i=this.chartData;for(e=0;e<i.length;e++){var n=i[e];n.pulled&&this.pullSlice(n,1,t)}},startSequenced:function(){var t,e=this.chartData;for(t=0;t<e.length;t++)if(!e[t].started){this.startSlice(this.chartData[t]);break}},startSlice:function(t){t.started=!0;var e=t.wedge,i=this.startDuration;e&&i>0&&(0<t.alpha&&e.show(),e.translate(t.startX,t.startY),e.animate({opacity:t.alpha,translate:"0,0"},i,this.startEffect))},showLabels:function(){var t,e=this.chartData;for(t=0;t<e.length;t++){var i=e[t];if(0<i.alpha){var n=i.label;n&&n.show(),(i=i.tick)&&i.show()}}},showSlice:function(t){isNaN(t)?t.hidden=!1:this.chartData[t].hidden=!1,this.invalidateVisibility()},hideSlice:function(t){isNaN(t)?t.hidden=!0:this.chartData[t].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(t,e,i){isNaN(t)||(t=this.chartData[t]),clearTimeout(this.hoverInt),this.pullOnHover&&this.pullSlice(t,1),1>this.hoverAlpha&&t.wedge&&t.wedge.attr({opacity:this.hoverAlpha});var n=t.balloonX,s=t.balloonY;t.pulled&&(n+=t.pullX,s+=t.pullY);var o=this.formatString(this.balloonText,t),r=AmCharts.adjustLuminosity(t.color,-.15);this.showBalloon(o,r,e,n,s),t={type:"rollOverSlice",dataItem:t,chart:this,event:i},this.fire(t.type,t)},rollOutSlice:function(t,e){isNaN(t)||(t=this.chartData[t]),t.wedge&&t.wedge.attr({opacity:t.alpha}),this.hideBalloon();var i={type:"rollOutSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},clickSlice:function(t,e){isNaN(t)||(t=this.chartData[t]),t.pulled?this.pullSlice(t,0):this.pullSlice(t,1),AmCharts.getURL(t.url,this.urlTarget);var i={type:"clickSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},handleRightClick:function(t,e){isNaN(t)||(t=this.chartData[t]);var i={type:"rightClickSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},drawTicks:function(){var t,e=this.chartData;for(t=0;t<e.length;t++){var i=e[t];if(i.label){var n=i.ty,n=AmCharts.line(this.container,[i.tx0,i.tx,i.tx2],[i.ty0,n,n],this.labelTickColor,this.labelTickAlpha);i.tick=n,i.wedge.push(n)}}},initialStart:function(){var t=this,e=t.startDuration,i=setTimeout(function(){t.showLabels.call(t)},1e3*e);t.timeOuts.push(i),t.chartCreated?t.pullSlices(!0):(e=setTimeout(function(){t.pullSlices.call(t)},1200*e),t.timeOuts.push(e),t.startSlices())},pullSlice:function(t,e,i){var n=this.pullOutDuration;!0===i&&(n=0),(i=t.wedge)&&i.animate({translate:e*t.pullX+","+e*t.pullY},n,this.pullOutEffect),1==e?(t.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(t.index),t={type:"pullOutSlice",dataItem:t,chart:this}):(t.pulled=!1,t={type:"pullInSlice",dataItem:t,chart:this}),this.fire(t.type,t)},pullInAll:function(t){var e,i=this.chartData;for(e=0;e<this.chartData.length;e++)e!=t&&i[e].pulled&&this.pullSlice(i[e],0)},pullOutAll:function(t){t=this.chartData;var e;for(e=0;e<t.length;e++)t[e].pulled||this.pullSlice(t[e],1)},parseData:function(){var t=[];this.chartData=t;var e=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==e){var i,n,s,o=e.length,r=0;for(i=0;o>i;i++){n={};var a=e[i];n.dataContext=a,n.value=Number(a[this.valueField]),(s=a[this.titleField])||(s=""),n.title=s,n.pulled=AmCharts.toBoolean(a[this.pulledField],!1),(s=a[this.descriptionField])||(s=""),n.description=s,n.labelRadius=Number(a[this.labelRadiusField]),n.url=a[this.urlField],n.pattern=a[this.patternField],n.visibleInLegend=AmCharts.toBoolean(a[this.visibleInLegendField],!0),s=a[this.alphaField],n.alpha=void 0!==s?Number(s):this.alpha,s=a[this.colorField],void 0!==s&&(n.color=AmCharts.toColor(s)),n.labelColor=AmCharts.toColor(a[this.labelColorField]),r+=n.value,n.hidden=!1,t[i]=n}for(i=e=0;o>i;i++)n=t[i],n.percents=100*(n.value/r),n.percents<this.groupPercent&&e++;for(e>1&&(this.groupValue=0,this.removeSmallSlices(),t.push({title:this.groupedTitle,value:this.groupValue,percents:100*(this.groupValue/r),pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern})),o=this.baseColor,o||(o=this.pieBaseColor),r=this.brightnessStep,r||(r=this.pieBrightnessStep),i=0;i<t.length;i++)o?s=AmCharts.adjustLuminosity(o,i*r/100):(s=this.colors[i],void 0===s&&(s=AmCharts.randomColor())),void 0===t[i].color&&(t[i].color=s);
this.recalculatePercents()}},recalculatePercents:function(){var t,e,i=this.chartData,n=0;for(t=0;t<i.length;t++)e=i[t],!e.hidden&&0<e.value&&(n+=e.value);for(t=0;t<i.length;t++)e=this.chartData[t],e.percents=!e.hidden&&0<e.value?100*e.value/n:0},removeSmallSlices:function(){var t,e=this.chartData;for(t=e.length-1;t>=0;t--)e[t].percents<this.groupPercent&&(this.groupValue+=e[t].value,e.splice(t,1))},animateAgain:function(){var t=this;t.startSlices();var e=setTimeout(function(){t.pullSlices.call(t)},1200*t.startDuration);t.timeOuts.push(e)},measureMaxLabel:function(){var t,e=this.chartData,i=0;for(t=0;t<e.length;t++){var n=this.formatString(this.labelText,e[t]),n=AmCharts.text(this.container,n,this.color,this.fontFamily,this.fontSize),s=n.getBBox().width;s>i&&(i=s),n.remove()}return i}}),AmCharts.AmRectangularChart=AmCharts.Class({inherits:AmCharts.AmCoordinateChart,construct:function(){AmCharts.AmRectangularChart.base.construct.call(this),this.createEvents("zoomed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0,this.heightMultiplier=this.widthMultiplier=1,this.zoomOutText="Show all",this.zoomOutButton={backgroundColor:"#e5e5e5",backgroundAlpha:1},this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10},initChart:function(){AmCharts.AmRectangularChart.base.initChart.call(this),this.updateDxy();var t=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),t=!1),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),t&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){if(AmCharts.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),AmCharts.ifArray(this.chartData)){var t=this.chartCursor;t&&t.draw(),t=this.zoomOutText,""!==t&&t&&this.drawZoomOutButton()}},resetMargins:function(){var t,e={};if("serial"==this.chartType||"gantt"==this.chartType){var i=this.valueAxes;for(t=0;t<i.length;t++){var n=i[t];n.ignoreAxisWidth||(n.setOrientation(this.rotate),n.fixAxisPosition(),e[n.position]=!0)}(t=this.categoryAxis)&&!t.ignoreAxisWidth&&(t.setOrientation(!this.rotate),t.fixAxisPosition(),t.fixAxisPosition(),e[t.position]=!0)}else{for(n=this.xAxes,i=this.yAxes,t=0;t<n.length;t++){var s=n[t];s.ignoreAxisWidth||(s.setOrientation(!0),s.fixAxisPosition(),e[s.position]=!0)}for(t=0;t<i.length;t++)n=i[t],n.ignoreAxisWidth||(n.setOrientation(!1),n.fixAxisPosition(),e[n.position]=!0)}e.left&&(this.marginLeft=0),e.right&&(this.marginRight=0),e.top&&(this.marginTop=0),e.bottom&&(this.marginBottom=0),this.fixMargins=e},measureMargins:function(){var t,e=this.valueAxes,i=this.autoMarginOffset,n=this.fixMargins,s=this.realWidth,o=this.realHeight,r=i,a=i,l=s-i;t=o-i;var h;for(h=0;h<e.length;h++)t=this.getAxisBounds(e[h],r,l,a,t),r=t.l,l=t.r,a=t.t,t=t.b;(e=this.categoryAxis)&&(t=this.getAxisBounds(e,r,l,a,t),r=t.l,l=t.r,a=t.t,t=t.b),n.left&&i>r&&(this.marginLeft=Math.round(-r+i)),n.right&&l>s-i&&(this.marginRight=Math.round(l-s+i)),n.top&&a<i+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-a+i+this.titleHeight)),n.bottom&&t>o-i&&(this.marginBottom=Math.round(t-o+i)),this.initChart()},getAxisBounds:function(t,e,i,n,s){if(!t.ignoreAxisWidth){var o=t.labelsSet,r=t.tickLength;if(t.inside&&(r=0),o)switch(o=t.getBBox(),t.position){case"top":t=o.y,n>t&&(n=t);break;case"bottom":t=o.y+o.height,t>s&&(s=t);break;case"right":t=o.x+o.width+r+3,t>i&&(i=t);break;case"left":t=o.x-r,e>t&&(e=t)}}return{l:e,t:n,r:i,b:s}},drawZoomOutButton:function(){var t=this,e=t.container.set();t.zoomButtonSet.push(e);var i=t.color,n=t.fontSize,s=t.zoomOutButton;s&&(s.fontSize&&(n=s.fontSize),s.color&&(i=s.color)),i=AmCharts.text(t.container,t.zoomOutText,i,t.fontFamily,n,"start"),n=i.getBBox(),i.translate(26,6+n.height/2);var o=s.backgroundColor,s=s.backgroundAlpha,s=AmCharts.rect(t.container,n.width+35,n.height+15,o,s,1,o,s);for(e.push(s),t.zbBG=s,void 0!==t.pathToImages&&(s=t.container.image(t.pathToImages+"lens.png",0,0,17,17),s.translate(6,n.height/2-1),s.toFront(),e.push(s)),i.toFront(),e.push(i),i=e.getBBox(),e.translate(t.marginLeftReal+t.plotAreaWidth-i.width,t.marginTopReal),e.hide(),e.mouseover(function(){t.rollOverZB()}).mouseout(function(){t.rollOutZB()}).click(function(){t.clickZB()}).touchstart(function(){t.rollOverZB()}).touchend(function(){t.rollOutZB(),t.clickZB()}),i=0;i<e.length;i++)e[i].attr({cursor:"pointer"});t.zbSet=e},rollOverZB:function(){this.zbBG.show()},rollOutZB:function(){this.zbBG.hide()},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0,this.zoom()},drawPlotArea:function(){var t=this.dx,e=this.dy,i=this.marginLeftReal,n=this.marginTopReal,s=this.plotAreaWidth-1,o=this.plotAreaHeight-1,r=this.plotAreaFillColors,a=this.plotAreaFillAlphas,l=this.plotAreaBorderColor,h=this.plotAreaBorderAlpha;this.trendLinesSet.clipRect(i,n,s,o),"object"==typeof a&&(a=a[0]),r=AmCharts.polygon(this.container,[0,s,s,0],[0,0,o,o],r,a,1,l,h,this.plotAreaGradientAngle),r.translate(i+t,n+e),r.node.setAttribute("class","amChartsPlotArea"),this.set.push(r),0!==t&&0!==e&&(r=this.plotAreaFillColors,"object"==typeof r&&(r=r[0]),r=AmCharts.adjustLuminosity(r,-.15),s=AmCharts.polygon(this.container,[0,t,s+t,s,0],[0,e,e,0,0],r,a,1,l,h),s.translate(i,n+o),this.set.push(s),t=AmCharts.polygon(this.container,[0,0,t,t,0],[0,o,o+e,e,0],r,a,1,l,h),t.translate(i,n),this.set.push(t))},updatePlotArea:function(){var t=this.updateWidth(),e=this.updateHeight(),i=this.container;this.realWidth=t,this.realWidth=e,i&&this.container.setSize(t,e),t=t-this.marginLeftReal-this.marginRightReal-this.dx,e=e-this.marginTopReal-this.marginBottomReal,1>t&&(t=1),1>e&&(e=1),this.plotAreaWidth=Math.round(t),this.plotAreaHeight=Math.round(e)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var t=this.getTitleHeight();this.titleHeight=t,this.marginTopReal=this.marginTop-this.dy+t,this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var t,e=this.valueAxes,i=this.marginLeftReal,n=this.marginTopReal,s=this.plotAreaHeight,o=this.plotAreaWidth;for(t=0;t<e.length;t++){var r=e[t];r.axisRenderer=AmCharts.RecAxis,r.guideFillRenderer=AmCharts.RecFill,r.axisItemRenderer=AmCharts.RecItem,r.dx=this.dx,r.dy=this.dy,r.viW=o-1,r.viH=s-1,r.marginsChanged=!0,r.viX=i,r.viY=n,this.updateObjectSize(r)}},updateObjectSize:function(t){t.width=(this.plotAreaWidth-1)*this.widthMultiplier,t.height=(this.plotAreaHeight-1)*this.heightMultiplier,t.x=this.marginLeftReal+this.horizontalPosition,t.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.width=this.plotAreaWidth*this.widthMultiplier,i.height=this.plotAreaHeight*this.heightMultiplier,i.index=t,i.dx=this.dx,i.dy=this.dy,i.rotate=this.rotate,i.chartType=this.chartType}},updateChartCursor:function(){var t=this.chartCursor;t&&(t.x=this.marginLeftReal,t.y=this.marginTopReal,t.width=this.plotAreaWidth-1,t.height=this.plotAreaHeight-1,t.chart=this)},updateScrollbars:function(){},addChartCursor:function(t){AmCharts.callMethod("destroy",[this.chartCursor]),t&&(this.listenTo(t,"changed",this.handleCursorChange),this.listenTo(t,"zoomed",this.handleCursorZoom)),this.chartCursor=t},removeChartCursor:function(){AmCharts.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var t,e=this.trendLines;for(t=0;t<e.length;t++){var i=e[t];i.valueAxis.recalculateToPercents?i.set&&i.set.hide():(i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.draw())}},addTrendLine:function(t){this.trendLines.push(t)},removeTrendLine:function(t){var e,i=this.trendLines;for(e=i.length-1;e>=0;e--)i[e]==t&&i.splice(e,1)},adjustMargins:function(t,e){var i=t.scrollbarHeight;"top"==t.position?e?this.marginLeftReal+=i:this.marginTopReal+=i:e?this.marginRightReal+=i:this.marginBottomReal+=i},getScrollbarPosition:function(t,e,i){t.position=e?"bottom"==i||"left"==i?"bottom":"top":"top"==i||"right"==i?"bottom":"top"},updateChartScrollbar:function(t,e){if(t){t.rotate=e;var i=this.marginTopReal,n=this.marginLeftReal,s=t.scrollbarHeight,o=this.dx,r=this.dy;"top"==t.position?e?(t.y=i,t.x=n-s):(t.y=i-s+r-1,t.x=n+o):e?(t.y=i+r,t.x=n+this.plotAreaWidth+o):(t.y=i+this.plotAreaHeight,t.x=this.marginLeftReal)}},showZB:function(t){var e=this.zbSet;e&&(t?e.show():e.hide(),this.zbBG.hide())},handleReleaseOutside:function(t){AmCharts.AmRectangularChart.base.handleReleaseOutside.call(this,t),(t=this.chartCursor)&&t.handleReleaseOutside()},handleMouseDown:function(t){AmCharts.AmRectangularChart.base.handleMouseDown.call(this,t);var e=this.chartCursor;e&&e.handleMouseDown(t)},handleCursorChange:function(){}}),AmCharts.TrendLine=AmCharts.Class({construct:function(){this.createEvents("click"),this.isProtected=!1,this.dashLength=0,this.lineColor="#00CC00",this.lineThickness=this.lineAlpha=1},draw:function(){var t=this;t.destroy();var e,i,n,s,o=t.chart,r=o.container,a=t.categoryAxis,l=t.initialDate,h=t.initialCategory,c=t.finalDate,u=t.finalCategory,d=t.valueAxis,p=t.valueAxisX,f=t.initialXValue,m=t.finalXValue,g=t.initialValue,v=t.finalValue,_=d.recalculateToPercents,y=o.dataDateFormat;a&&(l&&(l instanceof Date||(l=y?AmCharts.stringToDate(l,y):new Date(l)),t.initialDate=l,e=a.dateToCoordinate(l)),h&&(e=a.categoryToCoordinate(h)),c&&(c instanceof Date||(c=y?AmCharts.stringToDate(c,y):new Date(c)),t.finalDate=c,i=a.dateToCoordinate(c)),u&&(i=a.categoryToCoordinate(u))),p&&!_&&(isNaN(f)||(e=p.getCoordinate(f)),isNaN(m)||(i=p.getCoordinate(m))),d&&!_&&(isNaN(g)||(n=d.getCoordinate(g)),isNaN(v)||(s=d.getCoordinate(v))),isNaN(e)||isNaN(i)||isNaN(n)||isNaN(n)||(o.rotate?(a=[n,s],i=[e,i]):(a=[e,i],i=[n,s]),n=t.lineColor,e=AmCharts.line(r,a,i,n,t.lineAlpha,t.lineThickness,t.dashLength),i=AmCharts.line(r,a,i,n,.005,5),r=r.set([e,i]),r.translate(o.marginLeftReal,o.marginTopReal),o.trendLinesSet.push(r),t.line=e,t.set=r,i.mouseup(function(){t.handleLineClick()}).mouseover(function(){t.handleLineOver()}).mouseout(function(){t.handleLineOut()}),i.touchend&&i.touchend(function(){t.handleLineClick()}))},handleLineClick:function(){var t={type:"click",trendLine:this,chart:this.chart};this.fire(t.type,t)},handleLineOver:function(){var t=this.rollOverColor;void 0!==t&&this.line.attr({stroke:t})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){AmCharts.remove(this.set)}}),AmCharts.circle=function(t,e,i,n,s,o,r,a){return(void 0==s||0===s)&&(s=1),void 0===o&&(o="#000000"),void 0===r&&(r=0),n={fill:i,stroke:o,"fill-opacity":n,"stroke-width":s,"stroke-opacity":r},t=t.circle(0,0,e).attr(n),a&&t.gradient("radialGradient",[i,AmCharts.adjustLuminosity(i,-.6)]),t},AmCharts.text=function(t,e,i,n,s,o,r,a){return o||(o="middle"),"right"==o&&(o="end"),isNaN(a)&&(a=1),void 0!==e&&(e=String(e),AmCharts.isIE&&!AmCharts.isModern&&(e=e.replace("&amp;","&"),e=e.replace("&","&amp;"))),i={fill:i,"font-family":n,"font-size":s,opacity:a},!0===r&&(i["font-weight"]="bold"),i["text-anchor"]=o,t.text(e,i)},AmCharts.polygon=function(t,e,i,n,s,o,r,a,l,h,c){isNaN(o)&&(o=0),isNaN(a)&&(a=s);var u=n,d=!1;for("object"==typeof u&&1<u.length&&(d=!0,u=u[0]),void 0===r&&(r=u),s={fill:u,stroke:r,"fill-opacity":s,"stroke-width":o,"stroke-opacity":a},void 0!==c&&c>0&&(s["stroke-dasharray"]=c),c=AmCharts.dx,o=AmCharts.dy,t.handDrawn&&(i=AmCharts.makeHD(e,i,t.handDrawScatter),e=i[0],i=i[1]),r=Math.round,h&&(r=AmCharts.doNothing),h="M"+(r(e[0])+c)+","+(r(i[0])+o),a=1;a<e.length;a++)h+=" L"+(r(e[a])+c)+","+(r(i[a])+o);return t=t.path(h+" Z").attr(s),d&&t.gradient("linearGradient",n,l),t},AmCharts.rect=function(t,e,i,n,s,o,r,a,l,h,c){isNaN(o)&&(o=0),void 0===l&&(l=0),void 0===h&&(h=270),isNaN(s)&&(s=0);var u=n,d=!1;"object"==typeof u&&(u=u[0],d=!0),void 0===r&&(r=u),void 0===a&&(a=s),e=Math.round(e),i=Math.round(i);var p=0,f=0;return 0>e&&(e=Math.abs(e),p=-e),0>i&&(i=Math.abs(i),f=-i),p+=AmCharts.dx,f+=AmCharts.dy,s={fill:u,stroke:r,"fill-opacity":s,"stroke-opacity":a},void 0!==c&&c>0&&(s["stroke-dasharray"]=c),t=t.rect(p,f,e,i,l,o).attr(s),d&&t.gradient("linearGradient",n,h),t},AmCharts.bullet=function(t,e,i,n,s,o,r,a,l,h,c){var u;switch("circle"==e&&(e="round"),e){case"round":u=AmCharts.circle(t,i/2,n,s,o,r,a);break;case"square":u=AmCharts.polygon(t,[-i/2,i/2,i/2,-i/2],[i/2,i/2,-i/2,-i/2],n,s,o,r,a,h-180);break;case"diamond":u=AmCharts.polygon(t,[-i/2,0,i/2,0],[0,-i/2,0,i/2],n,s,o,r,a);break;case"triangleUp":u=AmCharts.triangle(t,i,0,n,s,o,r,a);break;case"triangleDown":u=AmCharts.triangle(t,i,180,n,s,o,r,a);break;case"triangleLeft":u=AmCharts.triangle(t,i,270,n,s,o,r,a);break;case"triangleRight":u=AmCharts.triangle(t,i,90,n,s,o,r,a);break;case"bubble":u=AmCharts.circle(t,i/2,n,s,o,r,a,!0);break;case"yError":u=t.set(),u.push(AmCharts.line(t,[0,0],[-i/2,i/2],n,s,o)),u.push(AmCharts.line(t,[-l,l],[-i/2,-i/2],n,s,o)),u.push(AmCharts.line(t,[-l,l],[i/2,i/2],n,s,o));break;case"xError":u=t.set(),u.push(AmCharts.line(t,[-i/2,i/2],[0,0],n,s,o)),u.push(AmCharts.line(t,[-i/2,-i/2],[-l,l],n,s,o)),u.push(AmCharts.line(t,[i/2,i/2],[-l,l],n,s,o))}return u&&u.pattern(c),u},AmCharts.triangle=function(t,e,i,n,s,o,r,a){(void 0===o||0===o)&&(o=1),void 0===r&&(r="#000"),void 0===a&&(a=0),n={fill:n,stroke:r,"fill-opacity":s,"stroke-width":o,"stroke-opacity":a},e/=2;var l;return 0===i&&(l=" M"+-e+","+e+" L0,"+-e+" L"+e+","+e+" Z"),180==i&&(l=" M"+-e+","+-e+" L0,"+e+" L"+e+","+-e+" Z"),90==i&&(l=" M"+-e+","+-e+" L"+e+",0 L"+-e+","+e+" Z"),270==i&&(l=" M"+-e+",0 L"+e+","+e+" L"+e+","+-e+" Z"),t.path(l).attr(n)},AmCharts.line=function(t,e,i,n,s,o,r,a,l,h,c){if(t.handDrawn&&!c)return AmCharts.handDrawnLine(t,e,i,n,s,o,r,a,l,h,c);for(o={fill:"none","stroke-width":o},void 0!==r&&r>0&&(o["stroke-dasharray"]=r),isNaN(s)||(o["stroke-opacity"]=s),n&&(o.stroke=n),n=Math.round,h&&(n=AmCharts.doNothing),h=AmCharts.dx,s=AmCharts.dy,r="M"+(n(e[0])+h)+","+(n(i[0])+s),a=1;a<e.length;a++)r+=" L"+(n(e[a])+h)+","+(n(i[a])+s);return AmCharts.VML?t.path(r,void 0,!0).attr(o):(l&&(r+=" M0,0 L0,0"),t.path(r).attr(o))},AmCharts.makeHD=function(t,e,i){for(var n=[],s=[],o=1;o<t.length;o++)for(var r=Number(t[o-1]),a=Number(e[o-1]),l=Number(t[o]),h=Number(e[o]),c=Math.sqrt(Math.pow(l-r,2)+Math.pow(h-a,2)),c=Math.round(c/50)+1,l=(l-r)/c,h=(h-a)/c,u=0;c>=u;u++){var d=r+u*l+Math.random()*i,p=a+u*h+Math.random()*i;n.push(d),s.push(p)}return[n,s]},AmCharts.handDrawnLine=function(t,e,i,n,s,o,r,a,l,h,c){var u=t.set();for(c=1;c<e.length;c++)for(var d=[e[c-1],e[c]],p=[i[c-1],i[c]],p=AmCharts.makeHD(d,p,t.handDrawScatter),d=p[0],p=p[1],f=1;f<d.length;f++)u.push(AmCharts.line(t,[d[f-1],d[f]],[p[f-1],p[f]],n,s,o+Math.random()*t.handDrawThickness-t.handDrawThickness/2,r,a,l,h,!0));return u},AmCharts.doNothing=function(t){return t},AmCharts.wedge=function(t,e,i,n,s,o,r,a,l,h,c,u){var d=Math.round;o=d(o),r=d(r),a=d(a);var p=d(r/o*a),f=AmCharts.VML,m=359.5+o/100;m>359.94&&(m=359.94),s>=m&&(s=m);var g=1/180*Math.PI,m=e+Math.sin(n*g)*a,v=i-Math.cos(n*g)*p,_=e+Math.sin(n*g)*o,y=i-Math.cos(n*g)*r,b=e+Math.sin((n+s)*g)*o,w=i-Math.cos((n+s)*g)*r,C=e+Math.sin((n+s)*g)*a,g=i-Math.cos((n+s)*g)*p,x={fill:AmCharts.adjustLuminosity(h.fill,-.2),"stroke-opacity":0},T=0;180<Math.abs(s)&&(T=1),n=t.set();var A;f&&(m=d(10*m),_=d(10*_),b=d(10*b),C=d(10*C),v=d(10*v),y=d(10*y),w=d(10*w),g=d(10*g),e=d(10*e),l=d(10*l),i=d(10*i),o*=10,r*=10,a*=10,p*=10,1>Math.abs(s)&&1>=Math.abs(b-_)&&1>=Math.abs(w-y)&&(A=!0)),s="";var S;if(l>0&&(f?(S=" M"+m+","+(v+l)+" L"+_+","+(y+l),A||(S+=" A"+(e-o)+","+(l+i-r)+","+(e+o)+","+(l+i+r)+","+_+","+(y+l)+","+b+","+(w+l)),S+=" L"+C+","+(g+l),a>0&&(A||(S+=" B"+(e-a)+","+(l+i-p)+","+(e+a)+","+(l+i+p)+","+C+","+(l+g)+","+m+","+(l+v)))):(S=" M"+m+","+(v+l)+" L"+_+","+(y+l)+(" A"+o+","+r+",0,"+T+",1,"+b+","+(w+l)+" L"+C+","+(g+l)),a>0&&(S+=" A"+a+","+p+",0,"+T+",0,"+m+","+(v+l))),S+=" Z",S=t.path(S,void 0,void 0,"1000,1000").attr(x),n.push(S),S=t.path(" M"+m+","+v+" L"+m+","+(v+l)+" L"+_+","+(y+l)+" L"+_+","+y+" L"+m+","+v+" Z",void 0,void 0,"1000,1000").attr(x),l=t.path(" M"+b+","+w+" L"+b+","+(w+l)+" L"+C+","+(g+l)+" L"+C+","+g+" L"+b+","+w+" Z",void 0,void 0,"1000,1000").attr(x),n.push(S),n.push(l)),f?(A||(s=" A"+d(e-o)+","+d(i-r)+","+d(e+o)+","+d(i+r)+","+d(_)+","+d(y)+","+d(b)+","+d(w)),o=" M"+d(m)+","+d(v)+" L"+d(_)+","+d(y)+s+" L"+d(C)+","+d(g)):o=" M"+m+","+v+" L"+_+","+y+(" A"+o+","+r+",0,"+T+",1,"+b+","+w)+" L"+C+","+g,a>0&&(f?A||(o+=" B"+(e-a)+","+(i-p)+","+(e+a)+","+(i+p)+","+C+","+g+","+m+","+v):o+=" A"+a+","+p+",0,"+T+",0,"+m+","+v),t.handDrawn&&(e=AmCharts.line(t,[m,_],[v,y],h.stroke,h.thickness*Math.random()*t.handDrawThickness,h["stroke-opacity"]),n.push(e)),t=t.path(o+" Z",void 0,void 0,"1000,1000").attr(h),c){for(e=[],i=0;i<c.length;i++)e.push(AmCharts.adjustLuminosity(h.fill,c[i]));0<e.length&&t.gradient("linearGradient",e)}return t.pattern(u),n.push(t),n},AmCharts.adjustLuminosity=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),6>t.length&&(t=String(t[0])+String(t[0])+String(t[1])+String(t[1])+String(t[2])+String(t[2])),e=e||0;var i,n,s="#";for(n=0;3>n;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+=("00"+i).substr(i.length);return s},AmCharts.Bezier=AmCharts.Class({construct:function(t,e,i,n,s,o,r,a,l,h){for("object"==typeof r&&(r=r[0]),"object"==typeof a&&(a=a[0]),o={fill:r,"fill-opacity":a,"stroke-width":o},void 0!==l&&l>0&&(o["stroke-dasharray"]=l),isNaN(s)||(o["stroke-opacity"]=s),n&&(o.stroke=n),n="M"+Math.round(e[0])+","+Math.round(i[0]),s=[],l=0;l<e.length;l++)s.push({x:Number(e[l]),y:Number(i[l])});1<s.length&&(e=this.interpolate(s),n+=this.drawBeziers(e)),h?n+=h:AmCharts.VML||(n+="M0,0 L0,0"),this.path=t.path(n).attr(o)},interpolate:function(t){var e=[];e.push({x:t[0].x,y:t[0].y});var i=t[1].x-t[0].x,n=t[1].y-t[0].y,s=AmCharts.bezierX,o=AmCharts.bezierY;e.push({x:t[0].x+i/s,y:t[0].y+n/o});var r;for(r=1;r<t.length-1;r++){var a=t[r-1],l=t[r],n=t[r+1],i=n.x-l.x,n=n.y-a.y,a=l.x-a.x;a>i&&(a=i),e.push({x:l.x-a/s,y:l.y-n/o}),e.push({x:l.x,y:l.y}),e.push({x:l.x+a/s,y:l.y+n/o})}return n=t[t.length-1].y-t[t.length-2].y,i=t[t.length-1].x-t[t.length-2].x,e.push({x:t[t.length-1].x-i/s,y:t[t.length-1].y-n/o}),e.push({x:t[t.length-1].x,y:t[t.length-1].y}),e},drawBeziers:function(t){var e,i="";for(e=0;e<(t.length-1)/3;e++)i+=this.drawBezierMidpoint(t[3*e],t[3*e+1],t[3*e+2],t[3*e+3]);return i},drawBezierMidpoint:function(t,e,i,n){var s=Math.round,o=this.getPointOnSegment(t,e,.75),r=this.getPointOnSegment(n,i,.75),a=(n.x-t.x)/16,l=(n.y-t.y)/16,h=this.getPointOnSegment(t,e,.375);return t=this.getPointOnSegment(o,r,.375),t.x-=a,t.y-=l,e=this.getPointOnSegment(r,o,.375),e.x+=a,e.y+=l,i=this.getPointOnSegment(n,i,.375),a=this.getMiddle(h,t),o=this.getMiddle(o,r),r=this.getMiddle(e,i),h=" Q"+s(h.x)+","+s(h.y)+","+s(a.x)+","+s(a.y),h+=" Q"+s(t.x)+","+s(t.y)+","+s(o.x)+","+s(o.y),h+=" Q"+s(e.x)+","+s(e.y)+","+s(r.x)+","+s(r.y),h+=" Q"+s(i.x)+","+s(i.y)+","+s(n.x)+","+s(n.y)},getMiddle:function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},getPointOnSegment:function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}}),AmCharts.AmDraw=AmCharts.Class({construct:function(t,e,i,n){AmCharts.SVG_NS="http://www.w3.org/2000/svg",AmCharts.SVG_XLINK="http://www.w3.org/1999/xlink",AmCharts.hasSVG=!!document.createElementNS&&!!document.createElementNS(AmCharts.SVG_NS,"svg").createSVGRect,1>e&&(e=10),1>i&&(i=10),this.div=t,this.width=e,this.height=i,this.rBin=document.createElement("div"),AmCharts.hasSVG?(AmCharts.SVG=!0,n=this.createSvgElement("svg"),n.style.position="absolute",n.style.width=e+"px",n.style.height=i+"px",AmCharts.rtl&&(n.setAttribute("direction","rtl"),n.style.left="auto",n.style.right="0px"),n.setAttribute("version","1.1"),t.appendChild(n),this.container=n,this.R=new AmCharts.SVGRenderer(this)):AmCharts.isIE&&AmCharts.VMLRenderer&&(AmCharts.VML=!0,AmCharts.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),e=document.createStyleSheet(),e.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),AmCharts.vmlStyleSheet=e),this.container=t,this.R=new AmCharts.VMLRenderer(this,n),this.R.disableSelection(t))},createSvgElement:function(t){return document.createElementNS(AmCharts.SVG_NS,t)},circle:function(t,e,i,n){var s=new AmCharts.AmDObject("circle",this);return s.attr({r:i,cx:t,cy:e}),this.addToContainer(s.node,n),s},setSize:function(t,e){t>0&&e>0&&(this.container.style.width=t+"px",this.container.style.height=e+"px")},rect:function(t,e,i,n,s,o,r){var a=new AmCharts.AmDObject("rect",this);return AmCharts.VML&&(s=100*s/Math.min(i,n),i+=2*o,n+=2*o,a.bw=o,a.node.style.marginLeft=-o,a.node.style.marginTop=-o),1>i&&(i=1),1>n&&(n=1),a.attr({x:t,y:e,width:i,height:n,rx:s,ry:s,"stroke-width":o}),this.addToContainer(a.node,r),a},image:function(t,e,i,n,s,o){var r=new AmCharts.AmDObject("image",this);return r.attr({x:e,y:i,width:n,height:s}),this.R.path(r,t),this.addToContainer(r.node,o),r},addToContainer:function(t,e){e||(e=this.container),e.appendChild(t)},text:function(t,e,i){return this.R.text(t,e,i)},path:function(t,e,i,n){var s=new AmCharts.AmDObject("path",this);return n||(n="100,100"),s.attr({cs:n}),i?s.attr({dd:t}):s.attr({d:t}),this.addToContainer(s.node,e),s},set:function(t){return this.R.set(t)},remove:function(t){if(t){var e=this.rBin;e.appendChild(t),e.innerHTML=""}},renderFix:function(){var t,e=this.container,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}e=1-t.e%1,t=1-t.f%1,e>.5&&(e-=1),t>.5&&(t-=1),e&&(i.left=e+"px"),t&&(i.top=t+"px")},update:function(){this.R.update()}}),AmCharts.AmDObject=AmCharts.Class({construct:function(t,e){this.D=e,this.R=e.R,this.node=this.R.create(this,t),this.y=this.x=0,this.scale=1},attr:function(t){return this.R.attr(this,t),this},getAttr:function(t){return this.node.getAttribute(t)},setAttr:function(t,e){return this.R.setAttr(this,t,e),this},clipRect:function(t,e,i,n){this.R.clipRect(this,t,e,i,n)},translate:function(t,e,i,n){n||(t=Math.round(t),e=Math.round(e)),this.R.move(this,t,e,i),this.x=t,this.y=e,this.scale=i,this.angle&&this.rotate(this.angle)},rotate:function(t,e){this.R.rotate(this,t,e),this.angle=t},animate:function(t,e,i){for(var n in t)if(t.hasOwnProperty(n)){var s=n,o=t[n];i=AmCharts.getEffect(i),this.R.animate(this,s,o,e,i)}},push:function(t){if(t){var e=this.node;e.appendChild(t.node);var i=t.clipPath;i&&e.appendChild(i),(t=t.grad)&&e.appendChild(t)}},text:function(t){this.R.setText(this,t)},remove:function(){this.R.remove(this)},clear:function(){var t=this.node;if(t.hasChildNodes())for(;1<=t.childNodes.length;)t.removeChild(t.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;e&&e.appendChild(t)}},toPrevious:function(){var t=this.node;t&&this.prevNextNode&&(t=t.parentNode)&&t.insertBefore(this.prevNextNode,null)},toBack:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;if(e){var i=e.firstChild;i&&e.insertBefore(t,i)}}},mouseover:function(t){return this.R.addListener(this,"mouseover",t),this},mouseout:function(t){return this.R.addListener(this,"mouseout",t),this},click:function(t){return this.R.addListener(this,"click",t),this},dblclick:function(t){return this.R.addListener(this,"dblclick",t),this},mousedown:function(t){return this.R.addListener(this,"mousedown",t),this},mouseup:function(t){return this.R.addListener(this,"mouseup",t),this},touchstart:function(t){return this.R.addListener(this,"touchstart",t),this},touchend:function(t){return this.R.addListener(this,"touchend",t),this},contextmenu:function(t){return this.node.addEventListener?this.node.addEventListener("contextmenu",t,!0):this.R.addListener(this,"contextmenu",t),this},stop:function(t){(t=this.animationX)&&AmCharts.removeFromArray(this.R.animations,t),(t=this.animationY)&&AmCharts.removeFromArray(this.R.animations,t)},length:function(){return this.node.childNodes.length},gradient:function(t,e,i){this.R.gradient(this,t,e,i)},pattern:function(t,e){t&&this.R.pattern(this,t,e)}}),AmCharts.VMLRenderer=AmCharts.Class({construct:function(t,e){this.chart=e,this.D=t,this.cNames={circle:"oval",rect:"roundrect",path:"shape"},this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(t,e){var i;if("group"==e)i=document.createElement("div"),t.type="div";else if("text"==e)i=document.createElement("div"),t.type="text";else if("image"==e)i=document.createElement("img"),t.type="image";else{t.type="shape",t.shapeType=this.cNames[e],i=document.createElement("amvml:"+this.cNames[e]);var n=document.createElement("amvml:stroke");i.appendChild(n),t.stroke=n;var s=document.createElement("amvml:fill");i.appendChild(s),t.fill=s,s.className="amvml",n.className="amvml",i.className="amvml"}return i.style.position="absolute",i.style.top=0,i.style.left=0,i},path:function(t,e){t.node.setAttribute("src",e)},setAttr:function(t,e,i){if(void 0!==i){var n;8===document.documentMode&&(n=!0);var s=t.node,o=t.type,r=s.style;"r"==e&&(r.width=2*i,r.height=2*i),"roundrect"!=t.shapeType||"width"!=e&&"height"!=e||(i-=1),"cursor"==e&&(r.cursor=i),"cx"==e&&(r.left=i-AmCharts.removePx(r.width)/2),"cy"==e&&(r.top=i-AmCharts.removePx(r.height)/2);var a=this.styleMap[e];if(void 0!==a&&(r[a]=i),"text"==o&&("text-anchor"==e&&(t.anchor=i,a=s.clientWidth,"end"==i&&(r.marginLeft=-a+"px"),"middle"==i&&(r.marginLeft=-(a/2)+"px",r.textAlign="center"),"start"==i&&(r.marginLeft="0px")),"fill"==e&&(r.color=i),"font-weight"==e&&(r.fontWeight=i)),r=t.children)for(a=0;a<r.length;a++)r[a].setAttr(e,i);"shape"==o&&("cs"==e&&(s.style.width="100px",s.style.height="100px",s.setAttribute("coordsize",i)),"d"==e&&s.setAttribute("path",this.svgPathToVml(i)),"dd"==e&&s.setAttribute("path",i),o=t.stroke,t=t.fill,"stroke"==e&&(n?o.color=i:o.setAttribute("color",i)),"stroke-width"==e&&(n?o.weight=i:o.setAttribute("weight",i)),"stroke-opacity"==e&&(n?o.opacity=i:o.setAttribute("opacity",i)),"stroke-dasharray"==e&&(r="solid",i>0&&3>i&&(r="dot"),i>=3&&6>=i&&(r="dash"),i>6&&(r="longdash"),n?o.dashstyle=r:o.setAttribute("dashstyle",r)),("fill-opacity"==e||"opacity"==e)&&(0===i?n?t.on=!1:t.setAttribute("on",!1):n?t.opacity=i:t.setAttribute("opacity",i)),"fill"==e&&(n?t.color=i:t.setAttribute("color",i)),"rx"==e&&(n?s.arcSize=i+"%":s.setAttribute("arcsize",i+"%")))}},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},text:function(t,e,i){var n=new AmCharts.AmDObject("text",this.D),s=n.node;return s.style.whiteSpace="pre",s.innerHTML=t,this.D.addToContainer(s,i),this.attr(n,e),n},getBBox:function(t){return this.getBox(t.node)},getBox:function(t){var e,i=t.offsetLeft,n=t.offsetTop,s=t.offsetWidth,o=t.offsetHeight;if(t.hasChildNodes()){var r,a,l;for(l=0;l<t.childNodes.length;l++){e=this.getBox(t.childNodes[l]);var h=e.x;isNaN(h)||(isNaN(r)?r=h:r>h&&(r=h));var c=e.y;isNaN(c)||(isNaN(a)?a=c:a>c&&(a=c)),h=e.width+h,isNaN(h)||(s=Math.max(s,h)),e=e.height+c,isNaN(e)||(o=Math.max(o,e))}0>r&&(i+=r),0>a&&(n+=a)}return{x:i,y:n,width:s,height:o}},setText:function(t,e){var i=t.node;i&&(i.innerHTML=e),this.setAttr(t,"text-anchor",t.anchor)},addListener:function(t,e,i){t.node["on"+e]=i},move:function(t,e,i){var n=t.node,s=n.style;"text"==t.type&&(i-=AmCharts.removePx(s.fontSize)/2-1),"oval"==t.shapeType&&(e-=AmCharts.removePx(s.width)/2,i-=AmCharts.removePx(s.height)/2),t=t.bw,isNaN(t)||(e-=t,i-=t),isNaN(e)||isNaN(i)||(n.style.left=e+"px",n.style.top=i+"px")},svgPathToVml:function(t){var e=t.split(" ");t="";var i,n,s=Math.round;for(n=0;n<e.length;n++){var o=e[n],r=o.substring(0,1),o=o.substring(1),a=o.split(","),l=s(a[0])+","+s(a[1]);if("M"==r&&(t+=" m "+l),"L"==r&&(t+=" l "+l),"Z"==r&&(t+=" x e"),"Q"==r){var h=i.length,c=i[h-1],u=a[0],d=a[1],l=a[2],p=a[3];i=s(i[h-2]/3+2/3*u),c=s(c/3+2/3*d),u=s(2/3*u+l/3),d=s(2/3*d+p/3),t+=" c "+i+","+c+","+u+","+d+","+l+","+p}"A"==r&&(t+=" wa "+o),"B"==r&&(t+=" at "+o),i=a}return t},animate:function(t,e,i,n,s){var o=t.node,r=this.chart;if("translate"==e){e=i.split(","),i=e[1];var a=o.offsetTop;r.animate(t,"left",o.offsetLeft,e[0],n,s,"px"),r.animate(t,"top",a,i,n,s,"px")}},clipRect:function(t,e,i,n,s){t=t.node,0===e&&0===i?(t.style.width=n+"px",t.style.height=s+"px",t.style.overflow="hidden"):t.style.clip="rect("+i+"px "+(e+n)+"px "+(i+s)+"px "+e+"px)"},rotate:function(t,e,i){if(0!==Number(e)){var n=t.node;t=n.style,i||(i=this.getBGColor(n.parentNode)),t.backgroundColor=i,t.paddingLeft=1,i=e*Math.PI/180;var s=Math.cos(i),o=Math.sin(i),r=AmCharts.removePx(t.left),a=AmCharts.removePx(t.top),l=n.offsetWidth,n=n.offsetHeight;e/=Math.abs(e),t.left=r+l/2-l/2*Math.cos(i)-e*n/2*Math.sin(i)+3,t.top=a-e*l/2*Math.sin(i)+e*n/2*Math.sin(i),t.cssText=t.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+s+"', M12='"+-o+"', M21='"+o+"', M22='"+s+"', sizingmethod='auto expand');"}},getBGColor:function(t){var e="#FFFFFF";if(t.style){var i=t.style.backgroundColor;""!==i?e=i:t.parentNode&&(e=this.getBGColor(t.parentNode))}return e},set:function(t){var e=new AmCharts.AmDObject("group",this.D);if(this.D.container.appendChild(e.node),t){var i;for(i=0;i<t.length;i++)e.push(t[i])}return e},gradient:function(t,e,i,n){var s="";"radialGradient"==e&&(e="gradientradial",i.reverse()),"linearGradient"==e&&(e="gradient");var o;for(o=0;o<i.length;o++){var r=Math.round(100*o/(i.length-1)),s=s+(r+"% "+i[o]);o<i.length-1&&(s+=",")}t=t.fill,90==n?n=0:270==n?n=180:180==n?n=90:0===n&&(n=270),8===document.documentMode?(t.type=e,t.angle=n):(t.setAttribute("type",e),t.setAttribute("angle",n)),s&&(t.colors.value=s)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),this.D.remove(t.node)},disableSelection:function(t){void 0!==typeof t.onselectstart&&(t.onselectstart=function(){return!1}),t.style.cursor="default"},pattern:function(t,e){var i=t.fill;t.node.fillColor="none",8===document.documentMode?(i.type="tile",i.src=e.url):(i.setAttribute("type","tile"),i.setAttribute("src",e.url))},update:function(){}}),AmCharts.SVGRenderer=AmCharts.Class({construct:function(t){this.D=t,this.animations=[]},create:function(t,e){return document.createElementNS(AmCharts.SVG_NS,e)},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},setAttr:function(t,e,i){void 0!==i&&t.node.setAttribute(e,i)},animate:function(t,e,i,n,s){var o=t.node;t["an_"+e]&&AmCharts.removeFromArray(this.animations,t["an_"+e]),"translate"==e?(o=(o=o.getAttribute("transform"))?String(o).substring(10,o.length-1):"0,0",o=o.split(", ").join(" "),o=o.split(" ").join(","),0===o&&(o="0,0")):o=Number(o.getAttribute(e)),i={obj:t,frame:0,attribute:e,from:o,to:i,time:n,effect:s},this.animations.push(i),t["an_"+e]=i},update:function(){var t,e=this.animations;for(t=e.length-1;t>=0;t--){var i,n,s,o=e[t],r=1e3*o.time/AmCharts.updateRate,a=o.frame+1,l=o.obj,h=o.attribute;r>=a?(o.frame++,"translate"==h?(i=o.from.split(","),h=Number(i[0]),i=Number(i[1]),isNaN(i)&&(i=0),n=o.to.split(","),s=Number(n[0]),n=Number(n[1]),s=0===s-h?s:Math.round(AmCharts[o.effect](0,a,h,s-h,r)),o=0===n-i?n:Math.round(AmCharts[o.effect](0,a,i,n-i,r)),h="transform",o="translate("+s+","+o+")"):(n=Number(o.from),i=Number(o.to),s=i-n,o=AmCharts[o.effect](0,a,n,s,r),isNaN(o)&&(o=i),0===s&&this.animations.splice(t,1)),this.setAttr(l,h,o)):("translate"==h?(n=o.to.split(","),s=Number(n[0]),n=Number(n[1]),l.translate(s,n)):(i=Number(o.to),this.setAttr(l,h,i)),this.animations.splice(t,1))}},getBBox:function(t){if(t=t.node)try{return t.getBBox()}catch(e){}return{width:0,height:0,x:0,y:0}},path:function(t,e){t.node.setAttributeNS(AmCharts.SVG_XLINK,"xlink:href",e)},clipRect:function(t,e,i,n,s){var o=t.node,r=t.clipPath;r&&this.D.remove(r);var a=o.parentNode;a&&(o=document.createElementNS(AmCharts.SVG_NS,"clipPath"),r=AmCharts.getUniqueId(),o.setAttribute("id",r),this.D.rect(e,i,n,s,0,0,o),a.appendChild(o),e="#",AmCharts.baseHref&&!AmCharts.isIE&&(e=window.location.href+e),this.setAttr(t,"clip-path","url("+e+r+")"),this.clipPathC++,t.clipPath=o)},text:function(t,e,i){var n=new AmCharts.AmDObject("text",this.D);t=String(t).split("\n");
var s,o=e["font-size"];for(s=0;s<t.length;s++){var r=this.create(null,"tspan");r.appendChild(document.createTextNode(t[s])),r.setAttribute("y",(o+2)*s+Math.round(o/2)),r.setAttribute("x",0),n.node.appendChild(r)}return n.node.setAttribute("y",Math.round(o/2)),this.attr(n,e),this.D.addToContainer(n.node,i),n},setText:function(t,e){var i=t.node;i&&(i.removeChild(i.firstChild),i.appendChild(document.createTextNode(e)))},move:function(t,e,i,n){e="translate("+e+","+i+")",n&&(e=e+" scale("+n+")"),this.setAttr(t,"transform",e)},rotate:function(t,e){var i=t.node.getAttribute("transform"),n="rotate("+e+")";i&&(n=i+" "+n),this.setAttr(t,"transform",n)},set:function(t){var e=new AmCharts.AmDObject("g",this.D);if(this.D.container.appendChild(e.node),t){var i;for(i=0;i<t.length;i++)e.push(t[i])}return e},addListener:function(t,e,i){t.node["on"+e]=i},gradient:function(t,e,i,n){var s=t.node,o=t.grad;if(o&&this.D.remove(o),e=document.createElementNS(AmCharts.SVG_NS,e),o=AmCharts.getUniqueId(),e.setAttribute("id",o),!isNaN(n)){var r=0,a=0,l=0,h=0;90==n?l=100:270==n?h=100:180==n?r=100:0===n&&(a=100),e.setAttribute("x1",r+"%"),e.setAttribute("x2",a+"%"),e.setAttribute("y1",l+"%"),e.setAttribute("y2",h+"%")}for(n=0;n<i.length;n++)r=document.createElementNS(AmCharts.SVG_NS,"stop"),a=100*n/(i.length-1),0===n&&(a=0),r.setAttribute("offset",a+"%"),r.setAttribute("stop-color",i[n]),e.appendChild(r);s.parentNode.appendChild(e),i="#",AmCharts.baseHref&&!AmCharts.isIE&&(i=window.location.href+i),s.setAttribute("fill","url("+i+o+")"),t.grad=e},pattern:function(t,e,i){var n=t.node;isNaN(i)&&(i=1);var s=t.patternNode;s&&this.D.remove(s);var s=document.createElementNS(AmCharts.SVG_NS,"pattern"),o=AmCharts.getUniqueId(),r=e;e.url&&(r=e.url);var a=Number(e.width);isNaN(a)&&(a=4);var l=Number(e.height);isNaN(l)&&(l=4),a/=i,l/=i,i=e.x,isNaN(i)&&(i=0);var h=-Math.random()*Number(e.randomX);isNaN(h)||(i=h),h=e.y,isNaN(h)&&(h=0),e=-Math.random()*Number(e.randomY),isNaN(e)||(h=e),s.setAttribute("id",o),s.setAttribute("width",a),s.setAttribute("height",l),s.setAttribute("patternUnits","userSpaceOnUse"),s.setAttribute("xlink:href",r),this.D.image(r,0,0,a,l,s).translate(i,h),r="#",AmCharts.baseHref&&!AmCharts.isIE&&(r=window.location.href+r),n.setAttribute("fill","url("+r+o+")"),t.patternNode=s,n.parentNode.appendChild(s)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),t.grad&&this.D.remove(t.grad),t.patternNode&&this.D.remove(t.patternNode),this.D.remove(t.node)}}),AmCharts.AmDSet=AmCharts.Class({construct:function(){this.create("g")},attr:function(t){this.R.attr(this.node,t)},move:function(t,e){this.R.move(this.node,t,e)}}),AmCharts.AmLegend=AmCharts.Class({construct:function(){this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel"),this.position="bottom",this.borderColor=this.color="#000000",this.borderAlpha=0,this.markerLabelGap=5,this.verticalGap=10,this.align="left",this.horizontalGap=0,this.spacing=10,this.markerDisabledColor="#AAB3B3",this.markerType="square",this.markerSize=16,this.markerBorderThickness=this.markerBorderAlpha=1,this.marginBottom=this.marginTop=0,this.marginLeft=this.marginRight=20,this.autoMargins=!0,this.valueWidth=50,this.switchable=!0,this.switchType="x",this.switchColor="#FFFFFF",this.rollOverColor="#CC0000",this.reversedOrder=!1,this.labelText="[[title]]",this.valueText="[[value]]",this.useMarkerColorForLabels=!1,this.rollOverGraphAlpha=1,this.textClickEnabled=!1,this.equalWidths=!0,this.dateFormat="DD-MM-YYYY",this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.useGraphSettings=!1,this.showEntries=!0},setData:function(t){this.data=t,this.invalidateSize()},invalidateSize:function(){this.destroy(),this.entries=[],this.valueLabels=[],AmCharts.ifArray(this.data)&&this.drawLegend()},drawLegend:function(){var t=this.chart,e=this.position,i=this.width,n=t.divRealWidth,s=t.divRealHeight,o=this.div,r=this.data;if(isNaN(this.fontSize)&&(this.fontSize=t.fontSize),"right"==e||"left"==e)this.maxColumns=1,this.marginLeft=this.marginRight=10;else if(this.autoMargins){this.marginRight=t.marginRight,this.marginLeft=t.marginLeft;var a=t.autoMarginOffset;"bottom"==e?(this.marginBottom=a,this.marginTop=0):(this.marginTop=a,this.marginBottom=0)}if(i=void 0!==i?AmCharts.toCoordinate(i,n):t.realWidth,"outside"==e?(i=o.offsetWidth,s=o.offsetHeight,o.clientHeight&&(i=o.clientWidth,s=o.clientHeight)):(o.style.width=i+"px",o.className="amChartsLegend"),this.divWidth=i,this.container=new AmCharts.AmDraw(o,i,s,t),this.lx=0,this.ly=8,e=this.markerSize,e>this.fontSize&&(this.ly=e/2-1),e>0&&(this.lx+=e+this.markerLabelGap),this.titleWidth=0,(e=this.title)&&(t=AmCharts.text(this.container,e,this.color,t.fontFamily,this.fontSize,"start",!0),t.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),t=t.getBBox(),this.titleWidth=t.width+15,this.titleHeight=t.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(t=0;t<r.length;t++)this.createEntry(r[t]);for(t=this.index=0;t<r.length;t++)this.createValue(r[t])}this.arrangeEntries(),this.updateValues()},arrangeEntries:function(){var t=this.position,e=this.marginLeft+this.titleWidth,i=this.marginRight,n=this.marginTop,s=this.marginBottom,o=this.horizontalGap,r=this.div,a=this.divWidth,l=this.maxColumns,h=this.verticalGap,c=this.spacing,u=a-i-e,d=0,p=0,f=this.container,m=f.set();this.set=m,f=f.set(),m.push(f);var g,v,_=this.entries;for(v=0;v<_.length;v++){g=_[v].getBBox();var y=g.width;y>d&&(d=y),g=g.height,g>p&&(p=g)}var b=y=0,w=o;for(v=0;v<_.length;v++){var C=_[v];this.reversedOrder&&(C=_[_.length-v-1]),g=C.getBBox();var x;this.equalWidths?x=o+b*(d+c+this.markerLabelGap):(x=w,w=w+g.width+o+c),x+g.width>u&&v>0&&0!==b&&(y++,b=0,x=o,w=x+g.width+o+c),C.translate(x,(p+h)*y),b++,!isNaN(l)&&b>=l&&(b=0,y++),f.push(C)}g=f.getBBox(),l=g.height+2*h-1,"left"==t||"right"==t?(a=g.width+2*o,r.style.width=a+e+i+"px"):a=a-e-i-1,i=AmCharts.polygon(this.container,[0,a,a,0],[0,0,l,l],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),m.push(i),m.translate(e,n),i.toBack(),e=o,("top"==t||"bottom"==t||"absolute"==t||"outside"==t)&&("center"==this.align?e=o+(a-g.width)/2:"right"==this.align&&(e=o+a-g.width)),f.translate(e,h+1),this.titleHeight>l&&(l=this.titleHeight),t=l+n+s+1,0>t&&(t=0),r.style.height=Math.round(t)+"px"},createEntry:function(t){if(!1!==t.visibleInLegend){var e=this.chart,i=t.markerType;i||(i=this.markerType);var n=t.color,s=t.alpha;t.legendKeyColor&&(n=t.legendKeyColor()),t.legendKeyAlpha&&(s=t.legendKeyAlpha());var o;!0===t.hidden&&(o=n=this.markerDisabledColor);var r=t.pattern,a=t.customMarker;a||(a=this.customMarker);var l=this.container,h=this.markerSize,c=0;if(this.useGraphSettings)if(i=t.type,"line"==i||"step"==i||"smoothedLine"==i||"ohlc"==i)this.switchType=void 0,r=l.set(),t.hidden||(n=t.lineColor,o=t.bulletBorderColor),c=AmCharts.line(l,[0,2*h],[h/2,h/2],n,t.lineAlpha,t.lineThickness,t.dashLength),r.push(c),t.bullet&&(t.hidden||(n=t.bulletColor),c=AmCharts.bullet(l,t.bullet,t.bulletSize,n,t.bulletAlpha,t.bulletBorderThickness,o,t.bulletBorderAlpha))&&(c.translate(h+1,h/2),r.push(c)),c=h;else{var u;t.getGradRotation&&(u=t.getGradRotation()),(r=this.createMarker("square",t.fillColors,t.fillAlphas,t.lineThickness,n,t.lineAlpha,u,r))&&r.translate(h/2,h/2)}else a?(e.path&&(a=e.path+a),r=l.image(a,0,0,h,h)):(r=this.createMarker(i,n,s,void 0,void 0,void 0,void 0,r))&&r.translate(h/2,h/2);this.addListeners(r,t),l=l.set([r]),this.switchable&&l.setAttr("cursor","pointer"),(o=this.switchType)&&(u="x"==o?this.createX():this.createV(),u.dItem=t,!0!==t.hidden?"x"==o?u.hide():u.show():"x"!=o&&u.hide(),this.switchable||u.hide(),this.addListeners(u,t),t.legendSwitch=u,l.push(u)),o=this.color,t.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(o=this.selectedColor),this.useMarkerColorForLabels&&(o=n),!0===t.hidden&&(o=this.markerDisabledColor),n=AmCharts.massReplace(this.labelText,{"[[title]]":t.title}),u=this.fontSize,r&&u>=h&&r.translate(h/2,h/2+this.ly-u/2+(u+2-h)/2);var d;n&&(n=AmCharts.fixNewLines(n),t.legendTextReal=n,d=AmCharts.text(this.container,n,o,e.fontFamily,u,"start"),d.translate(this.lx+c,this.ly),l.push(d),e=d.getBBox().width,this.maxLabelWidth<e&&(this.maxLabelWidth=e)),this.entries[this.index]=l,t.legendEntry=this.entries[this.index],t.legendLabel=d,this.index++}},addListeners:function(t,e){var i=this;t&&t.mouseover(function(){i.rollOverMarker(e)}).mouseout(function(){i.rollOutMarker(e)}).click(function(){i.clickMarker(e)})},rollOverMarker:function(t){this.switchable&&this.dispatch("rollOverMarker",t),this.dispatch("rollOverItem",t)},rollOutMarker:function(t){this.switchable&&this.dispatch("rollOutMarker",t),this.dispatch("rollOutItem",t)},clickMarker:function(t){this.switchable?!0===t.hidden?this.dispatch("showItem",t):this.dispatch("hideItem",t):this.textClickEnabled&&this.dispatch("clickMarker",t)},rollOverLabel:function(t){t.hidden||(this.textClickEnabled&&t.legendLabel&&t.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",t))},rollOutLabel:function(t){if(!t.hidden){if(this.textClickEnabled&&t.legendLabel){var e=this.color;void 0!==this.selectedColor&&t.showBalloon&&(e=this.selectedColor),this.useMarkerColorForLabels&&(e=t.lineColor,void 0===e&&(e=t.color)),t.legendLabel.attr({fill:e})}this.dispatch("rollOutItem",t)}},clickLabel:function(t){this.textClickEnabled?t.hidden||this.dispatch("clickLabel",t):this.switchable&&(!0===t.hidden?this.dispatch("showItem",t):this.dispatch("hideItem",t))},dispatch:function(t,e){this.fire(t,{type:t,dataItem:e,target:this,chart:this.chart})},createValue:function(t){var e=this,i=e.fontSize;if(!1!==t.visibleInLegend){var n=e.maxLabelWidth;e.equalWidths||(e.valueAlign="left"),"left"==e.valueAlign&&(n=t.legendEntry.getBBox().width);var s=n;if(e.valueText){var o=e.color;e.useMarkerColorForValues&&(o=t.color,t.legendKeyColor&&(o=t.legendKeyColor())),!0===t.hidden&&(o=e.markerDisabledColor);var r=e.valueText,n=n+e.lx+e.markerLabelGap+e.valueWidth,a="end";"left"==e.valueAlign&&(n-=e.valueWidth,a="start"),o=AmCharts.text(e.container,r,o,e.chart.fontFamily,i,a),o.translate(n,e.ly),e.entries[e.index].push(o),s+=e.valueWidth+2*e.markerLabelGap,o.dItem=t,e.valueLabels.push(o)}e.index++,o=e.markerSize,i+7>o&&(o=i+7,AmCharts.VML&&(o+=3)),i=e.container.rect(e.markerSize,0,s,o,0,0).attr({stroke:"none",fill:"#ffffff","fill-opacity":.005}),i.dItem=t,e.entries[e.index-1].push(i),i.mouseover(function(){e.rollOverLabel(t)}).mouseout(function(){e.rollOutLabel(t)}).click(function(){e.clickLabel(t)})}},createV:function(){var t=this.markerSize;return AmCharts.polygon(this.container,[t/5,t/2,t-t/5,t/2],[t/3,t-t/5,t/5,t/1.7],this.switchColor)},createX:function(){var t=this.markerSize-3,e={stroke:this.switchColor,"stroke-width":3},i=this.container,n=AmCharts.line(i,[3,t],[3,t]).attr(e),t=AmCharts.line(i,[3,t],[t,3]).attr(e);return this.container.set([n,t])},createMarker:function(t,e,i,n,s,o,r,a){var l=this.markerSize,h=this.container;return s||(s=this.markerBorderColor),s||(s=e),isNaN(n)&&(n=this.markerBorderThickness),isNaN(o)&&(o=this.markerBorderAlpha),AmCharts.bullet(h,t,l,e,i,n,s,o,l,r,a)},validateNow:function(){this.invalidateSize()},updateValues:function(){var t,e=this.valueLabels,i=this.chart;for(t=0;t<e.length;t++){var n=e[t],s=n.dItem,o=" ";if(void 0!==s.type){var r=s.currentDataItem,a=this.periodValueText;s.legendPeriodValueText&&(a=s.legendPeriodValueText),r?(o=this.valueText,s.legendValueText&&(o=s.legendValueText),o=i.formatString(o,r)):a&&(o=i.formatPeriodString(a,s))}else o=i.formatString(this.valueText,s);(r=s.legendLabel)&&r.text(s.legendTextReal),n.text(o)}},renderFix:function(){if(!AmCharts.VML){var t=this.container;t&&t.renderFix()}},destroy:function(){this.div.innerHTML="",AmCharts.remove(this.set)}}),AmCharts.formatMilliseconds=function(t,e){if(-1!=t.indexOf("fff")){var i=e.getMilliseconds(),n=String(i);10>i&&(n="00"+i),i>=10&&100>i&&(n="0"+i),t=t.replace(/fff/g,n)}return t},AmCharts.extractPeriod=function(t){var e=AmCharts.stripNumbers(t),i=1;return e!=t&&(i=Number(t.slice(0,t.indexOf(e)))),{period:e,count:i}},AmCharts.resetDateToMin=function(t,e,i,n){void 0===n&&(n=1);var s,o,r,a,l,h,c;switch(AmCharts.useUTC?(s=t.getUTCFullYear(),o=t.getUTCMonth(),r=t.getUTCDate(),a=t.getUTCHours(),l=t.getUTCMinutes(),h=t.getUTCSeconds(),c=t.getUTCMilliseconds(),t=t.getUTCDay()):(s=t.getFullYear(),o=t.getMonth(),r=t.getDate(),a=t.getHours(),l=t.getMinutes(),h=t.getSeconds(),c=t.getMilliseconds(),t=t.getDay()),e){case"YYYY":s=Math.floor(s/i)*i,o=0,r=1,c=h=l=a=0;break;case"MM":o=Math.floor(o/i)*i,r=1,c=h=l=a=0;break;case"WW":0===t&&n>0&&(t=7),r=r-t+n,c=h=l=a=0;break;case"DD":c=h=l=a=0;break;case"hh":a=Math.floor(a/i)*i,c=h=l=0;break;case"mm":l=Math.floor(l/i)*i,c=h=0;break;case"ss":h=Math.floor(h/i)*i,c=0;break;case"fff":c=Math.floor(c/i)*i}return AmCharts.useUTC?(t=new Date,t.setUTCFullYear(s,o,r),t.setUTCHours(a,l,h,c)):t=new Date(s,o,r,a,l,h,c),t},AmCharts.getPeriodDuration=function(t,e){void 0===e&&(e=1);var i;switch(t){case"YYYY":i=316224e5;break;case"MM":i=26784e5;break;case"WW":i=6048e5;break;case"DD":i=864e5;break;case"hh":i=36e5;break;case"mm":i=6e4;break;case"ss":i=1e3;break;case"fff":i=1}return i*e},AmCharts.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:1/0,count:3}},AmCharts.getMaxInterval=function(t,e){var i=AmCharts.intervals;return t>=i[e].contains?(t=Math.round(t/i[e].contains),e=i[e].nextInterval,AmCharts.getMaxInterval(t,e)):"ss"==e?i[e].nextInterval:e},AmCharts.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),AmCharts.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" "),AmCharts.monthNames="January February March April May June July August September October November December".split(" "),AmCharts.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),AmCharts.getWeekNumber=function(t){t=new Date(t),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+1)/7)},AmCharts.stringToDate=function(t,e){var i={},n=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],s=!0,o=e.indexOf("AA");-1!=o&&(t.substr(o,2),"pm"==t.toLowerCase&&(s=!1));var r,a,l,o=e;for(l=0;l<n.length;l++)a=n[l].period,i[a]=0,"date"==a&&(i[a]=1);for(l=0;l<n.length;l++)if(r=n[l].pattern,a=n[l].period,-1!=e.indexOf(r)){var h=AmCharts.getFromDateString(r,t,o);e=e.replace(r,""),("KK"==r||"K"==r||"LL"==r||"L"==r)&&(s||(h+=12)),i[a]=h}return new Date(i.year,i.month,i.date,i.hours,i.minutes,i.seconds,i.milliseconds)},AmCharts.getFromDateString=function(t,e,i){return i=i.indexOf(t),e=e.substr(i,t.length),"0"==e.charAt(0)&&(e=e.substr(1,e.length-1)),e=Number(e),isNaN(e)&&(e=0),-1!=t.indexOf("M")&&e--,e},AmCharts.formatDate=function(t,e){var i,n,s,o,r,a,l,h,c=AmCharts.getWeekNumber(t);AmCharts.useUTC?(i=t.getUTCFullYear(),n=t.getUTCMonth(),s=t.getUTCDate(),o=t.getUTCDay(),r=t.getUTCHours(),a=t.getUTCMinutes(),l=t.getUTCSeconds(),h=t.getUTCMilliseconds()):(i=t.getFullYear(),n=t.getMonth(),s=t.getDate(),o=t.getDay(),r=t.getHours(),a=t.getMinutes(),l=t.getSeconds(),h=t.getMilliseconds());var u=String(i).substr(2,2),d=n+1;9>n&&(d="0"+d);var p=s;10>s&&(p="0"+s);var f="0"+o;e=e.replace(/W/g,c),c=r,24==c&&(c=0);var m=c;return 10>m&&(m="0"+m),e=e.replace(/JJ/g,m),e=e.replace(/J/g,c),c=r,0===c&&(c=24),m=c,10>m&&(m="0"+m),e=e.replace(/HH/g,m),e=e.replace(/H/g,c),c=r,c>11&&(c-=12),m=c,10>m&&(m="0"+m),e=e.replace(/KK/g,m),e=e.replace(/K/g,c),c=r,0===c&&(c=12),c>12&&(c-=12),m=c,10>m&&(m="0"+m),e=e.replace(/LL/g,m),e=e.replace(/L/g,c),c=a,10>c&&(c="0"+c),e=e.replace(/NN/g,c),e=e.replace(/N/g,a),a=l,10>a&&(a="0"+a),e=e.replace(/SS/g,a),e=e.replace(/S/g,l),l=h,10>l&&(l="00"+l),100>l&&(l="0"+l),a=h,10>a&&(a="00"+a),e=e.replace(/QQQ/g,l),e=e.replace(/QQ/g,a),e=e.replace(/Q/g,h),e=12>r?e.replace(/A/g,"am"):e.replace(/A/g,"pm"),e=e.replace(/YYYY/g,"@IIII@"),e=e.replace(/YY/g,"@II@"),e=e.replace(/MMMM/g,"@XXXX@"),e=e.replace(/MMM/g,"@XXX@"),e=e.replace(/MM/g,"@XX@"),e=e.replace(/M/g,"@X@"),e=e.replace(/DD/g,"@RR@"),e=e.replace(/D/g,"@R@"),e=e.replace(/EEEE/g,"@PPPP@"),e=e.replace(/EEE/g,"@PPP@"),e=e.replace(/EE/g,"@PP@"),e=e.replace(/E/g,"@P@"),e=e.replace(/@IIII@/g,i),e=e.replace(/@II@/g,u),e=e.replace(/@XXXX@/g,AmCharts.monthNames[n]),e=e.replace(/@XXX@/g,AmCharts.shortMonthNames[n]),e=e.replace(/@XX@/g,d),e=e.replace(/@X@/g,n+1),e=e.replace(/@RR@/g,p),e=e.replace(/@R@/g,s),e=e.replace(/@PPPP@/g,AmCharts.dayNames[o]),e=e.replace(/@PPP@/g,AmCharts.shortDayNames[o]),e=e.replace(/@PP@/g,f),e=e.replace(/@P@/g,o)},AmCharts.changeDate=function(t,e,i,n,s){var o=-1;switch(void 0===n&&(n=!0),void 0===s&&(s=!1),!0===n&&(o=1),e){case"YYYY":t.setFullYear(t.getFullYear()+i*o),n||s||t.setDate(t.getDate()+1);break;case"MM":e=t.getMonth(),t.setMonth(t.getMonth()+i*o),t.getMonth()>e+i*o&&t.setDate(t.getDate()-1),n||s||t.setDate(t.getDate()+1);break;case"DD":t.setDate(t.getDate()+i*o);break;case"WW":t.setDate(t.getDate()+7*i*o);break;case"hh":t.setHours(t.getHours()+i*o);break;case"mm":t.setMinutes(t.getMinutes()+i*o);break;case"ss":t.setSeconds(t.getSeconds()+i*o);break;case"fff":t.setMilliseconds(t.getMilliseconds()+i*o)}return t},AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(){AmCharts.AmSerialChart.base.construct.call(this),this.createEvents("changed"),this.columnSpacing=5,this.columnSpacing3D=0,this.columnWidth=.8,this.updateScrollbar=!0;var t=new AmCharts.CategoryAxis;t.chart=this,this.categoryAxis=t,this.chartType="serial",this.zoomOutOnDataUpdate=!0,this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1,this.minSelectedTime=0},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var t=this.chartCursor;t&&t.updateData();var e,t=this.countColumns(),i=this.graphs;for(e=0;e<i.length;e++)i[e].columnCount=t;this.updateScrollbar=!0,this.drawChart(),this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins()),this.mouseWheelScrollEnabled&&this.addMouseWheel()},validateData:function(t){this.marginsUpdated=!1,this.zoomOutOnDataUpdate&&!t&&(this.endTime=this.end=this.startTime=this.start=0/0),AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var t=this.chartData;if(AmCharts.ifArray(t)){var e=this.chartScrollbar;if(e&&e.draw(),0<this.realWidth&&0<this.realHeight){var i,t=t.length-1,e=this.categoryAxis;e.parseDates&&!e.equalSpacing?(e=this.startTime,i=this.endTime,(isNaN(e)||isNaN(i))&&(e=this.firstTime,i=this.lastTime)):(e=this.start,i=this.end,(isNaN(e)||isNaN(i))&&(e=0,i=t)),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(e,i)}}else this.cleanChart();this.dispDUpd(),this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(t,e,i){t.id=i,t.rotate=e,t.axisRenderer=AmCharts.RecAxis,t.guideFillRenderer=AmCharts.RecFill,t.axisItemRenderer=AmCharts.RecItem,t.setOrientation(!this.rotate),t.x=this.marginLeftReal,t.y=this.marginTopReal,t.dx=this.dx,t.dy=this.dy,t.width=this.plotAreaWidth-1,t.height=this.plotAreaHeight-1,t.viW=this.plotAreaWidth-1,t.viH=this.plotAreaHeight-1,t.viX=this.marginLeftReal,t.viY=this.marginTopReal,t.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var t,e=this.valueAxes;for(t=0;t<e.length;t++){var i=e[t],n=this.rotate;i.rotate=n,i.setOrientation(n),n=this.categoryAxis,(!n.startOnAxis||n.parseDates)&&(i.expandMinMax=!0)}},updateData:function(){this.parseData();var t,e=this.graphs,i=this.chartData;for(t=0;t<e.length;t++)e[t].data=i;0<i.length&&(this.firstTime=this.getStartTime(i[0].time),this.lastTime=this.getEndTime(i[i.length-1].time))},getStartTime:function(t){var e=this.categoryAxis;return AmCharts.resetDateToMin(new Date(t),e.minPeriod,1,e.firstDayOfWeek).getTime()},getEndTime:function(t){var e=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(t),e.period,e.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var t=this.chartScrollbar;t&&(this.getScrollbarPosition(t,this.rotate,this.categoryAxis.position),this.adjustMargins(t,this.rotate))},updateScrollbars:function(){this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(t,e){var i=this.categoryAxis;i.parseDates&&!i.equalSpacing?this.timeZoom(t,e):this.indexZoom(t,e)},timeZoom:function(t,e){var i=this.maxSelectedTime;isNaN(i)||(e!=this.endTime&&e-t>i&&(t=e-i,this.updateScrollbar=!0),t!=this.startTime&&e-t>i&&(e=t+i,this.updateScrollbar=!0));var n=this.minSelectedTime;if(n>0&&n>e-t){var s=Math.round(t+(e-t)/2),n=Math.round(n/2);t=s-n,e=s+n}var o=this.chartData,s=this.categoryAxis;if(AmCharts.ifArray(o)&&(t!=this.startTime||e!=this.endTime)){var r=s.minDuration(),n=this.firstTime,a=this.lastTime;t||(t=n,isNaN(i)||(t=a-i)),e||(e=a),t>a&&(t=a),n>e&&(e=n),n>t&&(t=n),e>a&&(e=a),t>e&&(e=t+r),r/5>e-t&&(a>e?e=t+r/5:t=e-r/5),this.startTime=t,this.endTime=e,i=o.length-1,r=this.getClosestIndex(o,"time",t,!0,0,i),o=this.getClosestIndex(o,"time",e,!1,r,i),s.timeZoom(t,e),s.zoom(r,o),this.start=AmCharts.fitToBounds(r,0,i),this.end=AmCharts.fitToBounds(o,0,i),this.zoomAxesAndGraphs(),this.zoomScrollbar(),t!=n||e!=a?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchTimeZoomEvent()}},indexZoom:function(t,e){var i=this.maxSelectedSeries;if(isNaN(i)||(e!=this.end&&e-t>i&&(t=e-i,this.updateScrollbar=!0),t!=this.start&&e-t>i&&(e=t+i,this.updateScrollbar=!0)),t!=this.start||e!=this.end){var n=this.chartData.length-1;isNaN(t)&&(t=0,isNaN(i)||(t=n-i)),isNaN(e)&&(e=n),t>e&&(e=t),e>n&&(e=n),t>n&&(t=n-1),0>t&&(t=0),this.start=t,this.end=e,this.categoryAxis.zoom(t,e),this.zoomAxesAndGraphs(),this.zoomScrollbar(),0!==t||e!=this.chartData.length-1?this.showZB(!0):this.showZB(!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.columnWidthReal=this.columnWidth,i.categoryAxis=this.categoryAxis}},updateColumnsDepth:function(){var t,e,i=this.graphs;for(AmCharts.remove(this.columnsSet),this.columnsArray=[],t=0;t<i.length;t++){e=i[t];var n=e.columnsArray;if(n){var s;for(s=0;s<n.length;s++)this.columnsArray.push(n[s])}}if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(i=this.container.set(),this.columnSet.push(i),t=0;t<this.columnsArray.length;t++)i.push(this.columnsArray[t].column.set);e&&i.translate(e.x,e.y),this.columnsSet=i}},compareDepth:function(t,e){return t.depth>e.depth?1:-1},zoomScrollbar:function(){var t=this.chartScrollbar,e=this.categoryAxis;t&&this.updateScrollbar&&(e.parseDates&&!e.equalSpacing?t.timeZoom(this.startTime,this.endTime):t.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var t,e=this.trendLines;for(t=0;t<e.length;t++){var i=e[t];i.chart=this,i.valueAxis||(i.valueAxis=this.valueAxes[0]),i.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var t,e=this.valueAxes;for(t=0;t<e.length;t++)e[t].zoom(this.start,this.end);for(e=this.graphs,t=0;t<e.length;t++)e[t].zoom(this.start,this.end);this.zoomTrendLines(),(t=this.chartCursor)&&t.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var t,e,i,n,s=0,o=this.valueAxes.length,r=this.graphs.length,a=!1;for(n=0;o>n;n++){e=this.valueAxes[n];var l=e.stackType;if("100%"==l||"regular"==l)for(a=!1,i=0;r>i;i++)t=this.graphs[i],t.hidden||t.valueAxis!=e||"column"!=t.type||(!a&&t.stackable&&(s++,a=!0),!t.stackable&&t.clustered&&s++,t.columnIndex=s-1,t.clustered||(t.columnIndex=0));if("none"==l||"3d"==l)for(i=0;r>i;i++)t=this.graphs[i],!t.hidden&&t.valueAxis==e&&"column"==t.type&&t.clustered&&(t.columnIndex=s,s++);if("3d"==l){for(n=0;r>n;n++)t=this.graphs[n],t.depthCount=s;s=1}}return s},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this),this.parseSerialData()},getCategoryIndexByValue:function(t){var e,i,n=this.chartData;for(i=0;i<n.length;i++)n[i].category==t&&(e=i);return e},handleCursorChange:function(t){this.updateLegendValues(t.index)},handleCursorZoom:function(t){this.updateScrollbar=!0,this.zoom(t.start,t.end)},handleScrollbarZoom:function(t){this.updateScrollbar=!1,this.zoom(t.start,t.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var t={type:"zoomed"};t.startDate=new Date(this.startTime),t.endDate=new Date(this.endTime),t.startIndex=this.start,t.endIndex=this.end,this.startIndex=this.start,this.endIndex=this.end,this.startDate=t.startDate,this.endDate=t.endDate,this.prevStartTime=this.startTime,this.prevEndTime=this.endTime;var e=this.categoryAxis,i=AmCharts.extractPeriod(e.minPeriod).period,e=e.dateFormatsObject[i];t.startValue=AmCharts.formatDate(t.startDate,e),t.endValue=AmCharts.formatDate(t.endDate,e),t.chart=this,t.target=this,this.fire(t.type,t)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start,this.endIndex=this.end;var t=this.chartData;if(AmCharts.ifArray(t)&&!isNaN(this.start)&&!isNaN(this.end)){var e={chart:this,target:this,type:"zoomed"};e.startIndex=this.start,e.endIndex=this.end,e.startValue=t[this.start].category,e.endValue=t[this.end].category,this.categoryAxis.parseDates&&(this.startTime=t[this.start].time,this.endTime=t[this.end].time,e.startDate=new Date(this.startTime),e.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(e.type,e)}}},updateLegendValues:function(t){var e,i=this.graphs;for(e=0;e<i.length;e++){var n=i[e];n.currentDataItem=isNaN(t)?void 0:this.chartData[t].axes[n.valueAxis.id].graphs[n.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(t,e,i,n,s,o){0>s&&(s=0),o>t.length-1&&(o=t.length-1);var r=s+Math.round((o-s)/2),a=t[r][e];return 1>=o-s?n?s:(n=t[o][e],Math.abs(t[s][e]-i)<Math.abs(n-i)?s:o):i==a?r:a>i?this.getClosestIndex(t,e,i,n,s,r):this.getClosestIndex(t,e,i,n,r,o)},zoomToIndexes:function(t,e){this.updateScrollbar=!0;var i=this.chartData;if(i){var n=i.length;n>0&&(0>t&&(t=0),e>n-1&&(e=n-1),n=this.categoryAxis,n.parseDates&&!n.equalSpacing?this.zoom(i[t].time,this.getEndTime(i[e].time)):this.zoom(t,e))}},zoomToDates:function(t,e){this.updateScrollbar=!0;var i=this.chartData;if(this.categoryAxis.equalSpacing){var n=this.getClosestIndex(i,"time",t.getTime(),!0,0,i.length),i=this.getClosestIndex(i,"time",e.getTime(),!1,0,i.length);this.zoom(n,i)}else this.zoom(t.getTime(),e.getTime())},zoomToCategoryValues:function(t,e){this.updateScrollbar=!0,this.zoom(this.getCategoryIndexByValue(t),this.getCategoryIndexByValue(e))},formatPeriodString:function(t,e){if(e){var i=["value","open","low","high","close"],n="value open low high close average sum count".split(" "),s=e.valueAxis,o=this.chartData,r=e.numberFormatter;r||(r=this.numberFormatter);for(var a=0;a<i.length;a++){for(var l,h,c,u,d,p,f,m,g,v,_=i[a],y=0,b=0,w=0,C=0,x=this.start;x<=this.end;x++){var T=o[x];if(T&&(T=T.axes[s.id].graphs[e.id])){if(T.values){var A=T.values[_];isNaN(A)||(isNaN(l)&&(l=A),h=A,(isNaN(c)||c>A)&&(c=A),(isNaN(u)||A>u)&&(u=A),y+=A,b++,d=y/b)}T.percents&&(T=T.percents[_],!isNaN(T))&&(isNaN(p)&&(p=T),f=T,(isNaN(m)||m>T)&&(m=T),(isNaN(g)||T>g)&&(g=T),w+=T,C++,v=w/C)}}w={open:p,close:f,high:g,low:m,average:v,sum:w,count:C},t=AmCharts.formatValue(t,{open:l,close:h,high:u,low:c,average:d,sum:y,count:b},n,r,_+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),t=AmCharts.formatValue(t,w,n,this.percentFormatter,"percents\\."+_+"\\.")}}return t},formatString:function(t,e){var i=e.graph;if(-1!=t.indexOf("[[category]]")){var n=e.serialDataItem.category;if(this.categoryAxis.parseDates){var s=this.balloonDateFormat,o=this.chartCursor;o&&(s=o.categoryBalloonDateFormat),-1!=t.indexOf("[[category]]")&&(s=AmCharts.formatDate(n,s),-1!=s.indexOf("fff")&&(s=AmCharts.formatMilliseconds(s,n)),n=s)}t=t.replace(/\[\[category\]\]/g,String(n))}return i=i.numberFormatter,i||(i=this.numberFormatter),n=e.graph.valueAxis,(s=n.duration)&&!isNaN(e.values.value)&&(n=AmCharts.formatDuration(e.values.value,s,"",n.durationUnits,n.maxInterval,i),t=t.replace(RegExp("\\[\\[value\\]\\]","g"),n)),n="value open low high close total".split(" "),s=this.percentFormatter,t=AmCharts.formatValue(t,e.percents,n,s,"percents\\."),t=AmCharts.formatValue(t,e.values,n,i,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),t=AmCharts.formatValue(t,e.values,["percents"],s),-1!=t.indexOf("[[")&&(t=AmCharts.formatDataContextValue(t,e.dataContext)),t=AmCharts.AmSerialChart.base.formatString.call(this,t,e)},addChartScrollbar:function(t){AmCharts.callMethod("destroy",[this.chartScrollbar]),t&&(t.chart=this,this.listenTo(t,"zoomed",this.handleScrollbarZoom)),this.rotate?void 0===t.width&&(t.width=t.scrollbarHeight):void 0===t.height&&(t.height=t.scrollbarHeight),this.chartScrollbar=t},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]),this.chartScrollbar=null},handleReleaseOutside:function(t){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,t),AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}}),AmCharts.Cuboid=AmCharts.Class({construct:function(t,e,i,n,s,o,r,a,l,h,c,u,d,p,f){this.set=t.set(),this.container=t,this.h=Math.round(i),this.w=Math.round(e),this.dx=n,this.dy=s,this.colors=o,this.alpha=r,this.bwidth=a,this.bcolor=l,this.balpha=h,this.colors=o,this.dashLength=p,this.pattern=f,d?0>e&&0===c&&(c=180):0>i&&270==c&&(c=90),this.gradientRotation=c,0===n&&0===s&&(this.cornerRadius=u),this.draw()},draw:function(){var t=this.set;t.clear();var e=this.container,i=this.w,n=this.h,s=this.dx,o=this.dy,r=this.colors,a=this.alpha,l=this.bwidth,h=this.bcolor,c=this.balpha,u=this.gradientRotation,d=this.cornerRadius,p=this.dashLength,f=this.pattern,m=r,g=r;"object"==typeof r&&(m=r[0],g=r[r.length-1]);var v,_,y,b,w,C,x,T,A;for((s>0||o>0)&&(x=g,g=AmCharts.adjustLuminosity(m,-.2),g=AmCharts.adjustLuminosity(m,-.2),v=AmCharts.polygon(e,[0,s,i+s,i,0],[0,o,o,0,0],g,a,1,h,0,u),c>0&&(A=AmCharts.line(e,[0,s,i+s],[0,o,o],h,c,l,p)),_=AmCharts.polygon(e,[0,0,i,i,0],[0,n,n,0,0],g,a,1,h,0,u),_.translate(s,o),c>0&&(y=AmCharts.line(e,[s,s],[o,o+n],h,1,l,p)),b=AmCharts.polygon(e,[0,0,s,s,0],[0,n,n+o,o,0],g,a,1,h,0,u),w=AmCharts.polygon(e,[i,i,i+s,i+s,i],[0,n,n+o,o,0],g,a,1,h,0,u),c>0&&(C=AmCharts.line(e,[i,i+s,i+s,i],[0,o,n+o,n],h,c,l,p)),g=AmCharts.adjustLuminosity(x,.2),x=AmCharts.polygon(e,[0,s,i+s,i,0],[n,n+o,n+o,n,n],g,a,1,h,0,u),c>0&&(T=AmCharts.line(e,[0,s,i+s],[n,n+o,n+o],h,c,l,p))),1>Math.abs(n)&&(n=0),1>Math.abs(i)&&(i=0),e=0===n?AmCharts.line(e,[0,i],[0,0],h,c,l,p):0===i?AmCharts.line(e,[0,0],[0,n],h,c,l,p):d>0?AmCharts.rect(e,i,n,r,a,l,h,c,d,u,p):AmCharts.polygon(e,[0,0,i,i,0],[0,n,n,0,0],r,a,l,h,c,u,!1,p),n=0>n?[v,A,_,y,b,w,C,x,T,e]:[x,T,_,y,b,w,v,A,C,e],v=0;v<n.length;v++)(_=n[v])&&t.push(_);f&&e.pattern(f)},width:function(t){this.w=t,this.draw()},height:function(t){this.h=t,this.draw()},animateHeight:function(t,e){var i=this;i.easing=e,i.totalFrames=1e3*t/AmCharts.updateRate,i.rh=i.h,i.frame=0,i.height(1),setTimeout(function(){i.updateHeight.call(i)},AmCharts.updateRate)},updateHeight:function(){var t=this;t.frame++;var e=t.totalFrames;t.frame<=e&&(e=t.easing(0,t.frame,1,t.rh-1,e),t.height(e),setTimeout(function(){t.updateHeight.call(t)},AmCharts.updateRate))},animateWidth:function(t,e){var i=this;i.easing=e,i.totalFrames=1e3*t/AmCharts.updateRate,i.rw=i.w,i.frame=0,i.width(1),setTimeout(function(){i.updateWidth.call(i)},AmCharts.updateRate)},updateWidth:function(){var t=this;
t.frame++;var e=t.totalFrames;t.frame<=e&&(e=t.easing(0,t.frame,1,t.rw-1,e),t.width(e),setTimeout(function(){t.updateWidth.call(t)},AmCharts.updateRate))}}),AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(){AmCharts.CategoryAxis.base.construct.call(this),this.minPeriod="DD",this.equalSpacing=this.parseDates=!1,this.position="bottom",this.startOnAxis=!1,this.firstDayOfWeek=1,this.gridPosition="middle",this.markPeriodChange=this.boldPeriodBeginning=!0,this.safeDistance=30,this.centerLabelOnFullPeriod=!0,this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={},this.nextPeriod.fff="ss",this.nextPeriod.ss="mm",this.nextPeriod.mm="hh",this.nextPeriod.hh="DD",this.nextPeriod.DD="MM",this.nextPeriod.MM="YYYY"},draw:function(){AmCharts.CategoryAxis.base.draw.call(this),this.generateDFObject();var t=this.chart.chartData;if(this.data=t,AmCharts.ifArray(t)){var e,i=this.chart,n=this.start,s=this.labelFrequency,o=0;e=this.end-n+1;var r,a=this.gridCount,l=this.showFirstLabel,h=this.showLastLabel,c="",u=AmCharts.extractPeriod(this.minPeriod);r=AmCharts.getPeriodDuration(u.period,u.count);var d,p,f,m,g;d=this.rotate;var v,_=this.firstDayOfWeek,y=this.boldPeriodBeginning,t=AmCharts.resetDateToMin(new Date(t[t.length-1].time+1.05*r),this.minPeriod,1,_).getTime();this.endTime>t&&(this.endTime=t),v=this.minorGridEnabled;var b,w,t=this.gridAlpha;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime,n=this.choosePeriod(0),s=n.period,d=n.count,p=AmCharts.getPeriodDuration(s,d),r>p&&(s=u.period,d=u.count,p=r),f=s,"WW"==f&&(f="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var a=Math.ceil(this.timeDifference/p)+5,C=c=AmCharts.resetDateToMin(new Date(this.startTime-p),s,d,_).getTime();f==s&&1==d&&this.centerLabelOnFullPeriod&&(m=p*this.stepWidth),this.cellWidth=r*this.stepWidth,e=Math.round(c/p),n=-1,e/2==Math.round(e/2)&&(n=-2,c-=p);var x=i.firstTime,T=0;if(v&&d>1&&(b=this.chooseMinorFrequency(d),w=AmCharts.getPeriodDuration(s,b)),0<this.gridCount)for(e=n;a>=e;e++){if(u=x+p*(e+Math.floor((C-x)/p))-T,u=AmCharts.resetDateToMin(new Date(u),s,d,_).getTime(),"MM"==s&&(v=(u-c)/p,(u-c)/p>=1.5&&(u-=(v-1)*p,T+=p)),r=(u-this.startTime)*this.stepWidth,g=!1,this.nextPeriod[f]&&(g=this.checkPeriodChange(this.nextPeriod[f],1,u,c)),v=!1,g&&this.markPeriodChange?(c=this.dateFormatsObject[this.nextPeriod[f]],v=!0):c=this.dateFormatsObject[f],y||(v=!1),c=AmCharts.formatDate(new Date(u),c),(e==n&&!l||e==a&&!h)&&(c=" "),this.labelFunction&&(c=this.labelFunction(c,new Date(u),this)),c=new this.axisItemRenderer(this,r,c,!1,m,0,!1,v),this.pushAxisItem(c),c=u,!isNaN(b))for(r=1;d>r;r+=b)this.gridAlpha=this.minorGridAlpha,v=u+w*r,v=AmCharts.resetDateToMin(new Date(v),s,b,_).getTime(),v=new this.axisItemRenderer(this,(v-this.startTime)*this.stepWidth),this.pushAxisItem(v);this.gridAlpha=t}}else if(this.parseDates){if(this.parseDates&&this.equalSpacing){if(o=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,n=this.choosePeriod(0),s=n.period,d=n.count,p=AmCharts.getPeriodDuration(s,d),r>p&&(s=u.period,d=u.count,p=r),f=s,"WW"==f&&(f="DD"),this.stepWidth=this.getStepWidth(e),a=Math.ceil(this.timeDifference/p)+1,c=AmCharts.resetDateToMin(new Date(this.startTime-p),s,d,_).getTime(),this.cellWidth=this.getStepWidth(e),e=Math.round(c/p),n=-1,e/2==Math.round(e/2)&&(n=-2,c-=p),r=this.start,r/2==Math.round(r/2)&&r--,0>r&&(r=0),m=this.end+2,m>=this.data.length&&(m=this.data.length),w=!1,w=!l,this.previousPos=-1e3,20<this.labelRotation&&(this.safeDistance=5),p=r,this.data[r].time!=AmCharts.resetDateToMin(new Date(this.data[r].time),s,d,_).getTime())for(_=0,x=c,e=r;m>e;e++)u=this.data[e].time,this.checkPeriodChange(s,d,u,x)&&(_++,_>=2&&(p=e,e=m),x=u);for(v&&d>1&&(b=this.chooseMinorFrequency(d),AmCharts.getPeriodDuration(s,b)),e=r;m>e;e++)u=this.data[e].time,this.checkPeriodChange(s,d,u,c)&&e>=p?(r=this.getCoordinate(e-this.start),g=!1,this.nextPeriod[f]&&(g=this.checkPeriodChange(this.nextPeriod[f],1,u,c)),v=!1,g&&this.markPeriodChange?(c=this.dateFormatsObject[this.nextPeriod[f]],v=!0):c=this.dateFormatsObject[f],c=AmCharts.formatDate(new Date(u),c),(e==n&&!l||e==a&&!h)&&(c=" "),w?w=!1:(y||(v=!1),r-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(c=this.labelFunction(c,new Date(u),this)),c=new this.axisItemRenderer(this,r,c,void 0,void 0,void 0,void 0,v),_=c.graphics(),this.pushAxisItem(c),_=_.getBBox().width,AmCharts.isModern||(_-=r),this.previousPos=r+_)),c=u):isNaN(b)||(this.checkPeriodChange(s,b,u,C)&&(this.gridAlpha=this.minorGridAlpha,r=this.getCoordinate(e-this.start),v=new this.axisItemRenderer(this,r),this.pushAxisItem(v),C=u),this.gridAlpha=t)}}else if(this.cellWidth=this.getStepWidth(e),a>e&&(a=e),o+=this.start,this.stepWidth=this.getStepWidth(e),a>0)for(y=Math.floor(e/a),b=this.chooseMinorFrequency(y),r=o,r/2==Math.round(r/2)&&r--,0>r&&(r=0),a=0,e=r;e<=this.end+2;e++){if(_=!1,e>=0&&e<this.data.length?(f=this.data[e],c=f.category,_=f.forceShow):c="",v&&!isNaN(b)){if(e/b!=Math.round(e/b)&&!_)continue;e/y==Math.round(e/y)||_||(this.gridAlpha=this.minorGridAlpha,c=void 0)}else if(e/y!=Math.round(e/y)&&!_)continue;r=this.getCoordinate(e-o),_=0,"start"==this.gridPosition&&(r-=this.cellWidth/2,_=this.cellWidth/2),(e==n&&!l||e==this.end&&!h)&&(c=void 0),Math.round(a/s)!=a/s&&(c=void 0),a++,C=this.cellWidth,d&&(C=0/0),this.labelFunction&&f&&(c=this.labelFunction(c,f,this)),c=AmCharts.fixNewLines(c),c=new this.axisItemRenderer(this,r,c,!0,C,_,void 0,!1,_),this.pushAxisItem(c),this.gridAlpha=t}for(e=0;e<this.data.length;e++)(l=this.data[e])&&(h=this.parseDates&&!this.equalSpacing?Math.round((l.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(e-o),l.x[this.id]=h);for(l=this.guides.length,e=0;l>e;e++)h=this.guides[e],y=y=y=t=n=0/0,b=h.above,h.toCategory&&(y=i.getCategoryIndexByValue(h.toCategory),isNaN(y)||(n=this.getCoordinate(y-o),c=new this.axisItemRenderer(this,n,"",!0,0/0,0/0,h),this.pushAxisItem(c,b))),h.category&&(y=i.getCategoryIndexByValue(h.category),isNaN(y)||(t=this.getCoordinate(y-o),y=(n-t)/2,c=new this.axisItemRenderer(this,t,h.label,!0,0/0,y,h),this.pushAxisItem(c,b))),h.toDate&&(this.equalSpacing?(y=i.getClosestIndex(this.data,"time",h.toDate.getTime(),!1,0,this.data.length-1),isNaN(y)||(n=this.getCoordinate(y-o))):n=(h.toDate.getTime()-this.startTime)*this.stepWidth,c=new this.axisItemRenderer(this,n,"",!0,0/0,0/0,h),this.pushAxisItem(c,b)),h.date&&(this.equalSpacing?(y=i.getClosestIndex(this.data,"time",h.date.getTime(),!1,0,this.data.length-1),isNaN(y)||(t=this.getCoordinate(y-o))):t=(h.date.getTime()-this.startTime)*this.stepWidth,y=(n-t)/2,c="H"==this.orientation?new this.axisItemRenderer(this,t,h.label,!1,2*y,0/0,h):new this.axisItemRenderer(this,t,h.label,!1,0/0,y,h),this.pushAxisItem(c,b)),n=new this.guideFillRenderer(this,t,n,h),t=n.graphics(),this.pushAxisItem(n,b),h.graphics=t,t.index=e,h.balloonText&&this.addEventListeners(t,h)}this.axisCreated=!0,i=this.x,o=this.y,this.set.translate(i,o),this.labelsSet.translate(i,o),this.positionTitle(),(i=this.axisLine.set)&&i.toFront()},chooseMinorFrequency:function(t){for(var e=10;e>0;e--)if(t/e==Math.round(t/e))return t/e},choosePeriod:function(t){var e=AmCharts.getPeriodDuration(this.periods[t].period,this.periods[t].count),i=Math.ceil(this.timeDifference/e),n=this.periods;return this.timeDifference<e&&t>0?n[t-1]:i<=this.gridCount?n[t]:t+1<n.length?this.choosePeriod(t+1):n[t]},getStepWidth:function(t){var e;return this.startOnAxis?(e=this.axisWidth/(t-1),1==t&&(e=this.axisWidth)):e=this.axisWidth/t,e},getCoordinate:function(t){return t*=this.stepWidth,this.startOnAxis||(t+=this.stepWidth/2),Math.round(t)},timeZoom:function(t,e){this.startTime=t,this.endTime=e},minDuration:function(){var t=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(t.period,t.count)},checkPeriodChange:function(t,e,i,n){i=new Date(i);var s=new Date(n),o=this.firstDayOfWeek;return n=e,"DD"==t&&(e=1),i=AmCharts.resetDateToMin(i,t,e,o).getTime(),e=AmCharts.resetDateToMin(s,t,e,o).getTime(),"DD"==t&&i-e<=AmCharts.getPeriodDuration(t,n)?!1:i!=e?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var t;for(t=0;t<this.dateFormats.length;t++){var e=this.dateFormats[t];this.dateFormatsObject[e.period]=e.format}},xToIndex:function(t){var e=this.data,i=this.chart,n=i.rotate,s=this.stepWidth;this.parseDates&&!this.equalSpacing?(t=this.startTime+Math.round(t/s)-this.minDuration()/2,i=i.getClosestIndex(e,"time",t,!1,this.start,this.end+1)):(this.startOnAxis||(t-=s/2),i=this.start+Math.round(t/s));var o,i=AmCharts.fitToBounds(i,0,e.length-1);return e[i]&&(o=e[i].x[this.id]),n?o>this.height+1&&i--:o>this.width+1&&i--,0>o&&i++,i=AmCharts.fitToBounds(i,0,e.length-1)},dateToCoordinate:function(t){return this.parseDates&&!this.equalSpacing?(t.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(t=this.chart.getClosestIndex(this.data,"time",t.getTime(),!1,0,this.data.length-1),this.getCoordinate(t-this.start)):0/0},categoryToCoordinate:function(t){return this.chart?(t=this.chart.getCategoryIndexByValue(t),this.getCoordinate(t-this.start)):0/0},coordinateToDate:function(t){return this.equalSpacing?(t=this.xToIndex(t),new Date(this.data[t].time)):new Date(this.startTime+t/this.stepWidth)}}),function(t,e,i){function n(i,o){if(!e[i]){if(!t[i]){var r="function"==typeof require&&require;if(!o&&r)return r(i,!0);if(s)return s(i,!0);throw Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var s=t[i][1][e];return n(s?s:e)},a,a.exports)}return e[i].exports}for(var s="function"==typeof require&&require,o=0;i.length>o;o++)n(i[o]);return n}({1:[function(t){t("./leaflet"),t("./mapbox")},{"./leaflet":2,"./mapbox":3}],2:[function(t){window.L=t("leaflet/dist/leaflet-src")},{"leaflet/dist/leaflet-src":4}],5:[function(t,e){e.exports={author:"MapBox",name:"mapbox.js",description:"mapbox javascript api",version:"1.3.1",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"index.js",dependencies:{leaflet:"0.6.2",mustache:"~0.7.2",corslite:"0.0.3",json3:"~3.2.5"},scripts:{test:"mocha-phantomjs test/index.html"},devDependencies:{"leaflet-hash":"git://github.com/mlevans/leaflet-hash.git#b039a3aa4e2492a5c7448075172ac26769e601d6","leaflet-fullscreen":"0.0.0","uglify-js":"~2.2.5",mocha:"~1.9","expect.js":"~0.2.0",sinon:"~1.7.3","mocha-phantomjs":"~1.1.1",happen:"~0.1.2",browserify:"~2.22.0"},optionalDependencies:{},engines:{node:"*"}}},{}],6:[function(t,e){"use strict";e.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],4:[function(t,e){!function(){!function(t,i,n){var s=t.L,o={};o.version="0.6.2","object"==typeof e&&"object"==typeof e.exports?e.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=s,this},t.L=o,o.Util={extend:function(t){var e,i,n,s,o=Array.prototype.slice.call(arguments,1);for(i=0,n=o.length;n>i;i++){s=o[i]||{};for(e in s)s.hasOwnProperty(e)&&(t[e]=s[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,e,i){var n,s;if("object"==typeof t){s=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(s));return!0}return!1},limitExecByInterval:function(t,e,i){var s,o;return function r(){var a=arguments;return s?(o=!0,n):(s=!0,setTimeout(function(){s=!1,o&&(r.apply(i,a),o=!1)},e),t.apply(i,a),n)}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var s in t)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,i){var s=e[i];if(s===n)throw Error("No value provided for variable "+t);return"function"==typeof s&&(s=s(e)),s})},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,s=["webkit","moz","o","ms"];for(i=0;s.length>i&&!n;i++)n=t[s[i]+e];return n}function i(e){var i=+new Date,n=Math.max(0,16-(i-s));return s=i+n,t.setTimeout(e,n)}var s=0,r=t.requestAnimationFrame||e("RequestAnimationFrame")||i,a=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,s,a,l){return e=o.bind(e,s),a&&r===i?(e(),n):r.call(t,e,l)},o.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var r=this;return e.__super__=r.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){r.prototype.callInitHooks&&r.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var r="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,s,a,l,h,c,u,d=this[r]=this[r]||{},p=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,s=t.length;s>n;n++)a={action:e,context:i||this},l=t[n],i?(h=l+"_idx",c=h+"_len",u=d[h]=d[h]||{},u[p]||(u[p]=[],d[c]=(d[c]||0)+1),u[p].push(a)):(d[l]=d[l]||[],d[l].push(a));return this},hasEventListeners:function(t){var e=this[r];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[r])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,s,a,l,h,c,u,d,p,f=this[r],m=i&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,s=t.length;s>n;n++)if(a=t[n],c=a+"_idx",u=c+"_len",d=f[c],e){if(l=i&&d?d[m]:f[a]){for(h=l.length-1;h>=0;h--)l[h].action!==e||i&&l[h].context!==i||(p=l.splice(h,1),p[0].action=o.Util.falseFn);i&&d&&0===l.length&&(delete d[m],f[u]--)}}else delete f[a],delete f[c];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,s,a,l,h=o.Util.extend({},e,{type:t,target:this}),c=this[r];if(c[t])for(i=c[t].slice(),n=0,s=i.length;s>n;n++)i[n].action.call(i[n].context||this,h);a=c[t+"_idx"];for(l in a)if(i=a[l].slice())for(n=0,s=i.length;s>n;n++)i[n].action.call(i[n].context||this,h);return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var e=!!t.ActiveXObject,s=e&&!t.XMLHttpRequest,r=e&&!i.querySelector,a=e&&!i.addEventListener,l=navigator.userAgent.toLowerCase(),h=-1!==l.indexOf("webkit"),c=-1!==l.indexOf("chrome"),u=-1!==l.indexOf("phantom"),d=-1!==l.indexOf("android"),p=-1!==l.search("android [23]"),f=typeof orientation!=n+"",m=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints,g="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,v=i.documentElement,_=e&&"transition"in v.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix,b="MozPerspective"in v.style,w="OTransition"in v.style,C=!t.L_DISABLE_3D&&(_||y||b||w)&&!u,x=!t.L_NO_TOUCH&&!u&&function(){var t="ontouchstart";if(m||t in v)return!0;var e=i.createElement("div"),n=!1;return e.setAttribute?(e.setAttribute(t,"return;"),"function"==typeof e[t]&&(n=!0),e.removeAttribute(t),e=null,n):!1}();o.Browser={ie:e,ie6:s,ie7:r,ielt9:a,webkit:h,android:d,android23:p,chrome:c,ie3d:_,webkit3d:y,gecko3d:b,opera3d:w,any3d:C,mobile:f,mobileWebkit:f&&h,mobileWebkit3d:f&&y,mobileOpera:f&&t.opera,touch:x,msTouch:m,retina:g}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,i){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===n||null===t?t:new o.Point(t,e,i)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;s>n;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>=e.x&&n.x<=i.x,a=s.y>=e.y&&n.y<=i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?i.getElementById(t):t},getStyle:function(t,e){var n=t.style[e];if(!n&&t.currentStyle&&(n=t.currentStyle[e]),(!n||"auto"===n)&&i.defaultView){var s=i.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return"auto"===n?null:n},getViewportOffset:function(t){var e,n=0,s=0,r=t,a=i.body,l=i.documentElement,h=o.Browser.ie7;do{if(n+=r.offsetTop||0,s+=r.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(r,"borderTopWidth"),10)||0,s+=parseInt(o.DomUtil.getStyle(r,"borderLeftWidth"),10)||0,e=o.DomUtil.getStyle(r,"position"),r.offsetParent===a&&"absolute"===e)break;if("fixed"===e){n+=a.scrollTop||l.scrollTop||0,s+=a.scrollLeft||l.scrollLeft||0;break}if("relative"===e&&!r.offsetLeft){var c=o.DomUtil.getStyle(r,"width"),u=o.DomUtil.getStyle(r,"max-width"),d=r.getBoundingClientRect();("none"!==c||"none"!==u)&&(s+=d.left+r.clientLeft),n+=d.top+(a.scrollTop||l.scrollTop||0);break}r=r.offsetParent}while(r);r=t;do{if(r===a)break;n-=r.scrollTop||0,s-=r.scrollLeft||0,o.DomUtil.documentIsLtr()||!o.Browser.webkit&&!h||(s+=r.scrollWidth-r.clientWidth,h&&"hidden"!==o.DomUtil.getStyle(r,"overflow-y")&&"hidden"!==o.DomUtil.getStyle(r,"overflow")&&(s+=17)),r=r.parentNode}while(r);return new o.Point(s,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(i.body,"direction")),o.DomUtil._docIsLtr},create:function(t,e,n){var s=i.createElement(t);return s.className=e,n&&n.appendChild(s),s},hasClass:function(t,e){return t.className.length>0&&RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},addClass:function(t,e){o.DomUtil.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,e){t.className=o.Util.trim((" "+t.className+" ").replace(" "+e+" "," "))},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(s){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var e=i.documentElement.style,n=0;t.length>n;n++)if(t[n]in e)return t[n];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d?(t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden")):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){var e=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),n=o.DomUtil.testProp(["userDrag","WebkitUserDrag","OUserDrag","MozUserDrag","msUserDrag"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(e){var n=i.documentElement.style;this._userSelect=n[e],n[e]="none"}else o.DomEvent.on(t,"selectstart",o.DomEvent.stop)},enableTextSelection:function(){e?(i.documentElement.style[e]=this._userSelect,delete this._userSelect):o.DomEvent.off(t,"selectstart",o.DomEvent.stop)},disableImageDrag:function(){if(n){var e=i.documentElement.style;this._userDrag=e[n],e[n]="none"}else o.DomEvent.on(t,"dragstart",o.DomEvent.stop)},enableImageDrag:function(){n?(i.documentElement.style[n]=this._userDrag,delete this._userDrag):o.DomEvent.off(t,"dragstart",o.DomEvent.stop)}})}(),o.LatLng=function(t,e){var i=parseFloat(t),n=parseFloat(e);if(isNaN(i)||isNaN(n))throw Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=i,this.lng=n},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o.LatLng.MAX_MARGIN>=e},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,r=this.lat*i,a=t.lat*i,l=Math.sin(n/2),h=Math.sin(s/2),c=l*l+h*h*Math.cos(r)*Math.cos(a);return 2*e*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?new o.LatLng(t[0],t[1]):t===n||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;s>n;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){return t?(t="number"==typeof t[0]||"string"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this):this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&n.lat<=i.lat,a=s.lng>=e.lng&&n.lng<=i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,r=n*e;return r=Math.log(Math.tan(Math.PI/4+r/2)),new o.Point(s,r)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==n&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this.setView(this.getCenter(),t,{zoom:e})},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=r.subtract(s).multiplyBy(1-1/n),l=this.containerPointToLatLng(s.add(a));return this.setView(l,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n)),r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),s),l=this.project(t.getNorthEast(),s),h=this.unproject(a.add(l).divideBy(2).add(r),s);return this.setView(h,s,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){if(t=o.latLngBounds(t),this.options.maxBounds=t,!t)return this._boundsMinZoom=null,this.off("moveend",this._panInsideMaxBounds,this),this;var e=this.getBoundsZoom(t,!0);return this._boundsMinZoom=e,this._loaded&&(e>this._zoom?this.setView(t.getCenter(),e):this.panInsideBounds(t)),this.on("moveend",this._panInsideMaxBounds,this),this},panInsideBounds:function(t){t=o.latLngBounds(t);var e=this.getPixelBounds(),i=e.getBottomLeft(),n=e.getTopRight(),s=this.project(t.getSouthWest()),r=this.project(t.getNorthEast()),a=0,l=0;return n.y<r.y&&(l=Math.ceil(r.y-n.y)),n.x>r.x&&(a=Math.floor(r.x-n.x)),i.y>s.y&&(l=Math.floor(s.y-i.y)),i.x<s.x&&(a=Math.ceil(s.x-i.x)),a||l?this.panBy([a,l]):this},addLayer:function(t){var e=o.stamp(t);
return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&(t.onRemove(this),this.fire("layerremove",{layer:t})),delete this._layers[e],this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):void 0},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();if(this._sizeChanged=!0,this.options.maxBounds&&this.setMaxBounds(this.options.maxBounds),!this._loaded)return this;var i=this.getSize(),n=e.subtract(i).divideBy(2).round();return n.x||n.y?(t.animate&&t.pan?this.panBy(n):(t.pan&&this._rawPanBy(n),this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(e){var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this}},remove:function(){return this._loaded&&this.fire("unload"),this._initEvents("off"),delete this._container._leaflet,this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._moved()?this.layerPointToLatLng(this._getCenterLayerPoint()):this._initialCenter},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){var t=this.options.minZoom||0,e=this._layersMinZoom||0,i=this._boundsMinZoom||0;return Math.max(t,e,i)},getMaxZoom:function(){var t=this.options.maxZoom===n?1/0:this.options.maxZoom,e=this._layersMaxZoom===n?1/0:this._layersMaxZoom;return Math.min(t,e)},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n,s=this.getMinZoom()-(e?1:0),r=this.getMaxZoom(),a=this.getSize(),l=t.getNorthWest(),h=t.getSouthEast(),c=!0;i=o.point(i||[0,0]);do s++,n=this.project(h,s).subtract(this.project(l,s)).add(i),c=e?n.x<a.x||n.y<a.y:a.contains(n);while(c&&r>=s);return c&&e?null:e?s:s-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===n?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===n?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw Error("Map container not found.");if(e._leaflet)throw Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var s=this._zoom!==e;n||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var r=!this._loaded;this._loaded=!0,r&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("viewreset",{hard:!i}),this.fire("move"),(s||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,i=-1/0,s=this._getZoomSpan();for(t in this._zoomBoundLayers){var o=this._zoomBoundLayers[t];isNaN(o.options.minZoom)||(e=Math.min(e,o.options.minZoom)),isNaN(o.options.maxZoom)||(i=Math.max(i,o.options.maxZoom))}t===n?this._layersMaxZoom=this._layersMinZoom=n:(this._layersMaxZoom=i,this._layersMinZoom=e),s!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,s=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=s.length;n>i;i++)o.DomEvent[e](this._container,s[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(this.invalidateSize,this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&this.dragging&&this.dragging.moved()||t._leaflet_stop||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!t._leaflet_stop){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(n);this.fire(e,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,r=this.R_MINOR,a=t.lng*e*s,l=n*e,h=r/s,c=Math.sqrt(1-h*h),u=c*Math.sin(l);u=Math.pow((1-u)/(1+u),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/u;return l=-s*Math.log(d),new o.Point(a,l)},unproject:function(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,s=this.R_MINOR,r=t.x*i/n,a=s/n,l=Math.sqrt(1-a*a),h=Math.exp(-t.y/n),c=Math.PI/2-2*Math.atan(h),u=15,d=1e-7,p=u,f=.1;Math.abs(f)>d&&--p>0;)e=l*Math.sin(c),f=Math.PI/2-2*Math.atan(h*Math.pow((1-e)/(1+e),.5*l))-c,c+=f;return new o.LatLng(c*i,r)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=t.R_MINOR;return new o.Transformation(.5/(Math.PI*e),.5,-.5/(Math.PI*i),.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),this._createTileProto(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==n&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,s,o=t.children,r=-e(1/0,-1/0);for(n=0,s=o.length;s>n;n++)o[n]!==this._container&&(i=parseInt(o[n].style.zIndex,10),isNaN(i)||(r=e(r,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container leaflet-zoom-animated";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),1>this.options.opacity&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_update:function(){if(this._map){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=this.options.tileSize;if(!(e>this.options.maxZoom||this.options.minZoom>e)){var n=o.bounds(t.min.divideBy(i)._floor(),t.max.divideBy(i)._floor());this._addTilesFromCenterOut(n),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(n)}}},_addTilesFromCenterOut:function(t){var e,n,s,r=[],a=t.getCenter();for(e=t.min.y;t.max.y>=e;e++)for(n=t.min.x;t.max.x>=n;n++)s=new o.Point(n,e),this._tileShouldBeLoaded(s)&&r.push(s);var l=r.length;if(0!==l){r.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)});var h=i.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;l>n;n++)this._addTile(r[n],h);this._tileContainer.appendChild(h)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(0>t.x||t.x>=i)||0>t.y||t.y>=i)return!1}if(e.bounds){var n=e.tileSize,s=t.multiplyBy(n),o=s.add([n,n]),r=this._map.unproject(s),a=this._map.unproject(o);if(e.continuousWorld||e.noWrap||(r=r.wrap(),a=a.wrap()),!e.bounds.intersects([r,a]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,s;for(s in this._tiles)e=s.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(t.min.x>i||i>t.max.x||t.min.y>n||n>t.max.y)&&this._removeTile(s)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome||o.Browser.android23),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+t.zoomOffset},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this.options.tileSize;return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){return Math.pow(2,this._getZoomForUrl())},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e+e)%e),this.options.tms&&(t.y=e-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_createTileProto:function(){var t=this._tileImg=o.DomUtil.create("img","leaflet-tile");t.style.width=t.style.height=this.options.tileSize+"px",t.galleryimg="no"},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=this._tileImg.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==n&&o.DomUtil.setOpacity(t,this.options.opacity),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e)},_tileLoaded:function(){this._tilesToLoad--,this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;i.width=i.height=e.detectRetina&&o.Browser.retina?2*n:n;for(var s in e)this.options.hasOwnProperty(s)||"crs"===s||(i[s]=e[s]);this.wmsParams=i,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs;var e=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t,e){var i=this._map,n=this.options.tileSize,s=t.multiplyBy(n),r=s.add([n,n]),a=this._crs.project(i.unproject(s,e)),l=this._crs.project(i.unproject(r,e)),h=[a.x,l.y,l.x,a.y].join(","),c=o.Util.template(this._url,{s:this._getSubdomain(t)});return c+o.Util.getParamString(this.wmsParams,c,!0)+"&BBOX="+h},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTileProto:function(){var t=this._canvasProto=o.DomUtil.create("canvas","leaflet-tile");t.width=t.height=this.options.tileSize},_createTile:function(){var t=this._canvasProto.cloneNode(!1);return t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),r=this._bounds.getSouthEast(),a=e._latLngToNewLayerPoint(s,t.zoom,t.center),l=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),h=a._add(l._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(h)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,s=o.point(n[e+"Size"]);i="shadow"===e?o.point(n.shadowAnchor||n.iconAnchor):o.point(n.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,e){return o.Browser.ie6?(e||(e=i.createElement("div")),e.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'")'):(e||(e=i.createElement("img")),e.src=t),e},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,e,n,s,o,r=i.getElementsByTagName("script"),a=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=r.length;e>t;t++)if(n=r[t].src,s=n.match(a))return o=n.split(a)[0],(o?o+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=t.icon.createIcon(this._icon),r=!1;s!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(s.title=t.title)),o.DomUtil.addClass(s,n),t.keyboard&&(s.tabIndex="0"),this._icon=s,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(s,"mouseover",this._bringToFront,this).on(s,"mouseout",this._resetZIndex,this);var a=t.icon.createShadow(this._shadow),l=!1;a!==this._shadow&&(this._removeShadow(),l=!0,a&&o.DomUtil.addClass(a,n)),this._shadow=a,1>t.opacity&&this._updateOpacity();var h=this._map._panes;r&&h.markerPane.appendChild(this._icon),a&&l&&h.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;e.length>i;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){this.options.opacity=t,this._map&&this._updateOpacity()},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:i.createElement("div"),n=this.options;return e.innerHTML=n.html!==!1?n.html:"",n.bgPos&&(e.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,maxHeight:null,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout(),this._updateContent();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this._update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},setLatLng:function(t){return this._latlng=o.latLng(t),this._update(),this},setContent:function(t){return this._content=t,this._update(),this},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",n);o.DomEvent.disableClickPropagation(s),this._contentNode=o.DomUtil.create("div",e+"-content",s),o.DomEvent.on(this._contentNode,"mousewheel",o.DomEvent.stopPropagation),o.DomEvent.on(s,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",n),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,r)):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),r=o.point(this.options.autoPanPadding),a=t.getSize(),l=0,h=0;s.x+i>a.x&&(l=s.x+i-a.x+r.x),0>s.x-l&&(l=s.x-r.x),s.y+e>a.y&&(h=s.y+e-a.y+r.y),0>s.y-h&&(h=s.y-r.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;
t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offset:i},e),this._popup||this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup).off("remove",this.closePopup).off("move",this._movePopup)),this},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:(t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t.layer||(t.layer=t.target),t.target=this,this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:o.Browser.mobile?Math.max(0,Math.min(.5,(1280/Math.max(t.innerWidth,t.innerHeight)-1)/2)):.5},options:{stroke:!0,color:"#0033ff",dashArray:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(n,s)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!i.createElementNS||!i.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return i.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray")):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&this._path.setAttribute("class","leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;t.length>e;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(n);this.fire(t.type,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(this._pathRoot.setAttribute("class"," leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):this._pathRoot.setAttribute("class"," leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,s=i.y-e.y,r=this._pathRoot,a=this._panes.overlayPane;o.Browser.mobileWebkit&&a.removeChild(r),o.DomUtil.setPosition(r,e),r.setAttribute("width",n),r.setAttribute("height",s),r.setAttribute("viewBox",[e.x,e.y,n,s].join(" ")),o.Browser.mobileWebkit&&a.appendChild(r)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=i.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return i.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return i.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return i.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?i.dashArray instanceof Array?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):""):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=i.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!i.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,n,s,r;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,n=this._parts[t].length;n>e;e++)s=this._parts[t][e],r=(0===e?"move":"line")+"To",this._ctx[r](s.x,s.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,e=this._pathRoot;e||(e=this._pathRoot=i.createElement("canvas"),e.style.position="absolute",t=this._canvasCtx=e.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(e),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,s=typeof Uint8Array!=n+""?Uint8Array:Array,o=new s(i);o[0]=o[i-1]=1,this._simplifyDPStep(t,o,e,0,i-1);var r,a=[];for(r=0;i>r;r++)o[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,i,n,s){var o,r,a,l=0;for(r=n+1;s-1>=r;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[s],!0),a>l&&(o=r,l=a);l>i&&(e[o]=1,this._simplifyDPStep(t,e,i,n,o),this._simplifyDPStep(t,e,i,o,s))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,s=0,o=t.length;o>n;n++)this._sqDist(t[n],t[s])>e&&(i.push(t[n]),s=n);return o-1>s&&i.push(t[o-1]),i},clipSegment:function(t,e,i,n){var s,o,r,a=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(a|l))return[t,e];if(a&l)return!1;s=a||l,o=this._getEdgeIntersection(t,e,s,i),r=this._getBitCode(o,i),s===a?(t=o,a=r):(e=o,l=r)}},_getEdgeIntersection:function(t,e,i,s){var r=e.x-t.x,a=e.y-t.y,l=s.min,h=s.max;return 8&i?new o.Point(t.x+r*(h.y-t.y)/a,h.y):4&i?new o.Point(t.x+r*(l.y-t.y)/a,l.y):2&i?new o.Point(h.x,t.y+a*(h.x-t.x)/r):1&i?new o.Point(l.x,t.y+a*(l.x-t.x)/r):n},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,r=e.x,a=e.y,l=i.x-r,h=i.y-a,c=l*l+h*h;return c>0&&(s=((t.x-r)*l+(t.y-a)*h)/c,s>1?(r=i.x,a=i.y):s>0&&(r+=l*s,a+=h*s)),l=t.x-r,h=t.y-a,n?l*l+h*h:new o.Point(r,a)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,s=this._parts,r=null,a=0,l=s.length;l>a;a++)for(var h=s[a],c=1,u=h.length;u>c;c++){e=h[c-1],i=h[c];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);n>d&&(n=d,r=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,s=e?t:[];for(i=0,n=t.length;n>i;i++){if(o.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;s[i]=o.latLng(t[i])}return s},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=o.Path.VML,n=0,s=t.length,r="";s>n;n++)e=t[n],i&&e._round(),r+=(n?"L":"M")+e.x+" "+e.y;return r},_clipPoints:function(){var t,e,i,s=this._originalPoints,r=s.length;if(this.options.noClip)return this._parts=[s],n;this._parts=[];var a=this._parts,l=this._map._pathViewport,h=o.LineUtil;for(t=0,e=0;r-1>t;t++)i=h.clipSegment(s[t],s[t+1],l,t),i&&(a[e]=a[e]||[],a[e].push(i[0]),(i[1]!==s[t+1]||t===r-2)&&(a[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;n>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,s,r,a,l,h,c,u,d=[1,4,2,8],p=o.LineUtil;for(n=0,h=t.length;h>n;n++)t[n]._code=p._getBitCode(t[n],e);for(r=0;4>r;r++){for(c=d[r],i=[],n=0,h=t.length,s=h-1;h>n;s=n++)a=t[n],l=t[s],a._code&c?l._code&c||(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),i.push(u)):(l._code&c&&(u=p._getEdgeIntersection(l,a,c,e),u._code=p._getBitCode(u,e),i.push(u)),i.push(a));t=i}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){var i,n,s;if(o.Polyline.prototype.initialize.call(this,t,e),t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),i=0,n=this._holes.length;n>i;i++)s=this._holes[i]=this._convertLatLngs(this._holes[i]),s[0].equals(s[s.length-1])&&s.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var s=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=360*(this._mRadius/40075017),i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,"+23592600)},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var i,n,s,r,a,l,h,c=this.options.weight/2;for(o.Browser.touch&&(c+=10),i=0,r=this._parts.length;r>i;i++)for(h=this._parts[i],n=0,a=h.length,s=a-1;a>n;s=n++)if((e||0!==n)&&(l=o.LineUtil.pointToSegmentDistance(t,h[s],h[n]),c>=l))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,i,n,s,r,a,l,h,c=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,l=this._parts.length;l>s;s++)for(e=this._parts[s],r=0,h=e.length,a=h-1;h>r;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n=o.Util.isArray(t)?t:t.features;if(n){for(e=0,i=n.length;i>e;e++)(n[e].geometries||n[e].geometry||n[e].features)&&this.addData(n[e]);return this}var s=this.options;if(!s.filter||s.filter(t)){var r=o.GeoJSON.geometryToLayer(t,s.pointToLayer,s.coordsToLatLng);return r.feature=o.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i){var n,s,r,a,l,h="Feature"===t.type?t.geometry:t,c=h.coordinates,u=[];switch(i=i||this.coordsToLatLng,h.type){case"Point":return n=i(c),e?e(t,n):new o.Marker(n);case"MultiPoint":for(r=0,a=c.length;a>r;r++)n=i(c[r]),l=e?e(t,n):new o.Marker(n),u.push(l);return new o.FeatureGroup(u);case"LineString":return s=this.coordsToLatLngs(c,0,i),new o.Polyline(s);case"Polygon":return s=this.coordsToLatLngs(c,1,i),new o.Polygon(s);case"MultiLineString":return s=this.coordsToLatLngs(c,1,i),new o.MultiPolyline(s);case"MultiPolygon":return s=this.coordsToLatLngs(c,2,i),new o.MultiPolygon(s);case"GeometryCollection":for(r=0,a=h.geometries.length;a>r;r++)l=this.geometryToLayer({geometry:h.geometries[r],type:"Feature",properties:t.properties},e,i),u.push(l);return new o.FeatureGroup(u);default:throw Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0])},coordsToLatLngs:function(t,e,i){var n,s,o,r=[];for(s=0,o=t.length;o>s;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):(i||this.coordsToLatLng)(t[s]),r.push(n);return r},latLngToCoords:function(t){return[t.lng,t.lat]},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t,e){t.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:e,coordinates:t})}})}t(o.MultiPolyline,"MultiLineString"),t(o.MultiPolygon,"MultiPolygon")}(),o.LayerGroup.include({toGeoJSON:function(){var t=[];return this.eachLayer(function(e){e.toGeoJSON&&t.push(o.GeoJSON.asFeature(e.toGeoJSON()))}),{type:"FeatureCollection",features:t}}}),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,i,s){var r,a,l,h=o.stamp(i),c="_leaflet_"+e+h;return t[c]?this:(r=function(e){return i.call(s||t,e||o.DomEvent._getEvent())},o.Browser.msTouch&&0===e.indexOf("touch")?this.addMsTouchListener(t,e,r,h):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,r,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",r,!1),t.addEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?(a=r,l="mouseenter"===e?"mouseover":"mouseout",r=function(e){return o.DomEvent._checkMouse(t,e)?a(e):n},t.addEventListener(l,r,!1)):"click"===e&&o.Browser.android?(a=r,r=function(t){return o.DomEvent._filterClick(t,a)},t.addEventListener(e,r,!1)):t.addEventListener(e,r,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[c]=r,this))},removeListener:function(t,e,i){var n=o.stamp(i),s="_leaflet_"+e+n,r=t[s];return r?(o.Browser.msTouch&&0===e.indexOf("touch")?this.removeMsTouchListener(t,e,n):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",r,!1),t.removeEventListener(e,r,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1):t.removeEventListener(e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i>=0;i--)o.DomEvent.addListener(t,o.Draggable.START[i],e);return o.DomEvent.addListener(t,"click",o.DomEvent._fakeStop).addListener(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){var n=i.body,s=i.documentElement,r=t.pageX?t.pageX:t.clientX+n.scrollLeft+s.scrollLeft,a=t.pageY?t.pageY:t.clientY+n.scrollTop+s.scrollTop,l=new o.Point(r,a);return e?l._subtract(o.DomUtil.getViewportOffset(e)):l},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_fakeStop:function(t){t._leaflet_stop=!0},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,s=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return s&&s>100&&1e3>s||t.target._simulatedClick&&!t._simulated?(o.DomEvent.stop(t),n):(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(!t.shiftKey&&(1===t.which||1===t.button||t.touches)&&(o.DomEvent.stopPropagation(t),!o.Draggable._disabled)){o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection();var e=t.touches?t.touches[0]:t,n=e.target;o.Browser.touch&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._moved=!1,this._moving||(this._startPoint=new o.Point(e.clientX,e.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(i,o.Draggable.MOVE[t.type],this._onMove,this).on(i,o.Draggable.END[t.type],this._onUp,this))}},_onMove:function(t){if(!(t.touches&&t.touches.length>1)){var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new o.Point(e.clientX,e.clientY),s=n.subtract(this._startPoint);(s.x||s.y)&&(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(s),o.Browser.touch||o.DomUtil.addClass(i.body,"leaflet-dragging")),this._newPos=this._startPos.add(s),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget))}},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.Browser.touch||o.DomUtil.removeClass(i.body,"leaflet-dragging");for(var t in o.Draggable.MOVE)o.DomEvent.off(i,o.Draggable.MOVE[t],this._onMove).off(i,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend")),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t
},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,r=Math.abs(s+i)<Math.abs(o+i)?s:o;this._draggable._newPos.x=r},_onDragEnd:function(){var t=this._map,e=t.options,i=+new Date-this._lastTime,n=!e.inertia||i>e.inertiaThreshold||!this._positions[0];if(t.fire("dragend"),n)t.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+i-this._times[0])/1e3,a=e.easeLinearity,l=s.multiplyBy(a/r),h=l.distanceTo([0,0]),c=Math.min(e.inertiaMaxSpeed,h),u=l.multiplyBy(c/h),d=c/(e.inertiaDeceleration*a),p=u.multiplyBy(-d/2).round();p.x&&p.y?o.Util.requestAnimFrame(function(){t.panBy(p,{duration:d,easeLinearity:a,noMoveStart:!0})}):t.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick)},_onDoubleClick:function(t){this.setZoomAround(t.containerPoint,this._zoom+1)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&t.setZoomAround(this._lastMousePos,i+e)}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msTouch?"MSPointerDown":"touchstart",_touchend:o.Browser.msTouch?"MSPointerUp":"touchend",addDoubleTapListener:function(t,e,n){function s(t){var e;if(o.Browser.msTouch?(f.push(t.pointerId),e=f.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(a||i);l=t.touches?t.touches[0]:t,h=n>0&&c>=n,a=i}}function r(t){if(o.Browser.msTouch){var i=f.indexOf(t.pointerId);if(-1===i)return;f.splice(i,1)}if(h){if(o.Browser.msTouch){var n,s={};for(var r in l)n=l[r],s[r]="function"==typeof n?n.bind(l):n;l=s}l.type="dblclick",e(l),a=null}}var a,l,h=!1,c=250,u="_leaflet_",d=this._touchstart,p=this._touchend,f=[];t[u+d+n]=s,t[u+p+n]=r;var m=o.Browser.msTouch?i.documentElement:t;return t.addEventListener(d,s,!1),m.addEventListener(p,r,!1),o.Browser.msTouch&&m.addEventListener("MSPointerCancel",r,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+e],!1),(o.Browser.msTouch?i.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+e],!1),o.Browser.msTouch&&i.documentElement.removeEventListener("MSPointerCancel",t[n+this._touchend+e],!1),this}}),o.extend(o.DomEvent,{_msTouches:[],_msDocumentListener:!1,addMsTouchListener:function(t,e,i,n){switch(e){case"touchstart":return this.addMsTouchListenerStart(t,e,i,n);case"touchend":return this.addMsTouchListenerEnd(t,e,i,n);case"touchmove":return this.addMsTouchListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addMsTouchListenerStart:function(t,e,n,s){var o="_leaflet_",r=this._msTouches,a=function(t){for(var e=!1,i=0;r.length>i;i++)if(r[i].pointerId===t.pointerId){e=!0;break}e||r.push(t),t.touches=r.slice(),t.changedTouches=[t],n(t)};if(t[o+"touchstart"+s]=a,t.addEventListener("MSPointerDown",a,!1),!this._msDocumentListener){var l=function(t){for(var e=0;r.length>e;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}};i.documentElement.addEventListener("MSPointerUp",l,!1),i.documentElement.addEventListener("MSPointerCancel",l,!1),this._msDocumentListener=!0}return this},addMsTouchListenerMove:function(t,e,i,n){function s(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE||0!==t.buttons){for(var e=0;r.length>e;e++)if(r[e].pointerId===t.pointerId){r[e]=t;break}t.touches=r.slice(),t.changedTouches=[t],i(t)}}var o="_leaflet_",r=this._msTouches;return t[o+"touchmove"+n]=s,t.addEventListener("MSPointerMove",s,!1),this},addMsTouchListenerEnd:function(t,e,i,n){var s="_leaflet_",o=this._msTouches,r=function(t){for(var e=0;o.length>e;e++)if(o[e].pointerId===t.pointerId){o.splice(e,1);break}t.touches=o.slice(),t.changedTouches=[t],i(t)};return t[s+"touchend"+n]=r,t.addEventListener("MSPointerUp",r,!1),t.addEventListener("MSPointerCancel",r,!1),this},removeMsTouchListener:function(t,e,i){var n="_leaflet_",s=t[n+e+i];switch(e){case"touchstart":t.removeEventListener("MSPointerDown",s,!1);break;case"touchmove":t.removeEventListener("MSPointerMove",s,!1);break;case"touchend":t.removeEventListener("MSPointerUp",s,!1),t.removeEventListener("MSPointerCancel",s,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToLayerPoint(t.touches[0]),s=e.mouseEventToLayerPoint(t.touches[1]),r=e._getCenterLayerPoint();this._startCenter=n.add(s)._divideBy(2),this._startDist=n.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=r.subtract(this._startCenter),e._panAnim&&e._panAnim.stop(),o.DomEvent.on(i,"touchmove",this._onTouchMove,this).on(i,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return this._zooming=!1,n;var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(i,"touchmove",this._onTouchMove).off(i,"touchend",this._onTouchEnd);var e=this._getScaleOrigin(),s=t.layerPointToLatLng(e),r=t.getZoom(),a=t.getScaleZoom(this._scale)-r,l=a>0?Math.ceil(a):Math.floor(a),h=t._limitZoom(r+l),c=t.getZoomScale(h)/this._scale;t._animateZoom(s,h,e,c)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,clearTimeout(this._holdTimeout),n;var e=t.touches[0],s=e.target;this._startPos=this._newPos=new o.Point(e.clientX,e.clientY),"a"===s.tagName.toLowerCase()&&o.DomUtil.addClass(s,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),o.DomEvent.on(i,"touchmove",this._onMove,this).on(i,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(i,"touchmove",this._onMove,this).off(i,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(e,n){var s=i.createEvent("MouseEvents");s._simulated=!0,n.target._simulatedClick=!0,s.initMouseEvent(e,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s)}}),o.Browser.touch&&!o.Browser.msTouch&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown)},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",o.DomEvent.on(i,"mousemove",this._onMouseMove,this).on(i,"mouseup",this._onMouseUp,this).on(i,"keydown",this._onKeyDown,this),this._map.fire("boxzoomstart"),n)},_onMouseMove:function(t){var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),s=n.subtract(e),r=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,r),i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_finish:function(){this._pane.removeChild(this._box),this._container.style.cursor="",o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(i,"mousemove",this._onMouseMove).off(i,"mouseup",this._onMouseUp).off(i,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var e=i.body,n=i.documentElement,s=e.scrollTop||n.scrollTop,o=e.scrollTop||n.scrollLeft;this._map._container.focus(),t.scrollTo(o,s)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},s=this.keyCodes;for(e=0,i=s.left.length;i>e;e++)n[s.left[e]]=[-1*t,0];for(e=0,i=s.right.length;i>e;e++)n[s.right[e]]=[t,0];for(e=0,i=s.down.length;i>e;e++)n[s.down[e]]=[0,t];for(e=0,i=s.up.length;i>e;e++)n[s.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},s=this.keyCodes;for(e=0,i=s.zoomIn.length;i>e;e++)n[s.zoomIn[e]]=t;for(e=0,i=s.zoomOut.length;i>e;e++)n[s.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(i,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(i,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable()},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(){this._marker.fire("moveend").fire("dragend")}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var r=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton("+","Zoom in",e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton("-","Zoom out",e+"-out",i,this._zoomOut,this),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,s,r){var a=o.DomUtil.create("a",i,n);a.innerHTML=t,a.href="#",a.title=e;var l=o.DomEvent.stopPropagation;return o.DomEvent.on(a,"click",l).on(a,"mousedown",l).on(a,"dblclick",l).on(a,"click",o.DomEvent.preventDefault).on(a,"click",s,r),a},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){return this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container),t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):n},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):n},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,s=this._map.getSize(),o=this.options,r=0;s.x>0&&(r=n*(o.maxWidth/s.x)),this._updateScales(o,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,s=3.2808399*t,o=this._iScale;s>5280?(e=s/5280,i=this._getRoundNum(e),o.style.width=this._getScaleWidth(i/e)+"px",o.innerHTML=i+" mi"):(n=this._getRoundNum(s),o.style.width=this._getScaleWidth(n/s)+"px",o.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):(o.DomEvent.disableClickPropagation(e),o.DomEvent.on(e,"mousewheel",o.DomEvent.stopPropagation));var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';e&&(n+=' checked="checked"'),n+="/>";var s=i.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e,n=i.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(e=i.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=s):e=this._createRadioElement("leaflet-base-layers",s),e.layerId=o.stamp(t.layer),o.DomEvent.on(e,"click",this._onInputClick,this);var r=i.createElement("span");r.innerHTML=" "+t.name,n.appendChild(e),n.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),s=n.length;for(this._handlingClick=!0,t=0;s>t;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){this._el._leaflet_pos=this._getPos(),this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,s=this._el,r=t.getComputedStyle(s);return o.Browser.any3d?(n=r[o.DomUtil.TRANSFORM].match(this._transformRe),e=n?parseFloat(n[1]):0,i=n?parseFloat(n[2]):0):(e=parseFloat(r.left),i=parseFloat(r.top)),new o.Point(e,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,i){if(e=this._limitZoom(e),t=o.latLng(t),i=i||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==n&&(i.zoom=o.extend({animate:i.animate},i.zoom),i.pan=o.extend({animate:i.animate},i.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(i)?(this.panBy(i,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(){this._animatingZoom&&this._onZoomTransitionEnd()},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/n),o=this._getCenterLayerPoint()._add(s);return i.animate===!0||this.getSize().contains(s)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,o,n,null,!0),!0):!1},_animateZoom:function(t,e,i,n,s,r){this._animatingZoom=!0,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:s,backwards:r})},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[i],s=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?s+" "+n:n+" "+s},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),s=this._getLoadedTilesPercentage(t);return e&&i>.5&&.5>s?(t.style.visibility="hidden",this._stopLoadingImages(t),n):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),clearTimeout(this._clearBgBufferTimer),n)},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),s=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&s++;return s/i},_stopLoadingImages:function(t){var e,i,n,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;i>e;e++)n=s[e],n.complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=180*t.coords.accuracy/40075017,r=s/Math.cos(o.LatLng.DEG_TO_RAD*e),a=o.latLngBounds([e-s,i-r],[e+s,i+r]),l=this._locateOptions;if(l.setView){var h=Math.min(this.getBoundsZoom(a),l.maxZoom);
this.setView(n,h)}var c={latlng:n,bounds:a};for(var u in t.coords)"number"==typeof t.coords[u]&&(c[u]=t.coords[u]);this.fire("locationfound",c)}})}(window,document)}()},{}],3:[function(t,e){window.L.Icon.Default.imagePath="//api.tiles.mapbox.com/mapbox.js/v"+t("./package.json").version+"/images",L.mapbox=e.exports={VERSION:t("./package.json").version,geocoder:t("./src/geocoder"),marker:t("./src/marker"),tileLayer:t("./src/tile_layer"),shareControl:t("./src/share_control"),legendControl:t("./src/legend_control"),geocoderControl:t("./src/geocoder_control"),gridControl:t("./src/grid_control"),gridLayer:t("./src/grid_layer"),markerLayer:t("./src/marker_layer"),map:t("./src/map"),config:t("./src/config"),sanitize:t("./src/sanitize"),template:t("mustache").to_html}},{"./package.json":5,"./src/config":6,"./src/geocoder":7,"./src/geocoder_control":12,"./src/grid_control":13,"./src/grid_layer":14,"./src/legend_control":11,"./src/map":16,"./src/marker":8,"./src/marker_layer":15,"./src/sanitize":17,"./src/share_control":10,"./src/tile_layer":9,mustache:18}],17:[function(t,e){"use strict";function i(t){return/^https?/.test(t.getScheme())?""+t:"data"==t.getScheme()&&/^image/.test(t.getPath())?""+t:void 0}function n(t){return t}var s=t("../ext/sanitizer/html-sanitizer-bundle.js");e.exports=function(t){return t?s(t,i,n):""}},{"../ext/sanitizer/html-sanitizer-bundle.js":19}],18:[function(t,e,i){!function(){!function(t,n){"object"==typeof i&&i?e.exports=n:"function"==typeof define&&define.amd?define(n):t.Mustache=n}(this,function(){function t(t,e){return RegExp.prototype.test.call(t,e)}function e(e){return!t(f,e)}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(t){return(t+"").replace(/[&<>"'\/]/g,function(t){return y[t]})}function s(t){this.string=t,this.tail=t,this.pos=0}function o(t,e){this.view=t,this.parent=e,this.clearCache()}function r(){this.clearCache()}function a(t){function e(t,e,n){if(!i[t]){var s=a(e);i[t]=function(t,e){return s(t,e,n)}}return i[t]}var i={};return function(i,n,s){for(var o,r,a="",l=0,h=t.length;h>l;++l)switch(o=t[l],o[0]){case"#":r=s.slice(o[3],o[5]),a+=i._section(o[1],n,r,e(l,o[4],s));break;case"^":a+=i._inverted(o[1],n,e(l,o[4],s));break;case">":a+=i._partial(o[1],n);break;case"&":a+=i._name(o[1],n);break;case"name":a+=i._escaped(o[1],n);break;case"text":a+=o[1]}return a}}function l(t){for(var e,i=[],n=i,s=[],o=0,r=t.length;r>o;++o)switch(e=t[o],e[0]){case"#":case"^":s.push(e),n.push(e),n=e[4]=[];break;case"/":var a=s.pop();a[5]=e[2],n=s.length>0?s[s.length-1][4]:i;break;default:n.push(e)}return i}function h(t){for(var e,i,n=[],s=0,o=t.length;o>s;++s)e=t[s],"text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(i=e,n.push(e));return n}function c(t){return[RegExp(i(t[0])+"\\s*"),RegExp("\\s*"+i(t[1]))]}var u={};u.name="mustache.js",u.version="0.7.2",u.tags=["{{","}}"],u.Scanner=s,u.Context=o,u.Writer=r;var d=/\s*/,p=/\s+/,f=/\S/,m=/\s*=/,g=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/,_=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};u.escape=n,s.prototype.eos=function(){return""===this.tail},s.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},s.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return e},o.make=function(t){return t instanceof o?t:new o(t)},o.prototype.clearCache=function(){this._cache={}},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."===t)e=this.view;else for(var i=this;i;){if(t.indexOf(".")>0){var n=t.split("."),s=0;for(e=i.view;e&&n.length>s;)e=e[n[s++]]}else e=i.view[t];if(null!=e)break;i=i.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(t,e){var i=this._cache[t];if(!i){var n=u.parse(t,e);i=this._cache[t]=this.compileTokens(n,t)}return i},r.prototype.compilePartial=function(t,e,i){var n=this.compile(e,i);return this._partialCache[t]=n,n},r.prototype.compileTokens=function(t,e){var i=a(t),n=this;return function(t,s){if(s)if("function"==typeof s)n._loadPartial=s;else for(var r in s)n.compilePartial(r,s[r]);return i(n,o.make(t),e)}},r.prototype.render=function(t,e,i){return this.compile(t)(e,i)},r.prototype._section=function(t,e,i,n){var s=e.lookup(t);switch(typeof s){case"object":if(_(s)){for(var o="",r=0,a=s.length;a>r;++r)o+=n(this,e.push(s[r]));return o}return s?n(this,e.push(s)):"";case"function":var l=this,h=function(t){return l.render(t,e)},c=s.call(e.view,i,h);return null!=c?c:"";default:if(s)return n(this,e)}return""},r.prototype._inverted=function(t,e,i){var n=e.lookup(t);return!n||_(n)&&0===n.length?i(this,e):""},r.prototype._partial=function(t,e){t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t));var i=this._partialCache[t];return i?i(e):""},r.prototype._name=function(t,e){var i=e.lookup(t);return"function"==typeof i&&(i=i.call(e.view)),null==i?"":i+""},r.prototype._escaped=function(t,e){return u.escape(this._name(t,e))},u.parse=function(t,n){function o(){if(T&&!A)for(;x.length;)C.splice(x.pop(),1);else x=[];T=!1,A=!1}if(t=t||"",n=n||u.tags,"string"==typeof n&&(n=n.split(p)),2!==n.length)throw Error("Invalid tags: "+n.join(", "));for(var r,a,f,_,y=c(n),b=new s(t),w=[],C=[],x=[],T=!1,A=!1;!b.eos();){if(r=b.pos,f=b.scanUntil(y[0]))for(var S=0,k=f.length;k>S;++S)_=f.charAt(S),e(_)?x.push(C.length):A=!0,C.push(["text",_,r,r+1]),r+=1,"\n"===_&&o();if(r=b.pos,!b.scan(y[0]))break;if(T=!0,a=b.scan(v)||"name",b.scan(d),"="===a)f=b.scanUntil(m),b.scan(m),b.scanUntil(y[1]);else if("{"===a){var D=RegExp("\\s*"+i("}"+n[1]));f=b.scanUntil(D),b.scan(g),b.scanUntil(y[1]),a="&"}else f=b.scanUntil(y[1]);if(!b.scan(y[1]))throw Error("Unclosed tag at "+b.pos);if("/"===a){if(0===w.length)throw Error('Unopened section "'+f+'" at '+r);var L=w.pop();if(L[1]!==f)throw Error('Unclosed section "'+L[1]+'" at '+r)}var M=[a,f,r,b.pos];if(C.push(M),"#"===a||"^"===a)w.push(M);else if("name"===a||"{"===a||"&"===a)A=!0;else if("="===a){if(n=f.split(p),2!==n.length)throw Error("Invalid tags at "+r+": "+n.join(", "));y=c(n)}}var L=w.pop();if(L)throw Error('Unclosed section "'+L[1]+'" at '+b.pos);return l(h(C))};var b=new r;return u.clearCache=function(){return b.clearCache()},u.compile=function(t,e){return b.compile(t,e)},u.compilePartial=function(t,e,i){return b.compilePartial(t,e,i)},u.compileTokens=function(t,e){return b.compileTokens(t,e)},u.render=function(t,e,i){return b.render(t,e,i)},u.to_html=function(t,e,i,n){var s=u.render(t,e,i);return"function"!=typeof n?s:(n(s),void 0)},u}())}()},{}],7:[function(t,e){"use strict";var i=t("./util"),n=t("./url"),s=t("./request");e.exports=function(t){var e,o={};return o.getURL=function(){return e},o.setURL=function(t){return e=n.jsonify(t),o},o.setID=function(t){return i.strict(t,"string"),o.setURL(n.base()+t+"/geocode/{query}.json"),o},o.setTileJSON=function(t){return i.strict(t,"object"),o.setURL(t.geocoder),o},o.queryURL=function(t){if(i.strict(t,"string"),!o.getURL())throw Error("Geocoding map ID not set");return L.Util.template(o.getURL(),{query:encodeURIComponent(t)})},o.query=function(t,e){return i.strict(t,"string"),i.strict(e,"function"),s(o.queryURL(t),function(t,n){if(n&&n.results&&n.results.length){var s={results:n.results,latlng:[n.results[0][0].lat,n.results[0][0].lon]};void 0!==n.results[0][0].bounds&&(s.bounds=n.results[0][0].bounds,s.lbounds=i.lbounds(s.bounds)),e(null,s)}else e(t||!0)}),o},o.reverseQuery=function(t,e){function i(t){return void 0!==t.lat&&void 0!==t.lng?t.lng+","+t.lat:void 0!==t.lat&&void 0!==t.lon?t.lon+","+t.lat:t[0]+","+t[1]}var n="";if(t.length&&t[0].length){for(var r=0,a=[];t.length>r;r++)a.push(i(t[r]));n=a.join(";")}else n=i(t);return s(o.queryURL(n),function(t,i){e(t,i)}),o},"string"==typeof t?-1==t.indexOf("/")?o.setID(t):o.setURL(t):"object"==typeof t&&o.setTileJSON(t),o}},{"./request":21,"./url":22,"./util":20}],8:[function(t,e){"use strict";function i(t){t=t||{};var e={small:[20,50],medium:[30,70],large:[35,90]},i=t["marker-size"]||"medium",n=t["marker-symbol"]?"-"+t["marker-symbol"]:"",s=(t["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:o.base()+"marker/"+"pin-"+i.charAt(0)+n+"+"+s+(L.Browser.retina?"@2x":"")+".png",iconSize:e[i],iconAnchor:[e[i][0]/2,e[i][1]/2],popupAnchor:[0,-e[i][1]/2]})}function n(t,e){return L.marker(e,{icon:i(t.properties),title:t.properties.title})}function s(t,e){if(!t||!t.properties)return"";var i="";return t.properties.title&&(i+='<div class="marker-title">'+t.properties.title+"</div>"),t.properties.description&&(i+='<div class="marker-description">'+t.properties.description+"</div>"),(e||r)(i)}var o=t("./url"),r=t("./sanitize");e.exports={icon:i,style:n,createPopup:s}},{"./sanitize":17,"./url":22}],9:[function(t,e){"use strict";var i=t("./util");t("./url");var n=L.TileLayer.extend({includes:[t("./load_tilejson")],options:{format:"png"},formats:["png","png32","png64","png128","png256","jpg70","jpg80","jpg90"],initialize:function(t,e){L.TileLayer.prototype.initialize.call(this,void 0,e),this._tilejson={},e&&e.detectRetina&&L.Browser.retina&&e.retinaVersion&&(t=e.retinaVersion),e&&e.format&&i.strict_oneof(e.format,this.formats),this._loadTileJSON(t)},setFormat:function(t){return i.strict(t,"string"),this.options.format=t,this.redraw(),this},setUrl:null,_setTileJSON:function(t){return i.strict(t,"object"),L.extend(this.options,{tiles:t.tiles,attribution:t.attribution,minZoom:t.minzoom,maxZoom:t.maxzoom,tms:"tms"===t.scheme,bounds:t.bounds&&i.lbounds(t.bounds)}),this._tilejson=t,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(t){var e=this.options.tiles,i=Math.abs(t.x+t.y)%e.length,n=e[i],s=L.Util.template(n,t);return s?s.replace(".png","."+this.options.format):s},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});e.exports=function(t,e){return new n(t,e)}},{"./load_tilejson":23,"./url":22,"./util":20}],11:[function(t,e){"use strict";var i=L.Control.extend({options:{position:"bottomright",sanitizer:t("./sanitize")},initialize:function(t){L.setOptions(this,t),this._legends={}},onAdd:function(){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(t){return t?(this._legends[t]||(this._legends[t]=0),this._legends[t]++,this._update()):this},removeLegend:function(t){return t?(this._legends[t]&&this._legends[t]--,this._update()):this},_update:function(){if(!this._map)return this;this._container.innerHTML="";var t="none";for(var e in this._legends)if(this._legends.hasOwnProperty(e)&&this._legends[e]){var i=this._container.appendChild(document.createElement("div"));i.className="map-legend wax-legend",i.innerHTML=this.options.sanitizer(e),t="block"}return this._container.style.display=t,this}});e.exports=function(t){return new i(t)}},{"./sanitize":17}],12:[function(t,e){"use strict";var i=t("./geocoder"),n=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft"},initialize:function(t){this.geocoder=i(t)},setURL:function(t){return this.geocoder.setURL(t),this},getURL:function(){return this.geocoder.getURL()},setID:function(t){return this.geocoder.setID(t),this},setTileJSON:function(t){return this.geocoder.setTileJSON(t),this},_toggle:function(t){t&&L.DomEvent.stop(t),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),i=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",e),n=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",e),s=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",e),o=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",s),r=L.DomUtil.create("input","",o);return i.href="#",i.innerHTML="&nbsp;",r.type="text",r.setAttribute("placeholder","Search"),L.DomEvent.addListener(i,"click",this._toggle,this),L.DomEvent.addListener(o,"submit",this._geocode,this),L.DomEvent.disableClickPropagation(e),this._map=t,this._results=n,this._input=r,this._form=o,this._map.on("click",this._closeIfOpen,this),e},_geocode:function(t){L.DomEvent.preventDefault(t),L.DomUtil.addClass(this._container,"searching");var e=this._map;this.geocoder.query(this._input.value,L.bind(function(t,i){if(L.DomUtil.removeClass(this._container,"searching"),!t&&i&&i.results&&i.results.length){if(this._results.innerHTML="",1===i.results.length&&i.lbounds)this._map.fitBounds(i.lbounds),this._closeIfOpen();else{for(var n=0,s=Math.min(i.results.length,5);s>n;n++){for(var o=[],r=0;i.results[n].length>r;r++)i.results[n][r].name&&o.push(i.results[n][r].name);if(o.length){var a=L.DomUtil.create("a","",this._results);a.innerHTML=o.join(", "),a.href="#",function(t){L.DomEvent.addListener(a,"click",function(i){var n=t[0].bounds;e.fitBounds(L.latLngBounds([[n[1],n[0]],[n[3],n[2]]])),L.DomEvent.stop(i)})}(i.results[n])}}if(i.results.length>5){var l=L.DomUtil.create("span","",this._results);l.innerHTML="Top 5 of "+i.results.length+"  results"}}this.fire("found",i)}else this.fire("error",{error:t})},this))}});e.exports=function(t){return new n(t)}},{"./geocoder":7}],10:[function(t,e){"use strict";var i=L.Control.extend({includes:[t("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(t,e){L.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){this._tilejson=t},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),i=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",e);return i.href="#",L.DomEvent.addListener(i,"click",this._share,this),L.DomEvent.disableClickPropagation(e),this._map.on("mousedown",this._clickOut,this),e},_clickOut:function(){return this._popup?(this._map.removeLayer(this._popup),this._popup=null,void 0):void 0},_share:function(t){function e(t){if(t.originalEvent&&"TEXTAREA"===t.originalEvent.target.nodeName){var e=t.originalEvent.target;e.focus(),e.select()}else t.originalEvent&&"#close"===t.originalEvent.target.getAttribute("href")&&this._clickOut(t);L.DomEvent.stop(t.originalEvent)}L.DomEvent.stop(t);var i=this._tilejson||this._map._tilejson||{},n="http://twitter.com/intent/tweet?status="+encodeURIComponent(i.name+"\n"+(i.webpage||window.location)),s="https://www.facebook.com/sharer.php?u="+encodeURIComponent(this.options.url||i.webpage||window.location)+"&t="+encodeURIComponent(i.name),o="<a class='leaflet-popup-close-button' href='#close'>Ã—</a>"+"<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-share-facebook mapbox-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-share-twitter mapbox-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a></div>".replace("{{twitter}}",n).replace("{{facebook}}",s)+"<h3>Get the embed code</h3><small>Copy and paste this HTML into your website or blog.</small>"+"<textarea rows=4>{{value}}</textarea>".replace("{{value}}","&lt;iframe width='500' height='300' frameBorder='0' src='{{embed}}'&gt;&lt;/iframe&gt;".replace("{{embed}}",i.embed||window.location));this._popup=L.marker(this._map.getCenter(),{zIndexOffset:1e4,icon:L.divIcon({className:"mapbox-share-popup",iconSize:L.point(360,240),iconAnchor:L.point(180,120),html:o})}).on("mousedown",function(t){L.DomEvent.stopPropagation(t.originalEvent)}).on("click",e,this).addTo(this._map)}});e.exports=function(t,e){return new i(t,e)}},{"./load_tilejson":23}],14:[function(t,e){"use strict";var i=t("./util"),n=(t("./url"),t("./request")),s=t("./grid"),o=L.Class.extend({includes:[L.Mixin.Events,t("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(t,e){L.Util.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){return i.strict(t,"object"),L.extend(this.options,{grids:t.grids,minZoom:t.minzoom,maxZoom:t.maxzoom,bounds:t.bounds&&i.lbounds(t.bounds)}),this._tilejson=t,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return!!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(t,e){if(this.active()){var i=this._map,n=i.project(t),s=256,o=4,r=Math.floor(n.x/s),a=Math.floor(n.y/s),l=i.options.crs.scale(i.getZoom())/s;return r=(r+l)%l,a=(a+l)%l,this._getTile(i.getZoom(),r,a,function(t){var i=Math.floor((n.x-r*s)/o),l=Math.floor((n.y-a*s)/o);e(t(i,l))}),this}},_click:function(t){this.getData(t.latlng,L.bind(function(e){this.fire("click",{latLng:t.latlng,data:e})},this))},_move:function(t){this.getData(t.latlng,L.bind(function(e){e!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:t.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:t.latlng,data:e}),this._mouseOn=e):this.fire("mousemove",{latLng:t.latlng,data:e})},this))},_getTileURL:function(t){var e=this.options.grids,i=(t.x+t.y)%e.length,n=e[i];return L.Util.template(n,t)},_update:function(){if(this.active()){var t=this._map.getPixelBounds(),e=this._map.getZoom(),i=256;if(!(e>this.options.maxZoom||this.options.minZoom>e))for(var n=new L.Point(Math.floor(t.min.x/i),Math.floor(t.min.y/i)),s=new L.Point(Math.floor(t.max.x/i),Math.floor(t.max.y/i)),o=this._map.options.crs.scale(e)/i,r=n.x;s.x>=r;r++)for(var a=n.y;s.y>=a;a++){var l=(r+o)%o,h=(a+o)%o;this._getTile(e,l,h)}}},_getTile:function(t,e,i,o){var r=t+"_"+e+"_"+i,a=L.point(e,i);if(a.z=t,this._tileShouldBeLoaded(a)){if(r in this._cache){if(!o)return;return"function"==typeof this._cache[r]?o(this._cache[r]):this._cache[r].push(o),void 0}this._cache[r]=[],o&&this._cache[r].push(o),n(this._getTileURL(a),L.bind(function(t,e){var i=this._cache[r];this._cache[r]=s(e);for(var n=0;i.length>n;++n)i[n](this._cache[r])},this))}},_tileShouldBeLoaded:function(t){if(t.z>this.options.maxZoom||t.z<this.options.minZoom)return!1;if(this.options.bounds){var e=256,i=t.multiplyBy(e),n=i.add(new L.Point(e,e)),s=this._map.unproject(i),o=this._map.unproject(n),r=new L.LatLngBounds([s,o]);if(!this.options.bounds.intersects(r))return!1}return!0}});e.exports=function(t,e){return new o(t,e)}},{"./grid":24,"./load_tilejson":23,"./request":21,"./url":22,"./util":20}],15:[function(t,e){"use strict";var i=t("./util"),n=t("./url"),s=t("./request"),o=t("./marker"),r=L.FeatureGroup.extend({options:{filter:function(){return!0},sanitizer:t("./sanitize")},initialize:function(t,e){L.setOptions(this,e),this._layers={},"string"==typeof t?i.idUrl(t,this):t&&"object"==typeof t&&this.setGeoJSON(t)},setGeoJSON:function(t){this._geojson=t,this.clearLayers(),this._initialize(t)},getGeoJSON:function(){return this._geojson},loadURL:function(t){return t=n.jsonify(t),s(t,L.bind(function(e,n){e?(i.log("could not load markers at "+t),this.fire("error",{error:e})):n&&(this.setGeoJSON(n),this.fire("ready"))},this)),this},loadID:function(t){return this.loadURL(n.base()+t+"/markers.geojson")},setFilter:function(t){return this.options.filter=t,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(t){var e,i,n=L.Util.isArray(t)?t:t.features;if(n)for(e=0,i=n.length;i>e;e++)(n[e].geometries||n[e].geometry||n[e].features)&&this._initialize(n[e]);else if(this.options.filter(t)){var s=L.GeoJSON.geometryToLayer(t,o.style),r=o.createPopup(t,this.options.sanitizer);s.feature=t,r&&s.bindPopup(r,{closeButton:!1}),this.addLayer(s)}}});e.exports=function(t,e){return new r(t,e)}},{"./marker":8,"./request":21,"./sanitize":17,"./url":22,"./util":20}],16:[function(t,e){"use strict";var i=(t("./util"),t("./tile_layer")),n=t("./marker_layer"),s=t("./grid_layer"),o=t("./grid_control"),r=t("./legend_control"),a=L.Map.extend({includes:[t("./load_tilejson")],options:{tileLayer:{},markerLayer:{},gridLayer:{},legendControl:{},gridControl:{}},_tilejson:{},initialize:function(t,e,a){L.Map.prototype.initialize.call(this,t,a),this.attributionControl&&this.attributionControl.setPrefix(""),this.options.tileLayer&&(this.tileLayer=i(void 0,this.options.tileLayer),this.addLayer(this.tileLayer)),this.options.markerLayer&&(this.markerLayer=n(void 0,this.options.markerLayer),this.addLayer(this.markerLayer)),this.options.gridLayer&&(this.gridLayer=s(void 0,this.options.gridLayer),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=o(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.legendControl&&(this.legendControl=r(this.options.legendControl),this.addControl(this.legendControl)),this._loadTileJSON(e)},addLayer:function(t){return"on"in t&&t.on("ready",L.bind(function(){this._updateLayer(t)},this)),L.Map.prototype.addLayer.call(this,t)},_setTileJSON:function(t){return this._tilejson=t,this._initialize(t),this},getTileJSON:function(){return this._tilejson},_initialize:function(t){if(this.tileLayer&&(this.tileLayer._setTileJSON(t),this._updateLayer(this.tileLayer)),this.markerLayer&&!this.markerLayer.getGeoJSON()&&t.data&&t.data[0]&&this.markerLayer.loadURL(t.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(t),this._updateLayer(this.gridLayer)),this.legendControl&&t.legend&&this.legendControl.addLegend(t.legend),!this._loaded){var e=t.center[2],i=L.latLng(t.center[1],t.center[0]);this.setView(i,e)}},_updateLayer:function(t){t.options&&(this.attributionControl&&this._loaded&&this.attributionControl.addAttribution(t.options.attribution),L.stamp(t)in this._zoomBoundLayers||!t.options.maxZoom&&!t.options.minZoom||(this._zoomBoundLayers[L.stamp(t)]=t),this._updateZoomLevels())}});e.exports=function(t,e,i){return new a(t,e,i)}},{"./grid_control":13,"./grid_layer":14,"./legend_control":11,"./load_tilejson":23,"./marker_layer":15,"./tile_layer":9,"./util":20}],20:[function(t,e){"use strict";e.exports={idUrl:function(t,e){-1==t.indexOf("/")?e.loadID(t):e.loadURL(t)},log:function(t){console&&"function"==typeof console.error&&console.error(t)},strict:function(t,e){if(typeof t!==e)throw Error("Invalid argument: "+e+" expected")},strict_instance:function(t,e,i){if(!(t instanceof e))throw Error("Invalid argument: "+i+" expected")},strict_oneof:function(t,e){if(-1==e.indexOf(t))throw Error("Invalid argument: "+t+" given, valid values are "+e.join(", "))},lbounds:function(t){return new L.LatLngBounds([[t[1],t[0]],[t[3],t[2]]])}}},{}],19:[function(t,e){!function(){var t=function(){function t(t){var e=(""+t).match(p);return e?new l(h(e[1]),h(e[2]),h(e[3]),h(e[4]),h(e[5]),h(e[6]),h(e[7])):null}function e(t,e,o,r,a,h,c){var u=new l(n(t,f),n(e,f),i(o),r>0?""+r:null,n(a,m),null,i(c));return h&&("string"==typeof h?u.setRawQuery(h.replace(/[^?&=0-9A-Za-z_\-~.%]/g,s)):u.setAllParameters(h)),u}function i(t){return"string"==typeof t?encodeURIComponent(t):null}function n(t,e){return"string"==typeof t?encodeURI(t).replace(e,s):null}function s(t){var e=t.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(15&e>>4)+"0123456789ABCDEF".charAt(15&e)}function o(t){return t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function r(t){if(null===t)return null;for(var e,i=o(t),n=u;(e=i.replace(n,"$1"))!=i;i=e);return i}function a(t,e){var i=t.clone(),n=e.hasScheme();n?i.setRawScheme(e.getRawScheme()):n=e.hasCredentials(),n?i.setRawCredentials(e.getRawCredentials()):n=e.hasDomain(),n?i.setRawDomain(e.getRawDomain()):n=e.hasPort();var s=e.getRawPath(),o=r(s);if(n)i.setPort(e.getPort()),o=o&&o.replace(d,"");else if(n=!!s){if(47!==o.charCodeAt(0)){var a=r(i.getRawPath()||"").replace(d,""),l=a.lastIndexOf("/")+1;o=r((l?a.substring(0,l):"")+r(s)).replace(d,"")}}else o=o&&o.replace(d,""),o!==s&&i.setRawPath(o);return n?i.setRawPath(o):n=e.hasQuery(),n?i.setRawQuery(e.getRawQuery()):n=e.hasFragment(),n&&i.setRawFragment(e.getRawFragment()),i}function l(t,e,i,n,s,o,r){this.scheme_=t,this.credentials_=e,this.domain_=i,this.port_=n,this.path_=s,this.query_=o,this.fragment_=r,this.paramCache_=null}function h(t){return"string"==typeof t&&t.length>0?t:null}var c=RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),u=RegExp(c),d=/^(?:\.\.\/)*(?:\.\.$)?/;l.prototype.toString=function(){var t=[];return null!==this.scheme_&&t.push(this.scheme_,":"),null!==this.domain_&&(t.push("//"),null!==this.credentials_&&t.push(this.credentials_,"@"),t.push(this.domain_),null!==this.port_&&t.push(":",""+this.port_)),null!==this.path_&&t.push(this.path_),null!==this.query_&&t.push("?",this.query_),null!==this.fragment_&&t.push("#",this.fragment_),t.join("")},l.prototype.clone=function(){return new l(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},l.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},l.prototype.getRawScheme=function(){return this.scheme_},l.prototype.setScheme=function(t){return this.scheme_=n(t,f),this},l.prototype.setRawScheme=function(t){return this.scheme_=t?t:null,this},l.prototype.hasScheme=function(){return null!==this.scheme_},l.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},l.prototype.getRawCredentials=function(){return this.credentials_},l.prototype.setCredentials=function(t){return this.credentials_=n(t,f),this},l.prototype.setRawCredentials=function(t){return this.credentials_=t?t:null,this},l.prototype.hasCredentials=function(){return null!==this.credentials_},l.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},l.prototype.getRawDomain=function(){return this.domain_},l.prototype.setDomain=function(t){return this.setRawDomain(t&&encodeURIComponent(t))},l.prototype.setRawDomain=function(t){return this.domain_=t?t:null,this.setRawPath(this.path_)},l.prototype.hasDomain=function(){return null!==this.domain_},l.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},l.prototype.setPort=function(t){if(t){if(t=Number(t),t!==(65535&t))throw Error("Bad port number "+t);this.port_=""+t}else this.port_=null;return this},l.prototype.hasPort=function(){return null!==this.port_},l.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},l.prototype.getRawPath=function(){return this.path_},l.prototype.setPath=function(t){return this.setRawPath(n(t,m))},l.prototype.setRawPath=function(t){return t?(t+="",this.path_=!this.domain_||/^\//.test(t)?t:"/"+t):this.path_=null,this},l.prototype.hasPath=function(){return null!==this.path_},l.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},l.prototype.getRawQuery=function(){return this.query_},l.prototype.setQuery=function(t){return this.paramCache_=null,this.query_=i(t),this},l.prototype.setRawQuery=function(t){return this.paramCache_=null,this.query_=t?t:null,this},l.prototype.hasQuery=function(){return null!==this.query_},l.prototype.setAllParameters=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e=[],i=-1;for(var n in t){var s=t[n];"string"==typeof s&&(e[++i]=n,e[++i]=s)}t=e}this.paramCache_=null;for(var o=[],r="",a=0;t.length>a;){var n=t[a++],s=t[a++];o.push(r,encodeURIComponent(""+n)),r="&",s&&o.push("=",encodeURIComponent(""+s))}return this.query_=o.join(""),this},l.prototype.checkParameterCache_=function(){if(!this.paramCache_){var t=this.query_;if(t){for(var e=t.split(/[&\?]/),i=[],n=-1,s=0;e.length>s;++s){var o=e[s].match(/^([^=]*)(?:=(.*))?$/);i[++n]=decodeURIComponent(o[1]).replace(/\+/g," "),i[++n]=decodeURIComponent(o[2]||"").replace(/\+/g," ")}this.paramCache_=i}else this.paramCache_=[]}},l.prototype.setParameterValues=function(t,e){"string"==typeof e&&(e=[e]),this.checkParameterCache_();for(var i=0,n=this.paramCache_,s=[],o=0;n.length>o;o+=2)t===n[o]?e.length>i&&s.push(t,e[i++]):s.push(n[o],n[o+1]);for(;e.length>i;)s.push(t,e[i++]);return this.setAllParameters(s),this},l.prototype.removeParameter=function(t){return this.setParameterValues(t,[])},l.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},l.prototype.getParameterValues=function(t){this.checkParameterCache_();for(var e=[],i=0;this.paramCache_.length>i;i+=2)t===this.paramCache_[i]&&e.push(this.paramCache_[i+1]);return e},l.prototype.getParameterMap=function(){this.checkParameterCache_();for(var t={},e=0;this.paramCache_.length>e;e+=2){var i=this.paramCache_[e++],n=this.paramCache_[e++];i in t?t[i].push(n):t[i]=[n]}return t},l.prototype.getParameterValue=function(t){this.checkParameterCache_();for(var e=0;this.paramCache_.length>e;e+=2)if(t===this.paramCache_[e])return this.paramCache_[e+1];return null},l.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},l.prototype.getRawFragment=function(){return this.fragment_},l.prototype.setFragment=function(t){return this.fragment_=t?encodeURIComponent(t):null,this},l.prototype.setRawFragment=function(t){return this.fragment_=t?t:null,this},l.prototype.hasFragment=function(){return null!==this.fragment_};var p=RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),f=/[#\/\?@]/g,m=/[\#\?]/g;return l.parse=t,l.create=e,l.resolve=a,l.collapse_dots=r,l.utils={mimeTypeOf:function(e){var i=t(e);return/\.html$/.test(i.getPath())?"text/html":"application/javascript"},resolve:function(e,i){return e?""+a(t(e),t(i)):""+i}},l}(),i={};if(i.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},i.atype=i.atype,i.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},i.ATTRIBS=i.ATTRIBS,i.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},i.eflags=i.eflags,i.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},i.ELEMENTS=i.ELEMENTS,i.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},i.ELEMENT_DOM_INTERFACES=i.ELEMENT_DOM_INTERFACES,i.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},i.ueffects=i.ueffects,i.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},i.URIEFFECTS=i.URIEFFECTS,i.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},i.ltypes=i.ltypes,i.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},i.LOADERTYPES=i.LOADERTYPES,"i"!=="I".toLowerCase())throw"I/i problem";
var n=function(e){function i(t){if(E.hasOwnProperty(t))return E[t];var e=t.match(N);if(e)return String.fromCharCode(parseInt(e[1],10));if(e=t.match(P))return String.fromCharCode(parseInt(e[1],16));if(R&&O.test(t)){R.innerHTML="&"+t+";";var i=R.textContent;return E[t]=i,i}return"&"+t+";"}function n(t,e){return i(e)}function s(t){return t.replace(I,"")}function o(t){return t.replace(B,n)}function r(t){return(""+t).replace(U,"&amp;").replace(F,"&lt;").replace(j,"&gt;").replace($,"&#34;")}function a(t){return t.replace(H,"&amp;$1").replace(F,"&lt;").replace(j,"&gt;")}function l(t){var e={cdata:t.cdata||t.cdata,comment:t.comment||t.comment,endDoc:t.endDoc||t.endDoc,endTag:t.endTag||t.endTag,pcdata:t.pcdata||t.pcdata,rcdata:t.rcdata||t.rcdata,startDoc:t.startDoc||t.startDoc,startTag:t.startTag||t.startTag};return function(t,i){return h(t,e,i)}}function h(t,e,i){var n=d(t),s={noMoreGT:!1,noMoreEndComments:!1};u(e,n,0,s,i)}function c(t,e,i,n,s){return function(){u(t,e,i,n,s)}}function u(t,i,n,s,o){try{t.startDoc&&0==n&&t.startDoc(o);for(var r,a,l,h=n,u=i.length;u>h;){var d=i[h++],g=i[h];switch(d){case"&":z.test(g)?(t.pcdata&&t.pcdata("&"+g,o,q,c(t,i,h,s,o)),h++):t.pcdata&&t.pcdata("&amp;",o,q,c(t,i,h,s,o));break;case"</":(r=/^([-\w:]+)[^\'\"]*/.exec(g))?r[0].length===g.length&&">"===i[h+1]?(h+=2,l=r[1].toLowerCase(),t.endTag&&t.endTag(l,o,q,c(t,i,h,s,o))):h=p(i,h,t,o,q,s):t.pcdata&&t.pcdata("&lt;/",o,q,c(t,i,h,s,o));break;case"<":if(r=/^([-\w:]+)\s*\/?/.exec(g))if(r[0].length===g.length&&">"===i[h+1]){h+=2,l=r[1].toLowerCase(),t.startTag&&t.startTag(l,[],o,q,c(t,i,h,s,o));var v=e.ELEMENTS[l];if(v&G){var _={name:l,next:h,eflags:v};h=m(i,_,t,o,q,s)}}else h=f(i,h,t,o,q,s);else t.pcdata&&t.pcdata("&lt;",o,q,c(t,i,h,s,o));break;case"<!--":if(!s.noMoreEndComments){for(a=h+1;u>a&&(">"!==i[a]||!/--$/.test(i[a-1]));a++);if(u>a){if(t.comment){var y=i.slice(h,a).join("");t.comment(y.substr(0,y.length-2),o,q,c(t,i,a+1,s,o))}h=a+1}else s.noMoreEndComments=!0}s.noMoreEndComments&&t.pcdata&&t.pcdata("&lt;!--",o,q,c(t,i,h,s,o));break;case"<!":if(/^\w/.test(g)){if(!s.noMoreGT){for(a=h+1;u>a&&">"!==i[a];a++);u>a?h=a+1:s.noMoreGT=!0}s.noMoreGT&&t.pcdata&&t.pcdata("&lt;!",o,q,c(t,i,h,s,o))}else t.pcdata&&t.pcdata("&lt;!",o,q,c(t,i,h,s,o));break;case"<?":if(!s.noMoreGT){for(a=h+1;u>a&&">"!==i[a];a++);u>a?h=a+1:s.noMoreGT=!0}s.noMoreGT&&t.pcdata&&t.pcdata("&lt;?",o,q,c(t,i,h,s,o));break;case">":t.pcdata&&t.pcdata("&gt;",o,q,c(t,i,h,s,o));break;case"":break;default:t.pcdata&&t.pcdata(d,o,q,c(t,i,h,s,o))}}t.endDoc&&t.endDoc(o)}catch(b){if(b!==q)throw b}}function d(t){var e=/(<\/|<\!--|<[!?]|[&<>])/g;if(t+="",V)return t.split(e);for(var i,n=[],s=0;null!==(i=e.exec(t));)n.push(t.substring(s,i.index)),n.push(i[0]),s=i.index+i[0].length;return n.push(t.substring(s)),n}function p(t,e,i,n,s,o){var r=g(t,e);return r?(i.endTag&&i.endTag(r.name,n,s,c(i,t,e,o,n)),r.next):t.length}function f(t,e,i,n,s,o){var r=g(t,e);return r?(i.startTag&&i.startTag(r.name,r.attrs,n,s,c(i,t,r.next,o,n)),r.eflags&G?m(t,r,i,n,s,o):r.next):t.length}function m(t,i,n,s,o,r){var l=t.length;Y.hasOwnProperty(i.name)||(Y[i.name]=RegExp("^"+i.name+"(?:[\\s\\/]|$)","i"));for(var h=Y[i.name],u=i.next,d=i.next+1;l>d&&("</"!==t[d-1]||!h.test(t[d]));d++);l>d&&(d-=1);var p=t.slice(u,d).join("");if(i.eflags&e.eflags.CDATA)n.cdata&&n.cdata(p,s,o,c(n,t,d,r,s));else{if(!(i.eflags&e.eflags.RCDATA))throw Error("bug");n.rcdata&&n.rcdata(a(p),s,o,c(n,t,d,r,s))}return d}function g(t,i){var n=/^([-\w:]+)/.exec(t[i]),s={};s.name=n[1].toLowerCase(),s.eflags=e.ELEMENTS[s.name];for(var o=t[i].substr(n[0].length),r=i+1,a=t.length;a>r&&">"!==t[r];r++)o+=t[r];if(r>=a)return void 0;for(var l=[];""!==o;)if(n=W.exec(o)){if(n[4]&&!n[5]||n[6]&&!n[7]){for(var h=n[4]||n[6],c=!1,u=[o,t[r++]];a>r;r++){if(c){if(">"===t[r])break}else t[r].indexOf(h)>=0&&(c=!0);u.push(t[r])}if(r>=a)break;o=u.join("");continue}var d=n[1].toLowerCase(),p=n[2]?v(n[3]):"";l.push(d,p),o=o.substr(n[0].length)}else o=o.replace(/^[\s\S][^a-z\s]*/,"");return s.attrs=l,s.next=r+1,s}function v(t){var e=t.charCodeAt(0);return(34===e||39===e)&&(t=t.substr(1,t.length-2)),o(s(t))}function _(t){var i,n,s=function(t,e){n||e.push(t)};return l({startDoc:function(){i=[],n=!1},startTag:function(s,o,a){if(!n&&e.ELEMENTS.hasOwnProperty(s)){var l=e.ELEMENTS[s];if(!(l&e.eflags.FOLDABLE)){var h=t(s,o);if(!h)return n=!(l&e.eflags.EMPTY),void 0;if("object"!=typeof h)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in h))throw Error("tagPolicy gave no attribs");o=h.attribs;var c,u;if("tagName"in h?(u=h.tagName,c=e.ELEMENTS[u]):(u=s,c=l),l&e.eflags.OPTIONAL_ENDTAG){var d=i[i.length-1];!d||d.orig!==s||d.rep===u&&s===u||a.push("</",d.rep,">")}l&e.eflags.EMPTY||i.push({orig:s,rep:u}),a.push("<",u);for(var p=0,f=o.length;f>p;p+=2){var m=o[p],g=o[p+1];null!==g&&void 0!==g&&a.push(" ",m,'="',r(g),'"')}a.push(">"),l&e.eflags.EMPTY&&!(c&e.eflags.EMPTY)&&a.push("</",u,">")}}},endTag:function(t,s){if(n)return n=!1,void 0;if(e.ELEMENTS.hasOwnProperty(t)){var o=e.ELEMENTS[t];if(!(o&(e.eflags.EMPTY|e.eflags.FOLDABLE))){var r;if(o&e.eflags.OPTIONAL_ENDTAG)for(r=i.length;--r>=0;){var a=i[r].orig;if(a===t)break;if(!(e.ELEMENTS[a]&e.eflags.OPTIONAL_ENDTAG))return}else for(r=i.length;--r>=0&&i[r].orig!==t;);if(0>r)return;for(var l=i.length;--l>r;){var h=i[l].rep;e.ELEMENTS[h]&e.eflags.OPTIONAL_ENDTAG||s.push("</",h,">")}i.length>r&&(t=i[r].rep),i.length=r,s.push("</",t,">")}}},pcdata:s,rcdata:s,cdata:s,endDoc:function(t){for(;i.length;i.length--)t.push("</",i[i.length-1].rep,">")}})}function y(e,i,n,s,o){if(!o)return null;try{var r=t.parse(""+e);if(r&&(!r.hasScheme()||Z.test(r.getScheme()))){var a=o(r,i,n,s);return a?""+a:null}}catch(l){return null}return null}function b(t,e,i,n,s){if(i||t(e+" removed",{change:"removed",tagName:e}),n!==s){var o="changed";n&&!s?o="removed":!n&&s&&(o="added"),t(e+"."+i+" "+o,{change:o,tagName:e,attribName:i,oldValue:n,newValue:s})}}function w(t,e,i){var n;return n=e+"::"+i,t.hasOwnProperty(n)?t[n]:(n="*::"+i,t.hasOwnProperty(n)?t[n]:void 0)}function C(t,i){return w(e.LOADERTYPES,t,i)}function x(t,i){return w(e.URIEFFECTS,t,i)}function T(t,i,n,s,o){for(var r=0;i.length>r;r+=2){var a,l=i[r],h=i[r+1],c=h,u=null;if(a=t+"::"+l,(e.ATTRIBS.hasOwnProperty(a)||(a="*::"+l,e.ATTRIBS.hasOwnProperty(a)))&&(u=e.ATTRIBS[a]),null!==u)switch(u){case e.atype.NONE:break;case e.atype.SCRIPT:h=null,o&&b(o,t,l,c,h);break;case e.atype.STYLE:if(void 0===D){h=null,o&&b(o,t,l,c,h);break}var d=[];D(h,{declaration:function(t,i){var s=t.toLowerCase(),o=M[s];o&&(L(s,o,i,n?function(t){return y(t,e.ueffects.SAME_DOCUMENT,e.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:s},n)}:null),d.push(t+": "+i.join(" ")))}}),h=d.length>0?d.join(" ; "):null,o&&b(o,t,l,c,h);break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:h=s?s(h):h,o&&b(o,t,l,c,h);break;case e.atype.URI:h=y(h,x(t,l),C(t,l),{TYPE:"MARKUP",XML_ATTR:l,XML_TAG:t},n),o&&b(o,t,l,c,h);break;case e.atype.URI_FRAGMENT:h&&"#"===h.charAt(0)?(h=h.substring(1),h=s?s(h):h,null!==h&&void 0!==h&&(h="#"+h)):h=null,o&&b(o,t,l,c,h);break;default:h=null,o&&b(o,t,l,c,h)}else h=null,o&&b(o,t,l,c,h);i[r+1]=h}return i}function A(t,i,n){return function(s,o){return e.ELEMENTS[s]&e.eflags.UNSAFE?(n&&b(n,s,void 0,void 0,void 0),void 0):{attribs:T(s,o,t,i,n)}}}function S(t,e){var i=[];return _(e)(t,i),i.join("")}function k(t,e,i,n){var s=A(e,i,n);return S(t,s)}var D,L,M;"undefined"!=typeof window&&(D=window.parseCssDeclarations,L=window.sanitizeCssProperty,M=window.cssSchema);var E={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"Â "},N=/^#(\d+)$/,P=/^#x([0-9A-Fa-f]+)$/,O=/^[A-Za-z][A-za-z0-9]+$/,R="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,I=/\0/g,B=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,z=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,U=/&/g,H=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,F=/[<]/g,j=/>/g,$=/\"/g,W=RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),V=3==="a,b".split(/(,)/).length,G=e.eflags.CDATA|e.eflags.RCDATA,q={},Y={},Z=/^(?:https?|mailto|data)$/i,X={};return X.escapeAttrib=X.escapeAttrib=r,X.makeHtmlSanitizer=X.makeHtmlSanitizer=_,X.makeSaxParser=X.makeSaxParser=l,X.makeTagPolicy=X.makeTagPolicy=A,X.normalizeRCData=X.normalizeRCData=a,X.sanitize=X.sanitize=k,X.sanitizeAttribs=X.sanitizeAttribs=T,X.sanitizeWithPolicy=X.sanitizeWithPolicy=S,X.unescapeEntities=X.unescapeEntities=o,X}(i),s=n.sanitize;i.ATTRIBS["*::style"]=0,i.ELEMENTS.style=0,i.ATTRIBS["a::target"]=0,i.ELEMENTS.video=0,i.ATTRIBS["video::src"]=0,i.ATTRIBS["video::poster"]=0,i.ATTRIBS["video::controls"]=0,i.ELEMENTS.audio=0,i.ATTRIBS["audio::src"]=0,i.ATTRIBS["video::autoplay"]=0,i.ATTRIBS["video::controls"]=0,void 0!==e&&(e.exports=s)}()},{}],24:[function(t,e){"use strict";function i(t){return t>=93&&t--,t>=35&&t--,t-32}e.exports=function(t){return function(e,n){if(t){var s=i(t.grid[n].charCodeAt(e)),o=t.keys[s];return t.data[o]}}}},{}],22:[function(t,e){"use strict";var i=t("./config");e.exports={isSSL:function(){return"https:"===document.location.protocol||i.FORCE_HTTPS},base:function(t){var e=this.isSSL()?i.HTTPS_URLS:i.HTTP_URLS;return void 0===t||"number"!=typeof t?e[0]:e[t%e.length]},secureFlag:function(t){return this.isSSL()?t.match(/(\?|&)secure/)?t:-1!==t.indexOf("?")?t+"&secure":t+"?secure":t},jsonify:function(t){return t.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":6}],23:[function(t,e){"use strict";var i=t("./request"),n=t("./url"),s=t("./util");e.exports={_loadTileJSON:function(t){"string"==typeof t?(-1==t.indexOf("/")&&(t=n.base()+t+".json"),i(n.secureFlag(t),L.bind(function(e,i){e?(s.log("could not load TileJSON at "+t),this.fire("error",{error:e})):i&&(this._setTileJSON(i),this.fire("ready"))},this))):t&&"object"==typeof t&&this._setTileJSON(t)}}},{"./request":21,"./url":22,"./util":20}],13:[function(t,e){"use strict";var i=t("./util"),n=t("mustache"),s=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:t("./sanitize"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(t,e){L.Util.setOptions(this,e),i.strict_instance(t,L.Class,"L.mapbox.gridLayer"),this._layer=t},setTemplate:function(t){this.options.template=t},_template:function(t,e){if(e){var i=this.options.template||this._layer.getTileJSON().template;if(i){var s={};return s["__"+t+"__"]=!0,this.options.sanitizer(n.to_html(i,L.extend(s,e)))}}},_show:function(t,e){t!==this._currentContent&&(this._currentContent=t,this.options.follow?(this._popup.setContent(t).setLatLng(e.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=t))},_hide:function(){this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable")},_mouseover:function(t){if(t.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var e=this._template("teaser",t.data);e?this._show(e,t):this._hide()}},_mousemove:function(t){this._pinned||this.options.follow&&this._popup.setLatLng(t.latLng)},_navigateTo:function(t){window.top.location.href=t},_click:function(t){var e=this._template("location",t.data);if(this.options.location&&e&&0===e.search(/^https?:/))return this._navigateTo(this._template("location",t.data));if(this.options.pinnable){var i=this._template("full",t.data);!i&&this.options.touchTeaser&&L.Browser.touch&&(i=this._template("teaser",t.data)),i?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(i,t)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this._hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(t,e){var i=L.DomUtil.create("a","close",t);return i.innerHTML="close",i.href="#",i.title="close",L.DomEvent.on(i,"click",L.DomEvent.stopPropagation).on(i,"mousedown",L.DomEvent.stopPropagation).on(i,"dblclick",L.DomEvent.stopPropagation).on(i,"click",L.DomEvent.preventDefault).on(i,"click",e,this),i},onAdd:function(t){this._map=t;var e="leaflet-control-grid map-tooltip",i=L.DomUtil.create("div",e),n=L.DomUtil.create("div","map-tooltip-content");return i.style.display="none",this._createClosebutton(i,this._hide),i.appendChild(n),this._contentWrapper=n,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),t.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(i).addListener(i,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),i},onRemove:function(t){t.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});e.exports=function(t,e){return new s(t,e)}},{"./sanitize":17,"./util":20,mustache:18}],21:[function(t,e){"use strict";var i=t("corslite"),n=t("json3"),s=t("./util").strict;e.exports=function(t,e){s(t,"string"),s(e,"function"),i(t,function(t,i){!t&&i&&(i="g"==i.responseText[0]?n.parse(i.responseText.substring(5,i.responseText.length-2)):n.parse(i.responseText)),e(t,i)})}},{"./util":20,corslite:25,json3:26}],25:[function(t,e){function i(t,e,n){function s(t){return t>=200&&300>t||304===t}function o(){void 0===a.status||s(a.status)?e.call(a,null,a):e.call(a,a,null)}if(void 0===window.XMLHttpRequest)return e(Error("Browser not supported"));if(void 0===n){var r=t.match(/^\s*https?:\/\/[^\/]*/);n=r&&r[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var a;return a=!n||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest?new window.XMLHttpRequest:new window.XDomainRequest,"onload"in a?a.onload=o:a.onreadystatechange=function(){4===a.readyState&&o()},a.onerror=function(t){e.call(this,t,null),e=function(){}},a.onprogress=function(){},a.ontimeout=function(t){e.call(this,t,null),e=function(){}},a.onabort=function(t){e.call(this,t,null),e=function(){}},a.open("GET",t,!0),a.send(null),i}void 0!==e&&(e.exports=i)},{}],26:[function(t,e,i){!function(t){function e(t){if("bug-string-char-index"==t)return"a"!="a"[0];var e,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',n="json"==t;if(n||"json-stringify"==t||"json-parse"==t){if("json-stringify"==t||n){var s=l.stringify,a="function"==typeof s&&h;if(a){(e=function(){return 1}).toJSON=e;try{a="0"===s(0)&&"0"===s(new Number)&&'""'==s(new String)&&s(r)===o&&s(o)===o&&s()===o&&"1"===s(e)&&"[1]"==s([e])&&"[null]"==s([o])&&"null"==s(null)&&"[null,null,null]"==s([o,r,null])&&s({a:[e,!0,!1,null,"\0\b\n\f\r  "]})==i&&"1"===s(null,e)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new Date(-1))}catch(c){a=!1}}if(!n)return a}if("json-parse"==t||n){var u=l.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){e=u(i);var d=5==e.a.length&&1===e.a[0];if(d){try{d=!u('" "')}catch(c){}if(d)try{d=1!==u("01")}catch(c){}}}}catch(c){d=!1}if(!n)return d}return a&&d}}var n,s,o,r={}.toString,a="function"==typeof define&&define.amd,l="object"==typeof i&&i;l||a?"object"==typeof JSON&&JSON?l?(l.stringify=JSON.stringify,l.parse=JSON.parse):l=JSON:a&&(l=t.JSON={}):l=t.JSON||(t.JSON={});var h=new Date(-0xc782b5b800cec);try{h=-109252==h.getUTCFullYear()&&0===h.getUTCMonth()&&1===h.getUTCDate()&&10==h.getUTCHours()&&37==h.getUTCMinutes()&&6==h.getUTCSeconds()&&708==h.getUTCMilliseconds()}catch(c){}if(!e("json")){var u="[object Function]",d="[object Date]",p="[object Number]",f="[object String]",m="[object Array]",g="[object Boolean]",v=e("bug-string-char-index");if(!h)var _=Math.floor,y=[0,31,59,90,120,151,181,212,243,273,304,334],b=function(t,e){return y[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};(n={}.hasOwnProperty)||(n=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=r?n=function(t){var e=this.__proto__,i=(this.__proto__=null,t in this);return this.__proto__=e,i}:(e=i.constructor,n=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,n.call(this,t)});var w={"boolean":1,number:1,string:1,undefined:1},C=function(t,e){var i=typeof t[e];return"object"==i?!!t[e]:!w[i]};if(s=function(t,e){var i,s,o,a,l=0;(i=function(){this.valueOf=0}).prototype.valueOf=0,s=new i;for(o in s)n.call(s,o)&&l++;return i=s=null,l?a=2==l?function(t,e){var i,s={},o=r.call(t)==u;for(i in t)o&&"prototype"==i||n.call(s,i)||!(s[i]=1)||!n.call(t,i)||e(i)}:function(t,e){var i,s,o=r.call(t)==u;for(i in t)o&&"prototype"==i||!n.call(t,i)||(s="constructor"===i)||e(i);(s||n.call(t,i="constructor"))&&e(i)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],a=function(t,e){var i,o,a=r.call(t)==u,l=!a&&"function"!=typeof t.constructor&&C(t,"hasOwnProperty")?t.hasOwnProperty:n;for(i in t)a&&"prototype"==i||!l.call(t,i)||e(i);for(o=s.length;i=s[--o];l.call(t,i)&&e(i));}),a(t,e)},!e("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T="000000",A=function(t,e){return(T+(e||0)).slice(-t)},S="\\u00",k=function(t){var e,i='"',n=0,s=t.length,o=s>10&&v;for(o&&(e=t.split(""));s>n;n++){var r=t.charCodeAt(n);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:i+=x[r];break;default:if(32>r){i+=S+A(2,r.toString(16));break}i+=o?e[n]:v?t.charAt(n):t[n]}}return i+'"'},D=function(t,e,i,a,l,h,c){var u,v,y,w,C,x,T,S,L,M,E,N,P,O,R,I,B=e[t];try{B=e[t]}catch(z){}if("object"==typeof B&&B)if(u=r.call(B),u!=d||n.call(B,"toJSON"))"function"==typeof B.toJSON&&(u!=p&&u!=f&&u!=m||n.call(B,"toJSON"))&&(B=B.toJSON(t));else if(B>-1/0&&1/0>B){if(b){for(w=_(B/864e5),v=_(w/365.2425)+1970-1;w>=b(v+1,0);v++);for(y=_((w-b(v,0))/30.42);w>=b(v,y+1);y++);w=1+w-b(v,y),C=(B%864e5+864e5)%864e5,x=_(C/36e5)%24,T=_(C/6e4)%60,S=_(C/1e3)%60,L=C%1e3}else v=B.getUTCFullYear(),y=B.getUTCMonth(),w=B.getUTCDate(),x=B.getUTCHours(),T=B.getUTCMinutes(),S=B.getUTCSeconds(),L=B.getUTCMilliseconds();B=(0>=v||v>=1e4?(0>v?"-":"+")+A(6,0>v?-v:v):A(4,v))+"-"+A(2,y+1)+"-"+A(2,w)+"T"+A(2,x)+":"+A(2,T)+":"+A(2,S)+"."+A(3,L)+"Z"}else B=null;if(i&&(B=i.call(e,t,B)),null===B)return"null";if(u=r.call(B),u==g)return""+B;if(u==p)return B>-1/0&&1/0>B?""+B:"null";if(u==f)return k(""+B);if("object"==typeof B){for(P=c.length;P--;)if(c[P]===B)throw TypeError();if(c.push(B),M=[],O=h,h+=l,u==m){for(N=0,P=B.length;P>N;R||(R=!0),N++)E=D(N,B,i,a,l,h,c),M.push(E===o?"null":E);I=R?l?"[\n"+h+M.join(",\n"+h)+"\n"+O+"]":"["+M.join(",")+"]":"[]"}else s(a||B,function(t){var e=D(t,B,i,a,l,h,c);e!==o&&M.push(k(t)+":"+(l?" ":"")+e),R||(R=!0)}),I=R?l?"{\n"+h+M.join(",\n"+h)+"\n"+O+"}":"{"+M.join(",")+"}":"{}";return c.pop(),I}};l.stringify=function(t,e,i){var n,s,o;if("function"==typeof e||"object"==typeof e&&e)if(r.call(e)==u)s=e;else if(r.call(e)==m){o={};for(var a,l=0,h=e.length;h>l;a=e[l++],(r.call(a)==f||r.call(a)==p)&&(o[a]=1));}if(i)if(r.call(i)==p){if((i-=i%1)>0)for(n="",i>10&&(i=10);i>n.length;n+=" ");}else r.call(i)==f&&(n=10>=i.length?i:i.slice(0,10));return D("",(a={},a[""]=t,a),s,o,n,"",[])}}if(!e("json-parse")){var L,M,E=String.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"  ",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,SyntaxError()},O=function(){for(var t,e,i,n,s,o=M,r=o.length;r>L;)switch(s=o.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=v?o.charAt(L):o[L],L++,t;case 34:for(t="@",L++;r>L;)if(s=o.charCodeAt(L),32>s)P();else if(92==s)switch(s=o.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=N[s],L++;break;case 117:for(e=++L,i=L+4;i>L;L++)s=o.charCodeAt(L),s>=48&&57>=s||s>=97&&102>=s||s>=65&&70>=s||P();t+=E("0x"+o.slice(e,L));break;default:P()}else{if(34==s)break;for(s=o.charCodeAt(L),e=L;s>=32&&92!=s&&34!=s;)s=o.charCodeAt(++L);t+=o.slice(e,L)}if(34==o.charCodeAt(L))return L++,t;P();default:if(e=L,45==s&&(n=!0,s=o.charCodeAt(++L)),s>=48&&57>=s){for(48==s&&(s=o.charCodeAt(L+1),s>=48&&57>=s)&&P(),n=!1;r>L&&(s=o.charCodeAt(L),s>=48&&57>=s);L++);if(46==o.charCodeAt(L)){for(i=++L;r>i&&(s=o.charCodeAt(i),s>=48&&57>=s);i++);i==L&&P(),L=i}if(s=o.charCodeAt(L),101==s||69==s){for(s=o.charCodeAt(++L),(43==s||45==s)&&L++,i=L;r>i&&(s=o.charCodeAt(i),s>=48&&57>=s);i++);i==L&&P(),L=i}return+o.slice(e,L)}if(n&&P(),"true"==o.slice(L,L+4))return L+=4,!0;if("false"==o.slice(L,L+5))return L+=5,!1;if("null"==o.slice(L,L+4))return L+=4,null;P()}return"$"},R=function(t){var e,i;if("$"==t&&P(),"string"==typeof t){if("@"==(v?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=O(),"]"!=t;i||(i=!0))i&&(","==t?(t=O(),"]"==t&&P()):P()),","==t&&P(),e.push(R(t));return e}if("{"==t){for(e={};t=O(),"}"!=t;i||(i=!0))i&&(","==t?(t=O(),"}"==t&&P()):P()),(","==t||"string"!=typeof t||"@"!=(v?t.charAt(0):t[0])||":"!=O())&&P(),e[t.slice(1)]=R(O());return e}P()}return t},I=function(t,e,i){var n=B(t,e,i);n===o?delete t[e]:t[e]=n},B=function(t,e,i){var n,o=t[e];if("object"==typeof o&&o)if(r.call(o)==m)for(n=o.length;n--;)I(o,n,i);else s(o,function(t){I(o,t,i)});return i.call(t,e,o)};l.parse=function(t,e){var i,n;return L=0,M=""+t,i=R(O()),"$"!=O()&&P(),L=M=null,e&&r.call(e)==u?B((n={},n[""]=i,n),"",e):i}}}a&&define(function(){return l})}(this)},{}]},{},[1]),function(){window.account_completeedit_bless=function(){var t,e,i,n;return $("#account_completeedit_skype").clickover({trigger:"hover",html:!0}),$(".chzn-select").chosen(),t=$("#account_completeedit_lat").val(),e=$("#account_completeedit_lng").val(),window.map=L.mapbox.map("account_completeedit_map","christianclough.map-pzcx86x2"),$.getJSON("/members",null,function(t){var e;return e=L.mapbox.markerLayer(),e.on("layeradd",function(t){var e;return e=t.layer,e.setIcon(L.icon(e.feature.properties.icon))}),e.addTo(map),e.setGeoJSON(t)}),n=L.icon({iconUrl:"/assets/markers/marker_"+account_completeedit_currentuser_university_image,iconSize:[35,51],iconAnchor:[17,51],popupAnchor:[17,51]}),i=L.marker(new L.LatLng(parseFloat(t),parseFloat(e)),{icon:n,draggable:!0}),i.addTo(map),i.on("dragend",function(t){var e;return e=t.target.getLatLng(),$("#account_completeedit_lat").val(e.lat),$("#account_completeedit_lng").val(e.lng)}),window.map.setView([parseFloat(t),parseFloat(e)],15),window.application_spinner_prime(".modal.in")},$(document).ready(function(){return window.application_disablesubmit_prime("#account_complete_panel"),$("#account_complete_panel").length>0?window.account_completeedit_bless():void 0})}.call(this),function(){window.books_index_books_updatelist=function(){return $.get("/books",$("#books_index_form").serialize(),null,"script"),!1},window.books_index_books_item_prime=function(){return $(".books_index_books_item_event_button").click(function(){var t;return t=$(this).data("book_id"),window.modal_event_new_show(null,t)}),$("#books_index_books .pagination a").click(function(){return $.getScript(this.href),!1}),$(".books_rating_set").raty({targetType:"number",targetKeep:!0,target:"#books_rating_set_field"}),window.application_raty_prime()},$(document).ready(function(){return $("#books_show_comments_form_container").size()>0&&window.books_index_books_item_prime(),$("#books_index_form").size()>0&&window.books_index_books_updatelist(),$("#books_index_form_filters_sort_direction_button").click(function(){return $("#books_filter_sort_direction").val("asc")&&($("#books_filter_sort_direction").val("desc"),$(this).html("Descending <i class=icon-arrow-down></i>"),window.books_index_books_updatelist()),$("#books_filter_sort_direction").val("desc")?($("#books_filter_sort_direction").val("asc"),$(this).html("Ascending <i class=icon-arrow-up></i>"),window.books_index_books_updatelist()):void 0}),$(".books_index_form_fitlers_tag_selector_item").click(function(){var t;return t=$(this).data("tag_id"),$("#books_filter_tag").val(t),$(".books_index_form_fitlers_tag_selector_item").removeClass("books_index_form_fitlers_tag_selector_item_active"),$(this).addClass("books_index_form_fitlers_tag_selector_item_active"),window.books_index_books_updatelist()})})}.call(this),function(){window.cases_new_prime=function(){return $("#application_error_explanation").click(function(){return $(this).fadeOut("fast")}),$("#cases_new_datepicker").datetimepicker({format:"dd MM yyyy - hh:ii",showMeridian:!0,pickerPosition:"bottom-left",minuteStep:15}),$('[name="case[main_comment]"]').wysihtml5({emphasis:!1,"font-styles":!1,link:!1,image:!1,autoLink:!1,composerClassName:"cases_new_maincomment_content"}),$(".cases_new_scoreselector_button").click(function(){var t,e;return e=$(this).data("score"),t=$(this).data("criteria"),$("#cases_new_score_input_"+t).val(e),$("#cases_new_scoreselector_"+t+" .cases_new_scoreselector_button").removeClass("active"),$(this).addClass("active")}),window.application_spinner_prime("#console_index_feedback_frame")},window.cases_analysis_chart_progress_init=function(t){var e,i,n,s;return n=function(i){var n,s,o,r,a,l,h,c;return a=void 0,a=new AmCharts.AmSerialChart,a.pathToImages="/assets/amcharts/",a.panEventsEnabled=!0,a.color="#697076",a.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:.15},a.colors=t>1?["#72aac9","#73bf72","#f1d765"]:["#dee1e3","#dee1e3","#dee1e3"],a.dataProvider=i,a.categoryField="date",a.autoMargins=!1,a.marginRight=0,a.marginLeft=0,a.marginBottom=30,a.marginTop=0,a.startDuration=.3,a.startEffect=">",a.sequencedAnimation=!0,s=a.categoryAxis,s.gridAlpha=.07,s.axisColor="#DADADA",s.startOnAxis=!0,s.equalSpacing=!0,s.parseDates=!0,s.minPeriod="DD",c=new AmCharts.ValueAxis,c.stackType="regular",c.gridAlpha=.07,c.axisAlpha=0,c.maximum=15,c.labelsEnabled=!1,a.addValueAxis(c),l=new AmCharts.AmGraph,l.type="line",l.title="Business Analytics",l.valueField="businessanalytics",l.lineAlpha=1,l.fillAlphas=.5,l.bullet="round",l.bulletSize=5,3>t?l.showBalloon=!1:(l.bulletBorderColor="#72aac9",l.bulletColor="#ffffff",l.bulletBorderThickness=1),e(l),a.addGraph(l),l=new AmCharts.AmGraph,l.type="line",l.title="Structure",l.valueField="structure",l.lineAlpha=1,l.fillAlphas=.5,l.bullet="round",l.bulletSize=5,3>t?l.showBalloon=!1:(l.bulletBorderColor="#73bf72",l.bulletColor="#ffffff",l.bulletBorderThickness=1),e(l),a.addGraph(l),l=new AmCharts.AmGraph,l.type="line",l.title="Interpersonal",l.valueField="interpersonal",l.lineAlpha=1,l.fillAlphas=.5,l.bullet="round",l.bulletSize=5,3>t?l.showBalloon=!1:(l.bulletBorderColor="#f1d765",l.bulletColor="#ffffff",l.bulletBorderThickness=1),e(l),a.addGraph(l),l=new AmCharts.AmGraph,l.type="line",l.title="Total Score",l.valueField="totalscore",l.lineAlpha=1,l.fillAlphas=.6,l.bullet="none",l.showBalloon=!1,l.visibleInLegend=!1,l.fillAlphas=[0],l.lineAlpha=0,l.includeInMinMax=!1,a.addGraph(l),h=new AmCharts.AmLegend,h.align="center",h.rollOverGraphAlpha="0.15",h.fontSize=8,h.horizontalGap=0,h.switchable=!0,h.valueWidth=20,a.addLegend(h,"profile_index_feedback_chart_legend"),o=new AmCharts.ChartCursor,o.cursorPosition="mouse",o.pan=!1,o.cursorColor="#c18176",o.categoryBalloonDateFormat="DD MMM, YYYY",o.zoomable=!1,a.addChartCursor(o),n=a.balloon,n.adjustBorderColor=!0,n.cornerRadius=5,n.showBullet=!1,n.fillColor="#000000",n.fillAlpha=.7,n.color="#FFFFFF",r=new AmCharts.ChartScrollbar,r.graph=l,r.autoGridCount=!0,r.scrollbarHeight=25,r.color="#697076",r.backgroundColor="#f0f1f2",r.selectedBackgroundColor="#dee1e3",a.addChartScrollbar(r),a.write("profile_index_feedback_chart")},s=function(t){var e,i;return i=t.split("-"),e=new Date(Number(i[0]),Number(i[1])-1,Number(i[2]))},e=function(t){return t.addListener("clickGraphItem",function(t){return window.modal_cases_show_show(t.item.dataContext.id)})},$("#cases_analysis_chart_progress").fadeIn("fast"),i=[],$.getJSON("/cases/results",function(t){return $.each(t,function(e){var n;return n={id:t[e].id,date:s(t[e].date),interpersonal:t[e].interpersonal,businessanalytics:t[e].businessanalytics,structure:t[e].structure,totalscore:t[e].totalscore},i.push(n)})}).complete(function(){return n(i)})},window.cases_resultstable_prime=function(t){var e,i,n,s,o,r,a,l,h;for($("#cases_"+t+"_results .btn").off("click"),$("#cases_"+t+"_results .btn").click(function(){var e,i;return e=$(this).data("radio"),i=$(this).data("type"),$("#cases_"+t+"_results input[name=resultstable_"+i+"]:eq("+e+")").prop("checked",!0),$("#cases_"+t+"_results .cases_resultstable_"+i+"_container .btn").removeClass("active"),$(this).addClass("active"),$.get("/cases/results?view="+t,$("#cases_"+t+"_results .cases_resultstable_form").serialize(),null,"script"),!1}),$("#cases_"+t+"_results .application_filtergroup_choicenav li").off("click"),$("#cases_"+t+"_results .application_filtergroup_choicenav li").click(function(){return $.get("/cases/results?view="+t,$("#cases_"+t+"_results .cases_resultstable_form").serialize(),null,"script"),!1}),window.application_choiceNav(),r=0,h=[];12>r;)a=$("#cases_"+t+"_resultstable_chart_bar_"+r).attr("data-score"),i=$("#cases_"+t+"_resultstable_chart_bar_"+r).attr("data-category"),e=[{name:r,score:parseFloat(a),category:i}],s=new AmCharts.AmSerialChart,s.autoMarginOffset=0,s.autoMargins=!1,s.marginRight=0,s.marginTop=0,s.marginBottom=0,s.marginLeft=0,s.width=300,s.dataProvider=e,s.categoryField="name",s.rotate=!0,s.startDuration=1,n=s.categoryAxis,n.gridPosition="start",n.axisColor="#DADADA",n.fillAlpha=0,n.gridAlpha=0,n.labelsEnabled=!1,l=new AmCharts.ValueAxis,l.gridAlpha=0,l.axisAlpha=0,l.minimum=0,l.maximum=5,l.precsion=3,l.labelsEnabled=!1,s.addValueAxis(l),o=new AmCharts.AmGraph,o.valueField="score",o.type="column",o.lineAlpha=0,o.showBalloon=!1,"businessanalytics"===i?o.fillColors="#72aac9":"structure"===i?o.fillColors="#73bf72":"interpersonal"===i&&(o.fillColors="#f1d765"),o.fillAlphas=1,s.addGraph(o),s.write("cases_"+t+"_resultstable_chart_bar_"+r),h.push(r++);return h},$(document).ready(function(){return $("#cases_new_subnav").size()>0?window.cases_new_prime():void 0})}.call(this),function(){var t;t=function(t,e,i){var n;return n=60*e+i,window.interval=setInterval(function(){var s,o;return s=document.getElementById(t),0===n?(clearInterval(window.interval),alert("Case Closed!"),void 0):(e=Math.floor(n/60),10>e&&(e="0"+e),i=n%60,10>i&&(i="0"+i),o=e+":"+i,s.innerHTML=o,n--)},1e3)},window.console_index_subnav_sendpdf_check=function(){var t,e;return t=$("#console_index_subnav_select_books").val(),e=$("#console_index_subnav_select_friends").val(),""!==t&&""!==e?$.get("/console/sendpdfbutton?friend_id="+e+"&book_id="+t,function(t){return $("#console_index_subnav_button_sendpdf_container").html(t),$("#console_index_subnav_button_sendpdf").click(function(){return $(this).html("Sending..."),$(this).addClass("active disabled"),$.get("/console/sendpdf",$("#console_index_subnav_form").serialize(),null,"script"),!1})}):void 0},window.console_index_subnav_timer_prime=function(){var e;return $(".console_index_subnav_button_timer_set").click(function(){var i;return i=$(this).data("set"),window.console_timer_set=i,$("#console_index_subnav_timer").html(i+":00"),t("console_index_subnav_timer",window.console_timer_set,0),e("pause")}),$("#console_index_subnav_button_timer_pause").click(function(){return clearInterval(window.interval),e("restartreset")}),$("#console_index_subnav_button_timer_reset").click(function(){return clearInterval(window.interval),$("#console_index_subnav_timer").html("00:00"),e("timeset")}),$("#console_index_subnav_button_timer_restart").click(function(){var i,n,s;return s=$("#console_index_subnav_timer").html(),i=s.split(":").shift(),n=parseInt(s.substr(-2)),t("console_index_subnav_timer",i,n),e("pause")}),e=function(t){return $(".console_index_timer_panel_container").css("display","none"),$("#console_index_timer_"+t+"_container").css("display","inline")}},$(document).ready(function(){return $("#console_index_subnav_select_books").change(function(){var t,e;return t=$(this).val(),t>0?(e="/console/pdfjs?id="+t,$("#console_index_pdfjs_iframe").attr("src",e),$("#console_index_pdfjs_blank").hide(),console_index_subnav_sendpdf_check(),$("#cases_new_nobook").css("display","none"),$.get("/books/"+t+"/show_small",function(t){return $("#cases_new_book").html(t)})):($("#cases_new_book").html(""),$("#console_index_pdfjs_blank").show(),$("#console_index_pdfjs_iframe").attr("src",""),$("#cases_new_nobook").fadeIn("fast"))}),$("#console_index_subnav_select_friends").change(function(){var t;return t=$(this).val(),t>0?($.get("/cases/new?user_id="+t,function(t){var e;
return $("#console_index_feedback_frame").html(t),window.cases_new_prime(),e=$("#console_index_subnav_select_books").val(),e?($("#cases_new_nobook").css("display","none"),$.get("/books/"+e+"/show_small",function(t){return $("#cases_new_book").html(t)})):void 0}),$.get("/console/skypebutton?friend_id="+t,function(t){return $("#console_index_subnav_button_skype_container").html(t)}),$("#console_index_subnav_button_skype").tooltip(),console_index_subnav_sendpdf_check()):$("#console_index_feedback_frame").html("")}),$(".console_index_timer_panel_container").size()>0?window.console_index_subnav_timer_prime():void 0})}.call(this),function(){var t,e;t=function(t){if(t>20||10>t)switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},e=function(){var e,i,n,s,o,r,a,l;return e=$(".calendar").find(".events_calendar_week:nth-child("+window.events_current_week_number+")"),$(".calendar").find(".events_calendar_week").addClass("out_of_focus"),e.removeClass("out_of_focus"),i=e.find(".events_calendar_day:nth-child(1)").data("day_num"),s=e.find(".events_calendar_day:nth-child(7)").data("day_num"),r=e.find(".events_calendar_day:nth-child(1)").data("month"),n=i+t(i),o=s+t(s),l=r+", week "+n+" - "+o,$("#events_calendar_month_date").html(l),a=e.data("events_this_week"),$("#events_calendar_month_text_count").html(a+" appointments")},window.events_calendar_rebless=function(){var t,i,n;return setTimeout(function(){var t;return t=$("#profile_index_panel_calendar_container").find(".today").position().top-47-47+"px",$("#profile_index_panel_calendar_container").animate({scrollTop:t},500)},500),n=$("#profile_index_panel_calendar_container .today"),t=n.parent(),i=t.data("week_number"),window.events_current_week_number=i+1,e(),$(".events_calendar_day_event").click(function(){var t;return t=$(this).data("id"),window.events_calendar_edit_modal_show(t)}),$(".application_tooltip").tooltip(),$("#profile_index_calendar_actions_new").click(function(){return window.modal_event_new_show(null,null)}),$(".more_than_two_events").slimscroll({height:"55px",width:"auto"}),$(".profile_index_panel_calendar_shift_button").click(function(){var t,i;return t=$(this).data("direction"),"up"===t?1!==window.events_current_week_number&&(i="+=-96px",window.events_current_week_number-=1,$("#profile_index_panel_calendar_container").animate({scrollTop:i},150)):window.events_current_week_number!==$("#profile_index_panel_calendar_container .events_calendar_week").length&&(i="+=96px",window.events_current_week_number+=1,$("#profile_index_panel_calendar_container").animate({scrollTop:i},150)),e()})},window.modal_event_new_show=function(t,e){var i;return $("#modal_event").hasClass("in")?void 0:($(".modal").modal("hide"),i=t&&!e?"/events/new?friend_id="+t:e&&!t?"/events/new?book_id_usertoprepare="+e:t&&e?"/events/new?friend_id="+t+"&book_id_usertoprepare="+e:"/events/new",$.get(i,function(e){return $("#modal_event").html(e),t&&$.get("/events/user_timezone?display_which=timezone&user_id="+t,function(t){return $("#events_modal_friend_timezone").html(t)}),$("#modal_event").removeClass("event_edit"),$("#modal_event").on("shown",function(){return window.modal_events_rebless()}),$("#modal_event").modal("show")}))},window.modal_events_modal_timezone_calcs=function(){var t,e;return e=$("#events_modal_friend_select").val(),t=$("#events_modal_datetime_input").val(),e>0?$.get("/events/user_timezone?display_which=timezone&user_id="+e,function(t){return $("#events_modal_friend_timezone").html(t)}):$("#events_modal_friend_timezone").html(""),e>0&&""!==t?$.get("/events/user_timezone?display_which=timeforfriend&user_id="+e+"&datetime="+t,function(t){return $("#events_modal_datetime_friend").html(t)}):$("#events_modal_datetime_friend").html("")},window.modal_events_rebless=function(){return $("#events_modal_datetime_picker").datetimepicker({format:"dd M yyyy @ hh:ii",minuteStep:15,pickerPosition:"bottom-left",autoclose:!0,showMeridian:!0,startDate:$("#events_modal_datetime_input").data("start_date")}),$("#events_modal_friend_select").change(function(){return window.modal_events_modal_timezone_calcs()}),$("#events_modal_datetime_input").change(function(){return window.modal_events_modal_timezone_calcs()}),$("#events_modal_book_select").change(function(){var t;return t=$(this).val(),t>0?$.get("/books/"+t+"/show_small",function(t){return $("#events_modal_book_viewer_partnertoprepare").html(t)}):$("#events_modal_book_viewertoprepare").html("<div id=events_modal_book_viewer_empty>No book selected</div>")}),window.application_spinner_prime(".modal.in")},window.events_calendar_edit_modal_show=function(t){return $("#modal_event").hasClass("in")?void 0:($(".modal").modal("hide"),$.get("/events/"+t+"/edit",function(t){return $("#modal_event").html(t),window.modal_events_rebless()}),$("#modal_event").addClass("event_edit"),$("#modal_event").modal("show"))},$(document).ready(function(){return $("#profile_index_panel_calendar_container").length>0?window.events_calendar_rebless():void 0})}.call(this),function(){window.modal_help_show=function(){return $("#modal_help").hasClass("in")?void 0:($(".arrownav_page").hide(),$(".modal").modal("hide"),$("#modal_help").modal("show"),$("#modal_help").on("shown",function(){return window.ArrowNav.goTo("1")}))},$(document).ready(function(){return $("#modal_help").size()>0?window.ArrowNav={init:function(){return $("a[href*=#]").click(function(t){return t.preventDefault(),$(this).attr("href").split("#")[1]?window.ArrowNav.goTo($(this).attr("href").split("#")[1]):void 0}),this.goTo("1")},goTo:function(t){var e,i;return i=$("#application_arrownav_page_"+t),e=$("nav ul li a[href=#"+t+"]"),$("nav ul li").removeClass("current"),e.parent().addClass("current"),$(".arrownav_page").hide(),$(".arrownav_page").removeClass("current"),i.addClass("current"),$("#modal_help").size()>0?(i.fadeIn(100),$("#modal_help_button_next").off("click"),"5"===t?($("#modal_help_button_next").html("Finish"),$("#modal_help_button_skip").hide(),$("#modal_help_button_next").click(function(){return $("#modal_help").modal("hide")})):($("#modal_help_button_next").html("Next"),"1"===t?$("#modal_help_button_prev").hide():$("#modal_help_button_prev").show(),$("#modal_help_button_skip").show(),$("#modal_help_button_next").click(function(){return window.ArrowNav.goTo(String(parseInt(t)+1))})),$("#modal_help_button_prev").off("click"),$("#modal_help_button_prev").click(function(){return window.ArrowNav.goTo(String(parseInt(t)-1))}),$("#modal_help_page_num").html("Part "+t+" of 5")):i.show("slide",{direction:"right"},100)}}:void 0})}.call(this),function(){var t;t=function(){return $("#map_index_users_form_button_posts_new").click(function(){return window.modal_post_show()})},window.map_index_users_item_bless=function(){return $(".map_index_users_item_button_message").click(function(){var t;return t=$(this).data("friend_id"),window.modal_message_show(t)}),$(".map_index_users_item_button_event").click(function(){var t;return t=$(this).data("friend_id"),window.modal_event_new_show(t,null)}),$(".map_index_users_item_button_add").click(function(){var t;return t=$(this).data("friend_id"),window.modal_friendship_req_show(t)}),window.application_truncatables()},window.map_index_users_updatelist=function(){return $("#map_index_guide_text").fadeOut("fast"),$("#map_index_users_empty").fadeOut(100),$("#map_index_users_spinner_container").fadeIn("fast"),$.get("/members",$("#map_index_users_form").serialize(),null,"script"),$("#map_index_map_guide").fadeOut("fast")},window.map_index_users_search=function(){return $("#map_index_users_form_search_field").val($("#header_nav_search_field").val()),map_index_users_updatelist()},window.map_index_marker_and_popup_actions_for=function(t,e){var i;if("temp"===e){if(!window.current_active_marker)return i=map_index_generate_popup_for(t),i.openOn(map);if(window.current_active_marker!==t)return i=map_index_generate_popup_for(t),i.openOn(map)}else if("perm"===e)return window.current_active_marker?window.current_active_marker===t?(map.removeLayer(window.current_active_popup),t.setIcon(L.icon(t.feature.properties.icon)),window.current_active_marker=null,window.current_active_popup=null):(window.current_active_marker.setIcon(L.icon(current_active_marker.feature.properties.icon)),map.removeLayer(window.current_active_popup),map_index_activate_perm_popup_and_icon_for(t)):map_index_activate_perm_popup_and_icon_for(t)},window.map_index_activate_perm_popup_and_icon_for=function(t){var e,i;return i=map_index_generate_popup_for(t),map.addLayer(i),e=L.icon({iconUrl:"/assets/markers/marker_active_"+t.feature.properties.university_image,iconSize:[35,51],iconAnchor:[17,51]}),t.setIcon(e),window.current_active_marker=t,window.current_active_popup=i},window.map_index_generate_popup_for=function(t){var e,i,n;return e=t.feature,n='<div class="map_index_map_popup">   <div class="map_index_map_popup_avatar">     <img src="/assets/universities/'+e.properties.university_image+'" class="application_userimage_medium">'+"   </div>"+'   <div class="map_index_map_popup_info">'+'     <div class="map_index_map_popup_username">'+e.properties.username+"</div>"+'     <div class="map_index_map_popup_university">'+e.properties.university_name+"</div>"+"   </div>"+'   <div class="map_index_map_popup_cases">'+'     <div class="map_index_users_item_cases_recd">'+'         <div class="map_index_users_item_cases_text">taken</div>'+e.properties.cases_recd+"     </div>"+'     <div class="map_index_users_item_cases_givn">'+'         <div class="map_index_users_item_cases_text">given</div>'+e.properties.cases_givn+"     </div>"+'     <div class="map_index_users_item_cases_external">'+'         <div class="map_index_users_item_cases_text">ext</div>'+e.properties.cases_ext+"     </div>"+"   </div>"+"</div>",i=L.popup({closeButton:!1,minWidth:130,offset:new L.Point(0,-49),autoPan:!1,zoomAnimation:!0}).setLatLng(t.getLatLng()).setContent(n)},$(document).ready(function(){var t,e,i,n;return $("#map_index_users_form input").keypress(function(t){return 13===t.which?map_index_users_updatelist():void 0}),$("#map_index_users_form_button_posts_new").click(function(){return $("#modal_post").hasClass("in")?void 0:($(".modal").modal("hide"),$("#modal_post").on("shown",function(){return window.application_spinner_prime(".modal.in")}),$("#modal_post").modal("show"))}),$(".map_index_users_form_button").click(function(){var t;return $(".map_index_users_form_pulldown_button, .map_index_users_form_button").removeClass("active"),$(this).addClass("active"),t=$(this).data("radio"),$("input[name=users_listtype]:eq("+t+")").prop("checked",!0),map_index_users_updatelist()}),$(".map_index_users_form_button_switch").click(function(){var t,e;return $(this).parent().find(".map_index_users_form_button_switch").removeClass("active"),e=$(this).data("switch_name"),$(".map_index_users_form_button_"+e).removeClass("active"),$(this).addClass("active"),t=$(this).data("choice_id"),$("#users_filter_"+e).val(t),map_index_users_updatelist()}),$("#map_index_users_container .pagination a").click(function(){return $.getScript(this.href),!1}),"string"==typeof map_index_map_lat_start?(map_index_users_updatelist(),window.map=L.mapbox.map("map_index_map","christianclough.map-pzcx86x2"),e=parseFloat(map_index_map_lat_start),i=parseFloat(map_index_map_lng_start),window.map.setView([e-.005,i+.03],15),$("#map_index_map_zoomout").click(function(){return window.map.setZoom(2),$(this).fadeOut("fast")}),n=L.mapbox.markerLayer(),t=[{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(map_index_map_lng_start),parseFloat(map_index_map_lat_start)]},properties:{title:"self user",icon:{iconUrl:"/assets/markers/user_location.png",iconSize:[78,78],iconAnchor:[39,39],popupAnchor:[0,-25]}}}],n.on("layeradd",function(t){var e,i;return i=t.layer,e=i.feature,i.setIcon(L.icon(e.properties.icon))}),n.addTo(map),n.setGeoJSON(t)):void 0})}.call(this),function(){window.modal_contact_show=function(){return $("#modal_contact").hasClass("in")?void 0:($("#modal_contact input, #modal_contact textarea").val(""),$(".modal").modal("hide"),$("#modal_contact").on("shown",function(){return window.application_spinner_prime(".modal.in")}),$("#modal_contact").modal("show"))},window.modal_message_prime=function(){return $(".modal.in #modal_message_conversation").scrollTop($(".modal.in #modal_message_conversation").prop("scrollHeight")),window.application_spinner_prime(".modal.in"),$(".modal.in #modal_message_textarea").keydown(function(t){return 13===t.keyCode?($(this.form).submit(),$(".modal.in .application_spinner_container").show(),!1):void 0})},window.modal_message_show=function(t){return $("#modal_message").hasClass("in")?void 0:($(".modal").modal("hide"),$.get("/notifications/modal_message_form?id="+t,function(t){return $("#modal_message").html(t),$("#modal_message").on("shown",function(){return window.modal_message_prime()}),$("#modal_message").modal("show")}))},window.modal_friendship_req_show=function(t){return $("#modal_friendship_req").hasClass("in")?void 0:($(".modal").modal("hide"),$.get("/contacts/modal_friendship_req_form?id="+t,function(t){return $("#modal_friendship_req").html(t),$("#modal_friendship_req").on("shown",function(){return window.application_spinner_prime(".modal.in")}),$("#modal_friendship_req").modal("show"),window.application_spinner_prime(".modal.in")}))},window.notifications_index_show_prime=function(t){return $.get("/notifications/"+t,function(e){return $("#notifications_index_conversation").html(e),$("#notifications_show_body_subcontainer").scrollTop(document.getElementById("notifications_show_body_subcontainer").scrollHeight),window.notifications_index_notifications_currently_selected=t,window.application_spinner_prime("#notifications_show_form"),$("#notifications_show_newmessage_textarea").keydown(function(t){return 13===t.keyCode?($(this.form).submit(),$("#notifications_show_form .application_spinner_container").show(),!1):void 0}),$("#notifications_index_notifications_item_"+t+" .notifications_index_notifications_item_read_highlight").fadeOut("fast"),$.get("/notifications/menu",function(t){return $("#header_notifications_menu_container").html(t)})})},window.notifications_index_notifications_prime=function(){var t;return window.notifications_index_notifications_currently_selected&&(t=window.notifications_index_notifications_currently_selected,$("#notifications_index_notifications_item_"+t).addClass("notifications_index_notifications_item_select")),$(".notifications_index_notifications_item").click(function(){var t;return t=$(this).data("user_id"),window.notifications_index_show_prime(t),$(".notifications_index_notifications_item").removeClass("notifications_index_notifications_item_select"),$(this).addClass("notifications_index_notifications_item_select")})},$(document).ready(function(){return $("#notifications_index_notifications_container").size()>0?window.notifications_index_notifications_prime():void 0})}.call(this),function(){var t;t=function(){return window.cases_resultstable_prime("show"),$(".cases_show_subnav_browse_button").click(function(){var e;return e=$(this).attr("data-case_id"),$("#modal_cases").html(""),$.get("/cases/"+e,function(e){return $("#modal_cases").html(e),t()})}),$("#cases_show_subnav_select").change(function(){var e;return e=$(this).val(),$("#modal_cases").html(""),$.get("/cases/"+e,function(e){return $("#modal_cases").html(e),t()})}),$(".cases_show_recommendation_content").slimscroll({width:"170px",height:"138px"})},window.modal_cases_show_show=function(e){return $("#modal_cases").hasClass("in")?void 0:($("#modal_cases").empty(),$("#modal_cases").removeClass("analysis"),$("#modal_cases").addClass("show"),$(".modal").modal("hide"),$("#modal_cases").modal("show"),$.get("/cases/"+e,function(e){return $("#modal_cases").html(e),t()}))},$(document).ready(function(){var t,e;return $("#profile_index_friends_friends").slimscroll({height:"auto",width:"auto"}),$("#profile_index_feedback_cases").slimscroll({height:"auto",width:"260px"}),e=function(){return $(this).find(".profile_index_friends_friends_item_actions").show("slide",{direction:"right"},100)},t=function(){return $(this).find(".profile_index_friends_friends_item_actions").hide("slide",{direction:"right"},100)},$(".profile_index_friends_friends_item").hoverIntent({over:e,out:t,interval:250}),$("#profile_index_panel_user").size()>0&&setTimeout(function(){return $(".profile_index_info_cases_counts_container").fadeIn("500"),$(".profile_index_friends_friends_item").each(function(t){return $(this).delay(50*(t+1)).fadeIn()}),$(".profile_index_feedback_cases_item").each(function(t){return $(this).delay(50*(t+1)).fadeIn()})},500),$("#profile_index_feedback_chart").fadeIn("500"),$("#profile_index_info_actions_settings").click(function(){return $("#modal_profile").off("shown"),$("#modal_profile").hasClass("in")?void 0:($(".modal").modal("hide"),$("#modal_profile").html(""),$("#modal_profile").modal("show"),$("#modal_profile").on("shown",function(){return $.get("/account/edit",function(t){return $("#modal_profile").html(t),window.account_completeedit_bless()})}))}),$("#profile_index_info_actions_invite").click(function(){return $("#modal_profile").off("shown"),$("#modal_profile").hasClass("in")?void 0:($(".modal").modal("hide"),$("#modal_profile").html(""),$("#modal_profile").modal("show"),$.get("/invitations",function(t){return $("#modal_profile").html(t)}))}),$("#profile_index_friends_actions_message").click(function(){var t;return t=$("#profile_index_friends_action_input").val(),t?window.modal_message_show(t):alert("Please select a friend from the list...")}),$("#profile_index_friends_actions_event").click(function(){var t;return t=$("#profile_index_friends_action_input").val(),t?window.modal_event_new_show(t,null):alert("Please select a friend from the list...")}),$(".profile_index_feedback_cases_item").click(function(){var t,e,i;return i=$(this).find(".profile_index_feedback_cases_item_read_highlight"),i.hasClass("unread")&&(i.fadeOut("fast"),e=$("#profile_index_feedback").find(".iconbar-unread").html(),$("#profile_index_feedback").find(".iconbar-unread").html(Number(e)-1)),t=$(this).attr("data-case_id"),window.modal_cases_show_show(t)})})}.call(this),function(){window.static_switch_view=function(t){var e,i;return e=$(t).data("switch_from"),i=$(t).data("switch_to"),$("#static_home_"+e).fadeOut(300,function(){return $("#static_home_"+i).fadeIn(300)})},window.modal_headsup_show=function(){return $("#modal_headsup").hasClass("in")?void 0:($("#modal_headsup input, #modal_headsup textarea").val(""),$(".modal").modal("hide"),$("#modal_headsup").on("shown",function(){return window.application_spinner_prime(".modal.in")}),$("#modal_headsup").modal("show"))},$(document).ready(function(){return $("#static_home_panel_left").size()>0&&setTimeout(function(){return window.modal_headsup_show()},2e3),$(".static_home_switch_link").click(function(){return window.static_switch_view(this,"normal")}),window.application_disablesubmit_prime("#static_home_signin"),window.application_disablesubmit_prime("#static_home_signup"),$("#static_home_signup_notlisted_button").click(function(){return window.modal_contact_show()}),window.application_disablesubmit_prime("#devise_confirmations_new_panel"),window.application_disablesubmit_prime("#devise_passwords_new_panel")})}.call(this),function(){window.application_form_errors_close=function(){return $("#application_error_explanation").click(function(){return $(this).fadeOut("fast")})},window.application_notification_trigger=function(t){var e;return $.get("/notifications/"+t.notification_id+"/notify",function(t){return $("#application_notify").html(t),$("#application_notify").fadeIn(),setTimeout(function(){return $("#application_notify").fadeOut()},2e4),$("#application_notify_close").click(function(){return $("#application_notify").fadeOut("fast")}),window.application_truncatables()}),e="You have a new notification from "+t.from,$.titleAlert(e,{stopOnFocus:!0,stopOnMouseMove:!0}),$.get("/notifications/menu",function(t){return $("#header_notifications_menu_container").html(t)})},window.application_truncatables=function(){return $(".application_truncatable").truncate({width:"auto",token:"&hellip;",side:"right",multiline:!1})},window.application_spinner_prime=function(t){return $(t+" .application_submit_button_with_spinner").off("click"),$(t+" .application_spinner_container").hide(),$(t+" .application_submit_button_with_spinner").click(function(){return $(this).closest("form").submit(),$(t+" .application_spinner_container").show()})},window.application_disablesubmit_prime=function(t){return $(t+" .application_submit_button_with_disable").off("click"),$(t+" .application_submit_button_with_disable").removeClass("disabled"),$(t+" .application_submit_button_with_disable").click(function(){return $(t+" .application_submit_button_with_disable").addClass("disabled"),$(t+" .application_submit_button_with_disable").off("click"),$(this).closest("form").submit()}),$(t+" input").keydown(function(e){return 13===e.keyCode?($(t+" .application_submit_button_with_disable").addClass("disabled"),$(t+" .application_submit_button_with_disable").off("click"),$(this).closest("form").submit()):void 0})},window.application_raty_prime=function(){return $(".books_rating_read").raty({readOnly:!0,score:function(){return parseFloat($(this).data("rating"))}})},window.application_choiceNav=function(){return window.ChoiceNav={init:function(){return $("li[href*=#]").click(function(t){var e;return t.preventDefault(),e=$(this).closest(".application_filtergroup_choicenav").attr("data-filter_name"),$(this).attr("href").split("#")[1]?window.ChoiceNav.goTo($(this).attr("href").split("#")[1],e):void 0})},goTo:function(t,e){var i,n,s,o,r;return n="#application_filtergroup_choicenav_"+e,s=$(n+" nav ul li[href=#"+t+"]"),"btype"===e?(i=$(s).data("btype"),$("#books_filter_"+e).val(i),window.books_index_books_updatelist()):"sort"===e?(r=$(s).data("sort"),$("#books_filter_"+e).val(r),window.books_index_books_updatelist()):"period"===e&&(o=$(s).data("period"),$("#cases_resultstable_"+e).val(o)),window.ChoiceNav.centerArrow(s,n),window.ChoiceNav.growLine(s,n)},centerArrow:function(t,e){var i,n;return i="#application_filtergroup_choicenav_period"===e?5:22,n=t.position().left+t.width()/2+i-t.width()/2,$(e+" nav .arrow").animate({left:n},100,function(){return $(this).show()})},growLine:function(t,e){var i;return i=t.position().left+t.width()/2-t.width()/2,$(e+" nav .application_filtergroup_choicenav_follower_line").animate({width:i},100,function(){return $(this).show()})}},window.ChoiceNav.init()},$(document).ready(function(){return window.application_truncatables(),$(".chzn-select").chosen(),$(".chzn-select-nosearch").chosen({disable_search_threshold:10}),$(".chzn-select-tags").chosen({max_selected_options:5}),$(".chzn-search").hide(),$(".application_tooltip").tooltip(),$("input, textarea").placeholder(),$("#modal_help, #modal_headsup, #modal_contact, #modal_post, #modal_cases, #modal_profile, #modal_message, #modal_friendship_req, #modal_event").modal({backdrop:!0,show:!1}),$("#header_link_contact").click(function(){return window.modal_contact_show()}),$("#header_link_help").click(function(){return window.modal_help_show()}),setTimeout(function(){return $("#application_flash").fadeOut("fast")},4e3),window.application_form_errors_close(),$(".application_filtergroup_choicenav").size()>0?window.application_choiceNav():void 0})}.call(this);